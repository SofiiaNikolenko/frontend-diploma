{"version":3,"file":"static/js/684.b3a4cd02.chunk.js","mappings":"yJACe,SAASA,EAAyBC,EAAQC,GACvD,GAAc,MAAVD,EAAgB,MAAO,CAAC,EAC5B,IACIE,EAAKC,EADLC,ECHS,SAAuCJ,EAAQC,GAC5D,GAAc,MAAVD,EAAgB,MAAO,CAAC,EAC5B,IAAII,EAAS,CAAC,EACd,IAAK,IAAIF,KAAOF,EACd,GAAIK,OAAOC,UAAUC,eAAeC,KAAKR,EAAQE,GAAM,CACrD,GAAID,EAASQ,QAAQP,IAAQ,EAAG,SAChCE,EAAOF,GAAOF,EAAOE,EACvB,CAEF,OAAOE,CACT,CDPe,CAA6BJ,EAAQC,GAElD,GAAII,OAAOK,sBAAuB,CAChC,IAAIC,EAAmBN,OAAOK,sBAAsBV,GACpD,IAAKG,EAAI,EAAGA,EAAIQ,EAAiBC,OAAQT,IACvCD,EAAMS,EAAiBR,GACnBF,EAASQ,QAAQP,IAAQ,GACxBG,OAAOC,UAAUO,qBAAqBL,KAAKR,EAAQE,KACxDE,EAAOF,GAAOF,EAAOE,GAEzB,CACA,OAAOE,CACT,C,oGEdO,SAASU,EAAeC,GAC7B,IAAK,IAAIC,KAAaD,EAAc,CAClC,IAAIE,GAAUC,EAAAA,EAAAA,GAAIF,GAAWG,QAAO,SAACC,EAAMC,GAIzC,OAHIA,EAAKC,gBAAkBD,IACzBA,EAAO,IAAMA,EAAKE,eAEZH,EAAQC,CAClB,GAAG,IACCJ,EAAQO,WAAW,OACrBP,EAAUA,EAAQQ,QAAQ,IAAK,KAE5BR,EAAQO,WAAW,SACtBP,EAAU,MAAQA,GAEhBF,EAAaC,GAAWU,KAC1BX,EAAaC,GAAWU,IAAIT,EAEhC,CACF,C,gkECnBIU,EAAYtB,OAAOuB,eAEnBC,EAAgB,SAACC,EAAK5B,EAAK6B,GAE7B,OAHoB,SAACD,EAAK5B,EAAK6B,GAAU7B,KAAO4B,EAAMH,EAAUG,EAAK5B,EAAK,CAAE8B,YAAY,EAAMC,cAAc,EAAMC,UAAU,EAAMH,MAAAA,IAAWD,EAAI5B,GAAO6B,CAAK,CAE7JI,CAAgBL,EAAoB,kBAAR5B,EAAmBA,EAAM,GAAKA,EAAK6B,GACxDA,CACT,EAeA,IAAIK,EAAI,WACN,SAAAA,EAAYC,IAAQC,EAAAA,EAAAA,GAAA,KAAAF,GACdC,EAAOE,cAAgBlC,OACzBmC,KAAKC,MAdG,SAARC,EAASC,GACX,IAAIC,EACJ,IAAK,IAAIC,KAAQF,GACQ,OAAjBC,EAAKD,EAAEE,SAAiB,EAASD,EAAGL,eAAiBlC,SACzDsC,EAAEE,GAAQH,EAAMC,EAAEE,KAGtB,OAAAC,EAAAA,EAAAA,GAAA,GAAYH,EACd,CACOD,CAKmBL,IAEtBG,KAAKO,eAAgB,EACrBP,KAAKC,MAAQJ,GAEfG,KAAKQ,YAAc3C,OAAO4C,OAAO,KACnC,CA8EC,OA9EAC,EAAAA,EAAAA,GAAAd,EAAA,EAAAlC,IAAA,OAAA6B,MAID,SAAKc,GACH,OAAKL,KAAKO,eAAkBP,KAAKC,MAAMlC,eAAesC,GAI/CL,KAAKC,MAAMI,IAHhBT,EAAKe,KAAK,OAAQN,GACX,KAGX,GAAC,CAAA3C,IAAA,MAAA6B,MACD,SAAIc,GACF,OAAOL,KAAKO,mBAAqC,IAArBP,KAAKC,MAAMI,GAAmBL,KAAKC,MAAMlC,eAAesC,EACtF,GAAC,CAAA3C,IAAA,MAAA6B,MACD,SAAIc,EAAMO,GAAsB,IAAjBC,EAAOC,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,IAAAA,UAAA,IACfD,GAAWhD,OAAOmD,KAAKhB,KAAKC,OAAOgB,SAASZ,KAGjDL,KAAKC,MAAMI,GAAQO,EACnBZ,KAAKkB,OAAOb,GACd,GAAC,CAAA3C,IAAA,MAAA6B,MACD,SAAIc,EAAMO,GACHZ,KAAKO,eAAkBP,KAAKC,MAAMlC,eAAesC,IAItDL,KAAKC,MAAMI,GAAQO,EACnBZ,KAAKkB,OAAOb,IAJVT,EAAKe,KAAK,UAAWN,EAKzB,GAAC,CAAA3C,IAAA,WAAA6B,MACD,SAAS4B,GACP,IAAK,IAAId,KAAQc,EACfnB,KAAKoB,IAAIf,EAAMc,EAAOd,GAE1B,GAAC,CAAA3C,IAAA,SAAA6B,MACD,SAAOc,GAAM,IAAAgB,EAAA,KACPrB,KAAKQ,YAAYH,IACnBL,KAAKQ,YAAYH,GAAMiB,SAAQ,SAACC,GAC9BA,EAASF,EAAKpB,MAAMI,GACtB,GAEJ,GAAC,CAAA3C,IAAA,MAAA6B,MACD,SAAIc,EAAMkB,GAAuB,IAAAC,EAAA,KAAbC,IAAIX,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,KAAAA,UAAA,GACtB,OAAKd,KAAKO,eAAkBP,KAAKC,MAAMlC,eAAesC,IAIjDL,KAAKQ,YAAYH,KACpBL,KAAKQ,YAAYH,GAAwB,IAAIqB,KAE/C1B,KAAKQ,YAAYH,GAAMsB,IAAIJ,GACvBE,GACFF,EAASvB,KAAKC,MAAMI,IAEf,CACLuB,OAAQ,WACNJ,EAAKhB,YAAYH,GAAMwB,OAAON,GACzBC,EAAKhB,YAAYH,GAAMyB,aACnBN,EAAKhB,YAAYH,EAE5B,EACAkB,SAAAA,KAjBA3B,EAAKe,KAAK,YAAaN,GAChB,KAkBX,IAAC,EAAA3C,IAAA,OAAA6B,MA7DD,SAAYwC,EAAY1B,GACtB2B,QAAQrB,KAAK,yBAAAsB,OAAyBF,EAAU,iBAAkB1B,EACpE,GAAC,CAAA3C,IAAA,cAAA6B,MA4DD,SAAmBM,GAAwB,IAAhBqC,EAAGpB,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAAGqB,SAC3BC,EAAOxC,EAAKyC,YAAYC,IAAIJ,GAOhC,OANIE,EACFJ,QAAQrB,KAAK,uBAAyBuB,EAAM,qBAE5CE,EAAO,IAAIxC,EAAKC,GAChBD,EAAKyC,YAAYE,IAAIL,EAAKE,IAErBA,CACT,GAAC,CAAA1E,IAAA,YAAA6B,MACD,SAAiB2C,GACftC,EAAKyC,YAAYR,OAAOK,EAC1B,GAAC,CAAAxE,IAAA,SAAA6B,MACD,SAAc2C,GAAoB,IAAfhB,IAAMJ,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,KAAAA,UAAA,GACvB,OAAOlB,EAAKyC,YAAYC,IAAIJ,KAAShB,GAAUc,QAAQrB,KAAK,+BAAiCuB,EAAM,KAAM,KAC3G,KAACtC,CAAA,CAvFK,GAyFRA,EAAKyC,YAA8B,IAAIG,IAGvC,IAAIC,EAAO5E,OAAO6E,OAAO,CACvBC,UAAW,MACXC,eAAgB,IAChBC,kBAAmB,IACnBC,qBAAsB,IACtBC,cAAe,WACfC,eAAgB,YAChBC,aAAc,aACdC,YAAa,MACbC,cAAe,MACfC,YAAa,SACbC,qBAAsB,kBACtBC,cAAe,iBACfC,QAAS,eACTC,qBAAsB,kBAIpBC,EAAQ,iEACRC,EAAWD,EAAMrF,OAAS,EAC1BuF,EAAG,oBAAAA,KAAA7D,EAAAA,EAAAA,GAAA,KAAA6D,EAAA,CAOJ,OAPIjD,EAAAA,EAAAA,GAAAiD,EAAA,OAAAjG,IAAA,WAAA6B,MACL,WAEE,IAFyC,IAA3BqE,EAAO9C,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAAG,gBACpBoB,EAAM,GACDvE,EAAI,EAAGA,EAAIiG,EAAQxF,OAAQT,IAClCuE,GAAsB,MAAf0B,EAAQjG,GAAaiG,EAAQjG,GAAK8F,EAAMI,OAAOC,KAAKC,SAAWL,GAExE,OAAOxB,CACT,KAACyB,CAAA,CAPI,GAWP,SAASK,EAAcC,EAAQC,EAAM3E,GACnC,IACI4E,EADAC,GAAU,EAEVC,EAAWH,EAAKI,MAAM,KAa1B,OAZAD,EAAS/C,SAAQ,SAACiD,EAAMC,GAClBA,EAAMH,EAASjG,OAAS,EAC1B6F,EAASA,EAAOM,GAEhBJ,EAAWI,CAEf,IACIN,EACFA,EAAOE,GAAY5E,EAEnB6E,GAAU,EAELA,CACT,CAgGA,IAAIK,EAAmB,cAyGvB,IAAIC,EAAa,KACbC,EAAc,KAgBlB,IAyBIC,EAAyB,CAvO7B,SAAyBC,EAAIC,IAC3BpG,EAAAA,EAAAA,GAAImG,EAAGE,iBAAiB,IAAD9C,OAAKQ,EAAKW,YAAW,OAAM9B,SAAQ,SAAC0D,GACzD,IACIC,EADAC,EAAUF,EAAGG,aAAa1C,EAAKY,sBAKnC,GAHI6B,IACFD,EAAYG,OAAOC,eAAe/C,IAAI4C,KAEnCD,EAAW,CACdA,EAAS,SAAAK,IAAAC,EAAAA,EAAAA,GAAAN,EAAAK,GAAA,IAAAE,GAAAC,EAAAA,EAAAA,GAAAR,GACP,SAAAA,IAAc,IAAAS,EAIX,OAJW5F,EAAAA,EAAAA,GAAA,KAAAmF,GACZS,EAAAF,EAAAxH,KAAA,MACKkH,IACHQ,EAAKC,MAAMC,QAAU,YACtBF,CACH,CAAC,OAAAhF,EAAAA,EAAAA,GAAAuE,EAAA,CANM,CAAiBH,EAAMe,eAQhC,IAAIC,EAAUd,EAAGe,UACjBd,EAAUe,SAAWF,EACrBb,EAAU/F,IAAIgG,EAChB,CACA,KAAOF,EAAGiB,YACRjB,EAAGiB,WAAWrE,SAEhB,IAAIsE,EAAgBlB,EAAGG,aAAa1C,EAAKW,aACzC0B,EAAMqB,IAAID,GAAe,SAAC9D,GACxB,GAAKA,EAAL,CAMA,IACIgE,EADAC,GAAW3H,EAAAA,EAAAA,GAAOsG,EAAGsB,UAErBC,EAAY,SAACC,GACfA,EAAMlF,SAAQ,SAACmF,EAAMjC,GACnB,GAAI6B,EAAY7B,GACd,GAAI6B,EAAY7B,GAAKkC,KACnBC,YAAW,WACTN,EAAY7B,GAAKkC,KAAKD,EACxB,SAEA,IAAK,IAAIG,KAAKH,EACZJ,EAAY7B,GAAKoC,GAAKH,EAAKG,OAG1B,CACAR,IACHA,EAAW,IAAIS,kBAEjB,IAAIC,EAAa,IAAI7B,EACrBpH,OAAOkJ,OAAOD,EAAWE,MAAOP,GAChCL,EAASa,YAAYH,EACvB,CACF,IACAV,GAAYpB,EAAGiC,YAAYb,GAC3B,IAC0Bc,EADtBC,EAAWd,EAAYe,MAAMZ,EAAMpI,OAAQiI,EAAYjI,QAAQiJ,GAAAC,EAAAA,EAAAA,GACjDH,GAAQ,IAA1B,IAAAE,EAAAE,MAAAL,EAAAG,EAAAG,KAAAC,MAA4B,CAAdP,EAAA3H,MACNqC,QACR,CAAC,OAAA8F,GAAAL,EAAAM,EAAAD,EAAA,SAAAL,EAAAO,GAAA,CACH,EACA,GAAIxF,EAAKrC,cAAgB8H,MACvBtB,EAAUnE,QACL,GAAIA,EAAKrC,cAAgBlC,OAAQ,CACtC,IAAI2I,EAAQ,GACZ,IAAK,IAAIsB,KAAW1F,EAAM,CACxB,IAAIX,EAAOW,EAAK0F,GAChBjK,OAAOuB,eAAeqC,EAAM,QAAS,CACnClC,MAAOuI,EACPtI,YAAY,IAEdgH,EAAMuB,KAAKtG,EACb,CACA8E,EAAUC,EACZ,MACExE,QAAQrB,KAAK,oCACbqB,QAAQgG,IAAI5F,EA7Cd,MAJE,KAAO4C,EAAGiB,YACRjB,EAAGiB,WAAWrE,QAkDpB,IACAoD,EAAGiD,gBAAgBxF,EAAKW,aACxB4B,EAAGiD,gBAAgBxF,EAAKY,qBAC1B,GACF,EAIA,SAAuBwB,EAAIC,GACzB,IAAIA,EAAMoD,WAAV,CAGA,IAAIC,GAAKzJ,EAAAA,EAAAA,GAAOmG,EAAGE,iBAAiB,SACpC,GAAKoD,EAAM/J,OAAX,CAGA,IAAIgK,EAAU,CAAC,EACfD,EAAM7G,SAAQ,SAAC+G,GACb,IAAIC,EAAWD,EAAKlD,aAAa,SAAWV,EAC5C2D,EAAQE,GAAY,CAClBD,KAAAA,EACAxD,GAAI0D,SAASC,yBAEjB,IACA1D,EAAM2D,aAAanH,SAAQ,SAACoH,GAC1B,IAAItI,EACAkI,EAAW7D,EACXiE,aAAiBC,SAAWD,EAAME,aAAa,UACjDN,EAAWI,EAAMvD,aAAa,QAC9BuD,EAAMT,gBAAgB,SAEI,OAA3B7H,EAAKgI,EAAQE,KAA8BlI,EAAGyE,GAAGoC,YAAYyB,EAChE,IACA7K,OAAOgL,OAAOT,GAAS9G,SAAQ,SAACwH,GAC9B,GAAIA,EAAOjE,GAAGkE,WAAW3K,OACvB0K,EAAOT,KAAKW,WAAWC,aAAaH,EAAOjE,GAAIiE,EAAOT,WACjD,GAAIS,EAAOT,KAAKU,WAAW3K,OAAQ,CACxC,IAAI8K,EAASX,SAASC,yBACtBU,EAAOC,OAAMC,MAAbF,GAAMxK,EAAAA,EAAAA,GAAWoK,EAAOT,KAAKU,aAC7BD,EAAOT,KAAKW,WAAWC,aAAaC,EAAQJ,EAAOT,KACrD,MACES,EAAOT,KAAKzG,QAEhB,GA5BA,CAJA,CAiCF,EACA,SAAsBiD,EAAIC,IACxBpG,EAAAA,EAAAA,GAAImG,EAAGE,iBAAiB,IAAD9C,OAAKQ,EAAKS,YAAW,OAAM5B,SAAQ,SAAC0D,GACzD,IAAIqE,EAAUrE,EAAGG,aAAa1C,EAAKS,aACnC4B,EAAMwE,IAAID,GAAWrE,EACrBA,EAAGiD,gBAAgBxF,EAAKS,YAC1B,GACF,EACA,SAAyB2B,EAAIC,IAC3BpG,EAAAA,EAAAA,GAAImG,EAAGE,iBAAiB,IAAD9C,OAAKQ,EAAKE,UAAS,OAAMrB,SAAQ,SAAC0D,GACvD,IACIuE,EADSvE,EAAGG,aAAa1C,EAAKE,WACX2B,MAAM,MAC7B5F,EAAAA,EAAAA,GAAIsG,EAAGwE,YAAYlI,SAAQ,SAACmI,GAC1B,GAAIA,EAAK7K,KAAKI,WAAW,MAAQyK,EAAKlK,MAAO,CAC3C,IAAI7B,EAAmB+L,EAAK7K,KAAKK,QAAQ,IAAK,IA/ItCqF,MAAM,KAAKoF,KAAI,SAACC,EAAGhM,GAC/B,OAAOgM,GAAKhM,EAAIgM,EAAE,GAAG7K,cAAgB6K,EAAEvC,MAAM,GAAKuC,CACpD,IAAGC,KAAK,IAAItF,MAAM,KAAKoF,KAAI,SAACC,EAAGhM,GAC7B,OAAOgM,GAAKhM,EAAIgM,EAAE7K,cAAgB6K,CACpC,IAAGC,KAAK,IA4IFL,EAAUxB,KAAKrK,EAAM,IAAM+L,EAAKlK,OAChCyF,EAAGiD,gBAAgBwB,EAAK7K,KAC1B,CACF,IACA2K,EAAUjI,SAAQ,SAACuI,GACjB,GAAKA,EAAL,CAGA,IAEIC,EAFAC,EAAKF,EAAUvF,MAAM,KAAKoF,KAAI,SAACM,GAAG,OAAKA,EAAIC,MAAM,IACjD5J,EAAO0J,EAAG,GAE4B,IAAtC1J,EAAKpC,QAAQwE,EAAKG,kBACpBkH,GAAS,EACTzJ,EAAOA,EAAKpB,QAAQwD,EAAKG,eAAgB,KAE3C,IAG6BsH,EAHzBC,EAAaJ,EAAG,GAAGzF,MAAM,KAAKoF,KAAI,SAACU,GACrC,OAAOA,EAAOH,MAChB,IAAGI,GAAA/C,EAAAA,EAAAA,GACgB6C,GAAU,QAAAG,EAAA,eAApBF,EAAMF,EAAA3K,MACTgL,OAAQ,EACRH,EAAOpL,WAAW,OACpBuL,EAAW,SACXH,EAASA,EAAOnL,QAAQ,KAAM,KACrBmL,EAAOpL,WAAW,OAC3BuL,EAAW,SACXH,EAASA,EAAOnL,QAAQ,IAAK,KAE/B6F,EAAMqB,IAAIiE,GAAQ,SAACxJ,GACA,WAAb2J,EACF3J,IAAQA,EACc,WAAb2J,IACT3J,GAAOA,GAELkJ,GACU,MAAPlJ,OAAc,EAASA,EAAIb,eAAiByK,QAC/C5J,EAAMoE,EAAGyF,aAAapK,EAAM,IAAM2E,EAAGiD,gBAAgB5H,GAErD2E,EAAGyF,aAAapK,EAAMO,GAGnBoD,EAAcgB,EAAI3E,EAAMO,KACtBoE,EAAGvC,EAAKa,iBACX0B,EAAGvC,EAAKa,eAAiBzF,OAAO4C,OAAO,OAEzCuE,EAAGvC,EAAKa,eAAejD,GAAQO,EAGrC,GAAG,EA7BL,IAAAyJ,EAAA9C,MAAA2C,EAAAG,EAAA7C,KAAAC,MAA+B6C,GA8B9B,OAAA5C,GAAA2C,EAAA1C,EAAAD,EAAA,SAAA2C,EAAAzC,GAAA,CAzCD,CA0CF,IACA5C,EAAGiD,gBAAgBxF,EAAKE,UAC1B,GACF,EAkBwB,SAASkC,EAAIC,IAdrC,SAAgCE,GAS9B,IARA,IAAI0F,EACAC,EAAS,GACTC,EAAOrC,SAASsC,iBAAiB7F,EAAI8F,WAAWC,UAAW,CAC7DC,WAAY,SAACC,GACX,IAAI7K,EACJ,QAAqC,OAA3BA,EAAK6K,EAAIC,oBAAyB,EAAS9K,EAAGwI,aAP9C,eAO0EqC,EAAIE,YAAYlK,SAASyD,IAAeuG,EAAIE,YAAYlK,SAAS0D,IAAgB,CACvK,IAEK+F,EAAOE,EAAKQ,YACjBT,EAAO5C,KAAK2C,GAEd,OAAOC,CACT,EAEiBU,CAAuBxG,GAC7BvD,SAAQ,SAACgK,GAGhB,IAFA,IACIC,EADAC,EAAa,GAEVF,EAAQH,YAAYlK,SAAS0D,IAC9B2G,EAAQH,YAAYnM,WAAW0F,IACjC6G,EAASD,EAAQH,YAAYlN,QAAQ0G,GAAeA,EAAYvG,OAChEkN,EAAQG,UAAUF,GAClBC,EAAWzD,KAAKuD,KAEhBC,EAASD,EAAQH,YAAYlN,QAAQyG,GACrC4G,EAAQG,UAAUF,IAEpBD,EAAUA,EAAQI,YAEpBF,EAAWlK,SAAQ,SAACqK,GAClB,IAAItL,EAAOsL,EAAMR,YAAYlM,QAAQyF,EAAY,IAAIzF,QAAQ0F,EAAa,IAC1EgH,EAAMR,YAAc,GACpBrG,EAAMqB,IAAI9F,GAAM,SAACO,GACf+K,EAAMR,YAAcvK,CACtB,GACF,GACF,GACF,GAIIgL,EAAe,IACfC,EAAe,IACfC,EAAkB,0BA8BtB,SAASC,EAAsBC,GAC7B,IA9BgChC,EA8B5BiC,EAASD,GA9BmBhC,EA+BHgC,GA9BjB,KAAOH,GAAgB7B,EAAI,KAAO4B,GAAkB5B,EAAIA,EAAI5L,OAAS,KAAOyN,GAAgB7B,EAAIA,EAAI5L,OAAS,KAAOwN,IA+B9HK,EA7BJ,SAAoBjC,GAOlB,OANIA,EAAI,KAAO6B,GAAgB7B,EAAI,KAAO4B,IACxC5B,EAAMA,EAAI5C,MAAM,IAEd4C,EAAIA,EAAI5L,OAAS,KAAOyN,GAAgB7B,EAAIA,EAAI5L,OAAS,KAAOwN,IAClE5B,EAAMA,EAAI5C,MAAM,GAAI,IAEf4C,CACT,CAqBakC,CAAWD,GAKpBA,EAzBJ,SAAsBjC,GAGpB,IAFA,IAAIW,EAAS,GACTwB,EAAO,GACFxO,EAAI,EAAGA,EAAIqM,EAAI5L,OAAQT,IAAK,CACnC,IAAMyO,EAAOpC,EAAIrM,EAAI,GACN,OAAXqM,EAAIrM,IAAwB,MAATyO,GACrBzB,GAAU,MACVhN,KACoB,MAAXqM,EAAIrM,IAAuB,OAATwO,EAC3BxB,GAAU,MAEVA,GAAUX,EAAIrM,GAEhBwO,EAAOnC,EAAIrM,EACb,CACA,OAAOgN,CACT,CASa0B,CADTJ,GAHAA,EAASA,EAAOhN,QAAQ6M,GAAiB,SAACQ,EAAOC,GAC/C,OAAOC,OAAOC,cAAcC,SAASH,EAAGtC,OAAQ,IAClD,KACgB0C,WAAW,OAAQ,QAEnCV,EAASJ,EAAeI,EAASJ,GAEnC,IACE,OAAOe,KAAKC,MAAMZ,EAGpB,CAFE,MAAOvE,GACP,MAAM,IAAIoF,MAAM,uCAAD7K,OAAwCgK,EAAM,sBAAAhK,OAAqB+J,GACpF,CACF,CAGA,IAAIe,EAAgB,EAChBC,EAAwB,KACxBC,EAA8B,KAC9BC,EAAc,SAAAC,IAAA5H,EAAAA,EAAAA,GAAA2H,EAAAC,GAAA,IAAAC,GAAA3H,EAAAA,EAAAA,GAAAyH,GAChB,SAAAA,IAAc,IAAAG,EAoBU,OApBVvN,EAAAA,EAAAA,GAAA,KAAAoN,GACZG,EAAAD,EAAApP,KAAA,MACAqB,GAAaiO,EAAAA,EAAAA,GAAAD,GAAO,iBAAiB,WACnC,IAAIjN,EACJiN,EAAKE,mBAC0B,OAA9BnN,EAAKiN,EAAKG,kBAAoCpN,EAAGkB,SAAQ,SAACmM,GACzD,IAAI7M,EAAMyM,EAAKK,WAAWL,EAAKM,iBAAiBF,IAAU,GAClD,OAAR7M,GAAgByM,EAAKO,EAAEH,KAAa7M,IAAQyM,EAAKO,EAAEH,GAAW7M,EAChE,GACF,IACAyM,EAAKrG,MAAQnJ,OAAO4C,OAAO,MAC3B4M,EAAKQ,SAAWhQ,OAAO4C,OAAO,MAC9B4M,EAAKS,cAAgC,IAAIpM,IACzC2L,EAAK/D,IAAMzL,OAAO4C,OAAO,MACzB4M,EAAKU,QAA0B,IAAIrM,IACnC2L,EAAKW,aAAc,EACnBX,EAAKY,cAAe,EACpBZ,EAAKa,gBAAiB,EACtBb,EAAKc,kBAAmB,EACxBd,EAAKe,qBAAsB,EAC3Bf,EAAKgB,UAAW,EAAMhB,CACxB,CAkbC,OAlbA3M,EAAAA,EAAAA,GAAAwM,EAAA,EAAAxP,IAAA,gBAAA4E,IACD,WACE,OAAO4K,CACT,GAAC,CAAAxP,IAAA,eAAA6B,MACD,WACA,GAAC,CAAA7B,IAAA,iBAAA6B,MACD,WACE,IAAIa,EACAJ,KAAKsO,gBAGTtO,KAAKsO,eAAgB,EACO,OAA3BlO,EAAKJ,KAAKuO,eAAiCnO,EAAGpC,KAAKgC,MACtD,GAAC,CAAAtC,IAAA,SAAA6B,MACD,SAAOyG,GAAsC,IACvCnB,EADuC2J,EAAA,KAA5BC,EAAM3N,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAAGd,KAAKiO,aAO7B,IALKQ,IAAUzO,KAAKD,YAA+B,mBAAOC,KAAKkI,YAC7DlI,KAAK0O,aAAa,CAChBC,KAAM,SAGN3O,KAAKoO,oBAAqB,CAC5B,IAAIQ,EAAoB5O,KAAKmF,aAAa1C,EAAKc,SAC/C,GAAIqL,EAAmB,CACrB,IAAIC,EAAO7O,KAAK8O,cACZC,GAAqB,MAARF,OAAe,EAASA,EAAKG,cAAcJ,KAAuBrG,SAASyG,cAAcJ,GACtGG,EACF/I,EAAW+I,EAAUE,QAAQC,WAAU,GAEvClN,QAAQrB,KAAK,sBAADsB,OAAuB2M,EAAiB,qBAExD,CACF,CACA,GAAI5O,KAAKmO,iBAAkB,KACQgB,EADRC,GAAA9H,EAAAA,EAAAA,GACVtH,KAAK8N,eAAa,IAAjC,IAAAsB,EAAA7H,MAAA4H,EAAAC,EAAA5H,KAAAC,MAAmC,KAA1B4H,EAAEF,EAAA5P,MACT8P,EAAGrP,KAAMA,KACX,CAAC,OAAA0H,GAAA0H,EAAAzH,EAAAD,EAAA,SAAA0H,EAAAxH,GAAA,CACH,CACA,GAAI5B,GAAYhG,KAAKD,YAAsB,SAAG,CAK5C,GAJIC,KAAKD,YAAsB,WAAMC,KAAKD,YAAmB,QAC3DC,KAAKD,YAAmB,MAAIwI,SAAS+G,cAAc,YACnDtP,KAAKD,YAAmB,MAAEgG,UAAY/F,KAAKD,YAAsB,WAElD,MAAZiG,OAAmB,EAASA,EAASjG,eAAiB8G,iBACzDhC,EAAKmB,OACA,IAAiB,MAAZA,OAAmB,EAASA,EAASjG,eAAiByM,OAAQ,CACxE,IAAI+C,EAAMhH,SAAS+G,cAAc,YACjCC,EAAIxJ,UAAYC,EAChBnB,EAAK0K,EAAIN,QAAQC,WAAU,EAC7B,MAAWlP,KAAKD,YAAmB,QACjC8E,EAAK7E,KAAKD,YAAmB,MAAEkP,QAAQC,WAAU,IAClD,IACgCM,EADhCC,GAAAnI,EAAAA,EAAAA,GACctH,KAAK8N,eAAa,IAAjC,IAAA2B,EAAAlI,MAAAiI,EAAAC,EAAAjI,KAAAC,MAAmC,KAA1B4H,EAAEG,EAAAjQ,MACT8P,EAAGxK,EAAI7E,KACT,CAAC,OAAA0H,GAAA+H,EAAA9H,EAAAD,EAAA,SAAA+H,EAAA7H,GAAA,CACH,CACA,IAAI8H,EAAQ,WACV7K,IAAO4J,GAAUD,EAAKtG,WAAWjB,YAAYpC,IAAO2J,EAAKvH,YAAYpC,IACrE2J,EAAKmB,gBACP,EACA,GAAI3P,KAAKD,YAA+B,kBAAG,CACzC0O,GAAS,EACT,IAAImB,EAAYrH,SAAS+G,cAAc,QACvCM,EAAUC,IAAM,aAChBD,EAAUE,KAAO9P,KAAKD,YAA+B,kBACrD6P,EAAUG,OAASL,EACnB1P,KAAKkI,WAAW8H,QAAQJ,EAC1B,MACEF,GAEJ,GAAC,CAAAhS,IAAA,uBAAA6B,MACD,SAAqB0Q,GACnBjQ,KAAK8N,cAAcnM,IAAIsO,EACzB,GAAC,CAAAvS,IAAA,cAAA4E,IACD,WAKE,OAJKtC,KAAKkQ,gBACRlQ,KAAKkQ,cAAgBvM,EAAIwM,WACzBnQ,KAAK2F,MAAMyK,YAAY3N,EAAKQ,aAAc,IAAFhB,OAAMjC,KAAKkQ,cAAa,OAE3DlQ,KAAKkQ,aACd,GAAC,CAAAxS,IAAA,aAAA4E,IACD,WACE,OAAOtC,KAAK0N,WAAWjL,EAAKQ,cAAc,EAC5C,GAAC,CAAAvF,IAAA,UAAA4E,IACD,WACE,IAAIlC,EACAiQ,GAA2D,OAA/CjQ,EAAKJ,KAAKmF,aAAa1C,EAAKM,qBAA0B,EAAS3C,EAAG6J,SAAWjK,KAAKsQ,YAActQ,KAAKuQ,iBAAmBvQ,KAAKwQ,YAE7I,OADAxQ,KAAKuQ,gBAAkBF,EAChBA,CACT,GAAC,CAAA3S,IAAA,WAAA4E,IACD,WAIE,OAHKtC,KAAKyQ,aACRzQ,KAAKyQ,WAAa7Q,EAAK8Q,YAAY,CAAC,EAAG1Q,OAElCA,KAAKyQ,UACd,GAAC,CAAA/S,IAAA,UAAA4E,IACD,WACE,OAAO1C,EAAK+Q,OAAO3Q,KAAKqQ,SAAS,IAAUzQ,EAAK8Q,YAAY,CAAC,EAAG1Q,KAAKqQ,QACvE,GAAC,CAAA3S,IAAA,MAAA6B,MAoBD,SAAIc,EAAMuQ,GAAsB,IAAAC,EAAA,KAAbpP,IAAIX,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,KAAAA,UAAA,GACjBgQ,EAAQ,SAAClQ,GACNiQ,EAAKE,aAGVH,EAAQhQ,EACV,EACIoQ,EAAS9D,EAAe+D,YAAY5Q,EAAML,MACzCgR,EAAOE,IAAIC,IAAIH,EAAOpS,MAKzBoB,KAAK+N,QAAQpM,IAAIqP,EAAOE,IAAI/K,IAAI6K,EAAOpS,KAAMkS,EAAOrP,IAJpD2D,OAAOuB,YAAW,WAChBkK,EAAK9C,QAAQpM,IAAIqP,EAAOE,IAAI/K,IAAI6K,EAAOpS,KAAMkS,EAAOrP,GACtD,GAIJ,GAAC,CAAA/D,IAAA,SAAA6B,MACD,SAAOc,GACL,IAAI2Q,EAAS9D,EAAe+D,YAAY5Q,EAAML,MAC9CgR,EAAOE,IAAIhQ,OAAO8P,EAAOpS,KAC3B,GAAC,CAAAlB,IAAA,MAAA6B,MACD,SAAIc,GACF,IAAI2Q,EAAS9D,EAAe+D,YAAY5Q,EAAML,MAC9C,OAAOgR,EAAOE,IAAIC,IAAIH,EAAOpS,KAC/B,GAAC,CAAAlB,IAAA,MAAA6B,MACD,SAAIc,EAAMO,GAAsB,IAAjBC,EAAOC,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,IAAAA,UAAA,GAChBkQ,EAAS9D,EAAe+D,YAAY5Q,EAAML,MAC9CgR,EAAOE,IAAIvP,IAAIqP,EAAOpS,KAAMgC,EAAKC,EACnC,GAAC,CAAAnD,IAAA,OAAA6B,MACD,SAAKD,GAAsB,IAAjBuB,EAAOC,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,IAAAA,UAAA,GACf,IAAK,IAAIT,KAAQf,EACfU,KAAK2B,IAAItB,EAAMf,EAAIe,GAAOQ,EAE9B,GAAC,CAAAnD,IAAA,IAAA4E,IACD,WAAQ,IAAA8O,EAAA,KACN,IAAKpR,KAAKqR,aAAc,CACtB,IAAIlR,EAAItC,OAAO4C,OAAO,MACtBT,KAAKqR,aAAe,IAAIC,MAAMnR,EAAG,CAC/BoC,IAAK,SAACjD,EAAKe,EAAMO,GACf,IAAIoQ,EAAS9D,EAAe+D,YAAY5Q,EAAM+Q,GAE9C,OADAJ,EAAOE,IAAI9P,IAAI4P,EAAOpS,KAAMgC,IACrB,CACT,EACA0B,IAAK,SAAChD,EAAKe,GACT,IAAI2Q,EAAS9D,EAAe+D,YAAY5Q,EAAM+Q,GAC9C,OAAOJ,EAAOE,IAAIK,KAAKP,EAAOpS,KAChC,GAEJ,CACA,OAAOoB,KAAKqR,YACd,GAAC,CAAA3T,IAAA,OAAA6B,MACD,SAAKiS,GAAgC,IAAzBC,EAAe3Q,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,IAAAA,UAAA,GACzB,IAAK,IAAIpD,KAAO8T,EAAO,CACrB,IAAI5Q,EAAM4Q,EAAM9T,GACZgU,EAAU,CAAClF,OAAQmF,OAAQnH,UAC3BiH,IAAoBC,EAAQzQ,SAAgB,MAAPL,OAAc,EAASA,EAAIb,cAGlEC,KAAK4N,EAAElQ,KAASkD,KAFhBZ,KAAK4N,EAAElQ,GAAOkD,EAIlB,CACF,GAAC,CAAAlD,IAAA,aAAA4E,IACD,WACE,OAAOtC,KAAKqO,UAAYrO,KAAK4I,aAAanG,EAAKO,iBAA8D,UAA3ChD,KAAKmF,aAAa1C,EAAKO,eAC3F,GAAC,CAAAtF,IAAA,gBAAA6B,MACD,WACE,IAAIqS,EAAW5R,KAAKD,YAAwB,WAC5C,GAAI6R,EACF,IAAK,IAALC,EAAA,EAAAC,EAAiBjU,OAAOgL,OAAO+I,GAASC,EAAAC,EAAA1T,OAAAyT,IAAE,CAArC,IAAIxR,EAAIyR,EAAAD,GACNhU,OAAOmD,KAAKhB,KAAKgH,OAAO/F,SAASZ,KACpCL,KAAKgH,MAAM3G,GAAQ,GAEvB,CAEF,IAAK,IAAIA,KAAQL,KAAKgH,MACpB,GAAI3G,EAAKrB,WAAWyD,EAAKI,mBACvB7C,KAAK+R,QAAQpQ,IAAItB,EAAKpB,QAAQwD,EAAKI,kBAAmB,IAAK7C,KAAKgH,MAAM3G,GAAOL,KAAKgS,iBAC7E,GAAI3R,EAAKY,SAASwB,EAAKK,sBAAuB,CACnD,IAAImP,EAAU5R,EAAKiE,MAAM7B,EAAKK,sBAC1BuN,EAAU4B,EAAQ,GAAGhI,OACrBiI,EAAWD,EAAQ,GAAGhI,OAC1B,GAAIoG,GAAW6B,EAAU,CACvB,IAAIC,EAAWvS,EAAK+Q,OAAON,GAAS,GAC/B8B,IACHA,EAAWvS,EAAK8Q,YAAY,CAAC,EAAGL,IAElC8B,EAASxQ,IAAIuQ,EAAUlS,KAAKgH,MAAM3G,GACpC,CACF,MACEL,KAAKoS,SAASzQ,IAAItB,EAAML,KAAKgH,MAAM3G,IAGvC,IAAK,IAAIgS,KAAWrS,KAAK6N,SACvB7N,KAAKsS,YAAYD,EAASrS,KAAK6N,SAASwE,IAE1CrS,KAAKuS,sBAAuB,CAC9B,GAAC,CAAA7U,IAAA,oBAAA6B,MACD,WAAoB,IACda,EADcoS,EAAA,KAElB,GAAKxS,KAAK+Q,YAAV,CAMA,GAHI/Q,KAAKyS,qBACPrN,OAAOsN,aAAa1S,KAAKyS,sBAEtBzS,KAAK2S,cAAe,CACvB,IAAIC,EAAiE,OAA/CxS,EAAKJ,KAAKmF,aAAa1C,EAAKM,qBAA0B,EAAS3C,EAAG6J,OAKxF,GAJI2I,GACF5S,KAAK2F,MAAMyK,YAAY3N,EAAKQ,aAAc,IAAFhB,OAAM2Q,EAAc,MAE9D5S,KAAK6S,gBACD7S,KAAKyC,EAAKa,eAAgB,CAC5B,IAAK,IAAIjD,KAAQL,KAAKyC,EAAKa,eACzBU,EAAchE,KAAMK,EAAML,KAAKyC,EAAKa,eAAejD,WAE9CL,KAAKyC,EAAKa,cACnB,CACAtD,KAAKyI,cAAY/J,EAAAA,EAAAA,GAAOsB,KAAK+I,YAC7B,IAAK,IAAL+J,EAAA,EAAAC,EAAiBnO,EAAsBkO,EAAAC,EAAA3U,OAAA0U,IAAE,CAApC,IAAIE,EAAID,EAAAD,GACX9S,KAAKiT,qBAAqBD,EAC5B,CACA,GAAIhT,KAAKgO,YACPhO,KAAK2P,sBAEL,GAAI3P,KAAKD,YAA8B,iBAAG,CACxC,IAAI8O,EAAO7O,KAAK8O,cAChB,IAAKD,EACH,OAGF,GADsB,MAARA,OAAe,EAASA,EAAKG,cAAc,QAAD/M,OAASQ,EAAKe,qBAAoB,MAAAvB,OAAKjC,KAAKD,YAAYmT,GAAE,OAGhH,YADAlT,KAAKmT,SAGP,IAAIC,EAAWpT,KAAKD,YAA8B,iBAAEmP,WAAU,GAC9DkE,EAAS3I,aAAahI,EAAKe,qBAAsBxD,KAAKD,YAAgB,IACtEqT,EAASrD,OAAS,WAChByC,EAAKW,QACP,EACAtE,EAAKwE,WAAaC,KAAKC,cAAgB1E,EAAK2E,KAAKvM,YAAYmM,GAAYvE,EAAKmB,QAAQoD,EACxF,MACEpT,KAAKmT,QAGX,CACAnT,KAAK2S,eAAgB,CA5CrB,CA6CF,GAAC,CAAAjV,IAAA,kBAAA6B,MACD,WACA,GAAC,CAAA7B,IAAA,uBAAA6B,MACD,WAAuB,IAAAkU,EAAA,KAChBzT,KAAK2S,gBAGV3S,KAAKuN,mBACAvN,KAAKkO,iBAGNlO,KAAKyS,qBACPrN,OAAOsN,aAAa1S,KAAKyS,qBAE3BzS,KAAKyS,oBAAsBrN,OAAOuB,YAAW,WAC3C8M,EAAKC,kBAAkB,IACKC,EADLC,GAAAtM,EAAAA,EAAAA,GACPmM,EAAK1F,SAAO,IAA5B,IAAA6F,EAAArM,MAAAoM,EAAAC,EAAApM,KAAAC,MAA8B,KAArBtB,EAAGwN,EAAApU,MACV4G,EAAIvE,SACJ6R,EAAK1F,QAAQlM,OAAOsE,EACtB,CAAC,OAAAuB,GAAAkM,EAAAjM,EAAAD,EAAA,SAAAkM,EAAAhM,GAAA,KACkCiM,EADlCC,GAAAxM,EAAAA,EAAAA,GACgBmM,EAAK3F,eAAa,IAAnC,IAAAgG,EAAAvM,MAAAsM,EAAAC,EAAAtM,KAAAC,MAAqC,KAA5BuL,EAAIa,EAAAtU,MACXkU,EAAK3F,cAAcjM,OAAOmR,EAC5B,CAAC,OAAAtL,GAAAoM,EAAAnM,EAAAD,EAAA,SAAAoM,EAAAlM,GAAA,CAC8B,MAA/BqF,GAA+CA,EAA4BpL,OAAO4R,EAAKM,gBAClD,MAA/B9G,OAAsC,EAASA,EAA4BnL,QACtD,MAAzBkL,GAAyCA,EAAsBgH,aAC/DhH,EAAwB,KACxBC,EAA8B,KAElC,GAAG,MACL,GAAC,CAAAvP,IAAA,2BAAA6B,MAgCD,SAAyBX,EAAMqV,EAAQC,GACrC,IAAI9T,EACJ,GAAI6T,IAAWC,EAAf,CAGA,IAAIC,EAAiD,OAAxC/T,EAAKJ,KAAKD,YAAwB,iBAAa,EAASK,EAAGxB,GACpEuV,EACEnU,KAAKuS,qBACPvS,KAAK4N,EAAEuG,GAASD,EAEhBlU,KAAKgH,MAAMmN,GAASD,EAGtBlU,KAAKpB,GAAQsV,CATf,CAWF,GAAC,CAAAxW,IAAA,aAAA6B,MACD,SAAW2S,GAA+B,IAArBkC,EAAWtT,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,IAAAA,UAAA,GAI9B,GAHKd,KAAKqU,iBACRrU,KAAKqU,eAAiBxW,OAAO4C,OAAO,QAEjC5C,OAAOmD,KAAKhB,KAAKqU,gBAAgBpT,SAASiR,GAAW,CACnDlS,KAAKsU,kBACRtU,KAAKsU,gBAAkBlP,OAAOmP,iBAAiBvU,OAEjD,IAAIY,EAAMZ,KAAKsU,gBAAgBE,iBAAiBtC,GAAUjI,OAC1D,IACEjK,KAAKqU,eAAenC,GAAYnG,EAAsBnL,EAIxD,CAHE,MAAO+G,IACNyM,GAAepS,QAAQrB,KAAK,mBAADsB,OAAoBiQ,IAChDlS,KAAKqU,eAAenC,GAAY,IAClC,CACF,CACA,OAAOlS,KAAKqU,eAAenC,EAC7B,GAAC,CAAAxU,IAAA,mBAAA6B,MACD,SAAiBkV,GACf,OAAOA,EAAYnQ,MAAM,MAAMoF,KAAI,SAACgL,EAAMlQ,GACxC,OAAe,IAARA,EAAY,GAAKkQ,CAC1B,IAAG9K,KAAK,KACV,GAAC,CAAAlM,IAAA,0BAAA6B,MACD,WACO0N,IACHA,EAA8C,IAAIvL,KAEpDuL,EAA4BtL,IAAI3B,KAAK+T,eAChC/G,IACHA,EAAwB,IAAI2H,kBAAiB,SAACC,GACxB,eAApBA,EAAQ,GAAGC,MAAyB5H,EAA4B3L,SAAQ,SAACwT,GACvEA,GACF,GACF,KACsBC,QAAQxM,SAAU,CACtCyM,WAAW,EACXC,SAAS,EACTzL,YAAY,EACZ0L,gBAAiB,CAAC,UAGxB,GAAC,CAAAxX,IAAA,cAAA6B,MACD,SAAY2S,GAA0B,IAAhBiD,EAASrU,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAAG,GAC3Bd,KAAKwN,kBACRxN,KAAKwN,gBAAkC,IAAI9L,KAE7C1B,KAAKwN,gBAAgB7L,IAAIuQ,GACzB,IAAItR,EAAMZ,KAAK0N,WAAW1N,KAAK2N,iBAAiBuE,IAAW,GACnD,OAARtR,IAAiBA,EAAMuU,GACvBnV,KAAK2B,IAAIuQ,EAAUtR,GACnBZ,KAAKoV,yBACP,GAAC,CAAA1X,IAAA,mBAAA6B,MACD,WACES,KAAKqU,eAAiB,KACtBrU,KAAKsU,gBAAkB,IACzB,GAAC,CAAA5W,IAAA,iBAAA6B,MACD,SAAe2S,EAAUtB,EAASyE,GAAS,IAAAC,EAAA,KACrCC,EAAgB,KAAOrD,EAC3BlS,KAAKuV,GAAiBvV,KAAKkS,GAC3BrU,OAAOuB,eAAeY,KAAMkS,EAAU,CACpC3P,IAAK,SAAC3B,GACJ0U,EAAKC,GAAiB3U,EAClByU,EACFjQ,OAAOuB,YAAW,WACL,MAAXiK,GAA2BA,EAAQhQ,EACrC,IAEW,MAAXgQ,GAA2BA,EAAQhQ,EAEvC,EACA0B,IAAK,WACH,OAAOgT,EAAKC,EACd,IAEFvV,KAAKkS,GAAYlS,KAAKuV,EACxB,IAAC,EAAA7X,IAAA,cAAA6B,MA7TD,SAAmBc,EAAMyE,GACvB,IAAIoM,EACAtS,EACJ,GAAIyB,EAAKrB,WAAWyD,EAAKI,mBACvBqO,EAAMpM,EAAMiN,QACZnT,EAAOyB,EAAKpB,QAAQwD,EAAKI,kBAAmB,SACvC,GAAIxC,EAAKY,SAASwB,EAAKK,sBAAuB,CACnD,IAAI0S,EAAOnV,EAAKiE,MAAM7B,EAAKK,sBAC3BoO,EAAMtR,EAAK+Q,OAAO6E,EAAK,IACvB5W,EAAO4W,EAAK,EACd,MACEtE,EAAMpM,EAAMsN,SACZxT,EAAOyB,EAET,MAAO,CACL6Q,IAAAA,EACAtS,KAAAA,EAEJ,GAAC,CAAAlB,IAAA,MAAA6B,MAiLD,SAAWd,GAA0B,IAAjBgX,EAAO3U,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,IAAAA,UAAA,GACpBrC,IACHsO,IACAtO,EAAU,GAAHwD,OAAMQ,EAAKU,cAAa,KAAAlB,OAAI8K,IAErC/M,KAAK0V,MAAQjX,EACb,IAAIkX,EAAkBvQ,OAAOC,eAAe/C,IAAI7D,GAC5CkX,EACGF,GAAWE,IAAoB3V,MAClCgC,QAAQrB,KAAK,CAAC,0BAADsB,OACexD,EAAO,8EAAAwD,OACmBjC,KAAKpB,KAAI,8EAG7DgL,KAAK,OAIXxE,OAAOC,eAAeuQ,OAAOnX,EAASgX,EAAO,SAAAI,IAAAtQ,EAAAA,EAAAA,GAAAuQ,EAAAD,GAAA,IAAAE,GAAAtQ,EAAAA,EAAAA,GAAAqQ,GAAA,SAAAA,IAAA,OAAAhW,EAAAA,EAAAA,GAAA,KAAAgW,GAAAC,EAAA3M,MAAA,KAAAtI,UAAA,QAAAJ,EAAAA,EAAAA,GAAAoV,EAAA,EAAiB9V,MAC1DA,KACN,GAAC,CAAAtC,IAAA,KAAA4E,IACD,WAIE,OAHKtC,KAAK0V,OACR1V,KAAKd,MAEAc,KAAK0V,KACd,GAAC,CAAAhY,IAAA,iBAAA6B,MACD,SAAsByW,GACpBhW,KAAKiW,mBAAqBpY,OAAOmD,KAAKgV,GACtChW,KAAKkW,WAAaF,CACpB,GAAC,CAAAtY,IAAA,eAAA6E,IA6FD,SAAwB4T,GACtB,IAAIC,EAAY,IAAIC,KAAK,CAACF,GAAS,CACjCtB,KAAM,aAER7U,KAAKsW,kBAAoBC,IAAIC,gBAAgBJ,EAC/C,GAAC,CAAA1Y,IAAA,aAAA6E,IACD,SAAsB4T,GACpB,IAAKnW,KAAKyW,iBAAkB,CAC1B,IAAIL,EAAY,IAAIC,KAAK,CAACF,GAAS,CACjCtB,KAAM,aAEJ6B,EAAMH,IAAIC,gBAAgBJ,GAC1BO,EAAOpO,SAAS+G,cAAc,QAClCqH,EAAK7G,KAAO4G,EACZC,EAAK9G,IAAM,aACX7P,KAAKyW,iBAAmBE,CAC1B,CACF,KAACzJ,CAAA,CAxce,EAwcf0J,EAAAA,EAAAA,GAxcgCC,cA0c/BhR,EAAgBqH,EACpB7N,EAAcwG,EAAe,YAG7B,IAAIiR,EAAS,oBAAAA,KAAAhX,EAAAA,EAAAA,GAAA,KAAAgX,EAAA,CA+HV,OA/HUpW,EAAAA,EAAAA,GAAAoW,EAAA,OAAApZ,IAAA,SAAA6B,MACX,SAAcwX,GACZ/U,QAAQrB,KAAKoW,EACf,GAAC,CAAArZ,IAAA,kBAAA6B,MACD,SAAuByX,GACrBhX,KAAKiX,aAAeD,CACtB,GAAC,CAAAtZ,IAAA,gBAAA6B,MACD,SAAqBmK,GAEnB,IAAK,IAAIwN,KADTrZ,OAAOkJ,OAAO/G,KAAKmX,OAAQzN,GACT1J,KAAKmX,OAChBnX,KAAKoX,eAA+C,IAA/BpX,KAAKmX,OAAOD,GAAOG,QAEjCrX,KAAKsX,aAA2C,IAA7BtX,KAAKmX,OAAOD,GAAOK,QAChDvX,KAAKsX,WAAaJ,GAFlBlX,KAAKoX,aAAeF,CAK1B,GAAC,CAAAxZ,IAAA,mBAAA4E,IAID,WACE,OAAOtC,KAAKwX,oBAAsB,cACpC,EAACjV,IALD,SAA4B3D,GAC1BoB,KAAKwX,mBAAqB5Y,CAC5B,GAAC,CAAAlB,IAAA,iBAAA6B,MAID,WACE,IAAIoL,EAAS,CACXuM,MAAO,KACPO,QAAS,CAAC,GAaZ,OAXgBrS,OAAOsS,SAASC,OAAOrT,MAAMtE,KAAK4X,WACxCtW,SAAQ,SAACoT,GACjB,GAAIA,EAAKzT,SAAS,KAChB0J,EAAOuM,MAAQxC,EAAKzV,QAAQ,IAAK,SAC5B,GAAIyV,EAAKzT,SAAS,KAAM,CAC7B,IAAI4W,EAAOnD,EAAKpQ,MAAM,KACtBqG,EAAO8M,QAAQI,EAAK,IAAMC,UAAUD,EAAK,GAC3C,MACElN,EAAO8M,QAAQ/C,IAAQ,CAE3B,IACO/J,CACT,GAAC,CAAAjN,IAAA,SAAA6B,MACD,WACE,IAAIwY,EAAY/X,KAAKgY,iBACjBC,EAAcjY,KAAKmX,OAAOY,EAAUb,OAIxC,GAHIe,GAAeA,EAAYjB,QAC7BzO,SAASyO,MAAQiB,EAAYjB,OAEP,OAApBe,EAAUb,OAAkBlX,KAAKoX,aACnCpX,KAAKkY,WAAWlY,KAAKoX,mBAEhB,GAAKa,IAAejY,KAAKsX,WAGzB,GAAKW,IAAejY,KAAKoX,aAGzB,GAAKa,EAAL,CAIP,IAAIE,EAAQ,IAAIC,YAAYtB,EAAUuB,iBAAkB,CACtDC,OAAQ,CACNpB,MAAOa,EAAUb,MACjBO,QAAS5Z,OAAOkJ,OAAOkR,GAAe,CAAC,EAAGF,EAAUN,YAGxDrS,OAAOmT,cAAcJ,EAPrB,MAFEnY,KAAKwY,OAAO,UAADvW,OAAW8V,EAAUb,MAAK,wBAHrClX,KAAKkY,WAAWlY,KAAKoX,mBAHrBpX,KAAKkY,WAAWlY,KAAKsX,WAgBzB,GAAC,CAAA5Z,IAAA,UAAA6B,MACD,SAAe2X,GAAqB,IAAdO,EAAO3W,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAAG,CAAC,EAC3BmX,EAAcjY,KAAKmX,OAAOD,GAC9B,GAAKe,EAAL,CAIA,IAAIQ,EAAW,IAAMvB,EACrB,IAAK,IAAI7W,KAAQoX,GACO,IAAlBA,EAAQpX,GACVoY,GAAYzY,KAAK4X,UAAYvX,EAE7BoY,GAAYzY,KAAK4X,UAAYvX,EAAO,IAAH4B,OAAOwV,EAAQpX,IAGpD,IAAI2W,EAAQiB,EAAYjB,OAAShX,KAAKiX,cAAgB,GACtD7R,OAAOsT,QAAQC,UAAU,KAAM3B,EAAOyB,GACtClQ,SAASyO,MAAQA,CAXjB,MAFEhX,KAAKwY,OAAO,gBAAkBtB,EAclC,GAAC,CAAAxZ,IAAA,aAAA6B,MACD,SAAkB2X,GAAqB,IAAdO,EAAO3W,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAAG,CAAC,EAClCd,KAAK4Y,QAAQ1B,EAAOO,GACpBzX,KAAKkB,QACP,GAAC,CAAAxD,IAAA,eAAA6B,MACD,SAAoBV,GAClBmB,KAAK6Y,WAAaha,CACpB,GAAC,CAAAnB,IAAA,YAAA4E,IACD,WACE,OAAOtC,KAAK6Y,YAAc,GAC5B,GAAC,CAAAnb,IAAA,mBAAA6B,MACD,SAAwB8Q,EAASyI,GAAY,IAAAC,EAAA,KAC3C/Y,KAAKgZ,cAAcF,GACnB,IAAIG,EAAYrZ,EAAK8Q,YAAY,CAC/BwG,MAAO,KACPO,QAAS,KACTT,MAAO,MACN3G,GAWH,OAVAjL,OAAO8T,iBAAiBlZ,KAAKqY,kBAAkB,SAAC1Q,GAC9C,IAAIvH,EACJ6Y,EAAUE,SAAS,CACjBjC,MAAOvP,EAAE2Q,OAAOpB,MAChBO,QAAS9P,EAAE2Q,OAAOb,QAClBT,OAAmC,OAA1B5W,EAAKuH,EAAE2Q,OAAOb,cAAmB,EAASrX,EAAG4W,QAAU+B,EAAK9B,cAAgB,IAEzF,IACAH,EAAU5V,SACVlB,KAAKoZ,uBACEH,CACT,GAAC,CAAAvb,IAAA,uBAAA6B,MACD,WAA8B,IAAA8Z,EAAA,KACxBrZ,KAAKsZ,eAGTtZ,KAAKsZ,aAAe,WAClBD,EAAKnY,QACP,EACAkE,OAAO8T,iBAAiB,WAAYlZ,KAAKsZ,cAC3C,GAAC,CAAA5b,IAAA,yBAAA6B,MACD,WACE6F,OAAOmU,oBAAoB,WAAYvZ,KAAKsZ,cAC5CtZ,KAAKsZ,aAAe,IACtB,KAACxC,CAAA,CA/HU,GAoIb,SAAS0C,EAAYxU,EAAIyU,GACvB,IAAK,IAAIpZ,KAAQoZ,EACXpZ,EAAKY,SAAS,KAChB+D,EAAGW,MAAMyK,YAAY/P,EAAMoZ,EAASpZ,IAEpC2E,EAAGW,MAAMtF,GAAQoZ,EAASpZ,EAGhC,CACA,SAASqZ,EAAgB1U,EAAI2U,GAC3B,IAAK,IAAIC,KAAYD,EACfA,EAAQC,GAAU7Z,cAAgByK,QAChCmP,EAAQC,GACV5U,EAAGyF,aAAamP,EAAU,IAE1B5U,EAAGiD,gBAAgB2R,GAGrB5U,EAAGyF,aAAamP,EAAUD,EAAQC,GAGxC,CACA,SAASnZ,IAA8B,IAAvBuV,EAAIlV,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAAG,CAAE+Y,IAAK,OACxB7U,EAAKuD,SAAS+G,cAAc0G,EAAK6D,KAOrC,GANI7D,EAAKxM,YACPkQ,EAAgB1U,EAAIgR,EAAKxM,YAEvBwM,EAAK8D,QACPN,EAAYxU,EAAIgR,EAAK8D,QAEnB9D,EAAK+D,WACP,IAAK,IAAI1Z,KAAQ2V,EAAK+D,WACpB/U,EAAG3E,GAAQ2V,EAAK+D,WAAW1Z,GAc/B,OAXI2V,EAAKgE,YACPhE,EAAKgE,WAAW1Y,SAAQ,SAAC+N,GACvBA,EAAGrK,EACL,IAEEgR,EAAK1P,UACP0P,EAAK1P,SAAShF,SAAQ,SAAC2Y,GACrB,IAAIvR,EAAQjI,EAAOwZ,GACnBjV,EAAGiC,YAAYyB,EACjB,IAEK1D,CACT,CAlDA8R,EAAUK,OAAStZ,OAAO4C,OAAO,MAqDjC,IAAIyZ,EAAmB,kBACnBC,EAAkB,cAElBC,EAAU,WA0BZ,SAAAA,EAAYC,EAAQC,GAAW,IAAAC,EAAA,MAAAza,EAAAA,EAAAA,GAAA,KAAAsa,GAC7Bpa,KAAKpB,KAAOyb,EACZra,KAAKsa,UAAYA,EACjBta,KAAKwa,QAAU,EACfxa,KAAKya,QAAUrV,OAAOsV,UAAUC,KAAK3a,KAAKpB,KAAMoB,KAAKwa,SACrDxa,KAAKya,QAAQG,gBAAkB,SAACjT,GAC9B4S,EAAKM,GAAKlT,EAAE/J,OAAe,OAC3B2c,EAAKO,SAAWP,EAAKM,GAAGE,kBAAkBT,EAAW,CACnDU,QAAS,SAEXT,EAAKO,SAASG,YAAYC,WAAa,SAACC,GACtCZ,EAAKa,iBAAiBD,EACxB,CACF,EACAnb,KAAKya,QAAQY,UAAY,SAAC1T,GACxB4S,EAAKM,GAAKlT,EAAE/J,OAAO+M,OACnB4P,EAAKa,iBAAiBzT,EACxB,EACA3H,KAAKya,QAAQa,QAAU,SAAC3T,GACtB3F,QAAQuV,MAAM5P,EAChB,EACA3H,KAAKub,kBAAoB,CAAC,EAC1Bvb,KAAKwb,eAAiB,SAAC7T,GACjBA,EAAEjK,MAAQ6c,EAAK3b,MAAQ2b,EAAKgB,kBAAkB5T,EAAE8T,WACxClB,EAAKgB,kBAAkB5T,EAAE8T,UAC/Bna,QAAO,eAAAoa,GAAAC,EAAAA,EAAAA,GAAAC,EAAAA,MAAC,SAAAC,EAAOta,GAAQ,OAAAqa,EAAAA,MAAA,SAAAE,GAAA,cAAAA,EAAA3P,KAAA2P,EAAA1P,MAAA,OACjB,OADiB0P,EAAAC,GACzBxa,EAAQua,EAAA1P,KAAA,EAAOmO,EAAKhJ,KAAK5J,EAAE8T,UAAS,OAAAK,EAAAE,GAAAF,EAAAG,MAAA,EAAAH,EAAAC,IAAAD,EAAAE,IAAA,wBAAAF,EAAAI,OAAA,GAAAL,EAAA,KACrC,gBAAAM,GAAA,OAAAT,EAAAtS,MAAA,KAAAtI,UAAA,EAFU,GAIf,EACAd,KAAKoc,oBAAsB,SAACzU,GAC1B4S,EAAKiB,eAAe7T,EAAE2Q,OACxB,EACAlT,OAAO8T,iBAAiB,UAAWlZ,KAAKwb,gBACxCpW,OAAO8T,iBAAiBlZ,KAAKqc,cAAerc,KAAKoc,oBACnD,CAuFC,OAvFA1b,EAAAA,EAAAA,GAAA0Z,EAAA,EAAA1c,IAAA,mBAAA6B,MA5DD,WAA+B,IAAd4Y,EAAKrX,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAAG,KACvBsE,OAAOmT,cAAc,IAAIH,YAAY8B,EAAkB,CACrD5B,OAAQ,CACN+B,OAAQra,KAAKpB,KACb0b,UAAWta,KAAKsa,UAChBnC,MAAAA,KAGN,GAAC,CAAAza,IAAA,gBAAA4E,IACD,WACE,MAZmB,uBAYOtC,KAAKpB,IACjC,GAAC,CAAAlB,IAAA,kBAAA6B,MACD,SAAgB7B,GACd,OAAO,IAAI0a,YAAYpY,KAAKqc,cAAe,CACzC/D,OAAQ,CACN5a,IAAKsC,KAAKpB,KACV6c,SAAU/d,IAGhB,GAAC,CAAAA,IAAA,qBAAA6B,MACD,SAAmB7B,GACjB0H,OAAOkX,aAAaC,WAAWvc,KAAKpB,MACpCwG,OAAOkX,aAAaE,QAAQxc,KAAKpB,KAAMlB,GACvC0H,OAAOmT,cAAcvY,KAAKyc,gBAAgB/e,GAC5C,GAAC,CAAAA,IAAA,OAAA6B,MAqCD,SAAK7B,GACH,IACI+c,EADKza,KAAK6a,GAAGI,YAAYjb,KAAKsa,UAAW,aAC5BoC,YAAY1c,KAAKsa,WAAWhY,IAAI5E,GACjD,OAAO,IAAIif,SAAQ,SAACC,EAASC,GAC3BpC,EAAQY,UAAY,SAAC1T,GACnB,IAAIvH,GAC0B,OAAzBA,EAAKuH,EAAE/J,OAAO+M,aAAkB,EAASvK,EAAG0c,QAC/CF,EAAQjV,EAAE/J,OAAO+M,OAAOmS,SAExBF,EAAQ,MACR5a,QAAQrB,KAAK,qBAADsB,OAAsBvE,EAAG,MAEzC,EACA+c,EAAQa,QAAU,SAAC3T,GACjBkV,EAAOlV,EACT,CACF,GACF,GAAC,CAAAjK,IAAA,QAAA6B,MACD,SAAM7B,EAAK6B,GAAuB,IAAAwd,EAAA,KAAhBC,EAAMlc,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,IAAAA,UAAA,GAClBsB,EAAO,CACT6a,KAAMvf,EACNof,OAAQvd,GAEN2d,EAAKld,KAAK6a,GAAGI,YAAYjb,KAAKsa,UAAW,aACzCG,EAAUyC,EAAGR,YAAY1c,KAAKsa,WAAW6C,IAAI/a,GACjD,OAAO,IAAIua,SAAQ,SAACC,EAASC,GAC3BpC,EAAQY,UAAY,SAAC1T,GACdqV,GACHD,EAAKK,mBAAmB1f,GAE1Bkf,EAAQjV,EAAE/J,OAAO+M,OACnB,EACA8P,EAAQa,QAAU,SAAC3T,GACjBkV,EAAOlV,EACT,CACF,GACF,GAAC,CAAAjK,IAAA,SAAA6B,MACD,SAAO7B,GAAqB,IAAA2f,EAAA,KAAhBL,EAAMlc,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,IAAAA,UAAA,GACZoc,EAAKld,KAAK6a,GAAGI,YAAYjb,KAAKsa,UAAW,aACzCG,EAAUyC,EAAGR,YAAY1c,KAAKsa,WAAWzY,OAAOnE,GACpD,OAAO,IAAIif,SAAQ,SAACC,EAASC,GAC3BpC,EAAQY,UAAY,SAAC1T,GACdqV,GACHK,EAAKD,mBAAmB1f,GAE1Bkf,EAAQjV,EACV,EACA8S,EAAQa,QAAU,SAAC3T,GACjBkV,EAAOlV,EACT,CACF,GACF,GAAC,CAAAjK,IAAA,SAAA6B,MACD,WACE,IACIkb,EADKza,KAAK6a,GAAGI,YAAYjb,KAAKsa,UAAW,aAC5BoC,YAAY1c,KAAKsa,WAAWgD,SAC7C,OAAO,IAAIX,SAAQ,SAACC,EAASC,GAC3BpC,EAAQY,UAAY,SAAC1T,GACnB,IAAI4V,EAAM5V,EAAE/J,OAAO+M,OACnBiS,EAAQW,EAAI7T,KAAI,SAACpK,GACf,OAAOA,EAAIwd,MACb,IACF,EACArC,EAAQa,QAAU,SAAC3T,GACjBkV,EAAOlV,EACT,CACF,GACF,GAAC,CAAAjK,IAAA,YAAA6B,MACD,SAAU7B,EAAK6D,GAAU,IAAAic,EAAA,KAClBxd,KAAKub,kBAAkB7d,KAC1BsC,KAAKub,kBAAkB7d,GAAuB,IAAIgE,KAEpD,IAAIa,EAAMvC,KAAKub,kBAAkB7d,GAEjC,OADA6E,EAAIZ,IAAIJ,GACD,CACLK,OAAQ,WACNW,EAAIV,OAAON,GACNgB,EAAIT,aACA0b,EAAKjC,kBAAkB7d,EAElC,EAEJ,GAAC,CAAAA,IAAA,OAAA6B,MACD,WACE6F,OAAOmU,oBAAoB,UAAWvZ,KAAKwb,gBAC3Cxb,KAAKub,kBAAoB,KACzBkC,EAAIC,MAAM1d,KAAKpB,KACjB,KAACwb,CAAA,CApJW,GAsJVqD,EAAG,oBAAAA,KAAA3d,EAAAA,EAAAA,GAAA,KAAA2d,EAAA,CAkBJ,OAlBI/c,EAAAA,EAAAA,GAAA+c,EAAA,OAAA/f,IAAA,iBAAA4E,IACL,WACE,OAAO4X,CACT,GAAC,CAAAxc,IAAA,OAAA6B,MACD,WAA2D,IAA/C8a,EAAMvZ,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAAGqZ,EAAiBG,EAASxZ,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAAG,QAC5CpD,EAAM2c,EAAS,IAAMC,EAIzB,OAHKta,KAAK2d,KAAKjgB,KACbsC,KAAK2d,KAAKjgB,GAAO,IAAI0c,EAAWC,EAAQC,IAEnCta,KAAK2d,KAAKjgB,EACnB,GAAC,CAAAA,IAAA,QAAA6B,MACD,SAAa8a,GAEX,IAAK,IAAI3c,KADT0H,OAAOsV,UAAUkD,eAAevD,GAChBra,KAAK2d,KACfjgB,EAAI4G,MAAM,KAAK,KAAO+V,UACjBra,KAAK2d,KAAKjgB,EAGvB,KAAC+f,CAAA,CAlBI,GAoBPpe,EAAcoe,EAAK,OAAQ5f,OAAO4C,OAAO,O,cC5vC1B,SAASod,EAAeC,EAAQC,GAC7C,MAAQlgB,OAAOC,UAAUC,eAAeC,KAAK8f,EAAQC,IAEpC,QADfD,GAAS,EAAAE,EAAA,GAAeF,MAG1B,OAAOA,CACT,CCNe,SAASG,IActB,OAZEA,EADqB,qBAAZC,SAA2BA,QAAQ5b,IACrC4b,QAAQ5b,IAAI6b,OAEZ,SAAcvgB,EAAQmgB,EAAUK,GACrC,IAAIC,EAAO,EAAczgB,EAAQmgB,GACjC,GAAKM,EAAL,CACA,IAAIrI,EAAOnY,OAAOygB,yBAAyBD,EAAMN,GACjD,OAAI/H,EAAK1T,IACA0T,EAAK1T,IAAItE,KAAK8C,UAAU1C,OAAS,EAAIR,EAASwgB,GAEhDpI,EAAKzW,KALK,CAMnB,EAEK0e,EAAK7U,MAAMpJ,KAAMc,UAC1B,C,cCZayd,EAAY1gB,OAAO6E,OAAO,CACrC8b,WAAY,aACZC,aAAc,eACdC,kBAAmB,oBACnBC,qBAAsB,uBACtBC,oBAAqB,sBACrBC,mBAAoB,qBACpBC,iBAAkB,mBAElBC,WAAY,aACZC,YAAa,cACbC,WAAY,aACZC,aAAc,eACdC,gBAAiB,kBAEjBC,oBAAqB,sBACrBC,uBAAwB,yBACxBC,sBAAuB,wBACvBC,qBAAsB,uBAEtBC,OAAQ,SACRC,cAAe,kBA4BJC,EAAY,WAoBvB,SAAAA,EAAYC,IAAY7f,EAAAA,EAAAA,GAAA,KAAA4f,IAAAE,EAAAA,EAAAA,GAAA,qBAfR,IAAIpd,MAAKod,EAAAA,EAAAA,GAAA,gBAMd,IAAIle,MAAKke,EAAAA,EAAAA,GAAA,mBAMN,MAIZ5f,KAAK6f,YAAcF,CACrB,CAuDC,OArDDjf,EAAAA,EAAAA,GAAAgf,EAAA,EAAAhiB,IAAA,aAAA6B,MACA,SAAW3B,GACToC,KAAK8f,SAASne,IAAI/D,EACpB,GAEA,CAAAF,IAAA,eAAA6B,MACA,SAAa3B,GACXoC,KAAK8f,SAASje,OAAOjE,EACvB,GAEA,CAAAF,IAAA,YAAA6B,MAMA,SAAUsV,EAAMkL,GAAS,IAAAC,EACW9Y,EADXG,GAAAC,EAAAA,EAAAA,GACFtH,KAAK8f,UAAQ,IAAlC,IAAAzY,EAAAE,MAAAL,EAAAG,EAAAG,KAAAC,MAAoC,CAAnBP,EAAA3H,MACRgZ,cACL,IAAIH,YAAYvD,EAAM,CACpByD,OAAQyH,IAGd,CAAC,OAAArY,GAAAL,EAAAM,EAAAD,EAAA,SAAAL,EAAAO,GAAA,CAEe,QAAhBoY,EAAAhgB,KAAK6f,mBAAW,IAAAG,GAAhBA,EAAAhiB,KAAAgC,MAAmB,WACjB,IAAMigB,EAAgBF,GAA8B,kBAAZA,GAAoBzf,EAAAA,EAAAA,GAAA,GAAQyf,GAAYA,EAChF,MAAO,CAAC,UAAD9d,OAAW4S,EAAI,KAAKoL,EAC7B,GACF,GAEA,CAAAviB,IAAA,OAAA6B,MAOA,SAAKsV,EAAMkL,GAA4B,IAAA1e,EAAA,KAAAqa,EAAA5a,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAAJ,CAAC,EAAdof,EAAQxE,EAARwE,SACpB,GAAwB,kBAAbA,GAA0BA,EAArC,CAKIlgB,KAAKmgB,cAAchP,IAAI0D,IACzBzP,OAAOsN,aAAa1S,KAAKmgB,cAAc7d,IAAIuS,IAE7C,IAAMuL,EAA8B,kBAAbF,EAAwBA,EA1HlB,GA2HvBG,EAAYjb,OAAOuB,YAAW,WAClCtF,EAAKif,UAAUzL,EAAyB,oBAAZkL,EAAyBA,IAAYA,GACjE1e,EAAK8e,cAActe,OAAOgT,EAC5B,GAAGuL,GACHpgB,KAAKmgB,cAAc5d,IAAIsS,EAAMwL,EAV7B,MAFErgB,KAAKsgB,UAAUzL,EAAyB,oBAAZkL,EAAyBA,IAAYA,EAarE,KAACL,CAAA,CA7EsB,GC7ClB,SAASQ,EAAS3e,EAAUgf,GAEjC,IAAIC,EACEC,EAEJ,WAAa,QAAAC,EAAA5f,UAAA1C,OAATuiB,EAAI,IAAA9Y,MAAA6Y,GAAAzD,EAAA,EAAAA,EAAAyD,EAAAzD,IAAJ0D,EAAI1D,GAAAnc,UAAAmc,GACNvK,aAAa8N,GACbA,EAAQ7Z,YAAW,kBAAMpF,EAAQ6H,WAAC,EAAGuX,EAAK,GAAEJ,EAC9C,EAIF,OAHAE,EAAUG,OAAS,WACjBlO,aAAa8N,EACf,EACO,CACT,CClBA,IAAMK,EAAiC,oCAE1BC,EAAmB,oBAAAA,KAAAhhB,EAAAA,EAAAA,GAAA,KAAAghB,EAAA,CA4C7B,OA5C6BpgB,EAAAA,EAAAA,GAAAogB,EAAA,OAAApjB,IAAA,iBAAA6B,MAgB9B,SAAsBwhB,GACc,IAA9B/gB,KAAKghB,gBAAgBlf,MACvB9B,KAAKihB,gBAEPjhB,KAAKghB,gBAAgBrf,IAAIof,EAC3B,GAEA,CAAArjB,IAAA,mBAAA6B,MAIA,SAAwBwhB,GACtB/gB,KAAKghB,gBAAgBnf,OAAOkf,GACM,IAA9B/gB,KAAKghB,gBAAgBlf,MACvB9B,KAAKkhB,eAET,GAEA,CAAAxjB,IAAA,gBAAA6B,MACA,WACE6F,OAAO8T,iBAAiB,SAAUlZ,KAAKmhB,MAAO,CAAEC,SAAS,EAAMC,SAAS,IACxErhB,KAAKmhB,OACP,GAEA,CAAAzjB,IAAA,gBAAA6B,MACA,WACE6F,OAAOmU,oBAAoB,SAAUvZ,KAAKmhB,MAAO,CAAEE,SAAS,IAC5D9Y,SAAS+Y,gBAAgB3b,MAAM4b,eAAeV,EAChD,KAACC,CAAA,CA5C6B,IA6C/BlB,EAAAA,EAAAA,GA7CYkB,EAAmB,kBAKL,IAAIpf,MAAKke,EAAAA,EAAAA,GALvBkB,EAAmB,QAQfZ,GAAS,WACtB3X,SAAS+Y,gBAAgB3b,MAAMyK,YAAYyQ,EAAgC,GAAF5e,OAAKmD,OAAOoc,YAAW,MAClG,GAAG,MCbE,ICOMC,EAAgB,SAACC,EAAQC,GAEpC,OADmB,IAAIC,KAAKC,YAAYH,GAAQI,OAAOH,EAEzD,ECVMI,EAAsB,SAACxiB,GAAK,OAAKA,CAAK,EACtCmF,GAAa,KACbC,GAAc,KACdqd,GAAgB,UAef,SAASC,GAAkBjc,EAAU5D,GAAoB,IAAdqV,EAAO3W,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAAG,CAAC,EAC3DohB,EAA4FzK,EAAtF0K,UAAAA,OAAS,IAAAD,EAAGxd,GAAUwd,EAAAE,EAAgE3K,EAA9D4K,WAAAA,OAAU,IAAAD,EAAGzd,GAAWyd,EAAAE,EAAsC7K,EAApC8K,UAAAA,OAAS,IAAAD,EAAGP,EAAmBO,EAEvF,IAAK,IAAI5kB,KAAO0E,EAAM,KAAAogB,EAChBjjB,EAAiB,QAAZijB,EAAGpgB,EAAK1E,UAAI,IAAA8kB,OAAA,EAATA,EAAWC,WACvBzc,EAAWA,EAAS2G,WAAWwV,EAAYzkB,EAAM2kB,EAA6B,kBAAV9iB,EAAqBgjB,EAAUhjB,GAASA,EAC9G,CACA,OAAOyG,CACT,CAMO,SAAS0c,GAAiB1c,GAG/B,IAFA,IAAM2c,EAAgB,GAClBhI,EAAO3U,EAAS/H,QAAQyG,KACX,IAAViW,GAAa,CAClB,IAAMiI,EAAQ5c,EAAS/H,QAAQ0G,GAAagW,GACtCkI,EAAW7c,EAAS8c,UAAUnI,EAAO,EAAGiI,GAC9C,GAAIC,EAAS7jB,WAAWgjB,IAAgB,CACtC,IAAMe,EAAW/c,EAAS8c,UAAUnI,EAAO,EAAGiI,GAAO3jB,QAAQ+iB,GAAe,IACtEtkB,EAAMqlB,EAASD,UAAU,EAAGC,EAAS9kB,QAAQ,MAC7C0jB,EAAQoB,EAASD,UAAUC,EAAS9kB,QAAQ,KAAO,EAAG8kB,EAAS9kB,QAAQ,MAC7E0kB,EAAc5a,KAAK,CAAE8a,SAAAA,EAAUG,UAAWtlB,EAAKulB,cAAetB,GAChE,CACAhH,EAAO3U,EAAS/H,QAAQyG,GAAYke,EACtC,CACA,OAAOD,CACT,CCtCO,I,sBCXP,SAASO,GAAS/iB,GACd,MAA6C,oBAAtCtC,OAAOC,UAAU2kB,SAASzkB,KAAKmC,EAC1C,CAEA,IAAMgjB,GAAY,QAClB,SAASC,GAAeC,GACpB,OAAOA,EACF/e,MAAM6e,IACNzZ,KAAI,SAAC4Z,EAAMC,GAAK,OAAKD,EAAKzf,OAAO,GAAG0f,EAAQ,EAAI,cAAgB,iBACjED,EAAKlc,MAAM,EAAE,IACZwC,KAAK,GACd,CACA,SAAS4Z,GAAmBC,GAA4C,IAAA/H,EAAA5a,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAApB,CAAE4iB,WAAY,IAA7BA,EAAUhI,EAAVgI,WACjC,OAAK7b,MAAM8b,QAAQF,GAGZA,EAAM/Z,KAAI,SAACjD,GAAI,OAAKmd,GAAand,EAAM,CAAEid,WAAAA,GAAa,IAFlDD,CAGf,CACA,SAASG,GAAapmB,GAA6C,IAAAqmB,EAAA/iB,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAApB,CAAE4iB,WAAY,IAA7BA,EAAUG,EAAVH,WAC5B,GAAI7b,MAAM8b,QAAQnmB,GACd,OAAOgmB,GAAmBhmB,EAAQ,CAAEkmB,WAAAA,IAExC,IAAKR,GAAS1lB,GACV,OAAOA,EAGX,IADA,IAAMmN,EAAS,CAAC,EAChBkH,EAAA,EAAAiS,EAAkBjmB,OAAOmD,KAAKxD,GAAOqU,EAAAiS,EAAA1lB,OAAAyT,IAAE,CAAlC,IAAMnU,EAAGomB,EAAAjS,GACNtS,EAAQ/B,EAAOE,GACfgmB,EAAWziB,SAASvD,GACpBiN,EAAOjN,GAAO6B,GAGd2jB,GAAS3jB,GACTA,EAAQqkB,GAAarkB,EAAO,CAAEmkB,WAAAA,IAEzB7b,MAAM8b,QAAQpkB,KACnBA,EAAQikB,GAAmBjkB,EAAO,CAAEmkB,WAAAA,KAExC/Y,EAAOyY,GAAe1lB,IAAQ6B,EAClC,CACA,OAAOoL,CACX,CAOA,IAAMoZ,GAAQ,SAACC,GAAE,OAAK,IAAIrH,SAAQ,SAACC,GAAO,OAAKjW,WAAWiW,EAASoH,EAAG,GAAC,EAEvE,SAASC,GAAcC,GAA+E,IAA5EC,EAAWD,EAAXC,YAAaC,EAAcF,EAAdE,eAAgBC,EAASH,EAATG,UAASC,EAAAJ,EAAEK,UAAAA,OAAS,IAAAD,EAAG,GAAEA,EAAAE,EAAAN,EAAEO,YAAAA,OAAW,IAAAD,EAAG,GAAEA,EACxFE,EAAe,aACrB,GAAyB,kBAAdL,EACP,OAAOA,EAEX,GAAyB,oBAAdA,EACP,OAAOA,EAAU,CACbE,UAAAA,EACAJ,YAAAA,EACAC,eAAAA,EACAM,aAAAA,EACAD,YAAAA,IAGR,IAAME,EAAW,CAACR,EAAaC,EAAgBG,GAC1CK,OAAOpa,SACPZ,KAAK,KACJib,EAAe,CAACH,EAAcD,GAAaG,OAAOpa,SAASZ,KAAK,MACtE,MAAO,GAAP3H,OAAU0iB,EAAQ,MAAA1iB,OAAK4iB,EAAY,IACvC,CAEA,IAAMC,GAAiB,CACnBC,OAAQ,EACRC,KAAM,KAgBT,IAEKC,GAAe,SAAAC,IAAA3f,EAAAA,EAAAA,GAAA0f,EAAAC,GAAA,IAAA1f,GAAAC,EAAAA,EAAAA,GAAAwf,GAAA,SAAAA,IAAA,OAAAnlB,EAAAA,EAAAA,GAAA,KAAAmlB,GAAAzf,EAAA4D,MAAA,KAAAtI,UAAA,QAAAJ,EAAAA,EAAAA,GAAAukB,EAAA,GAAArO,EAAAA,EAAAA,GAAS9J,QAGxBqY,GAAY,SAAAC,IAAA7f,EAAAA,EAAAA,GAAA4f,EAAAC,GAAA,IAAAhY,GAAA3H,EAAAA,EAAAA,GAAA0f,GAEd,SAAAA,EAAYE,GAAe,IAAAhkB,EAKoB,OALpBvB,EAAAA,EAAAA,GAAA,KAAAqlB,GACvB9jB,EAAA+L,EAAApP,KAAA,OAAQ4hB,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,gCACRA,EAAKzC,KAAO,eACZyC,EAAKikB,QAAU,gBACfznB,OAAO0nB,gBAAcjY,EAAAA,EAAAA,GAAAjM,GAAO8jB,EAAarnB,WACzCuD,EAAKmkB,sBAAwBH,EAAchkB,CAC/C,CAAC,OAAAX,EAAAA,EAAAA,GAAAykB,EAAA,CARa,CAASF,IAWrBQ,GAAW,SAACC,EAAQnkB,GAClBmkB,IACIA,EAAOC,QACPhJ,QAAQC,UAAUgJ,KAAKrkB,GAGvBmkB,EAAOxM,iBAAiB,SAAS,kBAAM3X,GAAU,GAAE,CAAEskB,MAAM,IAGvE,EAEMC,GAAW,SAAAC,IAAAxgB,EAAAA,EAAAA,GAAAugB,EAAAC,GAAA,IAAAhQ,GAAAtQ,EAAAA,EAAAA,GAAAqgB,GAEb,SAAAA,IAA0C,IAAAtkB,EAA9B8jB,EAAOxkB,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAAG,mBAGiC,OAHfhB,EAAAA,EAAAA,GAAA,KAAAgmB,GACpCtkB,EAAAuU,EAAA/X,KAAA,KAAMsnB,IAAS1F,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAA9L,GAAA,YAFR,GAGPA,EAAK5C,KAAO,cACZf,OAAO0nB,gBAAcjY,EAAAA,EAAAA,GAAA9L,GAAOskB,EAAYhoB,WAAW0D,CACvD,CAAC,OAAAd,EAAAA,EAAAA,GAAAolB,EAAA,CANY,CAASb,IAUpBe,GAAO,SAAHC,GAAA,IAAMC,EAAKD,EAALC,MAAKC,EAAAF,EAAEG,SAAAA,OAAQ,IAAAD,EADN,IACyBA,EAAE/F,EAAO6F,EAAP7F,QAASsF,EAAMO,EAANP,OAAM,OAAO,IAAI/I,SAAQ,SAACC,EAASC,GAC5F,IAAIwJ,EACAhG,EACJoF,GAASC,GAAQ,WACbW,GAAiB3T,aAAa2T,GAC9BxJ,EAAO,IAAIiJ,GAAY,kBAC3B,IACI1F,IACAC,EAAY1Z,YAAW,WACnB0f,GAAiB3T,aAAa2T,GAC9BxJ,EAAO,IAAIiJ,GAAY,aAC3B,GAAG1F,IAwBPiG,EAAgB1f,YAtBH,SAAP2f,IACF,IACI3J,QAAQC,QAAQsJ,EAAMR,IACjBE,MAAK,SAACjb,GACHA,GACA0V,GAAa3N,aAAa2N,GAC1BzD,EAAQjS,IAGR0b,EAAgB1f,WAAW2f,EAAMF,EAEzC,IACKG,OAAM,SAAChP,GACR8I,GAAa3N,aAAa2N,GAC1BxD,EAAOtF,EACX,GAKJ,CAHA,MAAOA,GACH8I,GAAa3N,aAAa2N,GAC1BxD,EAAOtF,EACX,CACJ,GACiC,EACrC,GAAE,EAMIiP,GAAkB,CACpBC,QAAS,uBACTC,QAAS,gCACTC,iBAAkB,SAClBC,8BAA+B,EAC/BC,0BAA2B,EAC3BC,qBAAsB,SACtBC,mBAAoB,QACpBC,yBAA0B,QAC1BC,sBAAuB,EACvBC,2BAA4B,IAC5BC,UAAW,wBAETC,GAAqB,2BACrBC,GAAkB,WAElB5M,GAAU,SAAH6M,GAAA,IAAMC,EAAMD,EAANC,OAAQ7Q,EAAG4Q,EAAH5Q,IAAKtU,EAAIklB,EAAJllB,KAAIolB,EAAAF,EAAEG,QAAAA,OAAO,IAAAD,EAAG,CAAC,EAACA,EAAE9B,EAAM4B,EAAN5B,OAAQgC,EAAUJ,EAAVI,WAAU,OAAO,IAAI/K,SAAQ,SAACC,EAASC,GAC/F,IAAM8K,EAAM,IAAIC,eACVC,GAAsB,OAANN,QAAM,IAANA,OAAM,EAANA,EAAQzoB,gBAAiB,MAC3C6mB,GAAU,EAOdgC,EAAIhN,KAAKkN,EAAenR,GAAK,GACzB+Q,GACA5pB,OAAOiqB,QAAQL,GAASnmB,SAAQ,SAACymB,GAC7B,IAAAC,GAAAC,EAAAA,GAAAA,GAAqBF,EAAK,GAAnBrqB,EAAGsqB,EAAA,GAAEzoB,EAAKyoB,EAAA,GACA,qBAAVzoB,IACFsI,MAAM8b,QAAQpkB,IACfooB,EAAIO,iBAAiBxqB,EAAK6B,EAClC,IAEJooB,EAAIQ,aAAe,OACnB1C,GAASC,GAAQ,WACbC,GAAU,EACVgC,EAAIS,QACJvL,EAAO,IAAIiJ,GACf,IACA6B,EAAI5X,OAAS,WACT,GAAkB,KAAd4X,EAAIU,OAEJxL,EAAO,IAAI/P,MAAM,SAAD7K,OAAU0lB,EAAIU,OAAM,MAAApmB,OAAK0lB,EAAIW,kBAE5C,CACD,IAAM7N,EAAU,CACZ8M,OAAQM,EACRnR,IAAAA,EACAtU,KAAAA,EACAqlB,QAASA,QAAW1mB,EACpB2kB,OAAAA,EACAgC,WAAAA,GAIEa,EAAeZ,EAChBa,wBACAve,OACA3F,MAAM,WAELmkB,EAAkB,CAAC,EACzBF,EAAajnB,SAAQ,SAAUonB,GAC3B,IAAMC,EAAQD,EAAKpkB,MAAM,MACnBskB,EAASD,EAAME,QACftpB,EAAQopB,EAAM/e,KAAK,MACrBgf,GAA4B,qBAAXA,IACjBH,EAAgBG,GAAUrpB,EAElC,IACA,IAAMupB,EAAenB,EAAIoB,SACnBC,EAAiBrB,EAAIU,OAC3BzL,EAAQ,CACJnC,QAAAA,EACArY,KAAM0mB,EACNrB,QAASgB,EACTJ,OAAQW,GAEhB,CACJ,EACArB,EAAIrM,QAAU,SAAC+J,GACPM,GAGJ9I,EAAO,IAAIsI,GAAaE,GAC5B,EACIqC,GAAoC,oBAAfA,IACrBC,EAAIsB,OAAOC,WAAa,SAAC/Q,GACjBA,EAAMgR,iBACNzB,EAAW,CACP0B,cAAc,EACd7pB,MAAO4Y,EAAMkR,OAASlR,EAAMmR,QAIhC5B,EAAW,CAAE0B,cAAc,GAEnC,GAEAhnB,EACAulB,EAAI4B,KAAKnnB,GAGTulB,EAAI4B,MAEZ,GAAE,EAOF,IACMC,GALN,SAAkBlqB,GACd,OAAOA,CACX,EAQMmqB,GAAS,SAACrnB,GACZ,MAAuB,qBAATiU,MAAwBjU,aAAgBiU,IAC1D,EACMqT,GAAS,SAACtnB,GACZ,MAAuB,qBAATunB,MAAwBvnB,aAAgBunB,IAC1D,EACMC,GAAqB,SAACxnB,GACxB,QAAUA,GACU,kBAATA,IACNyF,MAAM8b,QAAQvhB,IACf,QAASA,GACW,kBAAbA,EAAKynB,GACpB,EACMC,GAAa,SAAC1nB,GAChB,OAAQqnB,GAAOrnB,IAASsnB,GAAOtnB,IAAuBwnB,GAAmBxnB,EAC7E,EAcA,SAAS2nB,GAAcC,EAAQC,EAAUC,GACrC,GAAIriB,MAAM8b,QAAQuG,GAAa,KACGhjB,EADHG,GAAAC,EAAAA,EAAAA,GACP4iB,GAAU,IAA9B,IAAA7iB,EAAAE,MAAAL,EAAAG,EAAAG,KAAAC,MAAgC,KAArBlI,EAAK2H,EAAA3H,MACZwqB,GAAcC,EAAQ,GAAF/nB,OAAKgoB,EAAQ,MAAM1qB,EAC3C,CAAC,OAAAmI,GAAAL,EAAAM,EAAAD,EAAA,SAAAL,EAAAO,GAAA,CACL,MACK,GAVW,SAACrI,GAAK,QAAOA,GACZ,kBAAVA,GACP,SAAUA,GACVuqB,GAAWvqB,EAAM6C,KAAK,CAOb+nB,CAAYD,GAAa,CAC9B,IAAQtrB,EAAsBsrB,EAAtBtrB,KAAMwrB,EAAgBF,EAAhBE,YACRC,EAAOb,GAAcU,EAAW9nB,KAAMxD,EAAiB,OAAXwrB,QAAW,IAAXA,EAAAA,EAAehD,IAC3D3P,EA5CS,SAAH6S,GAAA,IAAM1rB,EAAI0rB,EAAJ1rB,KAAI,OAAOA,EAAO,CAACA,GAAQ,EAAE,CA4C/B2rB,CAAe,CAAE3rB,KAAAA,EAAMwrB,YAAAA,IACvCJ,EAAOjiB,KAAK,CAACkiB,EAAUI,GAAIpoB,QAAAvD,EAAAA,EAAAA,GAAK+Y,IACpC,MACK,GAnBa,SAAClY,GACnB,QAASA,GAA0B,kBAAVA,IAAuBsI,MAAM8b,QAAQpkB,EAClE,CAiBairB,CAAcN,GACnB,IAAK,IAALpX,EAAA,EAAA2X,EAA2B5sB,OAAOiqB,QAAQoC,GAAWpX,EAAA2X,EAAArsB,OAAA0U,IAAE,CAAlD,IAAA4X,GAAAzC,EAAAA,GAAAA,GAAAwC,EAAA3X,GAAA,GAAOpV,EAAGgtB,EAAA,GAAEnrB,EAAKmrB,EAAA,GACG,qBAAVnrB,GACPyqB,EAAOjiB,KAAK,CAAC,GAAD9F,OAAIgoB,EAAQ,KAAAhoB,OAAIvE,EAAG,KAAK8O,OAAOjN,IAEnD,MA7Bc,SAACA,GACnB,MAAyB,kBAAVA,GACM,kBAAVA,GACU,qBAAVA,CACf,EA2BaorB,CAAcT,IAAeA,GAClCF,EAAOjiB,KAAK,CAACkiB,EAAUC,EAAWzH,YAE1C,CAQA,SAASmI,GAAcnT,GACnB,IAE+BvN,EAFzB2gB,EAhEc,IAAIC,SAiElBC,EATV,SAA2BtT,GAEvB,IADA,IAAMuS,EAAS,GACfgB,EAAA,EAAAC,EAA2BptB,OAAOiqB,QAAQrQ,GAAQuT,EAAAC,EAAA7sB,OAAA4sB,IAAE,CAA/C,IAAAE,GAAAjD,EAAAA,GAAAA,GAAAgD,EAAAD,GAAA,GACDjB,GAAcC,EADHkB,EAAA,GAAOA,EAAA,GAEtB,CACA,OAAOlB,CACX,CAGuBmB,CAAkB1T,GAASpN,GAAA/C,EAAAA,EAAAA,GACzByjB,GAAU,IAA/B,IAAA1gB,EAAA9C,MAAA2C,EAAAG,EAAA7C,KAAAC,MAAiC,KAAtBuiB,EAAM9f,EAAA3K,MACb6rB,GAAAC,EAAAA,GAAAA,GAA8BrB,GAAvBtsB,EAAG0tB,EAAA,GAAE7rB,EAAK6rB,EAAA,GAAKE,EAAIF,EAAAhkB,MAAA,GAE1ByjB,EAAS1hB,OAAMC,MAAfyhB,EAAQ,CAAQntB,EAAK6B,GAAK0C,QAAAvD,EAAAA,EAAAA,GAAK4sB,IACnC,CAAC,OAAA5jB,GAAA2C,EAAA1C,EAAAD,EAAA,SAAA2C,EAAAzC,GAAA,CACD,OAAOijB,CACX,CAAC,IAEKU,GAAW,SAAAC,IAAAjmB,EAAAA,EAAAA,GAAAgmB,EAAAC,GAAA,IAAAC,GAAAhmB,EAAAA,EAAAA,GAAA8lB,GAKb,SAAAA,EAAYjG,EAASoG,EAAMjR,EAASsO,EAAUtB,GAAS,IAAA/hB,EAQA,OARA5F,EAAAA,EAAAA,GAAA,KAAAyrB,GACnD7lB,EAAA+lB,EAAAztB,KAAA,OAAQ4hB,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAA5H,GAAA,gBAAAka,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAA5H,GAAA,mBAAAka,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAA5H,GAAA,oBAAAka,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAA5H,GAAA,kBACRA,EAAK9G,KAAO,cACZ8G,EAAK4f,QAAUA,EACf5f,EAAKgmB,KAAOA,EACZhmB,EAAK+U,QAAUA,EACf/U,EAAKqjB,SAAWA,EAChBrjB,EAAK+hB,QAAUA,EACf5pB,OAAO0nB,gBAAcjY,EAAAA,EAAAA,GAAA5H,GAAO6lB,EAAYztB,WAAW4H,CACvD,CAAC,OAAAhF,EAAAA,EAAAA,GAAA6qB,EAAA,CAdY,CAAStG,IAuCpB0G,GAAS,SAACtN,EAAMna,EAAM0nB,GACxB,IAAMlV,EAAM,IAAIH,IAAI8H,GAKpB,OAJA3H,EAAImV,UAAYnV,EAAImV,SAAW3nB,GAAMjF,QAAQ,KAAM,KAC/C2sB,IACAlV,EAAIiB,OA1Bc,SAACiU,GAEvB,IADA,IAAME,EAAe,IAAIC,gBAAkBzhB,EAAA,WACtC,IAAA0hB,GAAA/D,EAAAA,GAAAA,GAAAgE,EAAAC,GAAA,GAAOxuB,EAAGsuB,EAAA,GAAEzsB,EAAKysB,EAAA,GACdzsB,GAA0B,kBAAVA,IAAuBsI,MAAM8b,QAAQpkB,GACrD1B,OAAOiqB,QAAQvoB,GACVqlB,QAAO,SAACmD,GAAK,IAAAoE,EAAA,OAAa,QAAbA,EAAKpE,EAAM,UAAE,IAAAoE,GAAAA,CAAS,IACnC7qB,SAAQ,SAACymB,GAAK,OAAK+D,EAAavpB,IAAI,GAADN,OAAIvE,EAAG,KAAAuE,OAAI8lB,EAAM,GAAE,KAAKvb,OAAOub,EAAM,IAAI,IAE5ElgB,MAAM8b,QAAQpkB,GACnBA,EAAM+B,SAAQ,SAACV,GACXkrB,EAAa3iB,OAAO,GAADlH,OAAIvE,EAAG,MAAMkD,EACpC,IAEsB,kBAAVrB,GAAsBA,EAClCusB,EAAavpB,IAAI7E,EAAK6B,GAEA,kBAAVA,GACZusB,EAAavpB,IAAI7E,EAAK6B,EAAMkjB,WAC/B,EAhBLyJ,EAAA,EAAAD,EAA2BpuB,OAAOiqB,QAAQ8D,GAAMM,EAAAD,EAAA7tB,OAAA8tB,IAAE5hB,IAkBlD,OAAOwhB,EAAarJ,UACxB,CAKqB2J,CAAkBR,IAE5BlV,EAAI+L,UACf,EAMA,SAAS4J,GAAa5U,GAClB,OAAOwM,IAAc3jB,EAAAA,EAAAA,GAAC,CAClB6jB,YAJa,yBAKbC,eAPM,UAQH3M,GAEX,CAgBA,SAAS6U,GAAcjd,EAAIoI,GACvB,IAAQmP,EAA6DnP,EAA7DmP,8BAA+BC,EAA8BpP,EAA9BoP,0BACvC,OAtWJ,SAAiBxX,GAA8B,IAA1BoI,EAAO3W,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAAGgkB,GACvByH,EAAW,EACf,SAASC,EAAWnd,GAChB,IAAMod,EAAmB3oB,KAAK4oB,MAAMjV,EAAQuN,KAAIlhB,KAAA6oB,IAAGlV,EAAQsN,OAAUwH,IAKrE,OAAOld,EAAG,CACNud,QAASL,EACTM,MANU,SAAC7I,GAAE,OAAKD,GAAQ,OAAFC,QAAE,IAAFA,EAAAA,EAAMyI,GAAkB7G,MAAK,WAErD,OADA2G,GAAY,EACLC,EAAWnd,EACtB,GAAE,GAKN,CACA,OAAOmd,EAAWnd,EACtB,CAwVWyd,EAAQ,SAAAC,GAAA,IAAGH,EAAOG,EAAPH,QAASC,EAAKE,EAALF,MAAK,OAAOxd,IAAKkX,OAAM,SAAChP,GAC/C,GAAI,aAAcA,GAjBS,2BAkBlB,OAALA,QAAK,IAALA,OAAK,EAALA,EAAOmU,OACPkB,EAAUhG,EACV,OAAOiG,EAjBnB,SAAwCtV,GACpC,IAAQkQ,GAAYlQ,GAAS,CAAC,GAAtBkQ,QACR,IAAKA,GAA6C,kBAA3BA,EAAQ,eAC3B,OAL4B,KAOhC,IAAMuF,EAAUtgB,SAAS+a,EAAQ,eAAgB,IACjD,OAAK9V,OAAOsb,SAASD,GAGJ,IAAVA,EAXyB,IAYpC,CAOyBE,CAA+B3V,IAEhD,GAAIA,aAAiB4N,IACjByH,EAAU/F,EACV,OAAOgG,EAtBmB,KAsBZD,EAAU,IAE5B,MAAMrV,CACV,GAAE,GACN,CAEA,IAoEI4V,GAqCAC,GAzGEC,GAAiB,SAAChD,GACpB,IAAID,EAAc,GAIlB,OAHIX,GAAOY,IAASX,GAAOW,IAAST,GAAmBS,MACnDD,EAAcC,EAAKxV,MAEhBuV,GAAehD,EAC1B,EAEMkG,GAAc,SAACjD,GACjB,IAAIkD,EAAW,GAUf,OATI7D,GAAOW,IAASA,EAAKzrB,KACrB2uB,EAAWlD,EAAKzrB,KAEX6qB,GAAOY,GACZkD,EAAW,GAEN3D,GAAmBS,IAASA,EAAKzrB,OACtC2uB,EAAWlD,EAAKzrB,MAEb2uB,GAAYlG,EACvB,EAEA,SAASmG,GAAcvtB,GACnB,MAAqB,qBAAVA,GAAmC,SAAVA,EACzB,OAEJA,EAAQ,IAAM,GACzB,CAMA,SAASoe,GAAKgM,EAAIoD,GAA+U,IAA3UlJ,EAASkJ,EAATlJ,UAAWmJ,EAAQD,EAARC,SAAUtD,EAAWqD,EAAXrD,YAAWuD,EAAAF,EAAE/G,QAAAA,OAAO,IAAAiH,EAAGnH,GAAgBE,QAAOiH,EAAEC,EAAeH,EAAfG,gBAAiBC,EAAYJ,EAAZI,aAAc5tB,EAAKwtB,EAALxtB,MAAOylB,EAAM+H,EAAN/H,OAAQgC,EAAU+F,EAAV/F,WAAUoG,EAAAL,EAAEjwB,OAAAA,OAAM,IAAAswB,EAAG,QAAOA,EAAErJ,EAAWgJ,EAAXhJ,YAAaJ,EAASoJ,EAATpJ,UAAS0J,EAAAN,EAAE7G,8BAAAA,OAA6B,IAAAmH,EAAGvH,GAAgBI,8BAA6BmH,EAAAC,EAAAP,EAAE5G,0BAAAA,OAAyB,IAAAmH,EAAGxH,GAAgBK,0BAAyBmH,EAAEC,EAAQR,EAARQ,SACjV,OAAO3B,IAAc,kBAAM7R,GAAQ,CAC/B8M,OAAQ,OACR7Q,IAAKiV,GAAOjF,EAAS,SAAU,CAC3BwH,WAAY,IAEhBzG,QAAS,CACL,kBAAmB4E,GAAa,CAAE9H,UAAAA,EAAWE,YAAAA,EAAaJ,UAAAA,KAE9DjiB,KAAMwoB,GAAc,CAChBP,KAAM,CACFjoB,KAAMioB,EACNzrB,KAAM8uB,GAAYJ,GAAYjD,GAC9BD,YAAaA,GAAeiD,GAAehD,IAE/C8D,mBAAoB5J,EACpB6J,iBAAkBZ,GAAcvtB,GAChCouB,UAAWT,EACXU,OAAQT,EACRrwB,OAAQA,EACRywB,SAAAA,IAEJvI,OAAAA,EACAgC,WAAAA,IACD9B,MAAK,SAAA2I,GAAgC,IAA7BnsB,EAAImsB,EAAJnsB,KAAMqlB,EAAO8G,EAAP9G,QAAShN,EAAO8T,EAAP9T,QAChBsO,EAAWnF,GAAahX,KAAKC,MAAMzK,IACzC,GAAI,UAAW2mB,EACX,MAAM,IAAIwC,GAAYxC,EAASxR,MAAMtI,QAAS8Z,EAASxR,MAAMiX,UAAW/T,EAASsO,EAAUtB,GAG3F,OAAOsB,CAEf,GAAE,GAAE,CAAElC,0BAAAA,EAA2BD,8BAAAA,GACrC,CAQA,SAAS6H,GAAQC,EAASC,GAAuW,IAAnWpK,EAASoK,EAATpK,UAASqK,EAAAD,EAAEjI,QAAAA,OAAO,IAAAkI,EAAGpI,GAAgBE,QAAOkI,EAAE3uB,EAAK0uB,EAAL1uB,MAAOytB,EAAQiB,EAARjB,SAAUmB,EAAqBF,EAArBE,sBAAuBC,EAA0BH,EAA1BG,2BAA4BlB,EAAee,EAAff,gBAAiBC,EAAYc,EAAZd,aAAYkB,EAAAJ,EAAEnxB,OAAAA,OAAM,IAAAuxB,EAAG,MAAKA,EAAErJ,EAAMiJ,EAANjJ,OAAQjB,EAAWkK,EAAXlK,YAAaJ,EAASsK,EAATtK,UAAS2K,EAAAL,EAAE/H,8BAAAA,OAA6B,IAAAoI,EAAGxI,GAAgBI,8BAA6BoI,EAAAC,EAAAN,EAAE9H,0BAAAA,OAAyB,IAAAoI,EAAGzI,GAAgBK,0BAAyBoI,EAAEhB,EAAQU,EAARV,SACjX,OAAO3B,IAAc,kBAAM7R,GAAQ,CAC/B8M,OAAQ,OACRE,QAAS,CACL,kBAAmB4E,GAAa,CAAE9H,UAAAA,EAAWE,YAAAA,EAAaJ,UAAAA,KAE9D3N,IAAKiV,GAAOjF,EAAS,aAAc,CAC/BwH,WAAY,EACZgB,QAAS3K,EACT4K,WAAYT,EACZzuB,MAAOutB,GAAcvtB,GACrBstB,SAAUG,EACV0B,qBAAsBP,EAAwB,OAAI9tB,EAClDsuB,oBAAqBP,EAA6B,OAAI/tB,EACtDstB,UAAWT,EACXU,OAAQT,EACRrwB,OAAQA,EACRywB,SAAAA,IAEJvI,OAAAA,IACDE,MAAK,SAAA0J,GAAgC,IAA7BltB,EAAIktB,EAAJltB,KAAMqlB,EAAO6H,EAAP7H,QAAShN,EAAO6U,EAAP7U,QAChBsO,EAAWnF,GAAahX,KAAKC,MAAMzK,IACzC,GAAI,UAAW2mB,EACX,MAAM,IAAIwC,GAAYxC,EAASxR,MAAMtI,QAAS8Z,EAASxR,MAAMiX,UAAW/T,EAASsO,EAAUtB,GAG3F,OAAOsB,CAEf,GAAE,GAAE,CAAElC,0BAAAA,EAA2BD,8BAAAA,GACrC,EAlCA,SAAWuG,GACPA,EAAgB,MAAI,QACpBA,EAAmB,SAAI,WAC1B,CAHD,CAGGA,KAAaA,GAAW,CAAC,IAkC5B,SAAWC,GACPA,EAAgB,QAAI,UACpBA,EAAgB,QAAI,UACpBA,EAAiB,SAAI,WACrBA,EAAc,MAAI,QAClBA,EAAgB,QAAI,SACvB,CAND,CAMGA,KAAWA,GAAS,CAAC,IACxB,IAAMmC,GAAkB,SAACxG,GACrB,MAAO,WAAYA,GAAYA,EAASV,SAAW+E,GAAOtgB,KAC9D,EAEA,SAAS0iB,GAAcC,GAAoP,IAAAC,EAAA5uB,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAAJ,CAAC,EAAxOyjB,EAASmL,EAATnL,UAASoL,EAAAD,EAAEhJ,QAAAA,OAAO,IAAAiJ,EAAGnJ,GAAgBE,QAAOiJ,EAAEjK,EAAMgK,EAANhK,OAAQjB,EAAWiL,EAAXjL,YAAaJ,EAASqL,EAATrL,UAASuL,EAAAF,EAAE9I,8BAAAA,OAA6B,IAAAgJ,EAAGpJ,GAAgBI,8BAA6BgJ,EAAAC,EAAAH,EAAE7I,0BAAAA,OAAyB,IAAAgJ,EAAGrJ,GAAgBK,0BAAyBgJ,EAC9P,OAAOvD,IAAc,kBAAM7R,GAAQ,CAC/B8M,OAAQ,MACRE,QAASlD,EACH,CACE,kBAAmB8H,GAAa,CAC5B9H,UAAAA,EACAE,YAAAA,EACAJ,UAAAA,UAGNtjB,EACN2V,IAAKiV,GAAOjF,EAAS,oBAAqB,CACtCwH,WAAY,EACZuB,MAAAA,IAEJ/J,OAAAA,IACDE,MAAK,SAAAkK,GAAgC,IAA7B1tB,EAAI0tB,EAAJ1tB,KAAMqlB,EAAOqI,EAAPrI,QAAShN,EAAOqV,EAAPrV,QAChBsO,EAAWnF,GAAahX,KAAKC,MAAMzK,IACzC,GAAI,UAAW2mB,IAAawG,GAAgBxG,GACxC,MAAM,IAAIwC,GAAYxC,EAASxR,MAAMtI,QAAS8Z,EAASxR,MAAMiX,UAAW/T,EAASsO,EAAUtB,GAG3F,OAAOsB,CAEf,GAAE,GAAE,CAAElC,0BAAAA,EAA2BD,8BAAAA,GACrC,CAGA,SAASmJ,GAAMC,EAAKC,GAAgS,IAA5R1L,EAAS0L,EAAT1L,UAAS2L,EAAAD,EAAEvJ,QAAAA,OAAO,IAAAwJ,EAAG1J,GAAgBE,QAAOwJ,EAAEC,EAAaF,EAAbE,cAAevC,EAAeqC,EAAfrC,gBAAiBC,EAAYoC,EAAZpC,aAAcnI,EAAMuK,EAANvK,OAAQloB,EAAMyyB,EAANzyB,OAAQinB,EAAWwL,EAAXxL,YAAaJ,EAAS4L,EAAT5L,UAAS+L,EAAAH,EAAErJ,8BAAAA,OAA6B,IAAAwJ,EAAG5J,GAAgBI,8BAA6BwJ,EAAAC,EAAAJ,EAAEpJ,0BACvO,OAAOyF,IAAc,kBAAM7R,GAAQ,CAC/B8M,OAAQ,OACRE,QAAS,CACL,kBAAmB4E,GAAa,CAAE9H,UAAAA,EAAWE,YAAAA,EAAaJ,UAAAA,KAE9D3N,IAAKiV,GAAOjF,EAAS,UAAW,CAC5BwH,WAAY,IAEhB9rB,KAAMwoB,GAAc,CAChB0F,MAAON,EACPzuB,SAAU4uB,EACVjB,QAAS3K,EACT8J,UAAWT,EACXU,OAAQT,EACRrwB,OAAAA,IAEJkoB,OAAAA,IACDE,MAAK,SAAA2K,GAAgC,IAA7BnuB,EAAImuB,EAAJnuB,KAAMqlB,EAAO8I,EAAP9I,QAAShN,EAAO8V,EAAP9V,QAChBsO,EAAWnF,GAAahX,KAAKC,MAAMzK,IACzC,GAAI,UAAW2mB,EACX,MAAM,IAAIwC,GAAYxC,EAASxR,MAAMtI,QAAS8Z,EAASxR,MAAMiX,UAAW/T,EAASsO,EAAUtB,GAG3F,OAAOsB,CAEf,GAAE,GAAE,CAAElC,+BA1B0P,IAAAwJ,EAAG7J,GAAgBK,0BAAyBwJ,EA0B3QzJ,8BAAAA,GACrC,CA4BA,SAAS4J,GAAKC,EAAIC,GAAkP,IAA9OnM,EAASmM,EAATnM,UAASoM,EAAAD,EAAEhK,QAAAA,OAAO,IAAAiK,EAAGnK,GAAgBE,QAAOiK,EAAEjL,EAAMgL,EAANhL,OAAQloB,EAAMkzB,EAANlzB,OAAQinB,EAAWiM,EAAXjM,YAAaJ,EAASqM,EAATrM,UAASuM,EAAAF,EAAE9J,8BAAAA,OAA6B,IAAAgK,EAAGpK,GAAgBI,8BAA6BgK,EAAAC,EAAAH,EAAE7J,0BACvL,OAAOyF,IAAc,kBAAM7R,GAAQ,CAC/B8M,OAAQ,MACRE,QAAS,CACL,kBAAmB4E,GAAa,CAAE9H,UAAAA,EAAWE,YAAAA,EAAaJ,UAAAA,KAE9D3N,IAAKiV,GAAOjF,EAAS,SAAU,CAC3BwH,WAAY,EACZgB,QAAS3K,EACTuM,QAASL,EACTjzB,OAAAA,IAEJkoB,OAAAA,IACDE,MAAK,SAAAmL,GAAgC,IAA7B3uB,EAAI2uB,EAAJ3uB,KAAMqlB,EAAOsJ,EAAPtJ,QAAShN,EAAOsW,EAAPtW,QAChBsO,EAAWnF,GAAahX,KAAKC,MAAMzK,IACzC,GAAI,UAAW2mB,EACX,MAAM,IAAIwC,GAAYxC,EAASxR,MAAMtI,QAAS8Z,EAASxR,MAAMiX,UAAW/T,EAASsO,EAAUtB,GAG3F,OAAOsB,CAEf,GAAE,GAAE,CAAEnC,8BAAAA,EAA+BC,+BArB2K,IAAAgK,EAAGrK,GAAgBK,0BAAyBgK,GAsBhQ,CAGA,SAASG,GAAelvB,EAAImvB,GAAuW,IAAnW1M,EAAS0M,EAAT1M,UAAW6F,EAAW6G,EAAX7G,YAAasD,EAAQuD,EAARvD,SAAQwD,EAAAD,EAAElK,mBAAAA,OAAkB,IAAAmK,EAAG1K,GAAgBO,mBAAkBmK,EAAAC,EAAAF,EAAEvK,QAAAA,OAAO,IAAAyK,EAAG,GAAEA,EAAEvD,EAAeqD,EAAfrD,gBAAiBC,EAAYoD,EAAZpD,aAAc5tB,EAAKgxB,EAALhxB,MAAOylB,EAAMuL,EAANvL,OAAM0L,EAAAH,EAAEzzB,OAAAA,OAAM,IAAA4zB,EAAG,QAAOA,EAAE3M,EAAWwM,EAAXxM,YAAaJ,EAAS4M,EAAT5M,UAASgN,EAAAJ,EAAErK,8BAAAA,OAA6B,IAAAyK,EAAG7K,GAAgBI,8BAA6ByK,EAAAC,EAAAL,EAAEpK,0BAAAA,OAAyB,IAAAyK,EAAG9K,GAAgBK,0BAAyByK,EAAErD,EAAQgD,EAARhD,SACnX,OAAO3B,IAAc,kBAAM7R,GAAQ,CAC/B8M,OAAQ,OACR7Q,IAAKiV,GAAOjF,EAAS,oBAAqB,CAAEwH,WAAY,IACxDzG,QAAS,CACL,kBAAmB4E,GAAa,CAAE9H,UAAAA,EAAWE,YAAAA,EAAaJ,UAAAA,KAE9DjiB,KAAMwoB,GAAc,CAChB2C,SAAUG,GAAYrG,GACtBvlB,KAAMA,EACNyvB,aAAcnH,GAAehD,GAC7BoK,UAAWzK,EACXqH,iBAAkBZ,GAAcvtB,GAChCkuB,mBAAoB5J,EACpB8J,UAAWT,EACXU,OAAQT,EACRrwB,OAAQA,EACRywB,SAAAA,IAEJvI,OAAAA,IACDE,MAAK,SAAA6L,GAAgC,IAA7BrvB,EAAIqvB,EAAJrvB,KAAMqlB,EAAOgK,EAAPhK,QAAShN,EAAOgX,EAAPhX,QAChBsO,EAAWnF,GAAahX,KAAKC,MAAMzK,IACzC,GAAI,UAAW2mB,EACX,MAAM,IAAIwC,GAAYxC,EAASxR,MAAMtI,QAAS8Z,EAASxR,MAAMiX,UAAW/T,EAASsO,EAAUtB,GAK3F,OADAsB,EAASJ,MAAQ9qB,OAAOmD,KAAK+nB,EAASJ,OAAOjf,KAAI,SAAChM,GAAG,OAAKqrB,EAASJ,MAAMhX,OAAOjU,GAAK,IAC9EqrB,CAEf,GAAE,GAAE,CAAEnC,8BAAAA,EAA+BC,0BAAAA,GACzC,CAGA,SAAS6K,GAAgBhd,EAAMgC,EAAGib,GAA6L,IAAzLvH,EAAWuH,EAAXvH,YAAa1E,EAAMiM,EAANjM,OAAQgC,EAAUiK,EAAVjK,WAAUkK,EAAAD,EAAE/K,8BAAAA,OAA6B,IAAAgL,EAAGpL,GAAgBI,8BAA6BgL,EAAAC,EAAAF,EAAE9K,0BAClJ,OAAOyF,IAAc,kBAAM7R,GAAQ,CAC/B8M,OAAQ,MACR7Q,IAAAA,EACAtU,KAAMsS,EAENgT,WAAYA,EACZhC,OAAAA,EACA+B,QAAS,CACL,eAAgB2C,GAAehD,MAGlCxB,MAAK,SAACjb,GAOP,OALI+c,GACAA,EAAW,CACP0B,cAAc,EACd7pB,MAAO,IAERoL,CACX,IACKib,MAAK,SAAAkM,GAAS,MAAQ,CAAEpG,KAAVoG,EAANzJ,OAA8B,GAAE,GAAE,CAC3CzB,8BAAAA,EACAC,+BAvBuK,IAAAgL,EAAGrL,GAAgBK,0BAAyBgL,GAyB3N,CAGA,SAASE,GAAkBtB,EAAIuB,GAA4P,IAAxPzN,EAASyN,EAATzN,UAAS0N,EAAAD,EAAEtL,QAAAA,OAAO,IAAAuL,EAAGzL,GAAgBE,QAAOuL,EAAAC,EAAAF,EAAEx0B,OAAAA,OAAM,IAAA00B,EAAG,QAAOA,EAAExM,EAAMsM,EAANtM,OAAQjB,EAAWuN,EAAXvN,YAAaJ,EAAS2N,EAAT3N,UAAS8N,EAAAH,EAAEpL,8BAAAA,OAA6B,IAAAuL,EAAG3L,GAAgBI,8BAA6BuL,EAAAC,EAAAJ,EAAEnL,0BAC9M,OAAOyF,IAAc,kBAAM7R,GAAQ,CAC/B8M,OAAQ,OACR7Q,IAAKiV,GAAOjF,EAAS,uBAAwB,CAAEwH,WAAY,IAC3DzG,QAAS,CACL,kBAAmB4E,GAAa,CAAE9H,UAAAA,EAAWE,YAAAA,EAAaJ,UAAAA,KAE9DjiB,KAAMwoB,GAAc,CAChB6F,KAAMA,EACNtC,mBAAoB5J,EACpB/mB,OAAQA,IAEZkoB,OAAAA,IACDE,MAAK,SAAAyM,GAAgC,IAA7BjwB,EAAIiwB,EAAJjwB,KAAMqlB,EAAO4K,EAAP5K,QAAShN,EAAO4X,EAAP5X,QAChBsO,EAAWnF,GAAahX,KAAKC,MAAMzK,IACzC,GAAI,UAAW2mB,EACX,MAAM,IAAIwC,GAAYxC,EAASxR,MAAMtI,QAAS8Z,EAASxR,MAAMiX,UAAW/T,EAASsO,EAAUtB,GAG3F,OAAOsB,CAEf,GAAE,GAAE,CAAEnC,8BAAAA,EAA+BC,+BArBkM,IAAAuL,EAAG5L,GAAgBK,0BAAyBuL,GAsBvR,CAEA,SAASE,GAAY7B,EAAI8B,GAAwI,IAApIhO,EAASgO,EAAThO,UAAWmC,EAAO6L,EAAP7L,QAASlpB,EAAM+0B,EAAN/0B,OAAQinB,EAAW8N,EAAX9N,YAAaJ,EAASkO,EAATlO,UAAWuC,EAA6B2L,EAA7B3L,8BAA+BC,EAAyB0L,EAAzB1L,0BAA2BnB,EAAM6M,EAAN7M,OAAQgC,EAAU6K,EAAV7K,WAC/I,OAAO1B,GAAK,CACRE,MAAO,SAACR,GAAM,OAAK8K,GAAKC,EAAM,CAC1BlM,UAAAA,EACAmC,QAAAA,EACAhB,OAAAA,EACAloB,OAAAA,EACAinB,YAAAA,EACAJ,UAAAA,EACAuC,8BAAAA,EACAC,0BAAAA,IACDjB,MAAK,SAACmD,GACL,OAAIA,EAASyJ,QACFzJ,GAEXrB,GAAcA,EAAW,CAAE0B,cAAc,EAAM7pB,MAAO,KAC/C,EACX,GAAE,EACFmmB,OAAAA,GAER,CAEA,SAAS+M,GAAgBC,GACrB,MAAO,mBAAoBA,CAC/B,CAAC,IACKC,IAAcjyB,EAAAA,EAAAA,IAgBhB,SAAAiyB,EAAYD,GAAgE,IAAAE,EAAA9xB,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAAJ,CAAC,EAAC+xB,EAAAD,EAAlDnM,QAAAA,OAAO,IAAAoM,EAAGrM,GAAgBC,QAAOoM,EAAEnF,EAAQkF,EAARlF,UAAQ5tB,EAAAA,EAAAA,GAAA,KAAA6yB,IAAA/S,EAAAA,EAAAA,GAAA,qBAAAA,EAAAA,EAAAA,GAAA,YAd5D,OAAIA,EAAAA,EAAAA,GAAA,YACJ,OAAIA,EAAAA,EAAAA,GAAA,gBACA,OAAIA,EAAAA,EAAAA,GAAA,eACL,OAAIA,EAAAA,EAAAA,GAAA,gBACH,OAAIA,EAAAA,EAAAA,GAAA,cACN,OAAIA,EAAAA,EAAAA,GAAA,aACL,OAAIA,EAAAA,EAAAA,GAAA,wBACO,OAAIA,EAAAA,EAAAA,GAAA,iBACX,OAAIA,EAAAA,EAAAA,GAAA,iBACJ,OAAIA,EAAAA,EAAAA,GAAA,mBACF,OAAIA,EAAAA,EAAAA,GAAA,gBACP,OAAIA,EAAAA,EAAAA,GAAA,gBACJ,OAAIA,EAAAA,EAAAA,GAAA,sBACE,MAEb,IAAQ6Q,EAAmBiC,EAAnBjC,KAAMqC,EAAaJ,EAAbI,SACRC,EAASpH,GAAOlF,EAAS,GAAFxkB,OAAKwuB,EAAI,MAChCuC,EAAQF,EACRnH,GAAO,WAAD1pB,OAAY6wB,EAAQ,yBAAA7wB,OAAyBwuB,EAAI,KAAAxuB,OAAIywB,EAASnF,WACpE,KACNvtB,KAAKywB,KAAOA,EACZzwB,KAAKpB,KAAO8uB,GAAYgF,EAASnF,SACjCvtB,KAAK8B,KAAO4wB,EAAS5wB,KACrB9B,KAAKizB,SAAWP,EAASO,SACzBjzB,KAAKkzB,QAAUR,EAASQ,QACxBlzB,KAAKmzB,SAAWT,EAASS,SACzBnzB,KAAK+yB,OAASA,EACd/yB,KAAKozB,iBAAmBV,EAASU,iBACjCpzB,KAAKqzB,UAAYX,EAASW,UAC1BrzB,KAAKszB,UAAYZ,EAASY,UAC1BtzB,KAAKuzB,YAAcb,EAASa,YAC5BvzB,KAAKiuB,SAAWyE,EAASzE,UAAY,KACrCjuB,KAAK8yB,SAAWA,GAAY,KAC5B9yB,KAAKgzB,MAAQA,EACTP,GAAgBC,KAChB1yB,KAAKwzB,eAAiBd,EAASc,eAEvC,IAGEC,GAAe,SAACpJ,EAAIqJ,GAA2N,IAAvNnP,EAASmP,EAATnP,UAAWmJ,EAAQgG,EAARhG,SAAUhH,EAAOgN,EAAPhN,QAASkH,EAAe8F,EAAf9F,gBAAiBC,EAAY6F,EAAZ7F,aAAc5tB,EAAKyzB,EAALzzB,MAAOmqB,EAAWsJ,EAAXtJ,YAAa1E,EAAMgO,EAANhO,OAAQgC,EAAUgM,EAAVhM,WAAYlqB,EAAMk2B,EAANl2B,OAAQinB,EAAWiP,EAAXjP,YAAaJ,EAASqP,EAATrP,UAAWuC,EAA6B8M,EAA7B9M,8BAA+BC,EAAyB6M,EAAzB7M,0BAA2BJ,EAAOiN,EAAPjN,QAASwH,EAAQyF,EAARzF,SAClO,OAAO5P,GAAKgM,EAAM,CACd9F,UAAAA,EACAmJ,SAAAA,EACAtD,YAAAA,EACA1D,QAAAA,EACAkH,gBAAAA,EACAC,aAAAA,EACA5tB,MAAAA,EACAylB,OAAAA,EACAgC,WAAAA,EACAlqB,OAAAA,EACAinB,YAAAA,EACAJ,UAAAA,EACAuC,8BAAAA,EACAC,0BAAAA,EACAoH,SAAAA,IAECrI,MAAK,SAAA+N,GACN,OAAOrB,GADMqB,EAAJtJ,KACgB,CACrB9F,UAAAA,EACAmC,QAAAA,EACAlpB,OAAAA,EACAinB,YAAAA,EACAJ,UAAAA,EACAuC,8BAAAA,EACAC,0BAAAA,EACAa,WAAAA,EACAhC,OAAAA,GAER,IACKE,MAAK,SAAC8M,GAAQ,OAAK,IAAIC,GAAeD,EAAU,CAAEjM,QAAAA,GAAU,GACrE,EAEMmN,GAAqB,SAACnD,EAAIoD,GAA8J,IAA1JtP,EAASsP,EAATtP,UAAWmJ,EAAQmG,EAARnG,SAAUhH,EAAOmN,EAAPnN,QAAShB,EAAMmO,EAANnO,OAAQgC,EAAUmM,EAAVnM,WAAYlqB,EAAMq2B,EAANr2B,OAAQinB,EAAWoP,EAAXpP,YAAaJ,EAASwP,EAATxP,UAAWuC,EAA6BiN,EAA7BjN,8BAA+BC,EAAyBgN,EAAzBhN,0BAA2BJ,EAAOoN,EAAPpN,QAC5K,OAAO+J,GAAKC,EAAM,CACdlM,UAAAA,EACAmC,QAAAA,EACAhB,OAAAA,EACAloB,OAAAA,EACAinB,YAAAA,EACAJ,UAAAA,EACAuC,8BAAAA,EACAC,0BAAAA,IAECjB,MAAK,SAAC8M,GAAQ,OAAK,IAAIC,GAAeD,EAAU,CAAEjM,QAAAA,EAASiH,SAAAA,GAAW,IACtE9H,MAAK,SAACjb,GAOP,OALI+c,GACAA,EAAW,CACP0B,cAAc,EACd7pB,MAAO,IAERoL,CACX,GACJ,EAmCImpB,GAAY1uB,OAAO0uB,UAEjBC,GAAM,oBAAAA,KAAAj0B,EAAAA,EAAAA,GAAA,KAAAi0B,IAAAnU,EAAAA,EAAAA,GAAA,cACC/hB,OAAO4C,OAAO,CAAC,GAAE,CAezB,OAfyBC,EAAAA,EAAAA,GAAAqzB,EAAA,EAAAr2B,IAAA,OAAA6B,MAC1B,SAAK4Y,EAAO/V,GAAM,IAAA4xB,EACI,QAAlBA,EAAAh0B,KAAKi0B,OAAO9b,UAAM,IAAA6b,GAAlBA,EAAoB1yB,SAAQ,SAAC+N,GAAE,OAAKA,EAAGjN,EAAK,GAChD,GAAC,CAAA1E,IAAA,KAAA6B,MACD,SAAG4Y,EAAO5W,GACNvB,KAAKi0B,OAAO9b,GAASnY,KAAKi0B,OAAO9b,IAAU,GAC3CnY,KAAKi0B,OAAO9b,GAAOpQ,KAAKxG,EAC5B,GAAC,CAAA7D,IAAA,MAAA6B,MACD,SAAI4Y,EAAO5W,GAEHvB,KAAKi0B,OAAO9b,GADZ5W,EACqBvB,KAAKi0B,OAAO9b,GAAOyM,QAAO,SAACvV,GAAE,OAAKA,IAAO9N,CAAQ,IAGjD,EAE7B,KAACwyB,CAAA,CAhBO,GA4BNG,GAAM,WASR,SAAAA,EAAY/M,GAAmC,IAAxBgN,EAAcrzB,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAAG,KAAKhB,EAAAA,EAAAA,GAAA,KAAAo0B,IAAAtU,EAAAA,EAAAA,GAAA,oBAAAA,EAAAA,EAAAA,GAAA,+BAAAA,EAAAA,EAAAA,GAAA,eANxC7e,IAAS6e,EAAAA,EAAAA,GAAA,aACN,KAAEA,EAAAA,EAAAA,GAAA,oBACI,IAAKA,EAAAA,EAAAA,GAAA,mBACL,IAACA,EAAAA,EAAAA,GAAA,gBACJ,IAAImU,KAAQnU,EAAAA,EAAAA,GAAA,2BACD,MAElB5f,KAAKtC,IAAMypB,EACXnnB,KAAKm0B,eAAiBA,CAC1B,CA0FC,OA1FAzzB,EAAAA,EAAAA,GAAAwzB,EAAA,EAAAx2B,IAAA,UAAA6B,MACD,WAAU,IAAA8N,EAAA,KAEN,GADArN,KAAKo0B,qBAAuB1hB,aAAa1S,KAAKo0B,sBACzCp0B,KAAK+Q,cAAgB/Q,KAAKq0B,GAAI,CAC/B,IAAMC,EAAY,8BAAHryB,OAAiCjC,KAAKtC,IAAG,wCACxDsC,KAAKq0B,GAAK,IAAIP,GAAUQ,GACxBt0B,KAAKq0B,GAAGnb,iBAAiB,SAAS,SAAC3B,GAC/BlK,EAAKknB,SAASC,KAAK,QAAS,IAAI1nB,MAAMyK,EAAM+N,SAChD,IACAtlB,KAAKu0B,SAASE,GAAG,aAAa,WAC1BpnB,EAAK0D,aAAc,EACnB1D,EAAKqnB,MAAMpzB,SAAQ,SAACgkB,GAAO,OAAKjY,EAAKkc,KAAKjE,EAAQnN,MAAOmN,EAAQljB,KAAK,IACtEiL,EAAKqnB,MAAQ,EACjB,IACA10B,KAAKq0B,GAAGnb,iBAAiB,WAAW,SAACvR,GACjC,IAAMvF,EAAOwK,KAAKC,MAAMlF,EAAEvF,KAAKqgB,YAC/B,OAAQrgB,EAAK+V,OACT,IAAK,gCACD9K,EAAKknB,SAASC,KAAK,iBAAazzB,GAChC,MAEJ,IAAK,cACDsM,EAAKkc,KAAK,cAAe,CAAC,GAC1B,MAEJ,IAAK,WACL,IAAK,UACL,IAAK,OACDlc,EAAKknB,SAASC,KAAKpyB,EAAKuyB,QAjD/B,SAAC9f,EAAMzS,GACpB,MAAa,YAATyS,GACAvU,EAAAA,EAAAA,GAAA,CAAS+nB,OAAQ+E,GAAOwH,SAAYxyB,GAE3B,aAATyS,GACAvU,EAAAA,EAAAA,GAAA,CAAS+nB,OAAQ+E,GAAOyH,UAAazyB,IAEzC9B,EAAAA,EAAAA,GAAA,CAAS+nB,OAAQ+E,GAAOtgB,OAAU1K,EACtC,CAyCyD2mB,CAAS3mB,EAAK+V,MAAOvL,KAAKC,MAAMzK,EAAKA,QAGlF,GACJ,CACJ,GAAC,CAAA1E,IAAA,aAAA6B,MACD,WAAa,IAAAiP,EAAA,KACHsmB,EAAkB,WAAM,IAAAC,EACnB,QAAPA,EAAAvmB,EAAK6lB,UAAE,IAAAU,GAAPA,EAASnS,QACTpU,EAAK6lB,QAAKtzB,EACVyN,EAAKuC,aAAc,CACvB,EACI/Q,KAAKm0B,eACLn0B,KAAKo0B,oBAAsBztB,YAAW,WAClCmuB,GACJ,GAAG90B,KAAKm0B,gBAGRW,GAER,GAAC,CAAAp3B,IAAA,OAAA6B,MACD,SAAK4Y,EAAO/V,GAAM,IAAA4yB,EACRhrB,EAAM4C,KAAKqoB,UAAU,CAAE9c,MAAAA,EAAO/V,KAAAA,IAC7B,QAAP4yB,EAAAh1B,KAAKq0B,UAAE,IAAAW,GAAPA,EAASzL,KAAKvf,EAClB,GAAC,CAAAtM,IAAA,YAAA6B,MACD,SAAUkwB,EAAO7e,GACb5Q,KAAKk1B,aAAe,EACpBl1B,KAAKm1B,UACL,IAAMR,EAAU,eAAH1yB,OAAkBwtB,GACzBnK,EAAU,CACZnN,MAAO,mBACP/V,KAAM,CAAEuyB,QAAAA,IAEZ30B,KAAKu0B,SAASE,GAAGE,EAAS/jB,GACtB5Q,KAAK+Q,YACL/Q,KAAKupB,KAAKjE,EAAQnN,MAAOmN,EAAQljB,MAGjCpC,KAAK00B,MAAM3sB,KAAKud,EAExB,GAAC,CAAA5nB,IAAA,cAAA6B,MACD,SAAYkwB,GACRzvB,KAAKk1B,aAAe,EACpB,IAAMP,EAAU,eAAH1yB,OAAkBwtB,GACzBnK,EAAU,CACZnN,MAAO,qBACP/V,KAAM,CAAEuyB,QAAAA,IAEZ30B,KAAKu0B,SAASa,IAAIT,GACd30B,KAAK+Q,YACL/Q,KAAKupB,KAAKjE,EAAQnN,MAAOmN,EAAQljB,MAGjCpC,KAAK00B,MAAQ10B,KAAK00B,MAAM9P,QAAO,SAAC7N,GAAG,OAAKA,EAAI3U,KAAKuyB,UAAYA,CAAO,IAE/C,IAArB30B,KAAKk1B,aACLl1B,KAAKgU,YAEb,GAAC,CAAAtW,IAAA,UAAA6B,MACD,SAAQgC,GAAU,IAAAsP,EAAA,KAEd,OADA7Q,KAAKu0B,SAASE,GAAG,QAASlzB,GACnB,kBAAMsP,EAAK0jB,SAASa,IAAI,QAAS7zB,EAAS,CACrD,KAAC2yB,CAAA,CAtGO,GAwGRmB,GAAS,KACPC,GAAY,SAAC53B,GACf,IAAK23B,GAAQ,CAET,IAAME,EAAqC,qBAAXnwB,OAAyB,EAAI,IAC7DiwB,GAAS,IAAInB,GAAOx2B,EAAK63B,EAC7B,CACA,OAAOF,EACX,EAwDA,IA4CMG,GAAgB,SAAC9G,EAAS+G,GAAA,IAAIlR,EAASkR,EAATlR,UAAWmJ,EAAQ+H,EAAR/H,SAAUhH,EAAO+O,EAAP/O,QAASD,EAAOgP,EAAPhP,QAASoI,EAAqB4G,EAArB5G,sBAAuBC,EAA0B2G,EAA1B3G,2BAA4BlB,EAAe6H,EAAf7H,gBAAiBC,EAAY4H,EAAZ5H,aAAc5tB,EAAKw1B,EAALx1B,MAAOylB,EAAM+P,EAAN/P,OAAQgC,EAAU+N,EAAV/N,WAAYlqB,EAAMi4B,EAANj4B,OAAQinB,EAAWgR,EAAXhR,YAAaJ,EAASoR,EAATpR,UAAWuC,EAA6B6O,EAA7B7O,8BAA6B8O,EAAAD,EAAEtO,UAAAA,OAAS,IAAAuO,EAAGlP,GAAgBW,UAASuO,EAAEzH,EAAQwH,EAARxH,SAAQ,OAAOtR,QAAQC,QAnGlS,SAAClf,GAChB43B,GAAU53B,GAAKy3B,SACnB,CAiG6TQ,CAAWxO,IACnUvB,MAAK,kBAAM6I,GAAQC,EAAW,CAC/BnK,UAAAA,EACAmJ,SAAAA,EACAhH,QAAAA,EACAmI,sBAAAA,EACAC,2BAAAA,EACAlB,gBAAAA,EACAC,aAAAA,EACA5tB,MAAAA,EACAylB,OAAAA,EACAloB,OAAAA,EACAinB,YAAAA,EACAJ,UAAAA,EACAuC,8BAAAA,EACAqH,SAAAA,GACF,IACG1H,OAAM,SAAChP,GACR,IAAM8d,EAASC,GAAUnO,GAEzB,OADM,OAANkO,QAAM,IAANA,GAAAA,EAAQrhB,aACD2I,QAAQE,OAAOtF,EAC1B,IACKqO,MAAK,SAACgQ,GACP,OAAIA,EAAY/gB,OAASsY,GAAS0I,SACvBD,EA3SF,SAACE,GAAyB,IAAlBpQ,GAAkB5kB,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAAP,CAAC,GAAZ4kB,OACbqQ,EAAY,KACZC,EAAc,KACZC,EAAcH,EAAIpsB,KAAI,kBAAM,IAAIwsB,eAAiB,IACjDC,EAAyB,SAACx4B,GAAC,OAAK,WAClCq4B,EAAcr4B,EACds4B,EAAY30B,SAAQ,SAAC80B,EAAY7S,GAAK,OAAKA,IAAU5lB,GAAKy4B,EAAWhO,OAAO,GAChF,CAAC,EAID,OAHA3C,GAASC,GAAQ,WACbuQ,EAAY30B,SAAQ,SAAC80B,GAAU,OAAKA,EAAWhO,OAAO,GAC1D,IACOzL,QAAQY,IAAIuY,EAAIpsB,KAAI,SAAC2F,EAAI1R,GAC5B,IAAM04B,EAAWF,EAAuBx4B,GACxC,OAAOgf,QAAQC,UACVgJ,MAAK,kBAAMvW,EAAG,CAAEgnB,SAAAA,EAAU3Q,OAAQuQ,EAAYt4B,GAAG+nB,QAAS,IAC1DE,MAAK,SAACjb,GAEP,OADA0rB,IACO1rB,CACX,IACK4b,OAAM,SAAChP,GAER,OADAwe,EAAYxe,EACL,IACX,GACJ,KAAIqO,MAAK,SAAC0Q,GACN,GAAoB,OAAhBN,EACA,MAAMD,EAGN,OAAOO,EAAQN,EAEvB,GACJ,CA+QeO,CAAK,CACR,SAAAC,GAAA,IAAG9Q,EAAM8Q,EAAN9Q,OAAM,OA3HrB,SAAqB+Q,GAAsI,IAAnIhH,EAAKgH,EAALhH,MAAOlL,EAASkS,EAATlS,UAAWmC,EAAO+P,EAAP/P,QAASjC,EAAWgS,EAAXhS,YAAaJ,EAASoS,EAATpS,UAAWuC,EAA6B6P,EAA7B7P,8BAA+BC,EAAyB4P,EAAzB5P,0BAA2Ba,EAAU+O,EAAV/O,WAAYhC,EAAM+Q,EAAN/Q,OAC7I,OAAOM,GAAK,CACRE,MAAO,SAACR,GAAM,OAAK8J,GAAcC,EAAO,CACpClL,UAAAA,EACAmC,QAAAA,EACAjC,YAAAA,EACAJ,UAAAA,EACAuC,8BAAAA,EACAC,0BAAAA,EACAnB,OAAAA,IACDE,MAAK,SAACmD,GACL,OAAQA,EAASV,QACb,KAAK+E,GAAOtgB,MACR,OAAO,IAAIye,GAAYxC,EAASxR,MAAOwR,EAASyF,WAEpD,KAAKpB,GAAOsJ,QACR,OAAO,EAEX,KAAKtJ,GAAOuJ,QACR,OAAO,IAAIpL,GAAY,UAADtpB,OAAWwtB,EAAK,qBAE1C,KAAKrC,GAAOyH,SAYR,OAXInN,IACuB,YAAnBqB,EAASO,MACT5B,EAAW,CAAE0B,cAAc,IAG3B1B,EAAW,CACP0B,cAAc,EACd7pB,MAAOwpB,EAASthB,KAAOshB,EAASO,UAIrC,EAEX,KAAK8D,GAAOwH,QAMR,OALIlN,GACAA,EAAW,CACP0B,cAAc,EACd7pB,MAAOwpB,EAASthB,KAAOshB,EAASO,QAEjCP,EAEX,QACI,MAAM,IAAIjc,MAAM,kBAG5B,GAAE,EACF4Y,OAAAA,GAER,CAyE4BkR,CAAa,CACzBnH,MAAOmG,EAAYnG,MACnBlL,UAAAA,EACAmC,QAAAA,EACAjC,YAAAA,EACAJ,UAAAA,EACAuC,8BAAAA,EACAc,WAAAA,EACAhC,OAAAA,GACF,EACF,SAAAmR,GAAA,IAAGnR,EAAMmR,EAANnR,OAAM,OAlFA,SAAHoR,GAAA,IAAMrH,EAAKqH,EAALrH,MAAOtI,EAAS2P,EAAT3P,UAAWzB,EAAMoR,EAANpR,OAAQgC,EAAUoP,EAAVpP,WAAU,OAAO,IAAI/K,SAAQ,SAACC,EAASC,GACrF,IAAMwY,EAASC,GAAUnO,GACnB4P,EAAoB1B,EAAO2B,QAAQna,GACnCoa,EAAU,WACZF,IACA1B,EAAO6B,YAAYzH,EACvB,EACAhK,GAASC,GAAQ,WACbuR,IACApa,EAAO,IAAIiJ,GAAY,oBAC3B,IACAuP,EAAO8B,UAAU1H,GAAO,SAAC9kB,GACrB,OAAQA,EAAO0d,QACX,KAAK+E,GAAOyH,SACJnN,IACqB,YAAjB/c,EAAO2e,MACP5B,EAAW,CAAE0B,cAAc,IAG3B1B,EAAW,CACP0B,cAAc,EACd7pB,MAAOoL,EAAOlD,KAAOkD,EAAO2e,SAIxC,MAEJ,KAAK8D,GAAOwH,QACRqC,IACIvP,GACAA,EAAW,CACP0B,cAAc,EACd7pB,MAAOoL,EAAOlD,KAAOkD,EAAO2e,QAEpC1M,EAAQjS,GACR,MAEJ,KAAKyiB,GAAOtgB,MACRmqB,IACApa,EAAO,IAAI0O,GAAY5gB,EAAOoM,IAAKpM,EAAOysB,aAGtD,GACJ,GAAE,CAuC0BC,CAAa,CACzB5H,MAAOmG,EAAYnG,MACnBtI,UAAAA,EACAzB,OAAAA,EACAgC,WAAAA,GACF,GACH,CAAEhC,OAAAA,GAEb,IACKE,MAAK,SAACjb,GACP,GAAIA,aAAkB4gB,GAClB,MAAM5gB,EACV,OAAOA,CACX,IACKib,MAAK,SAACjb,GAAM,OAAK2nB,GAAY3nB,EAAO8lB,KAAM,CAC3ClM,UAAAA,EACAmC,QAAAA,EACAjC,YAAAA,EACAJ,UAAAA,EACAuC,8BAAAA,EACAc,WAAAA,EACAhC,OAAAA,GACF,IACGE,MAAK,SAAC8M,GAAQ,OAAK,IAAIC,GAAeD,EAAU,CAAEjM,QAAAA,GAAU,GAAC,EAE5D6Q,GAAO,IAAIC,QACXC,GAA2B,eAAAC,GAAA9b,EAAAA,EAAAA,GAAAC,EAAAA,MAAG,SAAAC,EAAO6b,GAAK,IAAAC,EAAA,OAAA/b,EAAAA,MAAA,SAAAE,GAAA,cAAAA,EAAA3P,KAAA2P,EAAA1P,MAAA,WACxCkrB,GAAKnmB,IAAIumB,GAAQ,CAAF5b,EAAA1P,KAAA,eAAA0P,EAAA8b,OAAA,SACRN,GAAKh1B,IAAIo1B,IAAM,cAAA5b,EAAA1P,KAAA,EAEPyrB,MAAMH,EAAM7N,KAAKjE,MAAK,SAACkS,GAAG,OAAKA,EAAIH,MAAM,IAAC,OACvC,OADhBA,EAAI7b,EAAAG,KACVqb,GAAK/0B,IAAIm1B,EAAOC,GAAM7b,EAAA8b,OAAA,SACfD,GAAI,wBAAA7b,EAAAI,OAAA,GAAAL,EAAA,KACd,gBAPgCM,GAAA,OAAAsb,EAAAruB,MAAA,KAAAtI,UAAA,KAS3Bi3B,GAAW,eAAAC,GAAArc,EAAAA,EAAAA,GAAAC,EAAAA,MAAG,SAAAqc,EAAO5N,GAAI,IAAAsN,EAAA,OAAA/b,EAAAA,MAAA,SAAAsc,GAAA,cAAAA,EAAA/rB,KAAA+rB,EAAA9rB,MAAA,WACvBsd,GAAOW,KAASZ,GAAOY,GAAK,CAAA6N,EAAA9rB,KAAA,eAAA8rB,EAAAN,OAAA,SACrBvN,EAAKvoB,MAAI,WAEhB8nB,GAAmBS,GAAO,CAAF6N,EAAA9rB,KAAA,eAAA8rB,EAAA9rB,KAAA,EACLorB,GAA4BnN,GAAK,OAA1C,OAAJsN,EAAIO,EAAAjc,KAAAic,EAAAN,OAAA,SACHD,EAAK71B,MAAI,aAEd,IAAIgL,MAAM,kDAAiD,wBAAAorB,EAAAhc,OAAA,GAAA+b,EAAA,KACpE,gBATgBE,GAAA,OAAAH,EAAA5uB,MAAA,KAAAtI,UAAA,KAYXs3B,GAAc,SAACC,GAA0E,IAAhEvR,EAAoBhmB,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAAG0lB,GAAgBM,qBAClE,OAAOuR,GAAYvR,CACvB,EAGMwR,GAAS,SAACl2B,GACZ,IACMm2B,EAAS,IAAIC,OADA,gEAEnB,OAAQ1O,GAAW1nB,IAASm2B,EAAOE,KAAKr2B,EAC5C,EAMMs2B,GAAQ,SAACt2B,GACX,IACMm2B,EAAS,IAAIC,OADD,mEAElB,OAAQ1O,GAAW1nB,IAASm2B,EAAOE,KAAKr2B,EAC5C,EAEMu2B,GAAqB,SAACC,EAAaC,GACrC,OAAO,IAAIlc,SAAQ,SAACC,EAASC,GA4BzB,IA3BA,IAAMyZ,EAAU,GACZwC,GAAW,EACXC,EAAUF,EAAMz6B,OACd46B,GAAMt6B,EAAAA,EAAAA,GAAOm6B,GACbI,EAAM,SAANA,IACF,IAAM1V,EAAQsV,EAAMz6B,OAAS46B,EAAO56B,OAC9BgO,EAAO4sB,EAAOnQ,QAChBzc,GACAA,IACKwZ,MAAK,SAACjb,GACHmuB,IAEJxC,EAAQ/S,GAAS5Y,GACjBouB,GAAW,GAEPE,IAGArc,EAAQ0Z,GAEhB,IACK/P,OAAM,SAAChP,GACRuhB,GAAW,EACXjc,EAAOtF,EACX,GAER,EACS5Z,EAAI,EAAGA,EAAIi7B,EAAaj7B,IAC7Bs7B,GAER,GACJ,EAEMC,GAAa,SAAC7O,EAAM9G,EAAO8U,EAAUc,GACvC,IAAMC,EAAQD,EAAY5V,EACpB8V,EAAMv1B,KAAKw1B,IAAIF,EAAQD,EAAWd,GACxC,OAAOhO,EAAKjjB,MAAMgyB,EAAOC,EAC7B,EAEME,GAAa,eAAAC,GAAA7d,EAAAA,EAAAA,GAAAC,EAAAA,MAAG,SAAA6d,EAAOpP,EAAMgO,EAAUc,GAAS,OAAAvd,EAAAA,MAAA,SAAA8d,GAAA,cAAAA,EAAAvtB,KAAAutB,EAAAttB,MAAA,cAAAstB,EAAA9B,OAAA,UAC3C,SAACrU,GAAK,OAAK2V,GAAW7O,EAAM9G,EAAO8U,EAAUc,EAAU,4BAAAO,EAAAxd,OAAA,GAAAud,EAAA,KACjE,gBAFkBE,EAAAC,EAAAC,GAAA,OAAAL,EAAApwB,MAAA,KAAAtI,UAAA,KAIbg5B,GAAa,SAACC,EAAOrjB,EAAGsjB,GAAqH,OAAOtI,GAAgBqI,EAAOrjB,EAAK,CAClL6N,UADuCyV,EAATzV,UAE9B6F,YAFoD4P,EAAX5P,YAGzC1C,WAHgEsS,EAAVtS,WAItDhC,OAJwEsU,EAANtU,OAKlEjB,YALqFuV,EAAXvV,YAM1EmC,8BANoHoT,EAA7BpT,8BAOvFC,0BAP+ImT,EAAzBnT,2BAQxH,EACIoT,GAAe,eAAAC,GAAAve,EAAAA,EAAAA,GAAAC,EAAAA,MAAG,SAAAue,EAAO9P,EAAI+P,GAAA,IAAA7V,EAAAmJ,EAAA2K,EAAA3R,EAAAkH,EAAAC,EAAA5tB,EAAAylB,EAAAgC,EAAAlqB,EAAAinB,EAAAJ,EAAAuC,EAAAC,EAAAuD,EAAAiQ,EAAAtT,EAAAuT,EAAArT,EAAAR,EAAAwH,EAAAnsB,EAAAy4B,EAAAC,EAAA,OAAA5e,EAAAA,MAAA,SAAA6e,GAAA,cAAAA,EAAAtuB,KAAAsuB,EAAAruB,MAAA,OAAsV,GAAlVmY,EAAS6V,EAAT7V,UAAWmJ,EAAQ0M,EAAR1M,SAAU2K,EAAQ+B,EAAR/B,SAAU3R,EAAO0T,EAAP1T,QAASkH,EAAewM,EAAfxM,gBAAiBC,EAAYuM,EAAZvM,aAAc5tB,EAAKm6B,EAALn6B,MAAOylB,EAAM0U,EAAN1U,OAAQgC,EAAU0S,EAAV1S,WAAYlqB,EAAM48B,EAAN58B,OAAQinB,EAAW2V,EAAX3V,YAAaJ,EAAS+V,EAAT/V,UAAWuC,EAA6BwT,EAA7BxT,8BAA+BC,EAAyBuT,EAAzBvT,0BAA2BuD,EAAWgQ,EAAXhQ,YAAWiQ,EAAAD,EAAErT,mBAAAA,OAAkB,IAAAsT,EAAG7T,GAAgBO,mBAAkBsT,EAAAC,EAAAF,EAAEnT,sBAAAA,OAAqB,IAAAqT,EAAG9T,GAAgBS,sBAAqBqT,EAAE7T,EAAO2T,EAAP3T,QAASwH,EAAQmM,EAARnM,SACxV,OAARoK,QAAQ,IAARA,EAAQ,CAAAoC,EAAAruB,KAAA,QAAAquB,EAAA1e,GAARsc,EAAQoC,EAAAruB,KAAA,sBAAAquB,EAAAruB,KAAA,EAAW2rB,GAAY1N,GAAK,OAAAoQ,EAAA1e,GAAA0e,EAAAxe,KAAA,OAoBZ,OApB/Bna,EAAI24B,EAAA1e,GAEJye,EAAwB,SAACE,EAAaC,GACxC,GAAKjT,EAAL,CAEK6S,IACDA,EAAiB1yB,MAAM6yB,GAAaE,KAAK,IAG7C,OAAO,SAACpK,GADI,IAAC3nB,EAEJ2nB,EAAKpH,eAGVmR,EAAeI,GAAYnK,EAAKjxB,MAChCmoB,EAAW,CACP0B,cAAc,EACd7pB,OARKsJ,EAQM0xB,EARK1xB,EAAOlK,QAAO,SAACk8B,EAAKzuB,GAAI,OAAKyuB,EAAMzuB,CAAI,GAAE,GAQ5BsuB,KAErC,CAdU,CAed,EACAtQ,IAAAA,EAAgBiD,GAAehD,IAAMoQ,EAAA7C,OAAA,SAC9B5G,GAAelvB,EAAM,CACxByiB,UAAAA,EACA6F,YAAAA,EACAsD,SAAUA,GAAYJ,GAAYjD,GAClC3D,QAAAA,EACAkH,gBAAAA,EACAC,aAAAA,EACA5tB,MAAAA,EACAylB,OAAAA,EACAloB,OAAAA,EACAinB,YAAAA,EACAJ,UAAAA,EACAuC,8BAAAA,EACAC,0BAAAA,EACAoH,SAAAA,IAECrI,KAAI,eAAAkV,GAAAnf,EAAAA,EAAAA,GAAAC,EAAAA,MAAC,SAAAmf,EAAAC,GAAA,IAAAvK,EAAA9H,EAAAsS,EAAA,OAAArf,EAAAA,MAAA,SAAAsf,GAAA,cAAAA,EAAA/uB,KAAA+uB,EAAA9uB,MAAA,OAAoB,OAAXqkB,EAAIuK,EAAJvK,KAAM9H,EAAKqS,EAALrS,MAAKuS,EAAA9uB,KAAA,EACHmtB,GAAclP,EAAMvoB,EAAMilB,GAAmB,OAAtD,OAARkU,EAAQC,EAAAjf,KAAAif,EAAAtD,OAAA,SACPjb,QAAQY,IAAI,CACfkT,EACAkI,GAAmB1R,EAAuB0B,EAAMjf,KAAI,SAACgN,EAAK6M,GAAK,OAAK,kBAAMuW,GAAWmB,EAAS1X,GAAQ7M,EAAK,CACvG6N,UAAAA,EACA6F,YAAAA,EACA1C,WAAY8S,EAAsB7R,EAAMvqB,OAAQmlB,GAChDmC,OAAAA,EACAjB,YAAAA,EACAmC,8BAAAA,EACAC,0BAAAA,GACF,SACJ,wBAAAqU,EAAAhf,OAAA,GAAA6e,EAAA,KACL,gBAAAI,GAAA,OAAAL,EAAA1xB,MAAA,KAAAtI,UAAA,EAdQ,IAeJ8kB,MAAK,SAAAwV,GAAM,OAAMrJ,IAAZ9J,EAAAA,GAAAA,GAAAmT,EAAA,GAAM,GAA8B,CAC1C7W,UAAAA,EACAmC,QAAAA,EACAlpB,OAAAA,EACAinB,YAAAA,EACAJ,UAAAA,EACAuC,8BAAAA,EACAC,0BAAAA,GACF,IACGjB,MAAK,SAAC8M,GACP,OAAIA,EAASF,QACFE,EAGAJ,GAAYI,EAASjC,KAAM,CAC9BlM,UAAAA,EACAmC,QAAAA,EACAlpB,OAAAA,EACAinB,YAAAA,EACAJ,UAAAA,EACAuC,8BAAAA,EACAC,0BAAAA,EACAa,WAAAA,EACAhC,OAAAA,GAGZ,IACKE,MAAK,SAAC8M,GAAQ,OAAK,IAAIC,GAAeD,EAAU,CAAEjM,QAAAA,GAAU,KAAC,yBAAAgU,EAAAve,OAAA,GAAAie,EAAA,KACrE,gBAjFoBkB,EAAAC,GAAA,OAAApB,EAAA9wB,MAAA,KAAAtI,UAAA,KAmFrB,SACey6B,GAAUC,EAAAC,GAAA,OAAAC,GAAAtyB,MAAC,KAADtI,UAAA,UAAA46B,KAmFxB,OAnFwBA,IAAA/f,EAAAA,EAAAA,GAAAC,EAAAA,MAAzB,SAAA+f,EAA0Bv5B,EAAIw5B,GAAA,IAAArX,EAAAmJ,EAAAmO,EAAAnV,EAAAkH,EAAAC,EAAA5tB,EAAAylB,EAAAgC,EAAAlqB,EAAAinB,EAAAJ,EAAAuC,EAAAC,EAAAuD,EAAAtD,EAAAC,EAAAE,EAAA6U,EAAArV,EAAAoI,EAAAC,EAAA3H,EAAA8G,EAAAoK,EAAA,OAAAzc,EAAAA,MAAA,SAAAmgB,GAAA,cAAAA,EAAA5vB,KAAA4vB,EAAA3vB,MAAA,OAAuY,GAAnYmY,EAASqX,EAATrX,UAAWmJ,EAAQkO,EAARlO,SAAQmO,EAAAD,EAAElV,QAAAA,OAAO,IAAAmV,EAAGrV,GAAgBE,QAAOmV,EAAEjO,EAAegO,EAAfhO,gBAAiBC,EAAY+N,EAAZ/N,aAAc5tB,EAAK27B,EAAL37B,MAAOylB,EAAMkW,EAANlW,OAAQgC,EAAUkU,EAAVlU,WAAYlqB,EAAMo+B,EAANp+B,OAAQinB,EAAWmX,EAAXnX,YAAaJ,EAASuX,EAATvX,UAAWuC,EAA6BgV,EAA7BhV,8BAA+BC,EAAyB+U,EAAzB/U,0BAA2BuD,EAAWwR,EAAXxR,YAAatD,EAAoB8U,EAApB9U,qBAAsBC,EAAkB6U,EAAlB7U,mBAAoBE,EAAqB2U,EAArB3U,sBAAqB6U,EAAAF,EAAEnV,QAAAA,OAAO,IAAAqV,EAAGtV,GAAgBC,QAAOqV,EAAEjN,EAAqB+M,EAArB/M,sBAAuBC,EAA0B8M,EAA1B9M,2BAA4B3H,EAASyU,EAATzU,UAAW8G,EAAQ2N,EAAR3N,UACrZnE,GAAW1nB,GAAO,CAAF25B,EAAA3vB,KAAA,eAAA2vB,EAAA3vB,KAAA,EACO2rB,GAAY31B,GAAK,OAA1B,GAARi2B,EAAQ0D,EAAA9f,MACVmc,GAAYC,EAAUvR,GAAuB,CAAFiV,EAAA3vB,KAAA,eAAA2vB,EAAAnE,OAAA,SACpCqC,GAAgB73B,EAAM,CACzBmiB,UAAAA,EACA6F,YAAAA,EACArD,mBAAAA,EACAsR,SAAAA,EACA3K,SAAAA,EACAhH,QAAAA,EACAkH,gBAAAA,EACAC,aAAAA,EACA5tB,MAAAA,EACAylB,OAAAA,EACAgC,WAAAA,EACAlqB,OAAAA,EACAinB,YAAAA,EACAJ,UAAAA,EACA4C,sBAAAA,EACAL,8BAAAA,EACAC,0BAAAA,EACAJ,QAAAA,EACAwH,SAAAA,KACF,cAAA8N,EAAAnE,OAAA,SAECnE,GAAarxB,EAAM,CACtBmiB,UAAAA,EACAmJ,SAAAA,EACAtD,YAAAA,EACA1D,QAAAA,EACAkH,gBAAAA,EACAC,aAAAA,EACA5tB,MAAAA,EACAylB,OAAAA,EACAgC,WAAAA,EACAlqB,OAAAA,EACAinB,YAAAA,EACAJ,UAAAA,EACAuC,8BAAAA,EACAC,0BAAAA,EACAJ,QAAAA,EACAwH,SAAAA,KACF,WAEFyK,GAAMt2B,GAAO,CAAF25B,EAAA3vB,KAAA,gBAAA2vB,EAAAnE,OAAA,SACJpC,GAAcpzB,EAAM,CACvBmiB,UAAAA,EACAmJ,SAAAA,EACAhH,QAAAA,EACAD,QAAAA,EACAoI,sBAAAA,EACAC,2BAAAA,EACAlB,gBAAAA,EACAC,aAAAA,EACA5tB,MAAAA,EACAylB,OAAAA,EACAgC,WAAAA,EACAlqB,OAAAA,EACAinB,YAAAA,EACAJ,UAAAA,EACAuC,8BAAAA,EACAC,0BAAAA,EACAM,UAAAA,EACA8G,SAAAA,KACF,YAEFqK,GAAOl2B,GAAO,CAAF25B,EAAA3vB,KAAA,gBAAA2vB,EAAAnE,OAAA,SACLhE,GAAmBxxB,EAAM,CAC5BmiB,UAAAA,EACAmJ,SAAAA,EACAhH,QAAAA,EACAhB,OAAAA,EACAgC,WAAAA,EACAlqB,OAAAA,EACAinB,YAAAA,EACAJ,UAAAA,EACAuC,8BAAAA,EACAC,0BAAAA,EACAJ,QAAAA,KACF,cAEA,IAAIuV,UAAU,wBAAD/5B,OAAyBG,EAAI,uBAAqB,yBAAA25B,EAAA7f,OAAA,GAAAyf,EAAA,MACxEvyB,MAAA,KAAAtI,UAAA,KAEKm7B,IAAev7B,EAAAA,EAAAA,IAUjB,SAAAu7B,EAAYC,GAAuD,IAAAC,EAAAr7B,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAAJ,CAAC,EAACs7B,EAAAD,EAAxC1V,QAAAA,OAAO,IAAA2V,EAAG5V,GAAgBC,QAAO2V,GAAAt8B,EAAAA,EAAAA,GAAA,KAAAm8B,IAAArc,EAAAA,EAAAA,GAAA,qBAAAA,EAAAA,EAAAA,GAAA,2BAAAA,EAAAA,EAAAA,GAAA,0BAAAA,EAAAA,EAAAA,GAAA,yBAAAA,EAAAA,EAAAA,GAAA,wBAAAA,EAAAA,EAAAA,GAAA,uBAAAA,EAAAA,EAAAA,GAAA,sBAAAA,EAAAA,EAAAA,GAAA,0BAAAA,EAAAA,EAAAA,GAAA,gBAD/C,MAEP5f,KAAKywB,KAAOyL,EAAUG,GACtBr8B,KAAKs8B,WAAaJ,EAAUI,WAC5B,IAAMC,EAAaL,EAAU5L,MAAM1L,OAAOpa,SAC1CxK,KAAKw8B,UAAY3+B,OAAOgL,OAAO0zB,GAAY59B,QAAO,SAAC89B,EAAKpS,GAAI,OAAKoS,EAAMpS,EAAKvoB,IAAI,GAAE,GAClF9B,KAAKizB,WAAaiJ,EAAUQ,eAC5B18B,KAAKkzB,UAAYr1B,OAAOgL,OAAO0zB,GAAY3X,QAAO,SAACyF,GAAI,OAAKA,EAAK6I,OAAO,IACnE90B,OACL4B,KAAK+yB,OAASmJ,EAAUnJ,OACxB/yB,KAAKswB,MAAQiM,EAAW7yB,KAAI,SAACgpB,GAAQ,OAAK,IAAIC,GAAeD,EAAU,CAAEjM,QAAAA,GAAU,IACnFzmB,KAAK28B,UAAYT,EAAUU,gBAC3B58B,KAAK68B,SAAWX,EAAUQ,cAC9B,IA+BJ,SAASI,GAAgB16B,EAAI26B,GAA6X,IAIlZxC,EAJyBhW,EAASwY,EAATxY,UAAWmJ,EAAQqP,EAARrP,SAAQsP,EAAAD,EAAErW,QAAAA,OAAO,IAAAsW,EAAGxW,GAAgBE,QAAOsW,EAAEpP,EAAemP,EAAfnP,gBAAiBC,EAAYkP,EAAZlP,aAAc5tB,EAAK88B,EAAL98B,MAAOylB,EAAMqX,EAANrX,OAAQgC,EAAUqV,EAAVrV,WAAYlqB,EAAMu/B,EAANv/B,OAAQinB,EAAWsY,EAAXtY,YAAaJ,EAAS0Y,EAAT1Y,UAAWuC,EAA6BmW,EAA7BnW,8BAA+BC,EAAyBkW,EAAzBlW,0BAA2BuD,EAAW2S,EAAX3S,YAAW6S,EAAAF,EAAEhW,mBAAAA,OAAkB,IAAAkW,EAAGzW,GAAgBO,mBAAkBkW,EAAAC,EAAAH,EAAEtW,QAAAA,OAAO,IAAAyW,EAAG1W,GAAgBC,QAAOyW,EAAErO,EAAqBkO,EAArBlO,sBAAuBC,EAA0BiO,EAA1BjO,2BAA4BqB,EAAa4M,EAAb5M,cACrY,IA5BoB,SAAC/tB,GAAS,IACP+M,EADOC,GAAA9H,EAAAA,EAAAA,GACXlF,GAAI,IAAvB,IAAAgN,EAAA7H,MAAA4H,EAAAC,EAAA5H,KAAAC,MAAyB,KAAdhB,EAAI0I,EAAA5P,MACX,IAAKuqB,GAAWrjB,GACZ,OAAO,CAEf,CAAC,OAAAiB,GAAA0H,EAAAzH,EAAAD,EAAA,SAAA0H,EAAAxH,GAAA,CACD,OAAO,CACX,CAqBSu1B,CAAgB/6B,KAVN,SAACA,GAAS,IACFuR,EADEC,GAAAtM,EAAAA,EAAAA,GACNlF,GAAI,IAAvB,IAAAwR,EAAArM,MAAAoM,EAAAC,EAAApM,KAAAC,MAAyB,KAAdhB,EAAIkN,EAAApU,MACX,IAAKm5B,GAAMjyB,GACP,OAAO,CAEf,CAAC,OAAAiB,GAAAkM,EAAAjM,EAAAD,EAAA,SAAAkM,EAAAhM,GAAA,CACD,OAAO,CACX,CAGmCw1B,CAAWh7B,KAnB1B,SAACA,GAAS,IACHoN,EADGC,GAAAnI,EAAAA,EAAAA,GACPlF,GAAI,IAAvB,IAAAqN,EAAAlI,MAAAiI,EAAAC,EAAAjI,KAAAC,MAAyB,KAAdhB,EAAI+I,EAAAjQ,MACX,IAAK+4B,GAAO7xB,GACR,OAAO,CAEf,CAAC,OAAAiB,GAAA+H,EAAA9H,EAAAD,EAAA,SAAA+H,EAAA7H,GAAA,CACD,OAAO,CACX,CAYwDy1B,CAAYj7B,GAC5D,MAAM,IAAI45B,UAAU,yBAAD/5B,OAA0BG,EAAI,uBAGrD,IAAIk7B,GAAoB,EAClBhB,EAAal6B,EAAKhE,OAClBo8B,EAAwB,SAAC14B,EAAMyhB,GACjC,GAAKmE,EAAL,CAEK6S,IACDA,EAAiB1yB,MAAM/F,GAAM84B,KAAK,IAGtC,OAAO,SAACpK,GACJ,IAAKA,EAAKpH,eAAiBkU,EAGvB,OAFAA,GAAoB,OACpB5V,EAAW,CAAE0B,cAAc,IAJjB,IAACvgB,EAOf0xB,EAAehX,GAASiN,EAAKjxB,MAC7BmoB,EAAW,CAAE0B,cAAc,EAAM7pB,OARlBsJ,EAQmC0xB,EARxB1xB,EAAOlK,QAAO,SAACk8B,EAAKzuB,GAAI,OAAKyuB,EAAMzuB,CAAI,IAAItK,IASzE,CAbU,CAcd,EACA,OAAO6a,QAAQY,IAAInb,EAAKsH,KAAI,SAAC2gB,EAAM9G,GAC/B,OAAIuG,GAAWO,IAASqO,GAAMrO,GACnBkR,GAAWlR,EAAM,CACpB9F,UAAAA,EACAmJ,SAAAA,EACAhH,QAAAA,EACAkH,gBAAAA,EACAC,aAAAA,EACA5tB,MAAAA,EACAylB,OAAAA,EACAgC,WAAY8S,EAAsB8B,EAAY/Y,GAC9C/lB,OAAAA,EACAinB,YAAAA,EACAJ,UAAAA,EACAuC,8BAAAA,EACAC,0BAAAA,EACAuD,YAAAA,EACArD,mBAAAA,EACAN,QAAAA,EACAoI,sBAAAA,EACAC,2BAAAA,IACDlJ,MAAK,SAAC8M,GAAQ,OAAKA,EAASjC,IAAI,IAI5BpG,CAEf,KAAIzE,MAAK,SAACoK,GACN,OAAOD,GAAMC,EAAO,CAChBzL,UAAAA,EACAmC,QAAAA,EACAyJ,cAAAA,EACAvC,gBAAAA,EACAC,aAAAA,EACAnI,OAAAA,EACAloB,OAAAA,EACAinB,YAAAA,EACAJ,UAAAA,EACAuC,8BAAAA,EACAC,0BAAAA,IAECjB,MAAK,SAACsW,GAAS,OAAK,IAAID,GAAgBC,EAAW,CAAEzV,QAAAA,GAAU,IAC/Db,MAAK,SAACmK,GAEP,OADArI,GAAcA,EAAW,CAAE0B,cAAc,EAAM7pB,MAAO,IAC/CwwB,CACX,GACJ,GACJ,CAGA,IAiEMwN,GAAK,WAMP,SAAAA,EAAY3E,IAAa94B,EAAAA,EAAAA,GAAA,KAAAy9B,IAAA3d,EAAAA,EAAAA,GAAA,oBALV,IAACA,EAAAA,EAAAA,GAAA,gBACL,KAAEA,EAAAA,EAAAA,GAAA,gBACF,IAACA,EAAAA,EAAAA,GAAA,kBACC,IAAIpd,MAAKod,EAAAA,EAAAA,GAAA,kBACT,IAAIpd,KAEbxC,KAAKw9B,aAAe5E,CACxB,CAyCC,OAzCAl4B,EAAAA,EAAAA,GAAA68B,EAAA,EAAA7/B,IAAA,OAAA6B,MACD,WAEI,IAFG,IAAA6R,EAAA,KACGqsB,EAAYz9B,KAAKw9B,aAAex9B,KAAK09B,SAASC,EAAA,SAC3ChgC,GACL,IAAMigC,EAAOxsB,EAAKysB,SAAShV,QAC3B,IAAK+U,EACD,OAAAE,OAAA,GAEJ,IAAMC,EAAW3sB,EAAK4sB,WAAW17B,IAAIs7B,GAC/BK,EAAW7sB,EAAK8sB,WAAW57B,IAAIs7B,GACrC,IAAKG,IAAaE,EACd,MAAM,IAAInxB,MAAM,0DACpBsE,EAAKssB,UAAY,EACjBE,IACKO,SAAQ,WACT/sB,EAAK4sB,WAAWn8B,OAAO+7B,GACvBxsB,EAAK8sB,WAAWr8B,OAAO+7B,GACvBxsB,EAAKssB,UAAY,EACjBtsB,EAAKgtB,MACT,IACKxY,MAAK,SAACrmB,GAAK,OAAKw+B,EAASx+B,EAAM,IAC/BgnB,OAAM,SAAChP,GAAK,OAAK0mB,EAAS1mB,EAAM,GAAE,EAlBlC5Z,EAAI,EAAGA,EAAI8/B,EAAW9/B,IAAK,KAAA0gC,EAAAV,IAA1B,qBAAAU,EAAA,OAAAA,EAAAP,CAmBV,CACJ,GAAC,CAAApgC,IAAA,MAAA6B,MACD,SAAIq+B,GAAM,IAAAprB,EAAA,KACN,OAAO,IAAImK,SAAQ,SAACC,EAASC,GACzBrK,EAAKwrB,WAAWz7B,IAAIq7B,EAAMhhB,GAC1BpK,EAAK0rB,WAAW37B,IAAIq7B,EAAM/gB,GAC1BrK,EAAKqrB,SAAS91B,KAAK61B,GACnBprB,EAAK4rB,MACT,GACJ,GAAC,CAAA1gC,IAAA,UAAA4E,IACD,WACI,OAAOtC,KAAK69B,SAASz/B,MACzB,GAAC,CAAAV,IAAA,UAAA4E,IACD,WACI,OAAOtC,KAAK09B,QAChB,GAAC,CAAAhgC,IAAA,cAAA4E,IAKD,WACI,OAAOtC,KAAKw9B,YAChB,EAACj7B,IAND,SAAgBhD,GACZS,KAAKw9B,aAAej+B,EACpBS,KAAKo+B,MACT,KAACb,CAAA,CAjDM,GCzoDEe,GAAmB,SAACx5B,GAAK,OAAAxE,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAHP,CAAC,GAIjB,IACb,mBAAoB,GACpB,yBAA0B,CAAC,EAC3B,WAAY,GACZ,eAAgB,KAChB,cAAe,WACbwE,EAAM4B,KAAK,CACT,gBAAgB,EAChB,mBAAoB,IAExB,GAAC,EAIU63B,GAAmB,SAACz5B,GAAK,OAAAxE,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACjCg+B,GAAiBx5B,IAAM,IAC1B,kBAAmB,EACnB,cAAe,GACf,gBAAiB,KACjB,kBAAmB,KACnB,eAAgB,IAAIy4B,GAAM,GAC1B,oBAAqB,KAErB,oBAAqB,GAErB,mBAAoB,KAEpB,aAAc,KAEd,iBAAkB,IAAI77B,KAAK,ECpC7B,IACE,YAAa,KACb,qBAAsB,KACtB,cAAe,cACf,eAAgB,eAChB,cAAe,cACf,eAAgB,eAChB,kBAAmB,kBACnB,qBAAsB,qBACtB88B,SAAU,WACVvV,OAAQ,SACR,WAAY,WACZrI,OAAQ,SACR,oBAAqB,SACrBlD,MAAO,QACP,cAAe,OACf,aAAc,SACd,yBAA0B,kBAC1B,aAAc,aACd,cAAe,UACf+gB,KAAM,OACNh3B,KAAM,OACNi3B,GAAI,KACJ,mBAAoB,SACpBC,GAAI,KACJC,IAAK,MACL,sBAAuB,sBACvB,eAAgB,gBAChB,iBAAkB,YAClB,eAAgB,eAChB,mBAAoB,mBACpB,WAAY,oBACZC,OAAQ,SACR,mBAAoB,sBACpBC,UAAW,OACXC,YAAa,QACbC,WAAY,QACZC,aAAc,SACd,mBAAoB,6CACpB,gBAAiB,oCACjB,iBAAkB,4CAClB,eAAgB,4CAChB,iBAAkB,cAClB,oBAAqB,YACrB,kBAAmB,SACnB,gBAAiB,OACjB,oBAAqB,WACrB,mBAAoB,UACpB,kBAAmB,eACnB,mBAAoB,gBACpB,qBAAsB,YACtB,kBAAmB,SACnB,cAAe,KACf,oBAAqB,WACrB,eAAgB,MAChB,oBAAqB,WACrB,kBAAmB,SACnB,iBAAkB,QAClB,mBAAoB,mBACpB,iBAAkB,SAClB,eAAgB,OAChB,oBAAqB,YACrB,eAAgB,aAChB,oBAAqB,oBACrB,gBAAiB,gBACjBC,OAAQ,SACR,gBAAiB,gBACjB,kBAAmB,kBACnB91B,MAAO,QACP+1B,WAAY,aACZC,SAAU,WACVC,WAAY,aACZC,SAAU,WACVC,MAAO,QACPC,SAAU,WACVC,OAAQ,SACRC,QAAS,UACTC,SAAU,WACVC,OAAQ,eACRC,KAAM,OACN,eAAgB,eAChBxc,KAAM,OACNyc,KAAM,OACN,cAAe,cACf,WAAY,UACZ,cAAe,UACf,YAAa,OACb,YAAa,OACb,UAAW,UACX,oBAAqB,UACrB,4BAA6B,uBAC7B,4BAA6B,oCAC7B,6BAA8B,iBAC9B,gCAAiC,6BACjC,kCACE,uGACF,mCAAoC,8EACpC,6BAA8B,qDAC9B,wBAAyB,yEACzB,uBAAwB,iCACxB,wBAAyB,gDACzB,+BAAgC,iCChG5BC,GAAiB,IAAIv9B,IAErBw9B,GAAkB,IAAIx9B,IAStBy9B,GAAmB,SAACC,EAAYC,GAChCJ,GAAe5uB,IAAI+uB,IACrBl+B,QAAQgG,IAAI,UAAD/F,OAAWi+B,EAAU,wCAGlCH,GAAex9B,IAAI29B,GAAU5/B,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAO8/B,IAAOD,GAC7C,EAcaE,GAAe,SAACH,EAAYI,GACH,oBAAzBA,EATa,SAACJ,EAAYK,GACrCP,GAAgBz9B,IAAI29B,EAAYK,EAClC,CAQIC,CAAkBN,EAAYI,GAE9BL,GAAiBC,EAAYI,EAEjC,EAMaG,GAAuB,eAAA/kB,GAAAC,EAAAA,EAAAA,GAAAC,EAAAA,MAAG,SAAAC,EAAOqkB,GAAU,IAAAK,EAAAJ,EAAA,OAAAvkB,EAAAA,MAAA,SAAAE,GAAA,cAAAA,EAAA3P,KAAA2P,EAAA1P,MAAA,UACjD2zB,GAAe5uB,IAAI+uB,GAAa,CAAFpkB,EAAA1P,KAAA,WAC5B4zB,GAAgB7uB,IAAI+uB,GAAa,CAAFpkB,EAAA1P,KAAA,cAC5B,IAAIU,MAAM,UAAD7K,OAAWi+B,EAAU,oBAAkB,OAG2C,OAA7FK,EAA8DP,GAAgB19B,IAAI49B,GAAWpkB,EAAA1P,KAAA,EAC1Em0B,IAAoB,OAAvCJ,EAAUrkB,EAAAG,KAChBgkB,GAAiBC,EAAYC,GAAY,cAAArkB,EAAA8b,OAAA,SAGHmI,GAAez9B,IAAI49B,IAAW,wBAAApkB,EAAAI,OAAA,GAAAL,EAAA,KACvE,gBAZmCM,GAAA,OAAAT,EAAAtS,MAAA,KAAAtI,UAAA,KAcpCu/B,GAAa,KAAMD,ICxDZ,IAAMM,GAAiB,SAAChjC,GAAG,eAAAuE,OAAcvE,EAAG,EAGtCijC,GAAa,WAuBxB,SAAAA,EAAYC,GAAe,IAAAv/B,EAAA,MAAAvB,EAAAA,EAAAA,GAAA,KAAA6gC,IAAA/gB,EAAAA,EAAAA,GAAA,sBAlBV,OAAIA,EAAAA,EAAAA,GAAA,mBAGP,KAAEA,EAAAA,EAAAA,GAAA,kBAMH,IAAIle,MAAKke,EAAAA,EAAAA,GAAA,oBAMP,IAAIpd,KAIjBxC,KAAK6gC,eAAiBD,EAEtB,IAAK,IAAL/uB,EAAA,EAAA4Y,EAAyB5sB,OAAOiqB,QAAQsY,IAAGvuB,EAAA4Y,EAAArsB,OAAAyT,IAAE,CAAxC,IAAA6Y,GAAAzC,EAAAA,GAAAA,GAAAwC,EAAA5Y,GAAA,GAAKnU,EAAGgtB,EAAA,GAAEnrB,EAAKmrB,EAAA,GAClB1qB,KAAK6gC,eAAel/B,IAAI++B,GAAehjC,GAAM6B,GAAO,EACtD,CAEAoH,YAAW,WACTi6B,EAAcE,eAAe,aAAY,eAAAplB,GAAAC,EAAAA,EAAAA,GAAAC,EAAAA,MAAE,SAAAC,EAAOqkB,GAAU,IAAAa,EAAAZ,EAAAa,EAAAluB,EAAAmY,EAAAC,EAAAjO,EAAAH,EAAAmkB,EAAA55B,EAAAH,EAAA,OAAA0U,EAAAA,MAAA,SAAAE,GAAA,cAAAA,EAAA3P,KAAA2P,EAAA1P,MAAA,UACrD/K,EAAKw/B,gBAAmBX,EAAU,CAAApkB,EAAA1P,KAAA,eAAA0P,EAAA8b,OAAA,iBAGT,OAA9Bv2B,EAAK6/B,YAAchB,EAAWpkB,EAAA1P,KAAA,EACLq0B,GAAwBP,GAAW,OAA5C,GAAVC,EAAUrkB,EAAAG,KAtCM,OAuClBikB,GAAiC7+B,EAAK6/B,cAAgBhB,EAAU,CAAApkB,EAAA1P,KAAA,eAAA0P,EAAA8b,OAAA,iBAKpE,IADMoJ,EAA4D,QAAnDD,EAAG1/B,EAAKw/B,eAAeM,IAAIC,gCAAwB,IAAAL,OAAA,EAAhDA,EAAmDb,GACrEptB,EAAA,EAAAmY,EAA2BptB,OAAOiqB,QAAQqY,GAAWrtB,EAAAmY,EAAA7sB,OAAA0U,IAAE,CAAAoY,GAAAjD,EAAAA,GAAAA,GAAAgD,EAAAnY,GAAA,GAA3CpV,EAAGwtB,EAAA,GAAE3rB,EAAK2rB,EAAA,GACd+V,EAA2B,OAATD,QAAS,IAATA,OAAS,EAATA,EAAYtjC,GACpC2D,EAAKw/B,eAAel/B,IAAI++B,GAAehjC,GAAqB,OAAfujC,QAAe,IAAfA,EAAAA,EAAmB1hC,GAAO,GAAM8H,GAAAC,EAAAA,EAAAA,GACtDjG,EAAKggC,YAAU,IAAtC,IAAAh6B,EAAAE,MAAAL,EAAAG,EAAAG,KAAAC,OAAWlG,EAAQ2F,EAAA3H,QAElB,OAAAmI,GAAAL,EAAAM,EAAAD,EAAA,SAAAL,EAAAO,GAAA,CACH,CAAC,yBAAAkU,EAAAI,OAAA,GAAAL,EAAA,KACF,gBAAAM,GAAA,OAAAT,EAAAtS,MAAA,KAAAtI,UAAA,EAlBwC,IAoBzC8/B,EAAcE,eAAe,4BAA4B,SAACM,GACxD,GAAKA,EAAL,CAGA,IAAMjB,EAAaiB,EAAyB//B,EAAK6/B,aACjD,GAAKf,EAGL,IAAK,IAALnV,EAAA,EAAAiB,EAA2BpuB,OAAOiqB,QAAQqY,GAAWnV,EAAAiB,EAAA7tB,OAAA4sB,IAAE,KAAAsW,EAAlDtV,GAAA/D,EAAAA,GAAAA,GAAAgE,EAAAjB,GAAA,GAAOttB,EAAGsuB,EAAA,GAAEzsB,EAAKysB,EAAA,GACD,QAAnBsV,EAAAjgC,EAAKw/B,sBAAc,IAAAS,GAAnBA,EAAqB3/B,IAAI++B,GAAehjC,GAAM6B,GAAO,GAAM,IACrB2K,EADqBG,GAAA/C,EAAAA,EAAAA,GACpCjG,EAAKggC,YAAU,IAAtC,IAAAh3B,EAAA9C,MAAA2C,EAAAG,EAAA7C,KAAAC,MAAwC,EACtClG,EADiB2I,EAAA3K,QAEnB,CAAC,OAAAmI,GAAA2C,EAAA1C,EAAAD,EAAA,SAAA2C,EAAAzC,GAAA,CACH,CAVA,CAWF,GACF,GACF,CAiDC,OA/CDlH,EAAAA,EAAAA,GAAAigC,EAAA,EAAAjjC,IAAA,iBAAA6B,MAIA,SAAegC,GAAU,IAAAC,EAAA,KACjB+/B,EAAcrhB,EAAS3e,EAAU,GAEvC,OADAvB,KAAKqhC,WAAW1/B,IAAI4/B,GACb,WACL//B,EAAK6/B,WAAWx/B,OAAO0/B,EACzB,CACF,GAEA,CAAA7jC,IAAA,WAAA6B,MAKA,SAASiiC,EAAO9jC,EAAKqgC,GAAU,IAAA0D,EAAAC,EAAAC,EAC7BH,EAAM5zB,EAAElQ,GAAOqgC,IAEV/9B,KAAK4hC,aAAazwB,IAAIqwB,IACzBxhC,KAAK4hC,aAAar/B,IAAIi/B,EAAO,IAAIh/B,KAGP,QAA5Bi/B,EAAAzhC,KAAK4hC,aAAat/B,IAAIk/B,UAAM,IAAAC,GAAU,QAAVC,EAA5BD,EAA8Bn/B,IAAI5E,UAAI,IAAAgkC,GAAtCA,IAEA,IAAMhuB,EAAkB1T,KAAK6hC,gBAAe,WAC1CL,EAAM5zB,EAAElQ,GAAOqgC,GACjB,IAE4B,QAA5B4D,EAAA3hC,KAAK4hC,aAAat/B,IAAIk/B,UAAM,IAAAG,GAA5BA,EAA8Bp/B,IAAI7E,EAAKgW,EACzC,GAEA,CAAAhW,IAAA,sBAAA6B,MACA,SAAoBiiC,GAClB,IAAMM,EAAY9hC,KAAK4hC,aAAat/B,IAAIk/B,GACxC,GAAKM,EAAL,CAEC,IACwC3yB,EADxCC,GAAA9H,EAAAA,EAAAA,GACsBw6B,EAAUj5B,UAAQ,IAAzC,IAAAuG,EAAA7H,MAAA4H,EAAAC,EAAA5H,KAAAC,MAA2C,EACzClG,EADiB4N,EAAA5P,QAEnB,CAAC,OAAAmI,GAAA0H,EAAAzH,EAAAD,EAAA,SAAA0H,EAAAxH,GAAA,CACD5H,KAAK4hC,aAAa//B,OAAO2/B,EAJzB,CAKF,GAAC,CAAA9jC,IAAA,UAAA6B,MAED,WACES,KAAKqhC,WAAW3jB,OAClB,KAACijB,CAAA,CApHuB,GCAnB,SAASoB,GAAcl9B,EAAIC,IAChCpG,EAAAA,EAAAA,GAAImG,EAAGE,iBAAiB,WAAWzD,SAAQ,SAAC0D,GAC1C,IAAItH,EAAMsH,EAAGG,aAAa,QAC1B,GAAKzH,EAAL,CAGA,IAAIskC,EAAS,cACTC,GAAe,EACnB,GAAIvkC,EAAIuD,SAAS,KAAM,CACrB,IAAMihC,EAAMxkC,EAAI4G,MAAM,KACtB09B,EAASE,EAAI,GACbxkC,EAAMwkC,EAAI,GACNF,EAAOhjC,WAAW,OACpBgjC,EAASA,EAAO56B,MAAM,GACtB66B,GAAe,EAEnB,CAGA,IAAME,EAAczkC,EAChBoH,EAAMqM,IAAIgxB,IACZr9B,EAAMqB,IAAIg8B,GAAa,SAACC,GACtB,GAAKA,EAAL,CAIKt9B,EAAMu9B,kBAAkBlxB,IAAIgxB,IAC/Br9B,EAAMu9B,kBAAkB9/B,IAAI4/B,EAAa,IAAIzgC,KAE/C,IAAM4gC,EAAUx9B,EAAMu9B,kBAAkB//B,IAAI6/B,GACrC,OAAPG,QAAO,IAAPA,GAAAA,EAAShhC,SAEP,SAAC6E,GACCA,EAAIvE,SACJ0gC,EAAQzgC,OAAOsE,GACfrB,EAAMiJ,QAAQlM,OAAOsE,EACvB,IAGF,IAAMo8B,EAAe7B,GAAe0B,GAAWnjC,QAAQ,IAAK,IAEvD6F,EAAMiN,QAAQZ,IAAIoxB,IACrBz9B,EAAMiN,QAAQpQ,IAAI4gC,EAAcH,GAGlC,IAAMj8B,EAAMrB,EAAMiN,QAAQ5L,IAAIo8B,GAAc,WAC1Cv9B,EAAiCg9B,GAAWl9B,EAAM09B,KAAKJ,EACzD,IACO,OAAPE,QAAO,IAAPA,GAAAA,EAAS3gC,IAAIwE,GAEbrB,EAAMiJ,QAAQpM,IAAIwE,GAClBnB,EAAGiD,gBAAgB,OA3BnB,CA4BF,IAIF,IAAMw6B,EAAW/B,GAAehjC,GAC3BoH,EAAMqM,IAAIsxB,IACb39B,EAAMnD,IAAI8gC,EAAU,IAEtB39B,EAAMqB,IAAIs8B,GAAU,WAEdR,EACFj9B,EAAGyF,aAAau3B,EAAQl9B,EAAM09B,KAAK9kC,IAEnCsH,EAAiCg9B,GAAWl9B,EAAM09B,KAAK9kC,EAE3D,IACAsH,EAAGiD,gBAAgB,OA/DnB,CAgEF,GACF,CCxEO,IAAMy6B,GAAkB,SAAChlC,GAAG,cAAAuE,OAAavE,EAAG,ECCtCilC,GAAwB,SAACC,GACpC,GAAyB,kBAAdA,IAA2BA,EACpC,MAAO,GAET,IAAI54B,EAAM44B,EAAU34B,OAUpB,OATID,EAAIhL,WAAW,MACjBgL,EAAMA,EAAI5C,MAAM,GACP4C,EAAIhL,WAAW,OACxBgL,EAAMA,EAAI5C,MAAM,IAGd4C,EAAI64B,SAAS,OACf74B,EAAMA,EAAI5C,MAAM,EAAG4C,EAAI5L,OAAS,IAE3B4L,CACT,EAQa84B,GAAoB,WAAmB,QAAApiB,EAAA5f,UAAA1C,OAAf2kC,EAAU,IAAAl7B,MAAA6Y,GAAAzD,EAAA,EAAAA,EAAAyD,EAAAzD,IAAV8lB,EAAU9lB,GAAAnc,UAAAmc,GAC7C,OAAO8lB,EACJne,QAAO,SAACoe,GAAE,MAAmB,kBAAPA,GAAmBA,CAAE,IAC3Ct5B,KAAI,SAACs5B,GAAE,OAAKL,GAA6CK,EAAI,IAC7Dp5B,KAAK,MACV,EASaq5B,GAAwB,WACnC,IAAIC,EAASJ,GAAiB15B,WAAC,EAADtI,WAC9B,OAAOoiC,EAAS,KAAHjhC,OAAQihC,EAAM,KAAM,EACnC,EAQO,SAASC,GAAgBpQ,GAC9B,IAAIrc,EAAM,IAAIH,IAAIwc,GACdqQ,EAAW1sB,EAAImV,SAAWnV,EAAIiB,OAASjB,EAAI2sB,KAC3CC,EAAiBF,EAASG,YAAY,QACtCC,EAAmBJ,EAASG,YAAY,KACxChW,EAAW,GAQf,OANI+V,GAAkB,EACpB/V,EAAW6V,EAASh8B,MAAMk8B,GACjBE,GAAoB,IAC7BjW,EAAW6V,EAASh8B,MAAMo8B,EAAmB,IAGxCjW,CACT,CAQO,SAASkW,GAAY1Q,GAC1B,IACMlH,EADI,IAAItV,IAAIwc,GACZlH,SACA6X,EAAa7X,EAAS5tB,QAAQ,KAC9B0lC,EAAmB9X,EAAS5tB,QAAQ,IAAKylC,EAAa,GAC5D,OAAO7X,EAAS/I,UAAU4gB,EAAa,EAAGC,EAC5C,CAQO,SAASC,GAAkB7Q,GAChC,IAAI8Q,EAAkBC,GAAa/Q,GAC/Brc,EAAM,IAAIH,IAAIstB,GACdE,EAAmBrtB,EAAImV,SAAS5tB,QAAQ,OAC5C,OAA0B,IAAtB8lC,EACK,GAEWrtB,EAAImV,SAAS/I,UAAUihB,GAGxCz/B,MAAM,OACNsgB,OAAOpa,SACPd,KAAI,SAACk5B,GAAS,OAAKD,GAAsBC,EAAU,GACxD,CAQO,SAASkB,GAAa/Q,GAC3B,IAAIrc,EAAM,IAAIH,IAAIwc,GACdxF,EAAW4V,GAAgBpQ,GAC3BiR,EAAmBC,GAAU1W,GAAY2W,GAAa3W,GAAU1B,SAAW0B,EAK/E,OAHA7W,EAAImV,SAAWnV,EAAImV,SAAS5sB,QAAQ+kC,EAAkB,IACtDttB,EAAIiB,OAAS,GACbjB,EAAI2sB,KAAO,GACJ3sB,EAAI+L,UACb,CAQO,SAASwhB,GAAU1W,GACxB,OAAOA,EAASvuB,WAAW,OAC7B,CAQO,SAASklC,GAAaC,GAC3B,IAAIztB,EAAM,IAAIH,IAAI4tB,GAClB,MAAO,CACLtY,SAAUnV,EAAI0tB,OAAS1tB,EAAImV,UAAY,GACvClU,OAAQjB,EAAIiB,QAAU,GACtB0rB,KAAM3sB,EAAI2sB,MAAQ,GAEtB,CAYO,IAAMgB,GAAe,SAACC,EAAYC,EAAchX,GACrD,IAAI7W,EAAM,IAAIH,IAAIutB,GAAaQ,IAM/B,GALA/W,EAAWA,GAAY4V,GAAgBmB,GAEnC5tB,EAAImV,SAAS7sB,WAAW,QAC1B0X,EAAImV,SAAWnV,EAAImV,SAAS5sB,QAAQ,KAAM,MAExCglC,GAAU1W,GAAW,CACvB,IAAIiX,EAAWN,GAAa3W,GAC5B7W,EAAImV,SAAWnV,EAAImV,UAAY0Y,GAAgB,KAAOC,EAAS3Y,UAAY,IAC3EnV,EAAIiB,OAAS6sB,EAAS7sB,OACtBjB,EAAI2sB,KAAOmB,EAASnB,IACtB,MACE3sB,EAAImV,SAAWnV,EAAImV,UAAY0Y,GAAgB,KAAOhX,GAAY,IAEpE,OAAO7W,EAAI+L,UACb,EASagiB,GAAoB,SAAC1R,EAAQtC,GACxC,IAAI/Z,EAAM,IAAIH,IAAIwc,GAElB,OADArc,EAAImV,SAAW4E,EAAO,IACf/Z,EAAI+L,UACb,ECxLaiiB,GAAgB,SAAC16B,GAAyB,IAApB26B,EAAS7jC,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAAG,IAC7C,OAAOkJ,EACJC,OACA3F,MAAMqgC,GACNj7B,KAAI,SAACgL,GAAI,OAAKA,EAAKzK,MAAM,IACzB2a,QAAO,SAAClQ,GAAI,OAAKA,EAAKtW,OAAS,CAAC,GACrC,ECLawmC,GAAsB/mC,OAAO6E,OAAO,CAC/Cy8B,WAAY,EACZG,SAAU,EACVC,MAAO,IACPH,SAAU,EACVC,WAAY,EACZG,SAAU,EACVC,OAAQ,EACRC,QAAS,EACT9a,OAAQ,EACRsa,OAAQ,EACR2F,QAAQ,EACRC,MAAM,EACNjF,UAAM9+B,IAIFgkC,GAAqD,CACzD,UACA,aACA,WACA,QACA,WACA,aACA,WACA,SACA,SACA,SACA,OACA,SACA,QAuCK,SAASC,GAA4BC,GAC1C,OAAOnC,GAAAA,WAAkB,GAADpkC,EAAAA,EAAAA,GACnBqmC,GAA6BngB,QAC9B,SAACge,GAAS,MAA2C,qBAA/BqC,EAAgBrC,IAA6D,OAA/BqC,EAAgBrC,EAAmB,IAEtGl5B,KAAI,SAACk5B,GAEJ,OAtCR,SAA6BA,EAAWnrB,GACtC,GAAuB,kBAAZA,EAAsB,CAC/B,IAAMlY,EAAQkY,EACd,OAAOmtB,GAAoBhC,KAAerjC,EAAQ,GAAH0C,OAAM2gC,EAAS,KAAA3gC,OAAI1C,GAAU,EAC9E,CAEA,GAAuB,mBAAZkY,EAAuB,CAChC,IAAMlY,EAAQkY,EACd,OAAOmtB,GAAoBhC,KAAerjC,EAAQ,GAAH0C,OAAM2gC,GAAc,EACrE,CAEA,GAAkB,WAAdA,GAA0BnrB,EAAS,CACrC,IAAQ7Y,EAA2F6Y,EAA3F7Y,KAAMsmC,EAAqFztB,EAArFytB,OACd,OAAIN,GAAoBhgB,SAAWsgB,EAC1B,GAEF,GAAPjjC,OAAU2gC,EAAS,KAAA3gC,OAAIrD,EAAI,KAAAqD,OAAIijC,EACjC,CAEA,GAAkB,SAAdtC,GAAwBnrB,EAAS,CACnC,IAAM0tB,EAA+F1tB,EAA/F0tB,WAAYC,EAAmF3tB,EAAnF2tB,OAClB,MAAO,GAAPnjC,OAAU2gC,EAAS,KAAA3gC,OAAIkjC,EAAWv7B,KAAK,KAAI,KAAA3H,OAAImjC,EAAOx7B,KAAK,KAC7D,CAEA,MAAO,EACT,CAaey7B,CAAoBzC,EADbqC,EAAgBrC,GAEhC,IACChe,QAAO,SAAC5a,GAAG,QAAOA,CAAG,KAE5B,CAEO,IAAMs7B,GAAoBxC,GAAkB,cAAe,mBAG5DyC,GAAW,SAAH7pB,GAAA,IAAKnc,GAAL0oB,EAAAA,GAAAA,GAAAvM,EAAA,GAAU,SAAwB,qBAAVnc,EAAwBoS,OAAOpS,QAASwB,CAAS,EACjFykC,GAAY,WAAH,OAAS,CAAI,EA8BtBC,GAAuB5nC,OAAO6E,OAAO,CACzCg9B,QAAS6F,GACTpG,WAAYoG,GACZjG,SAAUiG,GACVhG,MAAOgG,GACPnG,SAAUmG,GACVlG,WAAYkG,GACZ/F,SAAU+F,GACV9F,OAAQ8F,GACR3gB,OArCe,SAAHV,GAAA,IAAA+B,GAAAgC,EAAAA,GAAAA,GAAA/D,EAAA,GAAKtlB,EAAIqnB,EAAA,GAAEif,EAAMjf,EAAA,SAAO,CACpCrnB,KAAAA,EACAsmC,OAA0B,qBAAXA,EAAyBvzB,OAAOuzB,GAAU,IAC1D,EAmCCL,OAAQW,GACRV,KAAMU,GACNtG,OAAQqG,GACR1F,KA7Ba,SAAHvY,GAAgC,IAAAgD,GAAArC,EAAAA,GAAAA,GAAAX,EAAA,GAA3B6d,EAAU7a,EAAA,GAAEob,EAASpb,EAAA,GACpC,IAAK,UAAUmO,KAAK0M,KAAgB,UAAU1M,KAAKiN,GACjD,MAAM,IAAI54B,MAAM,6EAGlB,MAAO,CACLq4B,WAAYT,GAAcS,EAAY,KAAKz7B,IAAIiI,QAC/CyzB,OAAQV,GAAcgB,GAAWh8B,IAAIiI,QAEzC,IA2BO,SAASg0B,GAA4B5C,GAE1C,IACkC77B,EAD5B+9B,EAAkB,CAAC,EAAE59B,GAAAC,EAAAA,EAAAA,GACHy7B,GAAU,IAAlC,IAAA17B,EAAAE,MAAAL,EAAAG,EAAAG,KAAAC,MAAoC,KAAzBm7B,EAAS17B,EAAA3H,MAClBqmC,EAAwBhD,EAAUt+B,MAAM,KAAIuhC,GAAAxa,EAAAA,GAAAA,GAAAua,GAArChnC,EAAIinC,EAAA,GAAKllB,EAAIklB,EAAAz+B,MAAA,GACpB,GAAK29B,GAA6B9jC,SAASrC,GAA3C,CAGA,IAAMknC,EAA8ElnC,EAC9EmnC,EAAYN,GAAqBK,GACvC,IACE,IAAMvmC,EAAQwmC,EAAUplB,GACxBskB,EAAgBa,GAAiBvmC,CASnC,CARE,MAAOmI,GACP1F,QAAQrB,KACN,CAAC,kCAADsB,OACoC2gC,EAAS,0BAC3Cl7B,aAAeoF,MAAQ,mBAAH7K,OAAsByF,EAAI4d,QAAO,KAAM5d,EAC3D,wHACAkC,KAAK,MAEX,CAdA,CAeF,CAAC,OAAAlC,GAAAL,EAAAM,EAAAD,EAAA,SAAAL,EAAAO,GAAA,CAED,OAAO,CACT,CCnKO,IAAMo+B,GAAQnoC,OAAO6E,OAAO,CACjCujC,KAAM,OACNC,OAAQ,SACRC,QAAS,YAEEC,GAAW,CAACJ,GAAMC,KAAMD,GAAME,OAAQF,GAAMG,SAE5CE,GAAuB,CAClC,aACA,WACA,QACA,WACA,aACA,WACA,SACA,WAGWC,GAAc,CACzB,SACA,UACA,UACA,SACA,UACA,QACA,QACA,SACA,SACA,UACA,WACA,SACA,QACA,QACA,WACA,SACA,UACA,SACA,QACA,QACA,UACA,SACA,SACA,UACA,SACA,SACA,QACA,QACA,UACA,SACA,SACA,aACA,UACA,SACA,SACA,SACA,QACA,SACA,SACA,UAGWC,GAAsB,CAAC,SAAU,SAAU,QAG3CC,GAA0B3oC,OAAO6E,OAAO,CACnDy8B,WAAY,CACVsH,KAAM7B,GAAoBzF,WAC1BuH,MAAO,EAAE,IAAK,KACdC,gBAAiB,GAEnBrH,SAAU,CACRmH,KAAM7B,GAAoBtF,SAC1BoH,MAAO,EAAE,IAAK,KACdC,gBAAiB,GAEnBpH,MAAO,CACLkH,KAAM7B,GAAoBrF,MAC1BmH,MAAO,CAAC,EAAG,KACXC,gBAAiB,GAEnBvH,SAAU,CACRqH,KAAM7B,GAAoBxF,SAC1BsH,MAAO,EAAE,IAAK,KACdC,gBAAiB,GAEnBtH,WAAY,CACVoH,KAAM7B,GAAoBvF,WAC1BqH,MAAO,EAAE,IAAK,KACdC,gBAAiB,GAEnBnH,SAAU,CACRiH,KAAM7B,GAAoBpF,SAC1BkH,MAAO,EAAE,IAAK,KACdC,gBAAiB,GAEnBlH,OAAQ,CACNgH,KAAM7B,GAAoBnF,OAC1BiH,MAAO,EAAE,IAAK,KACdC,gBAAiB,GAEnBjH,QAAS,CACP+G,KAAM7B,GAAoBlF,QAC1BgH,MAAO,CAAC,EAAG,KACXC,gBAAiB,GAEnB/hB,OAAQ,CACN6hB,KAAM7B,GAAoBhgB,OAC1B8hB,MAAO,CAAC,EAAG,KACXC,gBAAiB,KCnGRC,GAAe,SAACrnC,GAC3B,OAAKA,EAIEA,EAAMqK,KAAK,KAHT,EAIX,ECRai9B,GAAgB,CAC3BC,OAAQ,GACRC,UAAU,EACVC,YAAa,EACbC,YAAat1B,OAAOu1B,iBAEpBC,eAAe,EACfC,SAAS,EACTC,OAAQ,GACRC,8BAA+B,GAC/BrnC,MAAO,OACPsnC,cAAc,EACdC,cAAe,GACfC,WAAY,sCACZC,qBAAsBd,GAAaR,IACnCuB,sBAAuB,EACvBC,UAAW,GACXC,eAAe,EACfC,qBAAqB,EACrBC,qBAAqB,EACrBC,iBAAiB,EACjBC,WAAY,GACZC,YAAa,GAEbC,iBAAiB,EACjBC,sBAAsB,EAEtBC,gBAAgB,EAEhBC,oBAAqB,GACrBC,SAnC+B,uBAoC/BC,QAnC8B,gCAoC9BC,cAnCqC,gCAoCrC7a,gBAAiB,GACjBC,aAAc,GACd6a,oBAAqB,GACrB9hB,8BAA+B,EAC/BE,qBAAsB,SACtBC,mBAAoB,QACpBE,sBAAuB,GACvB0hB,+BAAgC,EAChCC,qBAAsB,EACtB/Z,uBAAuB,EACvBC,4BAA4B,EAE5B+Z,aAAa,EACbC,qBAAsB,GACtBC,OAAO,EAEP9a,SAAU,KACViS,WAAY,KACZkB,yBAA0B,KAC1B4H,iBAAkB,MChDdC,GAAa,MAGNC,GAAK,SAAAh8B,IAAA3H,EAAAA,EAAAA,GAAA2jC,EAAAh8B,GAAA,IAAA1H,GAAAC,EAAAA,EAAAA,GAAAyjC,GAmDhB,SAAAA,IAAc,IAAA7nC,EAK6B,OAL7BvB,EAAAA,EAAAA,GAAA,KAAAopC,GACZ7nC,EAAAmE,EAAAxH,KAAA,OACA4hB,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,kBAjDe,IAAKue,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,uBACA,IAAIue,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,eAEX,OAAIue,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,QZrBU,CAAC,GYoE5BA,EAAKghC,kBAAoB,IAAI7/B,IAE7BnB,EAAK4R,qBAAqB8uB,IAAe1gC,CAC3C,CAuPC,OArPDX,EAAAA,EAAAA,GAAAwoC,EAAA,EAAAxrC,IAAA,OAAA6B,MA3CA,SAAKyK,GAAqB,IAAhBm/B,EAASroC,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAAG,CAAC,EACrB,IAAKkJ,EACH,MAAO,GAET,IAEsC9C,EAFlClB,EAAWhG,KAAK4N,EAAE8yB,GAAe12B,KAASA,EAC1C2Y,EAAgBD,GAAiB1c,GAAUqB,GAAAC,EAAAA,EAAAA,GACtBqb,GAAa,IAAtC,IAAAtb,EAAAE,MAAAL,EAAAG,EAAAG,KAAAC,MAAwC,KAA/B2hC,EAAYliC,EAAA3H,MACnB4pC,EAAUC,EAAavmB,UAAY7iB,KAAKqpC,UACtCD,EAAapmB,UACbrR,OAAOw3B,EAAUC,EAAanmB,gBAElC,CAAC,OAAAvb,GAAAL,EAAAM,EAAAD,EAAA,SAAAL,EAAAO,GAAA,CACD,IAAI+C,EAASsX,GAAkBjc,EAAUmjC,GACzC,OAAOx+B,CACT,GAEA,CAAAjN,IAAA,YAAA6B,MAKA,SAAU7B,EAAKikB,GACb,IAAMD,EAAS1hB,KAAKwiC,KAAK,cAAgB,KACnC8G,EAAa7nB,EAAcC,EAAQC,GACzC,OAAO3hB,KAAKwiC,KAAK,GAADvgC,OAAIvE,EAAG,MAAAuE,OAAKqnC,GAC9B,GAEA,CAAA5rC,IAAA,WAAA6B,MAIA,SAAS7B,EAAKqgC,GAAU,IAAAwL,EACJ,QAAlBA,EAAAvpC,KAAKwpC,qBAAa,IAAAD,GAAlBA,EAAoBE,SAASzpC,KAAMtC,EAAKqgC,EAC1C,GAAC,CAAArgC,IAAA,OAAA6B,MAeD,SAAKsV,EAAMkL,EAAStI,GAElB,IAAMiyB,EAAe1pC,KAAKmR,IAAI,kBAAoBnR,KAAK4N,EAAE,iBACpD87B,GAGLA,EAAalV,KAAK3f,EAAMkL,EAAStI,EACnC,GAEA,CAAA/Z,IAAA,gBAAA6B,MAIA,SAAcgC,GAGZ,IACgC2I,EAD5By/B,EAAiB3pC,KAAK4N,EAAE,mBAAmBvD,GAAA/C,EAAAA,EAAAA,GAC7BqiC,GAAc,IAAhC,IAAAt/B,EAAA9C,MAAA2C,EAAAG,EAAA7C,KAAAC,MAAkC,CAChC,GAAIlG,EADQ2I,EAAA3K,OAEV,OAAO,CAEX,CAAC,OAAAmI,GAAA2C,EAAA1C,EAAAD,EAAA,SAAA2C,EAAAzC,GAAA,CACD,OAAO,CACT,GAEA,CAAAlK,IAAA,gBAAA6B,MAIA,SAAcc,EAAM6T,GAClBlU,KAAK4pC,MAAIhqB,EAAAA,EAAAA,GAAC,CAAD,EAEJvf,EAAO6T,IAEV,EAEJ,GAEA,CAAAxW,IAAA,cAAA6B,MACA,SAAYsqC,GACN7pC,KAAK8pC,eAAc,SAACC,GAAC,OAAKA,EAAEF,eAAiBA,CAAY,IAC3D7pC,KAAK4N,EAAE,oBAAsBi8B,EAG/B7nC,QAAQrB,KAAK,kBAADsB,OAAmB4nC,EAAY,8BAC7C,GAAC,CAAAnsC,IAAA,oBAAA6B,MAED,WAAoB,IAAAiC,EAAA,KACZwoC,EAAyChqC,KAAKD,YAAaiqC,UAC7DA,GACFhqC,KAAKiqC,UAAUC,OAAO,GAADjoC,OAAIgnC,IAAUhnC,OAAG+nC,IAAa,GAGjDhqC,KAAK4I,aAAa,WAEpB5I,KAAKD,YAAsB,SAAI,KAC/BC,KAAKmO,kBAAmB,GAEtBnO,KAAKmqC,edhImB,SAAHzuB,GAAoE,IAA9D0uB,EAAO1uB,EAAP0uB,QAASC,EAAS3uB,EAAT2uB,UAAWC,EAAS5uB,EAAT4uB,UAAWC,EAAS7uB,EAAT6uB,UAASC,EAAA9uB,EAAE0E,QAAAA,OAAO,IAAAoqB,EAAG,IAAGA,EAClFC,EAAmBL,EAAQjlC,aAAaklC,GAC9C,GAAyB,OAArBI,EAAJ,CAKA,IAAMC,EAAW,IAAI/1B,kBAAiB,SAACg2B,GACrC,IAAMC,EAAWD,EAAUA,EAAUvsC,OAAS,GAC9CysC,EAAeD,EACjB,IAEAF,EAAS31B,QAAQq1B,EAAS,CACxB5gC,YAAY,EACZ0L,gBAAiB,CAACm1B,KAGpB,IAAMhqB,EAAY1Z,YAAW,WAC3B+jC,EAAS12B,aACTu2B,GACF,GAAGnqB,GAGGyqB,EAAiB,SAACD,GACtB,IAAME,EAAYV,EAAQjlC,aAAaklC,GACjB,eAAlBO,EAAS/1B,MAAyB+1B,EAASG,gBAAkBV,GAA2B,OAAdS,IAC5Ep4B,aAAa2N,GACbqqB,EAAS12B,aACTs2B,EAAUQ,GAEd,CAzBA,MAFER,EAAUG,EA4Bd,CckGMO,CAAiB,CACfZ,QAASpqC,KACTqqC,UAAW,WACXC,UAAW,WAGTrsB,GAAAgtB,EAAAA,EAAAA,GAAA/B,EAAAprC,WAAA,oBAAA0D,GAAAxD,KAAAwD,EACF,EACA+oC,UAAW,WACTvoC,QAAQuV,MAAM,sDAChB,IAGF0G,GAAAgtB,EAAAA,EAAAA,GAAA/B,EAAAprC,WAAA,0BAAAE,KAAA,MAGF8iB,EAAoBoqB,eAAelrC,KACrC,GAAC,CAAAtC,IAAA,uBAAA6B,MAED,WACE0e,GAAAgtB,EAAAA,EAAAA,GAAA/B,EAAAprC,WAAA,6BAAAE,KAAA,MACA8iB,EAAoBqqB,iBAAiBnrC,KACvC,GAAC,CAAAtC,IAAA,eAAA6B,MAED,WAAe,IAAAmG,EAAA,KACR1F,KAAKmR,IAAI,oBACZnR,KAAK2B,IAAI,kBAAmB,IAAID,KAGb1B,KAAK4N,EAAE,mBACbjM,IAAI3B,MAEdA,KAAKmR,IAAI,kBACZnR,KAAK2B,IAAI,gBAAiB,IAAI+d,EAAa1f,KAAK2f,WAAWxB,KAAKne,QAE7DA,KAAKmR,IAAI,mBACZnR,KAAK2B,IAAI,iBAAkB,IAAIg/B,GAAc3gC,OAG/CA,KAAKmG,IAAIu6B,GAAe,cAAc,SAAC0K,GACrC1lC,EAAKC,MAAM0lC,UjBlLiB,SAACD,GAAa,IAAAE,EAOxC5pB,EAA6B,IAAIE,KAAK2pB,OAAOH,GAC/CC,EAAY,MAMhB,MALkC,oBAAvB3pB,EAAO8pB,aAA8B9pB,EAAO8pB,cAAcH,UACnEA,EAAY3pB,EAAO8pB,cAAcH,UACxB,aAAc3pB,GAAyB,QAAnB4pB,EAAI5pB,EAAO+pB,gBAAQ,IAAAH,GAAfA,EAAiBD,YAClDA,EAAY3pB,EAAO+pB,SAASJ,WAEvBA,CACT,CiBmK6BK,CAAmBN,EAC5C,GACF,GAEA,CAAA1tC,IAAA,gBAAA4E,IACA,WACE,OAAOtC,KAAKmR,IAAI,kBAAoBnR,KAAK4N,EAAE,kBAAoB,IACjE,GAAC,CAAAlQ,IAAA,kBAAA6B,MAED,WAAkB,IAAAosC,EAAAt+B,EAAA,KAEZs8B,EAAiB3pC,KAAK4N,EAAE,mBAC5B+7B,EAAe9nC,OAAO7B,MAEJ,QAAlB2rC,EAAA3rC,KAAKwpC,qBAAa,IAAAmC,GAAlBA,EAAoBC,oBAAoB5rC,MACxCA,KAAKqiC,kBAAoB,IAAI7/B,IAI7B5C,EAAKisC,UAAU7rC,MAEa,IAAxB2pC,EAAe7nC,MACjB6E,YAAW,WAET0G,EAAKy+B,oBACP,GAAG,EAEP,GAEA,CAAApuC,IAAA,qBAAA6B,MAKA,WAAqB,IAAAwsC,EACnBnsC,EAAKisC,UAAU7rC,KAAKqQ,SAEF,QAAlB07B,EAAA/rC,KAAKwpC,qBAAa,IAAAuC,GAAlBA,EAAoB9U,SACtB,GAEA,CAAAv5B,IAAA,cAAA6B,MAIA,SAAYysC,GAAqB,IAAdC,EAAQnrC,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAAG,EACxBorC,EAAQ,CAAC,IAAK,KAAM,KAAM,KAAM,MAKpC,GAAc,IAAVF,EACF,MAAO,KAAP/pC,OAAYiqC,EAAM,IAEpB,IAAItlC,EAAI,KACJulC,EAAKF,EAAW,EAAI,EAAIA,EACxBtuC,EAAImG,KAAKsoC,MAAMtoC,KAAKkE,IAAIgkC,GAASloC,KAAKkE,IAAIpB,IAC9C,OAAOylC,YAAYL,EAAKloC,KAAA6oB,IAAG/lB,EAAKjJ,IAAG2uC,QAAQH,IAAO,IAAMD,EAAMvuC,EAChE,GAEA,CAAAD,IAAA,WAAA6B,MAIA,SAASmX,GACP,IAAI61B,EAAevsC,KAAKmhC,IAAIuH,oBAC5B,OAAK6D,EAGEtqB,GACLsqB,EACA,CAAEC,WAAY91B,GACd,CAAE6L,UAAW,SAAChjB,GAAK,OAAK6F,OAAOqnC,mBAAmBltC,EAAM,IALjDmX,CAOX,GAEA,CAAAhZ,IAAA,MAAA4E,IACA,WAAU,IAAAkM,EAAA,KACR,IAAKxO,KAAK0sC,WAAY,CACpB,IAAIvsC,EAAItC,OAAO4C,OAAO,MAEtBT,KAAK0sC,WAAa,IAAIp7B,MAAMnR,EAAG,CAC7BoC,IAAK,SAACjD,EAAK5B,EAAK6B,GACd,GAAmB,kBAAR7B,EACT,OAAO,EAET,IAAMivC,EAAYjK,GAAoEhlC,GAKtF,OAJK8Q,EAAK2C,IAAIw7B,IACZn+B,EAAK7M,IAAIgrC,EAAW9F,GAAkEnpC,IAExF8Q,EAAKZ,EAAE++B,GAAaptC,GACb,CACT,EAKA+C,IAAK,SAAChD,EAAK5B,GACT,IAAMivC,EAAYjK,GAAgBhlC,GAIlC,OAHK8Q,EAAK2C,IAAIw7B,IACZn+B,EAAK7M,IAAIgrC,EAAW9F,GAAcnpC,IAE7B8Q,EAAKZ,EAAE80B,GAAgBhlC,GAChC,GAEJ,CACA,OAAOsC,KAAK0sC,UACd,GAEA,CAAAhvC,IAAA,iBAAA6B,MAKA,SAAe7B,EAAK6D,GAClB,IAAMorC,EAAYjK,GAAgBhlC,GAC7BsC,KAAKmR,IAAIw7B,IACZ3sC,KAAK2B,IAAIgrC,EAAW9F,GAAcnpC,IAEpCsC,KAAKmG,IAAIwmC,EAAWprC,EACtB,GAEA,CAAA7D,IAAA,aAAA6B,MACA,WAAoB,IAAAqtC,EAClB,GAAK5sC,KAAKmhC,IAAI4H,MAAd,CAEC,QAAAroB,EAAA5f,UAAA1C,OAHWuiB,EAAI,IAAA9Y,MAAA6Y,GAAAzD,EAAA,EAAAA,EAAAyD,EAAAzD,IAAJ0D,EAAI1D,GAAAnc,UAAAmc,GAIhB,IAAI4vB,EAAclsB,EAClB,GAAyB,oBAAV,OAAJA,QAAI,IAAJA,OAAI,EAAJA,EAAO,IAAmB,CACnC,IAAMod,EAAWpd,EAAK,GACtBksB,EAAc9O,GAChB,EACA6O,EAAA5qC,SAAQgG,IAAGoB,MAAAwjC,EAAA,KAAA3qC,OAAKjC,KAAKqQ,QAAO,MAAApO,QAAAvD,EAAAA,EAAAA,GAAQmuC,IANpC,CAOF,IAEA,EAAAnvC,IAAA,MAAA6B,MACA,SAAWX,GACJA,EAILqf,GAAAgtB,EAAAA,EAAAA,GAAA/B,GAAA,YAAAlrC,KAAA,KAAUY,EAAKI,WAAWiqC,IAAcrqC,EAAOqqC,GAAarqC,GAH1Dqf,GAAAgtB,EAAAA,EAAAA,GAAA/B,GAAA,YAAAlrC,KAAA,KAIJ,KAACkrC,CAAA,CAhTe,CAASrjC,IAiT1B+Z,EAAAA,EAAAA,GAjTYspB,GAAK,qBAEY,OAAItpB,EAAAA,EAAAA,GAFrBspB,GAAK,YAGG,ICdrB,IAAM4D,GAAc,SACdC,GAAc,2BAEPC,GAAa,SAAAC,IAAA1nC,EAAAA,EAAAA,GAAAynC,EAAAC,GAAA,IAAAznC,GAAAC,EAAAA,EAAAA,GAAAunC,GAAA,SAAAA,IAAA,IAAA3rC,GAAAvB,EAAAA,EAAAA,GAAA,KAAAktC,GAAA,QAAAtsB,EAAA5f,UAAA1C,OAAAuiB,EAAA,IAAA9Y,MAAA6Y,GAAAzD,EAAA,EAAAA,EAAAyD,EAAAzD,IAAA0D,EAAA1D,GAAAnc,UAAAmc,GAI4C,OAJ5C5b,EAAAmE,EAAAxH,KAAAoL,MAAA5D,EAAA,OAAAvD,OAAA0e,KAAAf,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,kBACP,IAAKue,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,QACdi9B,IAAgBhxB,EAAAA,EAAAA,GAAAjM,MAAMue,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,yBAEL6e,EAAS7e,EAAK6rC,cAAc/uB,MAAI7Q,EAAAA,EAAAA,GAAAjM,IAAQ,KAAGA,CAAA,CAkLnE,OAlLmEX,EAAAA,EAAAA,GAAAssC,EAAA,EAAAtvC,IAAA,cAAA6B,MAGpE,WAAc,IAAA4tC,EACRC,EAAUJ,EAAcK,mBAAmB/qC,IAAItC,MACnDA,KAAK+sC,KAAe,EACpB/sC,KAAKiI,gBAAgB6kC,IACd,OAAPM,QAAO,IAAPA,GAA2B,QAApBD,EAAPC,EAASE,0BAAkB,IAAAH,GAA3BA,EAAAnvC,KAAAovC,EACF,GAEA,CAAA1vC,IAAA,YAAA6B,MACA,WAAY,IAAAguC,EACNH,EAAUJ,EAAcK,mBAAmB/qC,IAAItC,MACnDA,KAAK4N,EAAE,gBAAkB5N,KAAKwtC,YAAYrvB,KAAKne,MAE/CA,KAAK+sC,KAAe,EACpB/sC,KAAKyK,aAAaqiC,GAAa,IACxB,OAAPM,QAAO,IAAPA,GAAyB,QAAlBG,EAAPH,EAASK,wBAAgB,IAAAF,GAAzBA,EAAAvvC,KAAAovC,GAEAptC,KAAK0tC,yBAEL1tC,KAAKw0B,KAAKjW,EAAUY,gBAAiB,CACnCwuB,SAAU3tC,KAAK6pC,cAEnB,GAAC,CAAAnsC,IAAA,eAAA6B,MAED,WAAe,IAAAiC,EAAA,KACbyc,GAAAgtB,EAAAA,EAAAA,GAAA+B,EAAAlvC,WAAA,qBAAAE,KAAA,MACIgC,KAAK4I,aAAa,qBACpB5I,KAAKmG,IAAI,oBAAoB,SAAuBvF,GAClDY,EAAKiJ,aAAa,mBAAoB7J,EACxC,IAIEZ,KAAK6pC,eACF7pC,KAAK4I,aAAa,aACrB5I,KAAKyK,aAAa,WAAYzK,KAAK6pC,cAErC7pC,KAAKmG,IAAI,oBAAoB,SAAuBvF,GAC9CY,EAAKqoC,eAAiBjpC,GAAOY,EAAKurC,IACpCvrC,EAAKosC,cACIpsC,EAAKqoC,eAAiBjpC,GAAQY,EAAKurC,KAC5CvrC,EAAKqsC,YAGFjtC,IACHY,EAAKoM,EAAE,YAAc,GAEzB,IAEI5N,KAAKmR,IAAI,iBACXnR,KAAKmG,IAAI,gBAAgB,SAAC2nC,GACnBA,GAAetsC,EAAKqoC,eAAiBroC,EAAKoM,EAAE,sBAC/CpM,EAAKoM,EAAE,oBAAsB,KAEjC,IAGN,GAEA,CAAAlQ,IAAA,gBAAA6B,MACA,WACE,IAAImZ,EAAU1Y,KAAK4N,EAAE,YACjB8K,IACEA,EAAQta,OAAS,KACnBsa,EAAUA,EAAQtR,MAAMsR,EAAQta,OAAS,GAAIsa,EAAQta,OAAS,IAE5D4B,KAAK+tC,gBAAkBr1B,EAAQA,EAAQta,OAAS,KAAO4B,KAAK6pC,cAC9DnxB,EAAQ3Q,KAAK/H,KAAK6pC,cAEpB7pC,KAAK4N,EAAE,YAAc8K,EAEzB,GAEA,CAAAhb,IAAA,wBAAA6B,MACA,WACE,OAAOS,KAAK6pC,cAAgBmD,EAAcK,mBAAmBl8B,IAAInR,KACnE,GAEA,CAAAtC,IAAA,mBAAA4E,IASA,WACE,OAAOtC,KAAK+sC,GACd,GAAC,CAAArvC,IAAA,oBAAA4E,IAED,WACE,OAAO,CACT,GAEA,CAAA5E,IAAA,mBAAA6B,MAQA,SAAiBX,GAAoB,IAAd6Y,EAAO3W,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAAG,CAAC,EACxBktC,EAA6Bv2B,EAA7Bu2B,WAAYC,EAAiBx2B,EAAjBw2B,aACpBjB,EAAcK,mBAAmB9qC,IAAIvC,KAAM,CACzCytC,iBAAkBO,EAClBV,mBAAoBW,GAExB,GAAC,CAAAvwC,IAAA,qBAAA6B,MAED,WACMS,KAAKkuC,kBACPluC,KAAK4tC,cAEPZ,EAAcK,mBAAmBxrC,OAAO7B,KAC1C,GAAC,CAAAtC,IAAA,kBAAA6B,MAED,WACE0e,GAAAgtB,EAAAA,EAAAA,GAAA+B,EAAAlvC,WAAA,wBAAAE,KAAA,MACAgC,KAAKmuC,yBAA2BnuC,KAAKouC,qBAGrC,IAAMC,EAAkBruC,KAAK4N,EAAE,oBAG3B+7B,EAAiB3pC,KAAK4N,EAAE,sBACMlP,EAAAA,EAAAA,GAAIirC,GAAgB2E,MACpD,SAAC9M,GAAK,OAAKA,aAAiBwL,GAAiBxL,EAAMqI,eAAiBwE,CAAe,MAInFruC,KAAK4N,EAAE,oBAAsB,KAEjC,GAAC,CAAAlQ,IAAA,cAAA4E,IAED,WACE,OAAOtC,KAAKqQ,QAAUrQ,KAAK6pC,YAC7B,GAAC,CAAAnsC,IAAA,iBAAA4E,IAED,WACE,OAAOtC,KAAK4N,EAAE,yBAChB,GAEA,CAAAlQ,IAAA,eAAA4E,IACA,WACE,OAAOtC,KAAK0N,WAAW,sBACzB,GAEA,CAAAhQ,IAAA,eAAA4E,IACA,WACE,OAAOtC,KAAK0N,WAAW,sBACzB,GAAC,CAAAhQ,IAAA,cAAA6B,MAED,WAEE,IAAImZ,EAAU1Y,KAAK4N,EAAE,YACrB,GAAI8K,EAAS,CAEX,IADA,IAAI61B,EAAe71B,EAAQ81B,MACpBD,IAAiBvuC,KAAK6pC,cAC3B0E,EAAe71B,EAAQ81B,MAEzB,IAAIC,IAAsBF,EAC1B,GAAIA,EAAc,KAAAG,EAEZ/E,EAAiB3pC,KAAK4N,EAAE,mBACtB+gC,GAAoBjwC,EAAAA,EAAAA,GAAIirC,GAAgB2E,MAAK,SAAC9M,GAAK,OAAKA,EAAMqI,eAAiB0E,CAAY,IACjGE,EAAwD,QAAvCC,EAAoB,OAAjBC,QAAiB,IAAjBA,OAAiB,EAAjBA,EAAmBF,yBAAiB,IAAAC,GAAAA,CAC1D,CACAH,EAAeE,EAAoBF,OAAextC,EAClDf,KAAK4N,EAAE,oBAAsB2gC,EAC7BvuC,KAAK4N,EAAE,YAAc8K,EAChB61B,GACHvuC,KAAK4uC,cAAc,gBAAgB,EAEvC,CACF,KAAC5B,CAAA,CAtLuB,CAAS9D,KAuLlCtpB,EAAAA,EAAAA,GAvLYotB,GAAa,qBA2FI,IAAIxqC,KA8FlCwqC,GAAc6B,WAAahxC,OAAO6E,OAAO,CACvCosC,WAAY,aACZC,OAAQ,SACRC,KAAM,OACNC,YAAa,cACb14B,IAAK,MACL24B,aAAc,eACdC,eAAgB,mBAChBC,SAAU,WACVC,QAAS,Y,eCvMEC,GAAeC,IAGfC,GAAc,IAAM,E,iBCA1B,SAASC,GAAgB/kC,EAAMglC,GACpC,IAAK,IAAI/lC,KAAK+lC,EAAOhlC,EAAKilC,eAAe,KAAMhmC,EAAG+lC,EAAM/lC,GAAG8Y,WAC7D,CAOO,SAASmtB,GAAchxC,GAAkB,IAAZ8wC,EAAK5uC,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAAG,CAAC,EACvC4J,EAAOnC,SAASsnC,gBAAgB,6BAA8BjxC,GAElE,OADA6wC,GAAgB/kC,EAAMglC,GACfhlC,CACT,CAOO,SAASolC,GAAWC,EAAM1E,EAAW2E,GAC1C,IAAMC,EAAwBF,EAAxBE,EAAGC,EAAqBH,EAArBG,EAAGC,EAAkBJ,EAAlBI,MAAOC,EAAWL,EAAXK,OAEfC,EAAOhF,EAAUpqC,SAAS,KAAO,EAAI,EACrCqvC,EAAOjF,EAAUpqC,SAAS,KAAO,EAAI,EACrCsvC,EAAQ,EAAE,EAAG,GAAGF,GAChBG,EAAQ,EAAE,EAAG,GAAGF,GAEhB/jC,EAAK,CACP0jC,EAAII,EAAOF,EAAQb,GAAeiB,EAClCL,EAAII,EAAOF,EAASd,GAAekB,EDpCN,GCoCkCR,EAAiBQ,GAE9EC,EAAK,CAACR,EAAII,EAAOF,EAAQb,GAAeiB,EAAOL,EAAII,EAAOF,EAASd,GAAekB,GAClFE,EAAK,CACPT,EAAII,EAAOF,EDxCkB,GCwCUH,EAAiBO,EAAQjB,GAAeiB,EAC/EL,EAAII,EAAOF,EAASd,GAAekB,GAMrC,MAAO,CACLG,EAJS,KAAH1uC,OAAQsK,EAAG,GAAE,KAAAtK,OAAIsK,EAAG,GAAE,OAAAtK,OAAMwuC,EAAG,GAAE,KAAAxuC,OAAIwuC,EAAG,GAAE,OAAAxuC,OAAMyuC,EAAG,GAAE,KAAAzuC,OAAIyuC,EAAG,IAKlEE,OAJWH,EAMf,CAOO,SAASI,GAASd,EAAM1E,EAAW2E,GACxC,IAWIzjC,EAAIkkC,EAXFR,EAAwBF,EAAxBE,EAAGC,EAAqBH,EAArBG,EAAGC,EAAkBJ,EAAlBI,MAAOC,EAAWL,EAAXK,OAEfC,EAAO,CAAC,IAAK,KAAKpvC,SAASoqC,GAC3B,GACA,CAAEyF,EAAG,EAAGnpC,EAAG,GAAuE0jC,GAClFiF,EAAO,CAAC,IAAK,KAAKrvC,SAASoqC,GAC3B,GACA,CAAE7jC,EAAG,EAAGD,EAAG,GAAuE8jC,GAClFkF,EAAQ,EAAE,EAAG,GAAGF,GAChBG,EAAQ,EAAE,EAAG,GAAGF,GAapB,MAVI,CAAC,IAAK,KAAKrvC,SAASoqC,IACtB9+B,EAAK,CAAC0jC,EAAII,EAAOF,EDvEU,GCuEiBH,EAAkB,EAAGE,EAAII,EAAOF,EAASd,GAAekB,GACpGC,EAAK,CAACR,EAAII,EAAOF,EDxEU,GCwEiBH,EAAkB,EAAGE,EAAII,EAAOF,EAASd,GAAekB,KAEpGjkC,EAAK,CAAC0jC,EAAII,EAAOF,EAAQb,GAAeiB,EAAOL,EAAII,EAAOF,ED1E/B,GC0E2DJ,EAAkB,GACxGS,EAAK,CAACR,EAAII,EAAOF,EAAQb,GAAeiB,EAAOL,EAAII,EAAOF,ED3E/B,GC2E2DJ,EAAkB,IAKnG,CAAEW,EAHE,KAAH1uC,OAAQsK,EAAG,GAAE,KAAAtK,OAAIsK,EAAG,GAAE,OAAAtK,OAAMwuC,EAAG,GAAE,KAAAxuC,OAAIwuC,EAAG,IAG9BG,OAFL,CAACH,EAAG,IAAMA,EAAG,GAAKlkC,EAAG,IAAM,EAAGkkC,EAAG,IAAMA,EAAG,GAAKlkC,EAAG,IAAM,GAGvE,CAyCO,SAASwkC,GAAeC,EAAOC,GACpC,IAAMhB,EAAMe,EAANf,EACAC,EAAMc,EAANd,EAYN,OAXIc,EAAMf,EAAIgB,EAAMhB,EAClBA,EAAIgB,EAAMhB,EACDe,EAAMf,EAAIe,EAAMb,MAAQc,EAAMhB,EAAIgB,EAAMd,QACjDF,EAAIgB,EAAMhB,EAAIgB,EAAMd,MAAQa,EAAMb,OAEhCa,EAAMd,EAAIe,EAAMf,EAClBA,EAAIe,EAAMf,EACDc,EAAMd,EAAIc,EAAMZ,OAASa,EAAMf,EAAIe,EAAMb,SAClDF,EAAIe,EAAMf,EAAIe,EAAMb,OAASY,EAAMZ,SAGrC9vC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACK0wC,GAAK,IACRf,EAAAA,EACAC,EAAAA,GAEJ,CAudO,SAASgB,GAAU3iB,GAAyB,IAAtB8c,EAAS9c,EAAT8c,UAAc/f,GAAI/tB,EAAAA,GAAAA,GAAAgxB,EAAA4iB,IAC7C,OAAQ9F,GACN,IAAK,IACH,OAhdN,SAAoBxnB,GAAyC,IAAtCksB,EAAIlsB,EAAJksB,KAAMqB,EAAKvtB,EAALutB,MAAOC,EAAWxtB,EAAXwtB,YAAaC,EAAQztB,EAARytB,SACtCC,GAATtpB,EAAAA,GAAAA,GAAempB,EAAK,GAAT,GACLlB,EAAqBH,EAArBG,EAAGC,EAAkBJ,EAAlBI,MAAOC,EAAWL,EAAXK,OAEhBF,GAAKqB,EACLnB,GAAUmB,EACNF,IACFlB,EAAQC,EAASiB,GAEnB,IAAIpB,EAAIF,EAAKE,EAAIF,EAAKI,MAAQ,EAAIA,EAAQ,EAsC1C,OArCID,GAAKoB,EAASpB,IAChBA,EAAIoB,EAASpB,EACbE,EAASL,EAAKG,EAAIH,EAAKK,OAASF,EAC5BmB,IACFlB,EAAQC,EAASiB,EACjBpB,EAAIF,EAAKE,EAAIF,EAAKI,MAAQ,EAAIA,EAAQ,IAGtCF,GAAKqB,EAASrB,IAChBA,EAAIqB,EAASrB,EACbC,EAAIH,EAAKG,EAAIH,EAAKK,OAASA,GAEzBH,EAAIE,GAASmB,EAASrB,EAAIqB,EAASnB,QACrCF,EAAInsC,KAAK0tC,IAAIF,EAASrB,EAAGqB,EAASrB,EAAIqB,EAASnB,MAAQA,GACvDA,EAAQmB,EAASrB,EAAIqB,EAASnB,MAAQF,EAClCoB,IACFjB,EAASD,EAAQkB,GAEnBnB,EAAIH,EAAKG,EAAIH,EAAKK,OAASA,GAEzBA,ED/KuB,ICgLzBA,EDhLyB,ECiLrBiB,IACFlB,EAAQC,EAASiB,EACjBpB,EAAIF,EAAKE,EAAIF,EAAKI,MAAQ,EAAIA,EAAQ,GAExCD,EAAIH,EAAKG,EAAIH,EAAKK,OAASA,GAEzBD,EDvLuB,ICwLzBA,EDxLyB,ECyLrBkB,IACFjB,EAASD,EAAQkB,EACjBpB,EAAIF,EAAKE,EAAIF,EAAKI,MAAQ,EAAIA,EAAQ,GAExCD,EAAIH,EAAKG,EAAIH,EAAKK,OAASA,GAGtB,CAAEH,EAAAA,EAAGC,EAAAA,EAAGC,MAAAA,EAAOC,OAAAA,EACxB,CAgaaqB,CAAYnmB,GACrB,IAAK,IACH,OAxZN,SAAmBpH,GAAyC,IAAtC6rB,EAAI7rB,EAAJ6rB,KAAMqB,EAAKltB,EAALktB,MAAOC,EAAWntB,EAAXmtB,YAAaC,EAAQptB,EAARotB,SACvCI,GAAPzpB,EAAAA,GAAAA,GAAampB,EAAK,GAAT,GACHnB,EAAqBF,EAArBE,EAAGE,EAAkBJ,EAAlBI,MAAOC,EAAWL,EAAXK,OAEhBH,GAAKyB,EACLvB,GAASuB,EACLL,IACFjB,EAASD,EAAQkB,GAEnB,IAAInB,EAAIH,EAAKG,EAAIH,EAAKK,OAAS,EAAIA,EAAS,EAsC5C,OArCIH,GAAKqB,EAASrB,IAChBA,EAAIqB,EAASrB,EACbE,EAAQJ,EAAKE,EAAIF,EAAKI,MAAQF,EAC1BoB,IACFjB,EAASD,EAAQkB,EACjBnB,EAAIH,EAAKG,EAAIH,EAAKK,OAAS,EAAIA,EAAS,IAGxCF,GAAKoB,EAASpB,IAChBA,EAAIoB,EAASpB,EACbD,EAAIF,EAAKE,EAAIF,EAAKI,MAAQA,GAExBD,EAAIE,GAAUkB,EAASpB,EAAIoB,EAASlB,SACtCF,EAAIpsC,KAAK0tC,IAAIF,EAASpB,EAAGoB,EAASpB,EAAIoB,EAASlB,OAASA,GACxDA,EAASkB,EAASpB,EAAIoB,EAASlB,OAASF,EACpCmB,IACFlB,EAAQC,EAASiB,GAEnBpB,EAAIF,EAAKE,EAAIF,EAAKI,MAAQA,GAExBC,EDzOuB,IC0OzBA,ED1OyB,EC2OrBiB,IACFlB,EAAQC,EAASiB,GAEnBnB,EAAIH,EAAKG,EAAIH,EAAKK,OAAS,EAAIA,EAAS,EACxCH,EAAIF,EAAKE,EAAIF,EAAKI,MAAQA,GAExBA,EDjPuB,ICkPzBA,EDlPyB,ECmPrBkB,IACFjB,EAASD,EAAQkB,GAEnBnB,EAAIH,EAAKG,EAAIH,EAAKK,OAAS,EAAIA,EAAS,EACxCH,EAAIF,EAAKE,EAAIF,EAAKI,MAAQA,GAGrB,CAAEF,EAAAA,EAAGC,EAAAA,EAAGC,MAAAA,EAAOC,OAAAA,EACxB,CAwWauB,CAAWrmB,GACpB,IAAK,IACH,OAhWN,SAAoBrF,GAAyC,IAAtC8pB,EAAI9pB,EAAJ8pB,KAAMqB,EAAKnrB,EAALmrB,MAAOC,EAAWprB,EAAXorB,YAAaC,EAAQrrB,EAARqrB,SACtCC,GAATtpB,EAAAA,GAAAA,GAAempB,EAAK,GAAT,GACLlB,EAAqBH,EAArBG,EAAGC,EAAkBJ,EAAlBI,MAAOC,EAAWL,EAAXK,OAEhBA,GAAUmB,EACNF,IACFlB,EAAQC,EAASiB,GAEnB,IAAIpB,EAAIF,EAAKE,EAAIF,EAAKI,MAAQ,EAAIA,EAAQ,EAmC1C,OAlCID,EAAIE,GAAUkB,EAASpB,EAAIoB,EAASlB,SACtCA,EAASkB,EAASpB,EAAIoB,EAASlB,OAASF,EACpCmB,IACFlB,EAAQC,EAASiB,GAEnBpB,EAAIF,EAAKE,EAAIF,EAAKI,MAAQ,EAAIA,EAAQ,GAEpCF,GAAKqB,EAASrB,IAChBA,EAAIqB,EAASrB,EACbC,EAAIH,EAAKG,GAEPD,EAAIE,GAASmB,EAASrB,EAAIqB,EAASnB,QACrCF,EAAInsC,KAAK0tC,IAAIF,EAASrB,EAAGqB,EAASrB,EAAIqB,EAASnB,MAAQA,GACvDA,EAAQmB,EAASrB,EAAIqB,EAASnB,MAAQF,EAClCoB,IACFjB,EAASD,EAAQkB,GAEnBnB,EAAIH,EAAKG,GAEPE,EDjSuB,ICkSzBA,EDlSyB,ECmSrBiB,IACFlB,EAAQC,EAASiB,GAEnBpB,EAAIF,EAAKE,EAAIF,EAAKI,MAAQ,EAAIA,EAAQ,GAEpCA,EDxSuB,ICySzBA,EDzSyB,EC0SrBkB,IACFjB,EAASD,EAAQkB,GAEnBpB,EAAIF,EAAKE,EAAIF,EAAKI,MAAQ,EAAIA,EAAQ,GAGjC,CAAEF,EAAAA,EAAGC,EAAAA,EAAGC,MAAAA,EAAOC,OAAAA,EACxB,CAoTawB,CAAYtmB,GACrB,IAAK,IACH,OA5SN,SAAmBhE,GAAyC,IAAtCyoB,EAAIzoB,EAAJyoB,KAAMqB,EAAK9pB,EAAL8pB,MAAOC,EAAW/pB,EAAX+pB,YAAaC,EAAQhqB,EAARgqB,SACvCI,GAAPzpB,EAAAA,GAAAA,GAAampB,EAAK,GAAT,GACHnB,EAAqBF,EAArBE,EAAGE,EAAkBJ,EAAlBI,MAAOC,EAAWL,EAAXK,OAEhBD,GAASuB,EACLL,IACFjB,EAASD,EAAQkB,GAEnB,IAAInB,EAAIH,EAAKG,EAAIH,EAAKK,OAAS,EAAIA,EAAS,EAmC5C,OAlCIH,EAAIE,GAASmB,EAASrB,EAAIqB,EAASnB,QACrCA,EAAQmB,EAASrB,EAAIqB,EAASnB,MAAQF,EAClCoB,IACFjB,EAASD,EAAQkB,GAEnBnB,EAAIH,EAAKG,EAAIH,EAAKK,OAAS,EAAIA,EAAS,GAEtCF,GAAKoB,EAASpB,IAChBA,EAAIoB,EAASpB,EACbD,EAAIF,EAAKE,GAEPC,EAAIE,GAAUkB,EAASpB,EAAIoB,EAASlB,SACtCF,EAAIpsC,KAAK0tC,IAAIF,EAASpB,EAAGoB,EAASpB,EAAIoB,EAASlB,OAASA,GACxDA,EAASkB,EAASpB,EAAIoB,EAASlB,OAASF,EACpCmB,IACFlB,EAAQC,EAASiB,GAEnBpB,EAAIF,EAAKE,GAEPG,EDvVuB,ICwVzBA,EDxVyB,ECyVrBiB,IACFlB,EAAQC,EAASiB,GAEnBnB,EAAIH,EAAKG,EAAIH,EAAKK,OAAS,EAAIA,EAAS,GAEtCD,ED9VuB,IC+VzBA,ED/VyB,ECgWrBkB,IACFjB,EAASD,EAAQkB,GAEnBnB,EAAIH,EAAKG,EAAIH,EAAKK,OAAS,EAAIA,EAAS,GAGnC,CAAEH,EAAAA,EAAGC,EAAAA,EAAGC,MAAAA,EAAOC,OAAAA,EACxB,CAgQayB,CAAWvmB,GACpB,IAAK,KACH,OAxPN,SAAwBhB,GAAyC,IAAtCylB,EAAIzlB,EAAJylB,KAAMqB,EAAK9mB,EAAL8mB,MAAOC,EAAW/mB,EAAX+mB,YAAaC,EAAQhnB,EAARgnB,SACnDQ,GAAA7pB,EAAAA,GAAAA,GAAempB,EAAK,GAAfM,EAAEI,EAAA,GAAEP,EAAEO,EAAA,GACL7B,EAAwBF,EAAxBE,EAAGC,EAAqBH,EAArBG,EAAGC,EAAkBJ,EAAlBI,MAAOC,EAAWL,EAAXK,OAkDnB,OAhDIH,EAAIyB,EAAKJ,EAASrB,IACpByB,EAAKJ,EAASrB,EAAIA,GAEhBC,EAAIqB,EAAKD,EAASpB,IACpBqB,EAAKD,EAASpB,EAAIA,GAEpBD,GAAKyB,EACLvB,GAASuB,EACTxB,GAAKqB,EACLnB,GAAUmB,EACNF,GAAevtC,KAAKiuC,IAAI5B,EAAQC,GAAUiB,GAE5CjB,GADAmB,EAAKpB,EAAQkB,EAAcjB,GAE3BF,GAAKqB,IACID,EAASpB,IAEhBC,GADAC,GAAmBkB,EAASpB,EAAIA,GACfmB,EACjBpB,EAAIF,EAAKE,EAAIF,EAAKI,MAAQA,EAC1BD,EAAIoB,EAASpB,IAENmB,IAETlB,GADAuB,EAAKtB,EAASiB,EAAclB,GAE5BF,GAAKyB,IACIJ,EAASrB,IAEhBG,GADAD,GAAiBmB,EAASrB,EAAIA,GACboB,EACjBpB,EAAIqB,EAASrB,EACbC,EAAIH,EAAKG,EAAIH,EAAKK,OAASA,IAG3BA,EDpZuB,ICqZzBA,EDrZyB,ECsZrBiB,IACFlB,EAAQC,EAASiB,GAEnBpB,EAAIF,EAAKE,EAAIF,EAAKI,MAAQA,EAC1BD,EAAIH,EAAKG,EAAIH,EAAKK,OAASA,GAEzBD,ED5ZuB,IC6ZzBA,ED7ZyB,EC8ZrBkB,IACFjB,EAASD,EAAQkB,GAEnBpB,EAAIF,EAAKE,EAAIF,EAAKI,MAAQA,EAC1BD,EAAIH,EAAKG,EAAIH,EAAKK,OAASA,GAGtB,CAAEH,EAAAA,EAAGC,EAAAA,EAAGC,MAAAA,EAAOC,OAAAA,EACxB,CAmMa4B,CAAgB1mB,GACzB,IAAK,KACH,OA3LN,SAAwB2mB,GAAyC,IAAtClC,EAAIkC,EAAJlC,KAAMqB,EAAKa,EAALb,MAAOC,EAAWY,EAAXZ,YAAaC,EAAQW,EAARX,SACnDY,GAAAjqB,EAAAA,GAAAA,GAAempB,EAAK,GAAfM,EAAEQ,EAAA,GAAEX,EAAEW,EAAA,GACLjC,EAAwBF,EAAxBE,EAAGC,EAAqBH,EAArBG,EAAGC,EAAkBJ,EAAlBI,MAAOC,EAAWL,EAAXK,OA8CnB,OA5CIH,EAAIE,EAAQuB,EAAKJ,EAASrB,EAAIqB,EAASnB,QACzCuB,EAAKJ,EAASrB,EAAIqB,EAASnB,MAAQF,EAAIE,GAErCD,EAAIqB,EAAKD,EAASpB,IACpBqB,EAAKD,EAASpB,EAAIA,GAEpBC,GAASuB,EACTxB,GAAKqB,EACLnB,GAAUmB,EACNF,GAAevtC,KAAKiuC,IAAI5B,EAAQC,GAAUiB,GAE5CjB,GADAmB,EAAKpB,EAAQkB,EAAcjB,GAE3BF,GAAKqB,IACID,EAASpB,IAEhBC,GADAC,GAAmBkB,EAASpB,EAAIA,GACfmB,EACjBpB,EAAIF,EAAKE,EACTC,EAAIoB,EAASpB,IAENmB,GAGLpB,GADJE,GADAuB,EAAKtB,EAASiB,EAAclB,IAEXmB,EAASrB,EAAIqB,EAASnB,QAErCC,GADAD,EAAQmB,EAASrB,EAAIqB,EAASnB,MAAQF,GACrBoB,EACjBpB,EAAIqB,EAASrB,EAAIqB,EAASnB,MAAQA,EAClCD,EAAIH,EAAKG,EAAIH,EAAKK,OAASA,GAG3BA,EDjduB,ICkdzBA,EDldyB,ECmdrBiB,IACFlB,EAAQC,EAASiB,GAEnBnB,EAAIH,EAAKG,EAAIH,EAAKK,OAASA,GAEzBD,EDxduB,ICydzBA,EDzdyB,EC0drBkB,IACFjB,EAASD,EAAQkB,GAEnBnB,EAAIH,EAAKG,EAAIH,EAAKK,OAASA,GAGtB,CAAEH,EAAAA,EAAGC,EAAAA,EAAGC,MAAAA,EAAOC,OAAAA,EACxB,CA0Ia+B,CAAgB7mB,GACzB,IAAK,KACH,OAlIN,SAAwByB,GAAyC,IAAtCgjB,EAAIhjB,EAAJgjB,KAAMqB,EAAKrkB,EAALqkB,MAAOC,EAAWtkB,EAAXskB,YAAaC,EAAQvkB,EAARukB,SACnDc,GAAAnqB,EAAAA,GAAAA,GAAempB,EAAK,GAAfM,EAAEU,EAAA,GAAEb,EAAEa,EAAA,GACLnC,EAAwBF,EAAxBE,EAAGC,EAAqBH,EAArBG,EAAGC,EAAkBJ,EAAlBI,MAAOC,EAAWL,EAAXK,OA8CnB,OA5CIH,EAAIyB,EAAKJ,EAASrB,IACpByB,EAAKJ,EAASrB,EAAIA,GAEhBC,EAAIE,EAASmB,EAAKD,EAASpB,EAAIoB,EAASlB,SAC1CmB,EAAKD,EAASpB,EAAIoB,EAASlB,OAASF,EAAIE,GAE1CH,GAAKyB,EACLvB,GAASuB,EACTtB,GAAUmB,EACNF,GAAevtC,KAAKiuC,IAAI5B,EAAQC,GAAUiB,EAGxCnB,GADJE,GADAmB,EAAKpB,EAAQkB,EAAcjB,IAETkB,EAASpB,EAAIoB,EAASlB,SAEtCD,GADAC,EAASkB,EAASpB,EAAIoB,EAASlB,OAASF,GACvBmB,EACjBpB,EAAIF,EAAKE,EAAIF,EAAKI,MAAQA,EAC1BD,EAAIoB,EAASpB,EAAIoB,EAASlB,OAASA,GAE5BiB,IAETlB,GADAuB,EAAKtB,EAASiB,EAAclB,GAE5BF,GAAKyB,IACIJ,EAASrB,IAEhBG,GADAD,GAAiBmB,EAASrB,EAAIA,GACboB,EACjBpB,EAAIqB,EAASrB,EACbC,EAAIH,EAAKG,IAGTE,ED5gBuB,IC6gBzBA,ED7gByB,EC8gBrBiB,IACFlB,EAAQC,EAASiB,GAEnBpB,EAAIF,EAAKE,EAAIF,EAAKI,MAAQA,GAExBA,EDnhBuB,ICohBzBA,EDphByB,ECqhBrBkB,IACFjB,EAASD,EAAQkB,GAEnBpB,EAAIF,EAAKE,EAAIF,EAAKI,MAAQA,GAGrB,CAAEF,EAAAA,EAAGC,EAAAA,EAAGC,MAAAA,EAAOC,OAAAA,EACxB,CAiFaiC,CAAgB/mB,GACzB,IAAK,KACH,OAzEN,SAAwBmC,GAAyC,IAAtCsiB,EAAItiB,EAAJsiB,KAAMqB,EAAK3jB,EAAL2jB,MAAOC,EAAW5jB,EAAX4jB,YAAaC,EAAQ7jB,EAAR6jB,SACnDgB,GAAArqB,EAAAA,GAAAA,GAAempB,EAAK,GAAfM,EAAEY,EAAA,GAAEf,EAAEe,EAAA,GACLrC,EAAwBF,EAAxBE,EAAGC,EAAqBH,EAArBG,EAAGC,EAAkBJ,EAAlBI,MAAOC,EAAWL,EAAXK,OA0CnB,OAxCIH,EAAIE,EAAQuB,EAAKJ,EAASrB,EAAIqB,EAASnB,QACzCuB,EAAKJ,EAASrB,EAAIqB,EAASnB,MAAQF,EAAIE,GAErCD,EAAIE,EAASmB,EAAKD,EAASpB,EAAIoB,EAASlB,SAC1CmB,EAAKD,EAASpB,EAAIoB,EAASlB,OAASF,EAAIE,GAE1CD,GAASuB,EACTtB,GAAUmB,EACNF,GAAevtC,KAAKiuC,IAAI5B,EAAQC,GAAUiB,EAGxCnB,GADJE,GADAmB,EAAKpB,EAAQkB,EAAcjB,IAETkB,EAASpB,EAAIoB,EAASlB,SAEtCD,GADAC,EAASkB,EAASpB,EAAIoB,EAASlB,OAASF,GACvBmB,EACjBpB,EAAIF,EAAKE,EACTC,EAAIoB,EAASpB,EAAIoB,EAASlB,OAASA,GAE5BiB,GAGLpB,GADJE,GADAuB,EAAKtB,EAASiB,EAAclB,IAEXmB,EAASrB,EAAIqB,EAASnB,QAErCC,GADAD,EAAQmB,EAASrB,EAAIqB,EAASnB,MAAQF,GACrBoB,EACjBpB,EAAIqB,EAASrB,EAAIqB,EAASnB,MAAQA,EAClCD,EAAIH,EAAKG,GAGTE,EDrkBuB,ICskBzBA,EDtkByB,ECukBrBiB,IACFlB,EAAQC,EAASiB,IAGjBlB,ED3kBuB,IC4kBzBA,ED5kByB,EC6kBrBkB,IACFjB,EAASD,EAAQkB,IAId,CAAEpB,EAAAA,EAAGC,EAAAA,EAAGC,MAAAA,EAAOC,OAAAA,EACxB,CA4BamC,CAAgBjnB,GACzB,QACE,OAAOA,EAAKykB,KAElB,CAqCO,SAASyC,GAAU9iB,EAAoB+iB,GAAO,IAAxBtC,EAAKzgB,EAALygB,MAAOC,EAAM1gB,EAAN0gB,OAC9BsC,EAAQD,EAAQ,GAAM,IAAM,EAChC,MAAO,CAAEtC,MAAOuC,EAAOtC,EAASD,EAAOC,OAAQsC,EAAOvC,EAAQC,EAChE,CAOO,SAASuC,GAA8BxC,EAAOC,EAAQiB,GAC3D,IACIuB,EAAWC,EADU1C,EAAQC,EAGViB,GACrBuB,EAAY9uC,KAAK4oB,MAAM0jB,EAASiB,GAChCwB,EAAazC,IAEbwC,EAAYzC,EACZ0C,EAAa/uC,KAAK4oB,MAAMyjB,EAAQkB,IAGlC,IAAMyB,EAAQhvC,KAAK4oB,OAAOyjB,EAAQyC,GAAa,GACzCG,EAAQjvC,KAAK4oB,OAAO0jB,EAASyC,GAAc,GASjD,OAPIC,EAAQF,EAAYzC,IACtByC,EAAYzC,EAAQ2C,GAElBC,EAAQF,EAAazC,IACvByC,EAAazC,EAAS2C,GAGjB,CAAE9C,EAAG6C,EAAO5C,EAAG6C,EAAO5C,MAAOyC,EAAWxC,OAAQyC,EACzD,CAMO,SAASG,GAAUjD,GACxB,MAAO,CACLE,EAAGnsC,KAAK4oB,MAAMqjB,EAAKE,GACnBC,EAAGpsC,KAAK4oB,MAAMqjB,EAAKG,GACnBC,MAAOrsC,KAAK4oB,MAAMqjB,EAAKI,OACvBC,OAAQtsC,KAAK4oB,MAAMqjB,EAAKK,QAE5B,CAQO,SAAS6C,GAAM1zC,EAAO+5B,EAAKkY,GAChC,OAAO1tC,KAAKw1B,IAAIx1B,KAAK0tC,IAAIjyC,EAAO+5B,GAAMkY,EACxC,CCrtBO,IAAM0B,GAAkB,SAACjL,GAC9B,IAAKA,EAAY,MAAO,GACxB,IAAAkL,EAAelL,EAAW3jC,MAAM,KAAKoF,IAAIiI,QAAOyhC,GAAAnrB,EAAAA,GAAAA,GAAAkrB,EAAA,GAAzCrC,EAACsC,EAAA,GAAEC,EAACD,EAAA,GACX,GAAKzhC,OAAOsb,SAAS6jB,IAAOn/B,OAAOsb,SAASomB,GAM5C,MAAO,CADa,CAAEx+B,KAAM,eAAgBs7B,MAAOW,EAAGV,OAAQiD,IAJ5DrxC,QAAQuV,MAAM,wBAADtV,OAAyBgmC,GAM1C,ECbaqL,GAAez1C,OAAO6E,OAAO,CACxC6wC,MAAO,QACPC,UAAW,YACXC,QAAS,UACT1E,OAAQ,SACRK,SAAU,WACVsE,IAAK,WCLMC,GAAe,SACfC,GAAkB,SCKxB,SAASC,GAAgBp8B,GAC9B,OAAO4U,IAAY/rB,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAChBmX,GAAO,IACV0M,YAAawvB,GACbvvB,eAAgBwvB,KAEpB,C,0BCTME,GAAmB,SAAHp4B,GAAA,IAAM7G,EAAI6G,EAAJ7G,KAAMyQ,EAAO5J,EAAP4J,QAAYvF,GAAOxiB,EAAAA,GAAAA,GAAAme,EAAAy1B,IAAA,OAAA7wC,EAAAA,EAAAA,GAAA,CACnDuU,KAAAA,EACAyQ,QAAAA,GACGvF,EAAO,EAICg0B,GAAuBD,GAGvBE,GAA2BF,GCX3BG,GAAoB,CAC/B,UACA,aACA,sBACA,aACA,sBACA,aACA,sBACA,QACA,SACA,QACA,SACA,QACA,UAOWC,GAAiB,SAACC,GAC7B,OAAKA,EAGEA,EACJvvB,QAAO,SAACne,GAAI,MAAqB,kBAATA,CAAiB,IACzCiD,KAAI,SAACM,GAAG,OAAK06B,GAAc16B,EAAI,IAC/BoqC,OALM,EAMX,EAOaC,GAAgB,SAAClhB,EAAUmhB,GACtC,OAAOA,EAAiBC,MAAK,SAAC1/B,GAC5B,OAAIA,EAAKguB,SAAS,MAChBhuB,EAAOA,EAAK5V,QAAQ,IAAK,IAClBk0B,EAASn0B,WAAW6V,IAGtBse,IAAate,CACtB,GACF,EAqBa2/B,GAAc,SAACnqB,GAC1B,IAAIxV,EAAW,OAAJwV,QAAI,IAAJA,OAAI,EAAJA,EAAMxV,KACjB,QAAKA,GAGEw/B,GAAcx/B,EAAMo/B,GAC7B,ECvEMQ,GAAO,IAEAC,GAAe72C,OAAO6E,OAAO,CACxCiyC,KAAM,OACNC,KAAM,OACNC,GAAI,KACJC,GAAI,KACJC,GAAI,KACJC,GAAI,KACJC,GAAI,OAWAvoB,GAAQ,SAACwoB,GAAM,OAAKpxC,KAAKqxC,KAAc,IAATD,GAAgB,GAAG,EAO1CE,GAAc,SAACpJ,GAAoC,IAA7BqJ,EAAIv0C,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAAG4zC,GAAaC,KAC/CW,EAAaD,IAASX,GAAaC,KAEzC,GAAIU,IAASX,GAAaE,MAASU,GAActJ,EAAKloC,KAAA6oB,IAAG8nB,GAAQ,GAAI,CAEnE,IAAMnL,EACJ7nB,EAAc,QAASuqB,GAEnBuJ,EAAa,CACjBC,IAAK,OACLC,MAAO,SACPnM,GAEF,MAAO,GAAPrnC,OAAU+pC,EAAK,KAAA/pC,OAAIszC,EACrB,CAEA,OAAIF,IAASX,GAAaG,IAAOS,GAActJ,EAAKloC,KAAA6oB,IAAG8nB,GAAQ,GACtD,GAAPxyC,OAAUyqB,GAAMsf,EAAKloC,KAAA6oB,IAAG8nB,GAAQ,IAAE,OAGhCY,IAASX,GAAaI,IAAOQ,GAActJ,EAAKloC,KAAA6oB,IAAG8nB,GAAQ,GACtD,GAAPxyC,OAAUyqB,GAAMsf,EAAKloC,KAAA6oB,IAAG8nB,GAAQ,IAAE,OAGhCY,IAASX,GAAaK,IAAOO,GAActJ,EAAKloC,KAAA6oB,IAAG8nB,GAAQ,GACtD,GAAPxyC,OAAUyqB,GAAMsf,EAAKloC,KAAA6oB,IAAG8nB,GAAQ,IAAE,OAGhCY,IAASX,GAAaM,IAAOM,GAActJ,EAAKloC,KAAA6oB,IAAG8nB,GAAQ,GACtD,GAAPxyC,OAAUyqB,GAAMsf,EAAKloC,KAAA6oB,IAAG8nB,GAAQ,IAAE,OAG7B,GAAPxyC,OAAUyqB,GAAMsf,EAAKloC,KAAA6oB,IAAG8nB,GAAQ,IAAE,MACpC,EC/DMiB,GAAW,IAAIh0C,IAGd,SAASi0C,GAASrwB,GACnBowB,GAASvkC,IAAImU,KAIjBowB,GAAS/zC,IAAI2jB,GACbtjB,QAAQrB,KAAK2kB,GACf,CCRA,IAAMswB,GAAW,sCAGJC,GAAS,WAKpB,SAAAA,EAAYC,EAAazlC,IAASvQ,EAAAA,EAAAA,GAAA,KAAA+1C,GAEhC71C,KAAK+1C,cAAgBD,EAErB91C,KAAKg2C,QAAU3lC,GAAW1M,EAAIwM,WAE9BnQ,KAAKi2C,SAAWp4C,OAAOmD,KAAK80C,GAAan3C,QAAO,SAAC89B,EAAK/+B,GAEpD,OADA++B,EAAI/+B,GAAOo4C,EAAYp4C,GAAK6B,MACrBk9B,CACT,GAAG,CAAC,GAKJz8B,KAAKk2C,OAASt2C,EAAK8Q,YAAY1Q,KAAKi2C,SAAUj2C,KAAKg2C,QACrD,CAkDC,OAhDDt1C,EAAAA,EAAAA,GAAAm1C,EAAA,EAAAn4C,IAAA,MAAA4E,IACA,WACE,OAAOtC,KAAKg2C,OACd,GAEA,CAAAt4C,IAAA,WAAA6B,MAIA,SAASc,EAAMd,GACb,GAAKS,KAAK+1C,cAAch4C,eAAesC,GAAvC,CAIA,IAAI81C,EAAQn2C,KAAK+1C,cAAc11C,IACtB,OAALd,QAAK,IAALA,OAAK,EAALA,EAAOQ,eAAgBo2C,EAAMthC,MAAQtV,aAAiB42C,EAAMthC,MAASshC,EAAMC,UAAsB,OAAV72C,EACzFS,KAAKk2C,OAAO90C,IAAIf,EAAMd,GAGxByC,QAAQrB,KA3CK,sCA2CWN,EANxB,MAFE2B,QAAQrB,KAAKi1C,GAAWv1C,EAS5B,GAEA,CAAA3C,IAAA,oBAAA6B,MACA,SAAkB4B,GAChB,IAAK,IAAId,KAAQc,EACfnB,KAAKq2C,SAASh2C,EAAMc,EAAOd,GAE/B,GAEA,CAAA3C,IAAA,WAAA6B,MACA,SAASc,GACP,GAAKL,KAAK+1C,cAAch4C,eAAesC,GAIvC,OAAOL,KAAKk2C,OAAO3kC,KAAKlR,GAHtB2B,QAAQrB,KAAKi1C,GAAWv1C,EAI5B,GAEA,CAAA3C,IAAA,YAAA6B,MAIA,SAAUc,EAAMuQ,GACd,OAAO5Q,KAAKk2C,OAAO/vC,IAAI9F,EAAMuQ,EAC/B,GAAC,CAAAlT,IAAA,SAAA6B,MAED,WACEK,EAAKisC,UAAU7rC,KAAKg2C,QACtB,KAACH,CAAA,CAtEmB,GCFTS,GAAe,WAQ1B,SAAAA,EAAY7+B,GAAS,IAAApW,EAAA,MAAAvB,EAAAA,EAAAA,GAAA,KAAAw2C,GAKnBt2C,KAAK+1C,cAAgBt+B,EAAQq+B,YAK7B91C,KAAKg2C,QAAUv+B,EAAQpH,SAAW1M,EAAIwM,WAKtCnQ,KAAKk2C,OAASt2C,EAAK8Q,YAAY,CAAC,EAAG1Q,KAAKg2C,SAKxCh2C,KAAKu2C,YAAc9+B,EAAQ++B,WAAa,GAKxCx2C,KAAKy2C,UAAY54C,OAAO4C,OAAO,MAK/BT,KAAK02C,oBAAsB,IAAIh1C,IAK/B1B,KAAK22C,sBAAwB,IAAIj1C,IAKjC1B,KAAK42C,QAAU,IAAIl1C,IAKnB1B,KAAK62C,UAAY,IAAIn1C,IAKrB1B,KAAK82C,QAAU,IAAIp1C,IAEnB,IAAIq1C,EAAYl5C,OAAO4C,OAAO,MAO9BT,KAAKg3C,kBAAoB,SAAC9kC,EAAU+kC,GAC9B51C,EAAK61C,kBACP9xC,OAAOsN,aAAarR,EAAK61C,kBAEtBH,EAAU7kC,KACb6kC,EAAU7kC,GAAY,IAAIxQ,KAE5Bq1C,EAAU7kC,GAAUvQ,IAAIs1C,GAExB51C,EAAK61C,iBAAmB9xC,OAAOuB,YAAW,WACF,IAAlC9I,OAAOmD,KAAK+1C,GAAW34C,SAG3BiD,EAAKq1C,oBAAoBp1C,SAAQ,SAACsP,GAChCA,GAAOtQ,EAAAA,EAAAA,GAAC,CAAC,EAAIy2C,GACf,IACAA,EAAYl5C,OAAO4C,OAAO,MAC5B,GACF,CACF,CA0JC,OA1JAC,EAAAA,EAAAA,GAAA41C,EAAA,EAAA54C,IAAA,SAAA6B,MAED,WAAS,IAAAiC,EAAA,KACHxB,KAAKm3C,iBACP/xC,OAAOsN,aAAa1S,KAAKm3C,iBAG3Bn3C,KAAKm3C,gBAAkB/xC,OAAOuB,YAAW,WACvC,IAAIywC,EAAQ,IAAI11C,IAAIF,EAAKs1C,SACrBO,EAAU,IAAI31C,IAAIF,EAAKq1C,WAC3Br1C,EAAKs1C,QAAQp5B,QACblc,EAAKq1C,UAAUn5B,QAAQ,IACyBxW,EADzBG,GAAAC,EAAAA,EAAAA,GACD9F,EAAKm1C,uBAAqB,IAAhD,IAAAtvC,EAAAE,MAAAL,EAAAG,EAAAG,KAAAC,MAAkD,KAAvCmJ,EAAO1J,EAAA3H,MACT,OAAPqR,QAAO,IAAPA,GAAAA,GAAOlS,EAAAA,EAAAA,GAAO8C,EAAKo1C,SAAUQ,EAAOC,EACtC,CAAC,OAAA3vC,GAAAL,EAAAM,EAAAD,EAAA,SAAAL,EAAAO,GAAA,CACH,GACF,GAEA,CAAAlK,IAAA,oBAAA6B,MACA,SAAkBqR,GAAS,IAAAlL,EAAA,KAOzB,OANA1F,KAAK22C,sBAAsBh1C,IAAIiP,GAE3B5Q,KAAK42C,QAAQ90C,KAAO,GACtB9B,KAAKkB,SAGA,WACLwE,EAAK4xC,oBAAoB1mC,EAC3B,CACF,GAEA,CAAAlT,IAAA,sBAAA6B,MACA,SAAoBqR,GAAS,IAAA2mC,EACD,QAA1BA,EAAAv3C,KAAK22C,6BAAqB,IAAAY,GAA1BA,EAA4B11C,OAAO+O,EACrC,GAEA,CAAAlT,IAAA,MAAA6B,MAIA,SAAIkC,GAAM,IAAA4L,EAAA,KACJ5G,EAAO,IAAIovC,GAAU71C,KAAK+1C,eAC9B,IAAK,IAAI11C,KAAQoB,EACfgF,EAAK4vC,SAASh2C,EAAMoB,EAAKpB,IAiB3B,OAfAL,KAAK42C,QAAQj1C,IAAI8E,EAAKvE,KACtBlC,KAAKkB,SAELlB,KAAKk2C,OAAOv0C,IAAI8E,EAAKvE,IAAKuE,GAC1BzG,KAAK82C,QAAQn1C,IAAI8E,GACjBzG,KAAKu2C,YAAYj1C,SAAQ,SAAC4Q,GACnB7E,EAAKopC,UAAUhwC,EAAKvE,OACvBmL,EAAKopC,UAAUhwC,EAAKvE,KAAO,IAE7BmL,EAAKopC,UAAUhwC,EAAKvE,KAAK6F,KACvBtB,EAAK0wB,UAAUjlB,GAAU,WACvB7E,EAAK2pC,kBAAkB9kC,EAAUzL,EAAKvE,IACxC,IAEJ,IACOuE,EAAKvE,GACd,GAEA,CAAAxE,IAAA,OAAA6B,MAIA,SAAK88B,GACH,OAAOr8B,KAAKk2C,OAAO3kC,KAAK8qB,EAC1B,GAEA,CAAA3+B,IAAA,WAAA6B,MAKA,SAAS88B,EAAInqB,GAEX,OADWlS,KAAKuR,KAAK8qB,GACTmb,SAAStlC,EACvB,GAEA,CAAAxU,IAAA,cAAA6B,MAMA,SAAY88B,EAAInqB,EAAU3S,GACbS,KAAKuR,KAAK8qB,GAChBga,SAASnkC,EAAU3S,EAC1B,GAEA,CAAA7B,IAAA,SAAA6B,MACA,SAAO88B,GACLr8B,KAAK62C,UAAUl1C,IAAI3B,KAAKk2C,OAAO3kC,KAAK8qB,IACpCr8B,KAAK42C,QAAQ/0C,OAAOw6B,GACpBr8B,KAAKkB,SACLlB,KAAKk2C,OAAO90C,IAAIi7B,EAAI,aACbr8B,KAAKy2C,UAAUpa,EACxB,GAAC,CAAA3+B,IAAA,WAAA6B,MAED,WAAW,IAAAiP,EAAA,KACTxO,KAAK42C,QAAQt1C,SAAQ,SAAC+6B,GACpB7tB,EAAK5M,OAAOy6B,EACd,GACF,GAEA,CAAA3+B,IAAA,oBAAA6B,MACA,SAAkBqR,GAAS,IAAAC,EAAA,KAGzB,OAFA7Q,KAAK02C,oBAAoB/0C,IAAIiP,GAEtB,WACLC,EAAK4mC,oBAAoB7mC,EAC3B,CACF,GAEA,CAAAlT,IAAA,sBAAA6B,MACA,SAAoBqR,GAAS,IAAA8mC,EACH,QAAxBA,EAAA13C,KAAK02C,2BAAmB,IAAAgB,GAAxBA,EAA0B71C,OAAO+O,EACnC,GAEA,CAAAlT,IAAA,YAAA6B,MAIA,SAAUo4C,GAAS,IAAAvmC,EAAA,KACbzG,EAAS,GAOb,OANA3K,KAAK42C,QAAQt1C,SAAQ,SAAC+6B,GACpB,IAAI51B,EAAO2K,EAAKG,KAAK8qB,GACjBsb,EAAQlxC,IACVkE,EAAO5C,KAAKs0B,EAEhB,IACO1xB,CACT,GAAC,CAAAjN,IAAA,QAAA6B,MAED,WACE,OAAAb,EAAAA,EAAAA,GAAWsB,KAAK42C,QAClB,GAAC,CAAAl5C,IAAA,OAAA4E,IAED,WACE,OAAOtC,KAAK42C,QAAQ90C,IACtB,GAAC,CAAApE,IAAA,UAAA6B,MAED,WAIE,IAAK,IAAI88B,KAHTz8B,EAAKisC,UAAU7rC,KAAKg2C,SACpBh2C,KAAK02C,oBAAsB,KAC3B12C,KAAK22C,sBAAwB,KACd32C,KAAKy2C,UAClBz2C,KAAKy2C,UAAUpa,GAAI/6B,SAAQ,SAAC6E,GAC1BA,EAAIvE,QACN,WACO5B,KAAKy2C,UAAUpa,EAE1B,KAACia,CAAA,CAhPyB,GCMfsB,GAAU,SAACvoC,GACtB,IAAMwoC,EAAQ,IAAIr1C,IAClB,OAAO,WACQ,QAAAke,EAAA5f,UAAA1C,OAATuiB,EAAI,IAAA9Y,MAAA6Y,GAAAzD,EAAA,EAAAA,EAAAyD,EAAAzD,IAAJ0D,EAAI1D,GAAAnc,UAAAmc,GACN,IAAMvf,EAAMkP,KAAKqoB,UAAUtU,GAC3B,GAAIk3B,EAAM1mC,IAAIzT,GACZ,OAAOm6C,EAAMv1C,IAAI5E,GAEnB,IAAMiN,EAAS0E,EAAEjG,WAAC,EAAGuX,GAErB,OADAk3B,EAAMt1C,IAAI7E,EAAKiN,GACRA,CACR,CAEL,ECiBO,SAASmtC,GAA2BC,GAiFzC,IAhFA,IAAMC,EAAU,CAEdC,SAAU,WACR,OAAOF,EAAcnqC,EAAE,kBACzB,EAEAsqC,OAAQ,WACN,OAAOH,EAAcnqC,EAAE,oBACzB,EAGAmiB,MAAO,WACL,OAAOgoB,EAAcnqC,EAAE,aACzB,EAEAuqC,WAAY,WACV,OAAOJ,EAAcK,iBAAiBt2C,IACxC,EAEAu2C,YAAa,WACX,OAAOC,EAAMC,cAAcn6C,MAC7B,EAEAo6C,aAAc,WACZ,OAAOF,EAAMG,eAAer6C,MAC9B,EAEAs6C,eAAgB,WACd,OAAOJ,EAAMK,iBAAiBv6C,MAChC,EAEAiqB,OAAQ,WACN,IAAMA,EAASiwB,EAAMM,SAAW,SAAWN,EAAMO,YAAc,YAAcP,EAAMQ,UAAY,UAAY,OAC3G,OAAO,CACT,EAEAA,UAAW,WACT,OAA+B,IAAxBR,EAAMJ,OAAO95C,QAAgBk6C,EAAMG,eAAer6C,SAAWk6C,EAAMS,WAAW36C,MACvF,EAEAy6C,YAAa,WACX,OAAOP,EAAMS,WAAWxE,MAAK,SAACxsB,GAAK,MAAsB,cAAjBA,EAAMM,MAAsB,GACtE,EAEAuwB,SAAU,WACR,OAAON,EAAMJ,OAAO95C,OAAS,GAAKk6C,EAAMC,cAAcn6C,OAAS,CACjE,EAEA26C,WAAY,WACV,OAAOhB,EAAciB,eACvB,EAEAP,eAAgB,WACd,OAAOH,EAAMS,WAAWn0B,QAAO,SAACmD,GAAK,MAAsB,YAAjBA,EAAMM,MAAoB,GACtE,EAEAkwB,cAAe,WACb,OAAOD,EAAMS,WAAWn0B,QAAO,SAACmD,GAAK,MAAsB,WAAjBA,EAAMM,MAAmB,GACrE,EAEAswB,iBAAkB,WAChB,OAAOL,EAAMS,WAAWn0B,QAAO,SAACmD,GAAK,MAAsB,cAAjBA,EAAMM,MAAsB,GACxE,EAEA4wB,YAAa,WACX,OAAOX,EAAMS,WAAWn0B,QAAO,SAACmD,GAAK,MAAsB,SAAjBA,EAAMM,MAAiB,GACnE,GAGIiwB,EACoB,CAAC,EAErBY,EA1GR,SAAkCC,GAChC,IAAI9jC,GAAU,EAuBd,OAtBA1O,YAAW,WACT0O,GAAU,CACZ,GAAG,GASgB,SAAChG,GAClB,OAAO,WAKH,OAHIgG,GACFsgC,GAASwD,GAEJ9pC,EAAEjG,WAAC,EAADtI,UACV,CAEL,CAGF,CAiFqBs4C,CACjB,4WAOFvnC,EAAA,EAAA4Y,EAA2B5sB,OAAOiqB,QAAQkwB,GAAQnmC,EAAA4Y,EAAArsB,OAAAyT,IAAE,CAA/C,IAAA6Y,GAAAzC,EAAAA,GAAAA,GAAAwC,EAAA5Y,GAAA,GAAOnU,EAAGgtB,EAAA,GAAEnrB,EAAKmrB,EAAA,GACd9rB,EAA4ClB,EAE5C27C,EAAUzB,GAAQsB,EAD8B35C,IAEtD1B,OAAOuB,eAAek5C,EAAO15C,EAAM,CACjC0D,IAAK+2C,EACL75C,YAAY,GAEhB,CAEA,OAAO84C,CACT,CChGO,IAAMgB,GAAoBz7C,OAAO6E,OAAO,CAC7C2nB,KAAM,CACJxV,KAAM8U,KACNpqB,MAAO,MAETg6C,YAAa,CACX1kC,KAAMrI,OACNjN,MAAO,MAETmuB,SAAU,CACR7Y,KAAMrI,OACNjN,MAAO,KACP62C,UAAU,GAEZ/d,SAAU,CACRxjB,KAAMlD,OACNpS,MAAO,KACP62C,UAAU,GAEZoD,aAAc,CACZ3kC,KAAMlD,OACNpS,MAAOk6C,KAAKC,OAEdC,eAAgB,CACd9kC,KAAMlD,OACNpS,MAAO,GAETkxB,KAAM,CACJ5b,KAAMrI,OACNjN,MAAO,MAET2zB,QAAS,CACPre,KAAMrK,QACNjL,OAAO,GAET4zB,SAAU,CACRte,KAAMrI,OACNjN,MAAO,KACP62C,UAAU,GAEZ/lC,QAAS,CACPwE,KAAMrI,OACNjN,MAAO,MAETwzB,OAAQ,CACNle,KAAMrI,OACNjN,MAAO,MAETq6C,gBAAiB,CACf/kC,KAAMrI,OACNjN,MAAO,MAETmzB,SAAU,CACR7d,KAAM8d,GACNpzB,MAAO,MAETs5C,YAAa,CACXhkC,KAAMrK,QACNjL,OAAO,GAETs6C,gBAAiB,CACfhlC,KAAMqhB,gBACN32B,MAAO,KACP62C,UAAU,GAEZ0D,SAAU,CACRjlC,KAAMrI,OACNjN,MAAO,KACP62C,UAAU,GAEZp5B,OAAQ,CACNnI,KAAMrK,QACNjL,OAAO,GAET/B,OAAQ,CACNqX,KAAMrI,OACNjN,OAAO,EACP62C,UAAU,GAEZ2D,SAAU,CACRllC,KAAMrI,OACNjN,MAAO,KACP62C,UAAU,GAEZnoB,SAAU,CACRpZ,KAAMhX,OACN0B,MAAO,KACP62C,UAAU,GAEZ8B,OAAQ,CACNrjC,KAAMhN,MACNtI,MAAO,IAETy6C,YAAa,CACXnlC,KAAM/H,MACNvN,MAAO,KACP62C,UAAU,GAEZ6D,UAAW,CACTplC,KAAMrK,QACNjL,OAAO,KCtIL26C,GAAc,IAAI1hB,OAAO,OAADv2B,OADZ,gEAC8BzE,OAAM,mCAAmC,KAG5E28C,GAAc,SAAHz+B,GAAyB,IAAnBhF,EAAGgF,EAAHhF,IAAK0jC,EAAO1+B,EAAP0+B,QAC3BC,EAAgB,IAAI9jC,IAAI6jC,GACxBE,EAAS,IAAI/jC,IAAIG,GAEvB,GAAI2jC,EAAcE,OAASD,EAAOC,KAChC,OAAO,KAGT,IAAAC,EAA4CN,GAAYO,KAAKH,EAAOzuB,UAAS6uB,GAAAzyB,EAAAA,GAAAA,GAAAuyB,EAAA,GAE7E,MAAO,CACL/pB,KAHWiqB,EAAA,GAIXd,gBAJ4Bc,EAAA,IAIQ,GACpCntB,SALsCmtB,EAAA,IAKhB,KAE1B,ECIaC,GAAa,SAAAC,IAAAr1C,EAAAA,EAAAA,GAAAo1C,EAAAC,GAAA,IAAAp1C,GAAAC,EAAAA,EAAAA,GAAAk1C,GAAA,SAAAA,IAAA,IAAAt5C,GAAAvB,EAAAA,EAAAA,GAAA,KAAA66C,GAAA,QAAAj6B,EAAA5f,UAAA1C,OAAAuiB,EAAA,IAAA9Y,MAAA6Y,GAAAzD,EAAA,EAAAA,EAAAyD,EAAAzD,IAAA0D,EAAA1D,GAAAnc,UAAAmc,GAyuBvB,OAzuBuB5b,EAAAmE,EAAAxH,KAAAoL,MAAA5D,EAAA,OAAAvD,OAAA0e,KAAAf,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,mBACN,IAAKue,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,cACV,IAAKue,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,QAEVk9B,IAAgBjxB,EAAAA,EAAAA,GAAAjM,MAAMue,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,0BAGJ,OAAIue,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,kBASZ,CAChBA,EAAKw5C,iBAAiB18B,MAAI7Q,EAAAA,EAAAA,GAAAjM,IAC1BA,EAAKy5C,kBAAkB38B,MAAI7Q,EAAAA,EAAAA,GAAAjM,IAC3BA,EAAK05C,sBAAsB58B,MAAI7Q,EAAAA,EAAAA,GAAAjM,IAC/BA,EAAK25C,qBAAqB78B,MAAI7Q,EAAAA,EAAAA,GAAAjM,OAC/Bue,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,wBAWuB,CACtB,SAAC45C,GACC,IAAM3xB,EAAQ2xB,EAAWn5C,KACnBklC,EAAc3lC,EAAK8/B,IAAI4F,SAAW1lC,EAAK8/B,IAAI6F,YAAc,EACzDC,EAAc5lC,EAAK8/B,IAAI4F,SAAW1lC,EAAK8/B,IAAI8F,YAAc,EAC/D,GAAID,GAAe1d,EAAQ0d,EAAa,CACtC,IAAM1hB,EAAUjkB,EAAKmhC,KAAK,kCAAmC,CAC3DlJ,IAAK0N,EACLwK,IAAKvK,EACL3d,MAAAA,IAEF,OAAO0qB,GAAyB,CAC9Bn/B,KAAM,gBACNyQ,QAAAA,EACAgE,MAAAA,EACAgQ,IAAK0N,EACLwK,IAAKvK,GAET,CAEA,GAAIA,GAAe3d,EAAQ2d,EAAa,CACtC,IAAM3hB,EAAUjkB,EAAKmhC,KAAK,mCAAoC,CAC5DlJ,IAAK0N,EACLwK,IAAKvK,EACL3d,MAAAA,IAEF,OAAO0qB,GAAyB,CAC9Bn/B,KAAM,iBACNyQ,QAAAA,EACAgE,MAAAA,EACAgQ,IAAK0N,EACLwK,IAAKvK,GAET,CACF,EACA,SAACgU,GACC,GAAIA,EAAWz0C,QAAQ+tC,MAAK,SAAClY,GAAE,OAAK4e,EAAWC,SAAS7e,EAAI,UAAUj+B,OAAS,CAAC,IAC9E,OAAO41C,GAAyB,CAC9Bn/B,KAAM,wBACNyQ,QAASjkB,EAAKmhC,KAAK,iCAGzB,KACD5iB,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,aAoMW,WACV,IAAM85C,EAAgB95C,EAAK+2C,iBAAiB5xC,QAAQoe,QAAO,SAACyX,GAC1D,IAAMtU,EAAQ1mB,EAAK+2C,iBAAiB7mC,KAAK8qB,GACzC,OAAQtU,EAAMyvB,SAAS,eAAiBzvB,EAAMyvB,SAAS,iBAAmBzvB,EAAMyvB,SAAS,WAC3F,IAE6B,IAAzB2D,EAAc/8C,SAIlBiD,EAAKuM,EAAE,kBAAoB,IAAIlM,IAAIy5C,GACnC95C,EAAKmzB,KACHjW,EAAUa,oBAC4D/d,EAAK+5C,4BAE/E,KAACx7B,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,oBAuSmB6e,GAAQvE,EAAAA,EAAAA,GAAAC,EAAAA,MAAC,SAAAC,IAAA,IAAAw/B,EAAA,OAAAz/B,EAAAA,MAAA,SAAAE,GAAA,cAAAA,EAAA3P,KAAA2P,EAAA1P,MAAA,OACM,GAApB/K,EAAK23C,gBACT56C,SAAWiD,EAAK+2C,iBAAiBt2C,KAAI,CAAAga,EAAA1P,KAAA,eAAA0P,EAAA8b,OAAA,iBAGxCyjB,EAAkBh6C,EAAK+5C,2BAC7B/5C,EAAKuM,EAAE,oBAAsBytC,EAC7Bh6C,EAAKmzB,KAAKjW,EAAUiB,QAAQ,kBAAMne,EAAK+5C,0BAA0B,GAAE,CAAEl7B,UAAU,IAE3E7e,EAAK8/B,IAAI0H,aAAewS,EAAgBlD,WAAa,GAAgC,YAA3BkD,EAAgBhzB,QAC5EhnB,EAAKi6C,aAAaD,GACnB,wBAAAv/B,EAAAI,OAAA,GAAAL,EAAA,KACA,OAAI+D,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,2BAOmB,SAACymB,EAASsvB,EAAOC,IACrCD,EAAMt1C,MAAQu1C,EAAQv1C,QACxBT,EAAKuM,EAAE,cAAgB,MAEzBvM,EAAKk6C,qBACLl6C,EAAKm6C,2BAA2B,IAEPt0C,EAFOG,GAAAC,EAAAA,EAAAA,GAEZ8vC,GAAK,IAAzB,IAAA/vC,EAAAE,MAAAL,EAAAG,EAAAG,KAAAC,MAA2B,KAAhBsgB,EAAK7gB,EAAA3H,MACTwoB,EAAMyvB,SAAS,WAClBn2C,EAAKmzB,KAAKjW,EAAUC,WAAYnd,EAAKo6C,cAAc1zB,EAAM7lB,KAE7D,CAAC,OAAAwF,GAAAL,EAAAM,EAAAD,EAAA,SAAAL,EAAAO,GAAA,KAE0BsC,EAF1BG,GAAA/C,EAAAA,EAAAA,GAEmB+vC,GAAO,IAA3B,IAAAhtC,EAAA9C,MAAA2C,EAAAG,EAAA7C,KAAAC,MAA6B,KAAAi0C,EAAlB3zB,EAAK7d,EAAA3K,MACc8B,EAAKuM,EAAE,kBAAmB/L,OAAOkmB,EAAM7lB,KAElC,QAAjCw5C,EAAA3zB,EAAMyvB,SAAS,0BAAkB,IAAAkE,GAAjCA,EAAmCtzB,QACnCL,EAAM4zB,kBAAkB,CACtB1B,WAAW,EACXJ,gBAAiB,KACjBhB,aAAa,EACbc,eAAgB,IAElBpjC,IAAIqlC,gBAAqB,OAAL7zB,QAAK,IAALA,OAAK,EAALA,EAAOyvB,SAAS,aACpCn2C,EAAKmzB,KAAKjW,EAAUE,aAAcpd,EAAKo6C,cAAc1zB,EAAM7lB,KAC7D,CAAC,OAAAwF,GAAA2C,EAAA1C,EAAAD,EAAA,SAAA2C,EAAAzC,GAAA,CAEDvG,EAAKuM,EAAE,eAAiBka,EAAQpe,KAAI,SAACxH,GACnC,MAAO,CAAEA,IAAAA,EACX,IAEAb,EAAKw6C,6BACLx6C,EAAKy6C,mBACP,KAACl8B,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,qCAMmC,SAAC01C,GACnC11C,EAAKy6C,oBAEL,IAAM1D,EAAmB/2C,EAAK+2C,iBACxB2D,GAAsBr9C,EAAAA,EAAAA,GACvB,IAAIgD,IACL7D,OAAOiqB,QAAQivB,GACZnyB,QAAO,SAAAf,GAAA,IAAEnmB,GAAFuqB,EAAAA,GAAAA,GAAApE,EAAA,GAAK,SAAM,CAAC,cAAe,YAAY5iB,SAASvD,EAAI,IAC3DgM,KAAI,SAAAuc,GAAA,IAAI+1B,GAAJ/zB,EAAAA,GAAAA,GAAAhC,EAAA,GAAO,UAAAvnB,EAAAA,EAAAA,GAAUs9C,EAAG,IACxB5H,SAUP,GANA2H,EAAuB39C,OAAS,GAC9BuI,YAAW,WAETtF,EAAKk6C,mBAAmBQ,EAC1B,IAEEhF,EAAU4C,eAAgB,KACkBxqC,EADlBC,GAAA9H,EAAAA,EAAAA,GACNyvC,EAAU4C,gBAAc,IAA9C,IAAAvqC,EAAA7H,MAAA4H,EAAAC,EAAA5H,KAAAC,MAAgD,KAArCw0C,EAAO9sC,EAAA5P,MAChB28C,EAAgCt8C,EAAK+Q,OAAOsrC,GAASh8C,MAA7C44C,EAAWqD,EAAXrD,YAAa77B,EAAMk/B,EAANl/B,OACjB67B,IAAgB77B,GAClB3b,EAAKmzB,KAAKjW,EAAUI,qBAAsBtd,EAAKo6C,cAAcQ,GAEjE,CAAC,OAAAv0C,GAAA0H,EAAAzH,EAAAD,EAAA,SAAA0H,EAAAxH,GAAA,CAEDvG,EAAKw6C,4BACP,CACA,GAAI9E,EAAU8B,YAAa,KACkBrpC,EADlBC,GAAAnI,EAAAA,EAAAA,GACHyvC,EAAU8B,aAAW,IAA3C,IAAAppC,EAAAlI,MAAAiI,EAAAC,EAAAjI,KAAAC,MAA6C,KAAlCw0C,EAAOzsC,EAAAjQ,MAChB48C,EAAgCv8C,EAAK+Q,OAAOsrC,GAASh8C,MAA7C44C,EAAWsD,EAAXtD,YAAa77B,EAAMm/B,EAANn/B,OACjB67B,IAAgB77B,GAClB3b,EAAKmzB,KAAKjW,EAAUG,kBAAmBrd,EAAKo6C,cAAcQ,GAE9D,CAAC,OAAAv0C,GAAA+H,EAAA9H,EAAAD,EAAA,SAAA+H,EAAA7H,GAAA,CACH,CACA,GAAImvC,EAAUrkB,SAAU,KACkB/e,EADlBC,GAAAtM,EAAAA,EAAAA,GACAyvC,EAAUrkB,UAAQ,IAAxC,IAAA9e,EAAArM,MAAAoM,EAAAC,EAAApM,KAAAC,MAA0C,KAA/Bw0C,EAAOtoC,EAAApU,MAChB68C,EAA6Bx8C,EAAK+Q,OAAOsrC,GAASh8C,MAA1CyyB,EAAQ0pB,EAAR1pB,SAAU1V,EAAMo/B,EAANp/B,OACd0V,IAAa1V,GACf3b,EAAKmzB,KAAKjW,EAAUK,oBAAqBvd,EAAKo6C,cAAcQ,GAEhE,CAAC,OAAAv0C,GAAAkM,EAAAjM,EAAAD,EAAA,SAAAkM,EAAAhM,GAAA,CACGvG,EAAK8/B,IAAI8G,YACX5mC,EAAKg7C,iBAEP,IAAIC,EAAclE,EAAiBmE,WAAU,SAACx0B,GAC5C,QAASA,EAAMyvB,SAAS,WAC1B,IAI0B,IAHTY,EAAiBmE,WAAU,SAACx0B,GAC3C,OAAOA,EAAMyvB,SAAS,UAAUp5C,OAAS,CAC3C,IACeA,QAAgBg6C,EAAiBt2C,OAASw6C,EAAYl+C,QACnEiD,EAAKmzB,KACHjW,EAAUe,sBAC0Dje,EAAK+5C,2BAG/E,CACA,GAAIrE,EAAUmB,OAAQ,KACkBrkC,EADlBC,GAAAxM,EAAAA,EAAAA,GACEyvC,EAAUmB,QAAM,IAAtC,IAAApkC,EAAAvM,MAAAsM,EAAAC,EAAAtM,KAAAC,MAAwC,KAA7Bw0C,EAAOpoC,EAAAtU,MACGK,EAAK+Q,OAAOsrC,GAASh8C,MAAhCi4C,OACG95C,OAAS,IAClBiD,EAAKmzB,KAAKjW,EAAUM,mBAAoBxd,EAAKo6C,cAAcQ,IAC3D56C,EAAKmzB,KACHjW,EAAUgB,sBACV,kBAAyEle,EAAK+5C,0BAA0B,GACxG,CAAEl7B,UAAU,IAGlB,CAAC,OAAAxY,GAAAoM,EAAAnM,EAAAD,EAAA,SAAAoM,EAAAlM,GAAA,CACH,CACImvC,EAAUhkB,UACCr0B,EAAAA,EAAAA,GAAIq4C,EAAUhkB,QAAQnO,QAAO,SAAC1iB,GAAQ,IAAAs6C,EACjD,QAAwC,QAAhCA,EAACn7C,EAAK+2C,iBAAiB7mC,KAAKrP,UAAI,IAAAs6C,IAA/BA,EAAiChF,SAAS,UACrD,IACKl2C,SAAQ,SAACY,GACZb,EAAKmzB,KAAKjW,EAAUO,iBAAkBzd,EAAKo6C,cAAcv5C,GAC3D,IAEAb,EAAKuM,EAAE,cAAgB,KAE3B,KAACgS,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,8BAG4B,WAC3B,IAAIo7C,EAAiB,EAEfC,EAAgBr7C,EAAKuM,EAAE,kBACvBpH,GAAQ9H,EAAAA,EAAAA,GAAIg+C,GAAe93B,QAAO,SAACyX,GAAE,QAAOh7B,EAAK+2C,iBAAiB7mC,KAAK8qB,EAAG,IAChF71B,EAAMlF,SAAQ,SAAC+6B,GACb,IAAMsd,EAAiBt4C,EAAK+2C,iBAAiB8C,SAAS7e,EAAI,kBAC1DogB,GAAkB9C,CACpB,IACA,IAAM1B,EAAWzxC,EAAMpI,OAAS0F,KAAK4oB,MAAM+vB,EAAiBj2C,EAAMpI,QAAU,EAExEiD,EAAKuM,EAAE,qBAAuBqqC,IAIlC52C,EAAKuM,EAAE,mBAAqBqqC,EAC5B52C,EAAKmzB,KACHjW,EAAUc,uBAC4Dhe,EAAK+5C,4BAE/E,IAAC/5C,CAAA,CA6IA,OA/1BDX,EAAAA,EAAAA,GAAAi6C,EAAA,EAAAj9C,IAAA,oBAAA6B,MAiEA,SAAkB0uB,GAChB0nB,GACE,uLAEG31C,KAAK2S,cAIR3S,KAAK4N,EAAE,mBAAqBqgB,EAF5BjuB,KAAK28C,wBAA0B1uB,CAInC,GAAC,CAAAvwB,IAAA,cAAA4E,IAED,WAAkB,IAAAd,EAAA,KAChB,OAAOxB,KAAK8pC,eAAc,SAACtI,GACzB,OAAIA,aAAiBmZ,IACZnZ,EAAMob,YAAcpb,EAAMzwB,aAAeywB,IAAUhgC,EAG9D,GACF,GAAC,CAAA9D,IAAA,eAAA6B,MAED,WAGE,GAFA0e,GAAAgtB,EAAAA,EAAAA,GAAA0P,EAAA78C,WAAA,qBAAAE,KAAA,OAEKgC,KAAK4N,EAAE,qBAAsB,CAChC,IAAIwqC,EAAmB,IAAI9B,GAAgB,CACzCR,YAAawD,GACb9C,UAAW,CAAC,iBAAkB,cAAe,WAAY,SAAU,SAAU,iBAE/Ex2C,KAAK4N,EAAE,qBAAuBwqC,CAChC,EAEKp4C,KAAK68C,aAAe78C,KAAK88C,iBAC5B98C,KAAK+8C,cAET,GAAC,CAAAr/C,IAAA,qBAAA6B,MAED,WAAqB,IAAAy9C,EAAAC,EACgB,QAAnCD,EAAAh9C,KAAKk9C,sCAA8B,IAAAF,GAAnCA,EAAAh/C,KAAAgC,MACyB,QAAzBi9C,EAAAj9C,KAAKm9C,4BAAoB,IAAAF,GAAzBA,EAAAj/C,KAAAgC,MACAA,KAAKo4C,iBAAiBnhB,UACtBj3B,KAAK4N,EAAE,qBAAuB,KAE9BqQ,GAAAgtB,EAAAA,EAAAA,GAAA0P,EAAA78C,WAAA,2BAAAE,KAAA,KACF,GAAC,CAAAN,IAAA,eAAA6B,MAED,WAAe,IAAAmG,EAAA,KACb1F,KAAK48C,YAAa,EAGlB58C,KAAKm9C,qBAAuBn9C,KAAKo4C,iBAAiBgF,kBAAkBp9C,KAAKq9C,yBAGzEr9C,KAAKk9C,+BAAiCl9C,KAAKo4C,iBAAiBkF,kBAC1Dt9C,KAAKu9C,mCAGP,IAAMC,EAAmB,WACvB93C,EAAK61C,qBACL71C,EAAK81C,0BACP,EAEAx7C,KAAK8gC,eAAe,wBAAyB0c,GAC7Cx9C,KAAK8gC,eAAe,cAAe0c,GACnCx9C,KAAK8gC,eAAe,cAAe0c,GACnCx9C,KAAK8gC,eAAe,WAAY0c,GAChCx9C,KAAK8gC,eAAe,UAAW0c,GAC/Bx9C,KAAK8gC,eAAe,SAAU0c,GAC9Bx9C,KAAK8gC,eAAe,yBAAyB,SAACvhC,GAC5CmG,EAAKkI,EAAE,gBAAgBgrB,YAAcjnB,OAAOpS,IAAU,CACxD,IAEIS,KAAK28C,0BACP38C,KAAK4N,EAAE,mBAAqB5N,KAAK28C,wBAErC,GAIA,CAAAj/C,IAAA,iBAAA6B,MAKA,SAAemX,GAAwC,IAAA4T,EAAAxpB,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAAJ,CAAC,EAA9Bkc,EAAMsN,EAANtN,OAAQ0Q,EAAQpD,EAARoD,SAAUlwB,EAAM8sB,EAAN9sB,OAChCigD,EAAaz9C,KAAKo4C,iBAAiBz2C,IAAI,CAC3C43C,YAAa7iC,EACbgX,SAAkB,OAARA,QAAQ,IAARA,EAAAA,EAAY,KACtB1Q,OAAc,OAANA,QAAM,IAANA,GAAAA,EACRxf,OAAc,OAANA,QAAM,IAANA,EAAAA,EAAU81C,GAAaI,MAEjC,OAAO1zC,KAAKy7C,cAAcgC,EAC5B,GAEA,CAAA//C,IAAA,kBAAA6B,MAKA,SAAgBkxB,GAAyC,IAAAwhB,EAAAnxC,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAAJ,CAAC,EAA9Bkc,EAAMi1B,EAANj1B,OAAQ0Q,EAAQukB,EAARvkB,SAAUlwB,EAAMy0C,EAANz0C,OAClCigD,EAAaz9C,KAAKo4C,iBAAiBz2C,IAAI,CAC3C8uB,KAAAA,EACA/C,SAAkB,OAARA,QAAQ,IAARA,EAAAA,EAAY,KACtB1Q,OAAc,OAANA,QAAM,IAANA,GAAAA,EACRxf,OAAc,OAANA,QAAM,IAANA,EAAAA,EAAU81C,GAAaI,MAEjC,OAAO1zC,KAAKy7C,cAAcgC,EAC5B,GAEA,CAAA//C,IAAA,oBAAA6B,MAKA,SAAkBwzB,GAA2C,IAAAtF,EAAAV,EAAAjsB,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAAJ,CAAC,EAA9Bkc,EAAM+P,EAAN/P,OAAQ0Q,EAAQX,EAARW,SAAUlwB,EAAMuvB,EAANvvB,OACtCkgD,EAAevD,GAAY,CAAEzjC,IAAKqc,EAAQqnB,QAASp6C,KAAKmhC,IAAIoH,WAClE,IAAKmV,EACH,MAAM,IAAI5wC,MAAM,mBAElB,IAAM2wC,EAAaz9C,KAAKo4C,iBAAiBz2C,IAAI,CAC3C8uB,KAAMitB,EAAajtB,KACnBsC,OAAAA,EACA6mB,gBAAiB8D,EAAa9D,gBAC9BlsB,SAA2C,QAAnCD,EAAU,OAARC,QAAQ,IAARA,EAAAA,EAAYgwB,EAAanwB,gBAAQ,IAAAE,EAAAA,EAAI,KAC/CzQ,OAAc,OAANA,QAAM,IAANA,GAAAA,EACRxf,OAAc,OAANA,QAAM,IAANA,EAAAA,EAAU81C,GAAaI,MAEjC,OAAO1zC,KAAKy7C,cAAcgC,EAC5B,GAEA,CAAA//C,IAAA,oBAAA6B,MAKA,SAAkB8qB,GAAmD,IAAAkE,EAAAztB,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAAJ,CAAC,EAAxCkc,EAAMuR,EAANvR,OAAQ0Q,EAAQa,EAARb,SAAUlwB,EAAM+wB,EAAN/wB,OAAQu8C,EAAQxrB,EAARwrB,SAC5C0D,EAAaz9C,KAAKo4C,iBAAiBz2C,IAAI,CAC3C0oB,KAAAA,EACA6I,QAASshB,GAAYnqB,GACrB8I,SAAU9I,EAAKxV,KACf6Y,SAAkB,OAARA,QAAQ,IAARA,EAAAA,EAAYrD,EAAKzrB,KAC3By5B,SAAUhO,EAAKvoB,KACfkb,OAAc,OAANA,QAAM,IAANA,GAAAA,EACRxf,OAAc,OAANA,QAAM,IAANA,EAAAA,EAAU81C,GAAaI,IAC/BqG,SAAkB,OAARA,QAAQ,IAARA,EAAAA,EAAY,OAExB,OAAO/5C,KAAKy7C,cAAcgC,EAC5B,GAEA,CAAA//C,IAAA,WAAA6B,MAMA,SAAS+wB,GAAO,IAAAjjB,EAAA,KAId,OAHArL,QAAQrB,KACN,mHAEK2vB,EAAM5mB,KAAI,SAAqB2gB,GACpC,IAAMozB,EAAapwC,EAAK+qC,iBAAiBz2C,IAAI,CAC3C0oB,KAAAA,EACA6I,QAASshB,GAAYnqB,GACrB8I,SAAU9I,EAAKxV,KACf6Y,SAAUrD,EAAKzrB,KACfy5B,SAAUhO,EAAKvoB,OAEjB,OAAOuL,EAAKouC,cAAcgC,EAC5B,GACF,GAEA,CAAA//C,IAAA,yBAAA6B,MACA,SAAuBk+C,GACrB,IAAKz9C,KAAKo4C,iBAAiB7mC,KAAKksC,GAC9B,MAAM,IAAI3wC,MAAM,wBAAD7K,OAAyBw7C,EAAU,eAEpDz9C,KAAKo4C,iBAAiBx2C,OAAO67C,EAC/B,GAAC,CAAA//C,IAAA,iBAAA6B,MAED,WACES,KAAKo4C,iBAAiBuF,UACxB,GAAC,CAAAjgD,IAAA,mBAAA6B,MAoBD,WAA+B,IAAAq+C,EAAApvC,EAAA,KAAdiJ,EAAO3W,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAAG,CAAC,EACtBumC,EAAST,GAAasN,GAAe,CAAgB,QAAjB0J,EAAE59C,KAAKmhC,IAAIkG,cAAM,IAAAuW,EAAAA,EAAI,IAAE37C,QAAAvD,EAAAA,EAAAA,GAAMsB,KAAKmhC,IAAIiG,QAAU6M,GAAoB,OAExGj0C,KAAKmhC,IAAIkG,QAAYrnC,KAAKmhC,IAAIiG,SAChCplC,QAAQrB,KACN,mKAKJX,KAAK69C,UAAYt1C,SAAS+G,cAAc,SACxCtP,KAAK69C,UAAUhpC,KAAO,OACtB7U,KAAK69C,UAAU9W,SAAW/mC,KAAKmhC,IAAI4F,SAC/BtvB,EAAQqmC,eACV99C,KAAK69C,UAAUx8B,QAAUrhB,KAAKmhC,IAAIqG,cAClCxnC,KAAK69C,UAAUxW,OAAS,WAExBrnC,KAAK69C,UAAUxW,OAASA,EAE1BrnC,KAAK69C,UAAUtlC,cAAc,IAAIwlC,WAAW,UAC5C/9C,KAAK69C,UAAUG,SAAW,YAExBt/C,EAAAA,EAAAA,GAAI8P,EAAKqvC,UAAiB,OAAGv8C,SAAQ,SAAC+oB,GAAI,OACxC7b,EAAKyvC,kBAAkB5zB,EAAM,CAAE7sB,OAAQia,EAAQqmC,cAAgBxK,GAAavE,OAASuE,GAAaC,OAAQ,IAG5G/kC,EAAKZ,EAAE,oBAAsBo/B,GAAc6B,WAAWI,YACtDzgC,EAAKogC,cAAc,gBAAgB,GAEnCpgC,EAAKqvC,UAAiB,MAAI,GAC1BrvC,EAAKqvC,UAAY,IACnB,CACF,GAEA,CAAAngD,IAAA,aAAA4E,IACA,WAEE,IAAI47C,EAAO,GAKX,OAJIl+C,KAAKmhC,IAAIsG,aACXyW,EAAOxZ,GAAc1kC,KAAKmhC,IAAIsG,aAGzByW,CACT,GAEA,CAAAxgD,IAAA,WAAA6B,MACA,WAAwB,IAMf4+C,EANAC,EAAKt9C,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,IAAAA,UAAA,GACZ,GAAId,KAAKo4C,iBAAiBt2C,KAAO,IAAMs8C,EACrCp+C,KAAK0G,KAAK,CACR,mBAAoBsmC,GAAc6B,WAAWI,cAE/CjvC,KAAK4uC,cAAc,gBAAgB,QAEnC,GAAgC,KAAb,QAAfuP,EAAAn+C,KAAKynC,kBAAU,IAAA0W,OAAA,EAAfA,EAAiB//C,QAAc,CACjC,IAAMigD,EAASr+C,KAAKynC,WAAW,GAG/B,GAAe,UAAX4W,EAGF,OAFAr+C,KAAK4N,EAAE,oBAAsBo/B,GAAc6B,WAAWI,iBAClD,OAAJjvC,WAAI,IAAJA,MAAAA,KAAyB,oBAK3B,IAAM2pC,EAAiB3pC,KAAK4N,EAAE,mBAKxB0wC,EAAc,SAAC9c,GAAK,MAAK,SAAUA,GAASA,EAAM3sB,OAASwpC,CAAM,EACjEE,GAAiB7/C,EAAAA,EAAAA,GAAIirC,GAAgB2E,KAAKgQ,GAElC,OAAdC,QAAc,IAAdA,GAAAA,EAAgBC,WACZx+C,KAAK4N,EAAE,qBACT5N,KAAK4uC,cAAc,gBAAgB,EAEvC,MAEE5uC,KAAK0G,KAAK,CACR,mBAAoBsmC,GAAc6B,WAAWC,aAE/C9uC,KAAK4uC,cAAc,gBAAgB,EAGzC,GAAC,CAAAlxC,IAAA,WAAA6B,MAED,WACES,KAAK0G,KAAK,CACR,mBAAoB1G,KAAKy+C,aACzB,WAAYz+C,KAAKy+C,aAAe,CAACz+C,KAAKy+C,cAAgB,KAEnDz+C,KAAK4N,EAAE,qBACV5N,KAAK4uC,cAAc,gBAAgB,EAEvC,GAEA,CAAAlxC,IAAA,mBAAA4E,IACA,WACE,OAAOtC,KAAK4N,EAAE,oBAChB,GAEA,CAAAlQ,IAAA,oBAAA6B,MAIA,SAAkBm/C,GAChB,IAAMC,EAAa3+C,KAAKmhC,IAAIiG,QACtBC,EAASrnC,KAAKmhC,IAAIkG,OAClBiN,EAAmBJ,GAAe,GAADjyC,QAAAvD,EAAAA,EAAAA,GAAMigD,EAAa1K,GAAoB,IAAK,CAAA5M,KACnF,GAAKiN,EAAiBl2C,OAAtB,CAEA,IAAM+0B,EAAWurB,EAAYvrB,SACvBzF,EAAWgxB,EAAY9/C,KAE7B,GAAKu0B,GAAazF,EAAlB,CAKA,IAAMkxB,EAASvK,GAAclhB,EAAUmhB,GACjCuK,ET1XoB,SAACnxB,EAAU4mB,GACvC,OAAOA,EAAiBC,MAAK,SAAC1/B,GAC5B,QAAKA,EAAK7V,WAAW,MAId0uB,EAAS3uB,cAAc8jC,SAAShuB,EAAK9V,cAC9C,GACF,CSkXkB+/C,CAAepxB,EAAU4mB,GAEvC,OAAKsK,GAAWC,OAAhB,EAES9K,GAAqB,CAC1Bl/B,KAAM,sBACNyQ,QAAStlB,KAAKwiC,KAAK,yBACnBza,MAAO22B,GAVX,CARoC,CAqBtC,GAEA,CAAAhhD,IAAA,wBAAA6B,MAIA,SAAsBm/C,GACpB,IAAMK,EAAc/+C,KAAKmhC,IAAIwG,sBACvBtP,EAAWqmB,EAAY58C,KAC7B,GAAIi9C,GAAe1mB,GAAYA,EAAW0mB,EACxC,OAAOhL,GAAqB,CAC1Bl/B,KAAM,qBACNyQ,QAAStlB,KAAKwiC,KAAK,6BAA8B,CAAEuc,YAAa3J,GAAY2J,KAC5Eh3B,MAAO22B,GAGb,GAEA,CAAAhhD,IAAA,uBAAA6B,MAKA,SAAqBm/C,EAAaM,GAEhC,IAAMC,EAAqB,OAAbD,QAAa,IAAbA,OAAa,EAAbA,EAAexH,SAAS,eACtC,GAAKyH,EAAL,CAIA,GAAIA,aAAiB1zB,GACnB,OAAOwoB,GAAqB,CAC1Bl/B,KAAM,eACNyQ,QAAS25B,EAAM35B,QACfyC,MAAO22B,EACPnnC,MAAO0nC,IAEJ,GAAIA,aAAiB95B,GAC1B,OAAO4uB,GAAqB,CAC1Bl/B,KAAM,gBACNyQ,QAAS25B,EAAM35B,QACfyC,MAAO22B,EACPnnC,MAAO0nC,IAGT,IAAM1nC,EAAQ0nC,aAAiBnyC,MAAQmyC,EAAQ,IAAInyC,MAAM,gBAAiB,CAAEmyC,MAAAA,IAC5E,OAAOlL,GAAqB,CAC1Bl/B,KAAM,gBACNyQ,QAAS/N,EAAM+N,QACfyC,MAAO22B,EACPnnC,MAAAA,GAtBJ,CAyBF,GAEA,CAAA7Z,IAAA,mBAAA6B,MAIA,SAAiBm/C,GACf,IAAMC,EAAa3+C,KAAKmhC,IAAIiG,QACtBlU,EAAUwrB,EAAYxrB,QAC5B,GAAKyrB,IAAczrB,IAGdwrB,EAAYhsB,WAAYgsB,EAAYnF,eAIpCmF,EAAYhsB,UAAagsB,EAAYvrB,UAI1C,OAAO4gB,GAAqB,CAC1Bl/B,KAAM,eACNyQ,QAAStlB,KAAKwiC,KAAK,wBACnBza,MAAO22B,GAEX,GAEA,CAAAhhD,IAAA,6BAAA6B,MAIA,SAA2BwoB,GACzB,IAG4Cm3B,EAHtCR,EAAc1+C,KAAKy7C,cAAc1zB,EAAM7lB,KACvCg2C,EAAS,GAAGiH,GAAA73C,EAAAA,EAAAA,GAEMtH,KAAKo/C,iBAAe,IAA5C,IAAAD,EAAA53C,MAAA23C,EAAAC,EAAA33C,KAAAC,MAA8C,KACtC8P,GAAQ8nC,EADIH,EAAA3/C,OACMm/C,EAAa32B,GACjCxQ,GACF2gC,EAAOnwC,KAAKwP,EAEhB,CAAC,OAAA7P,GAAAy3C,EAAAx3C,EAAAD,EAAA,SAAAy3C,EAAAv3C,GAAA,CACDmgB,EAAMsuB,SAAS,SAAU6B,EAC3B,GAEA,CAAAx6C,IAAA,qBAAA6B,MAIA,SAAmB+/C,GACjB,IACoBC,EADdvD,EAAc,OAARsD,QAAQ,IAARA,EAAAA,EAAYt/C,KAAKo4C,iBAAiB5xC,QAAQg5C,GAAAl4C,EAAAA,EAAAA,GACrC00C,GAAG,IAApB,IAAAwD,EAAAj4C,MAAAg4C,EAAAC,EAAAh4C,KAAAC,MAAsB,KAAX40B,EAAEkjB,EAAAhgD,MACLwoB,EAAQ/nB,KAAKo4C,iBAAiB7mC,KAAK8qB,GACzCtU,GAAS/nB,KAAKy/C,2BAA2B13B,EAC3C,CAAC,OAAArgB,GAAA83C,EAAA73C,EAAAD,EAAA,SAAA83C,EAAA53C,GAAA,CACH,GAEA,CAAAlK,IAAA,2BAAA6B,MACA,WAA2B,IAIyBmgD,EAJzB7uC,EAAA,KACnBoqC,EAAaj7C,KAAKo4C,iBAClBF,EAAS,GAAGyH,GAAAr4C,EAAAA,EAAAA,GAEMtH,KAAK4/C,uBAAqB,IAAlD,IAAAD,EAAAp4C,MAAAm4C,EAAAC,EAAAn4C,KAAAC,MAAoD,KAC5Co4C,GAAgBR,EADJK,EAAAngD,OACc07C,GAC3B4E,IAGDh4C,MAAM8b,QAAQk8B,GAChB3H,EAAOnwC,KAAIqB,MAAX8uC,GAAMx5C,EAAAA,EAAAA,GAASmhD,IAEf3H,EAAOnwC,KAAK83C,GAEhB,CAAC,OAAAn4C,GAAAi4C,EAAAh4C,EAAAD,EAAA,SAAAi4C,EAAA/3C,GAAA,CAED5H,KAAK4N,EAAE,qBAAuBsqC,EAE1BA,EAAO95C,OAAS,GAClB4B,KAAKw0B,KACHjW,EAAUgB,sBACV,kBAAyE1O,EAAKuqC,0BAA0B,GACxG,CAAEl7B,UAAU,GAGlB,GAEA,CAAAxiB,IAAA,eAAA6B,MAAA,eAAAugD,GAAAnkC,EAAAA,EAAAA,GAAAC,EAAAA,MAIA,SAAAqc,EAAmBojB,GAAe,IAAA0E,EAAAC,EAAAnG,EAAAoG,EAAAC,EAAA9uC,EAAA,YAAAwK,EAAAA,MAAA,SAAAsc,GAAA,cAAAA,EAAA/rB,KAAA+rB,EAAA9rB,MAAA,OAKa,OAJvC2zC,EAAsB//C,KAAKmgD,yBAC3BH,EAAW3E,EAAgBtC,WAAWrvC,KAAI,SAACqe,GAC/C,OAAOA,EAAM0I,MAAQ1I,EAAM6xB,gBAAkB,IAAH33C,OAAO8lB,EAAM6xB,iBAAoB,GAC7E,IACMC,EAAkB,IAAI3jB,gBAAiBgC,EAAA9rB,KAAA,EAC1B0wB,GAAgBkjB,GAAQ1/C,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAOy/C,GAAmB,IAAEr6B,OAAQm0B,EAAgBn0B,UAAS,OAA9F,GAAJu6B,EAAI/nB,EAAAjc,KACNjc,KAAK4N,EAAE,sBAAwBytC,EAAe,CAAAnjB,EAAA9rB,KAAA,QACxB,OAAxBytC,EAAgBzxB,QAAQ8P,EAAAN,OAAA,iBAG1B53B,KAAK4N,EAAE,cAAgBqyC,EACjBC,EACJlgD,KAAKo7C,2BAEPp7C,KAAKw0B,KAAKjW,EAAUkB,cAAeygC,GACnClgD,KAAKw0B,KAAKjW,EAAUiB,QAAQ,kBAAMpO,EAAKgqC,0BAA0B,GAAE,CAAEl7B,UAAU,IAC/ElgB,KAAK4N,EAAE,oBAAsBsyC,EAAyB,yBAAAhoB,EAAAhc,OAAA,GAAA+b,EAAA,UACvD,gBAAA9b,GAAA,OAAA2jC,EAAA12C,MAAA,KAAAtI,UAAA,EAtBD,IAwKA,CAAApD,IAAA,iBAAA6B,MAwBA,WAAiB,IAAAiT,EAAA,KACTy1B,EAAaiL,GAAgBlzC,KAAKmhC,IAAI8G,YAC5C,GAAIA,EAAY,CACd,IAW2BmY,EAXpBC,GAAPp4B,EAAAA,GAAAA,GAA4BggB,EAAU,GAAd,GAElBngB,EAAU9nB,KAAKo4C,iBAClBmE,WACC,SAACx0B,GAAK,IAAAu4B,EAAA,OACJv4B,EAAMyvB,SAAS,aACfzvB,EAAMyvB,SAAS,cACmB,QAAlC8I,EAACv4B,EAAMyvB,SAAS,0BAAkB,IAAA8I,GAAjCA,EAAmCr/C,SAAS,UAAS,IAEzDyI,KAAI,SAAC2yB,GAAE,OAAK7pB,EAAK4lC,iBAAiB7mC,KAAK8qB,EAAG,IAAEkkB,GAAAj5C,EAAAA,EAAAA,GAE3BwgB,GAAO,IAA3B,IAAAy4B,EAAAh5C,MAAA64C,EAAAG,EAAA/4C,KAAAC,MAA6B,KAAlBsgB,EAAKq4B,EAAA7gD,MAEdihD,EADiBz4B,EAAMyvB,SAAS,YACGnkB,UAE7BwM,EAAO8S,GAFA6N,EAALrQ,MAAaqQ,EAANpQ,OACaiQ,EAAkBlQ,MAAQkQ,EAAkBjQ,QAElEwJ,EAAkB3W,GAAsB,QAADhhC,OACnC49B,EAAKsQ,MAAK,KAAAluC,OAAI49B,EAAKuQ,OAAM,KAAAnuC,OAAI49B,EAAKoQ,EAAC,KAAAhuC,OAAI49B,EAAKqQ,GACpD,WAEFnoB,EAAM4zB,kBAAkB,CACtB/B,gBAAAA,EACA7mB,OAAQsR,GAAatc,EAAMyvB,SAAS,UAAWoC,KAGhB,IAA/B55C,KAAKo4C,iBAAiBt2C,MACtB9B,KAAKmhC,IAAI4G,qBACT/nC,KAAK8pC,eAAc,SAACtI,GAAK,OAAKA,EAAMqI,eAAiBmD,GAAc6B,WAAWM,cAAc,MAE5FnvC,KAAK4N,EAAE,iBAAmBma,EAC1B/nB,KAAK4N,EAAE,oBAAsBo/B,GAAc6B,WAAWM,eAE1D,CAAC,OAAAznC,GAAA64C,EAAA54C,EAAAD,EAAA,SAAA64C,EAAA34C,GAAA,CACH,CACF,GAEA,CAAAlK,IAAA,iBAAA6B,MAAA,eAAAkhD,GAAA9kC,EAAAA,EAAAA,GAAAC,EAAAA,MAIA,SAAA6d,EAAqBwiB,GAAO,IAAAyE,EAAAC,EAAAC,EAAA3yB,EAAA,OAAArS,EAAAA,MAAA,SAAA8d,GAAA,cAAAA,EAAAvtB,KAAAutB,EAAAttB,MAAA,OACoF,GACnF,oBADrBu0C,EAA+B,QAApBD,EAAG1gD,KAAKmhC,IAAIlT,gBAAQ,IAAAyyB,EAAAA,EAAgD1gD,KAAK4N,EAAE,oBACvD,CAAA8rB,EAAAttB,KAAA,QACgB,OAA7Cw0C,EAAkB5gD,KAAKy7C,cAAcQ,GAAQviB,EAAAttB,KAAA,EAC5Bu0C,EAAYC,GAAgB,OAArC,OAAR3yB,EAAQyL,EAAAzd,KAAAyd,EAAA9B,OAAA,SACP3J,GAAQ,cAAAyL,EAAA9B,OAAA,SAEV+oB,GAAW,wBAAAjnB,EAAAxd,OAAA,GAAAud,EAAA,UACnB,gBAAAtB,GAAA,OAAAsoB,EAAAr3C,MAAA,KAAAtI,UAAA,EAZD,IAcA,CAAApD,IAAA,yBAAA6B,MACA,WAmBE,MAlBc,CACZU,MAAOD,KAAKmhC,IAAIlhC,MAChBskB,UAAWvkB,KAAKmhC,IAAI2F,OACpBrgB,QAASzmB,KAAKmhC,IAAIoH,SAClB7hB,QAAS1mB,KAAKmhC,IAAIqH,QAClBnkB,UAAWwvB,GACXpvB,YAAazkB,KAAKmhC,IAAI2H,qBACtBlb,gBAAiB5tB,KAAKmhC,IAAIvT,gBAC1BC,aAAc7tB,KAAKmhC,IAAItT,aACvBjH,8BAA+B5mB,KAAKmhC,IAAIva,8BACxCE,qBAAsB9mB,KAAKmhC,IAAIra,qBAC/BC,mBAAoB/mB,KAAKmhC,IAAIpa,mBAC7BE,sBAAuBjnB,KAAKmhC,IAAIwH,+BAChCC,qBAAsB5oC,KAAKmhC,IAAIyH,qBAC/B/Z,wBAAyB7uB,KAAKmhC,IAAItS,sBAClCC,6BAA8B9uB,KAAKmhC,IAAIrS,2BAI3C,GAEA,CAAApxB,IAAA,gBAAA6B,MAKA,SAAc08C,GAAS,IAAAttB,EAAAkyB,EAAAC,EAAAC,EAAAC,EAAAC,EAAA3xB,EAAA4xB,EAAAxxB,EAAAyxB,EACfC,EAA+ExhD,EAAK+Q,OAAOsrC,GAASh8C,MAGpGyyB,EAAW0uB,EAAgB1uB,SAG7BrK,EAAS+4B,EAAgBnH,UACzB,UACAmH,EAAgBlJ,OAAO95C,OAAS,EAC9B,SACEgjD,EAAgB1uB,SAChB,UACA0uB,EAAgBvI,YACd,YACA,OA0BV,MAvBmB,CACjBpoB,KAA4C,QAAxC9B,EAAgB,QAAhBkyB,EAAU,OAARnuB,QAAQ,IAARA,OAAQ,EAARA,EAAUjC,YAAI,IAAAowB,EAAAA,EAAIO,EAAgB3wB,YAAI,IAAA9B,EAAAA,EAAI,KAChD8uB,WAAYxB,EACZr9C,KAAgC,QAA5BkiD,EAAU,OAARpuB,QAAQ,IAARA,OAAQ,EAARA,EAAUU,wBAAgB,IAAA0tB,EAAAA,EAAIM,EAAgB1zB,SACpD5rB,KAAoB,QAAhBi/C,EAAU,OAARruB,QAAQ,IAARA,OAAQ,EAARA,EAAU5wB,YAAI,IAAAi/C,EAAAA,EAAIK,EAAgB/oB,SACxCnF,QAA0B,QAAnB8tB,EAAU,OAARtuB,QAAQ,IAARA,OAAQ,EAARA,EAAUQ,eAAO,IAAA8tB,EAAAA,EAAII,EAAgBluB,QAC9CC,SAA4B,QAApB8tB,EAAU,OAARvuB,QAAQ,IAARA,OAAQ,EAARA,EAAUS,gBAAQ,IAAA8tB,EAAAA,EAAIG,EAAgBjuB,SAChD9I,KAAM+2B,EAAgB/2B,KACtBkvB,YAAa6H,EAAgB7H,YAC7BK,gBAAiBwH,EAAgBxH,gBACjC7mB,OAAkD,QAA5CzD,EAAwB,QAAxB4xB,EAAEE,EAAgBruB,cAAM,IAAAmuB,EAAAA,EAAY,OAARxuB,QAAQ,IAARA,OAAQ,EAARA,EAAUK,cAAM,IAAAzD,EAAAA,EAAI,KACtDyqB,SAAUqH,EAAgBrH,SAC1BJ,eAAgByH,EAAgBzH,eAChCjnB,SAAkB,OAARA,QAAQ,IAARA,EAAAA,EAAY,KACtBzE,SAAwD,QAAhDyB,EAA0B,QAA1ByxB,EAAEC,EAAgBnzB,gBAAQ,IAAAkzB,EAAAA,EAAY,OAARzuB,QAAQ,IAARA,OAAQ,EAARA,EAAUzE,gBAAQ,IAAAyB,EAAAA,EAAI,KAC5DopB,UAAsB,YAAXzwB,EACXwwB,YAAwB,cAAXxwB,EACbuwB,SAAqB,WAAXvwB,EACV4xB,UAAsB,YAAX5xB,EACX6vB,OAAiFkJ,EAAgBlJ,OACjG7vB,OAAAA,EAIJ,GAEA,CAAA3qB,IAAA,gBAAA6B,MAIA,SAAco4C,GAAS,IAAAlkC,EAAA,KAGrB,OAFmBkkC,EAAU33C,KAAKo4C,iBAAiBmE,UAAU5E,GAAW33C,KAAKo4C,iBAAiB5xC,SACtEkD,KAAI,SAAC23C,GAAM,OAAK5tC,EAAKgoC,cAAc4F,EAAO,GAEpE,GAEA,CAAA3jD,IAAA,2BAAA6B,MACA,WACE,OAA8Eu4C,GAA2B93C,KAC3G,KAAC26C,CAAA,CAt3BuB,CAAS3N,IA03BnC2N,GAAc2G,WAAazjD,OAAO6E,OAAO,CACvC6+C,SAAU,WACVC,QAAS,UACTC,OAAQ,SACRC,QAAS,UACTC,UAAW,YACXC,OAAQ,SACRC,GAAI,KACJC,SAAU,WACVC,IAAK,MACLC,SAAU,WACVC,OAAQ,WAIVtH,GAAcuH,YAAcrkD,OAAO6E,QAAMpC,EAAAA,EAAAA,GAAC,CACxCizC,MAAO,QACPh9B,IAAK,MACLw4B,OAAQ,SACRC,KAAM,QACH2L,GAAc2G,aC35BZ,IAAMa,GAAc,SAACn4C,GAAG,IAAAo4C,EAAA,OAEiD,QAFjDA,EAC7Bp4C,EACGsC,MAAM,6EAAqE,IAAA81C,OAAA,EAD9EA,EAEI14C,KAAI,SAACumC,GAAC,OAAKA,EAAElxC,aAAa,IAC3B6K,KAAK,IAAI,ECTRy4C,GAAW,SAAC9iD,GAAK,OAAKiN,OAAOjN,EAAM,EAEnCgmC,GAAW,SAAChmC,GAChB,IAAM21C,EAASvjC,OAAOpS,GACtB,GAAIoS,OAAO2wC,MAAMpN,GACf,MAAM,IAAIpoC,MAAM,oBAAD7K,OAAqB1C,EAAK,MAE3C,OAAO21C,CACT,EAEa1P,GAAY,SAACjmC,GACxB,GAAqB,qBAAVA,GAAmC,OAAVA,EAAgB,OAAO,EAC3D,GAAqB,mBAAVA,EAAqB,OAAOA,EAEvC,GAAc,SAAVA,EAAkB,OAAO,EAE7B,GAAc,KAAVA,EAAc,OAAO,EAEzB,GAAc,UAAVA,EAAmB,OAAO,EAC9B,MAAM,IAAIuN,MAAM,qBAAD7K,OAAsB1C,EAAK,KAC5C,EAqDMgjD,GAAU,CACdzb,OAAQub,GACRtb,SAAUvB,GACVwB,YAAazB,GACb0B,YAAa1B,GAEb4B,cAAe3B,GACf4B,QAAS5B,GACT6B,OAAQgb,GACR/a,8BAA+B+a,GAC/BpiD,MAjDc,SAACV,GAAK,MAAgB,SAAVA,EAAmBA,EAAQimC,GAAUjmC,EAAM,EAkDrEgoC,aAAc/B,GACdgC,cAhDsB,SAACjoC,GACvB,IAAMijD,EAAWH,GAAS9iD,GAC1B,GAAiB,SAAbijD,GAAoC,gBAAbA,GAA2C,KAAbA,EACvD,MAAM,IAAI11C,MAAM,mCAAD7K,OAAoCugD,EAAQ,MAE7D,OAAOA,CACT,EA2CE/a,WAAY4a,GACZ1a,sBAAuBpC,GACvBqC,UAAWrC,GACXsC,cAAerC,GACfsC,oBAAqBtC,GACrBuC,oBAAqBvC,GACrBkC,qBAAsB2a,GACtBra,gBAAiBxC,GACjByC,WAAYoa,GACZna,YAAama,GAEbla,gBAAiB3C,GACjB4C,qBAAsB5C,GAEtB6C,eAAgB7C,GAEhB8C,oBAAqB+Z,GACrB9Z,SAAU8Z,GACV7Z,QAAS6Z,GACT5Z,cAAe4Z,GACfz0B,gBAAiBy0B,GACjBx0B,aAAcw0B,GACd3Z,oBAAqB2Z,GACrBz7B,8BAA+B2e,GAC/Bze,qBAAsBye,GACtBxe,mBAAoBwe,GACpBte,sBAAuBse,GACvBoD,+BAAgCpD,GAChCqD,qBAAsBrD,GACtB1W,sBAAuB2W,GACvB1W,2BAA4B0W,GAE5BqD,YAAarD,GACbsD,qBAAsBuZ,GACtBtZ,MAAOvD,GAEPtF,WAAYmiB,GAEZp0B,SA9EiB,SAAC1uB,GAClB,GAAqB,kBAAVA,IAAuBsI,MAAM8b,QAAQpkB,GAC9C,OAAO,EAET,GAAqB,oBAAVA,EACT,OAAO,EAGT,MAAM,IAAIuN,MAAM,yDAClB,EAsEEs0B,yBAnEiC,SAAC7hC,GAClC,GAAqB,kBAAVA,EACT,OAAO,EAGT,MAAM,IAAIuN,MAAM,6DAClB,EA8DEk8B,iBApGwB,SAACzpC,GACzB,GAAqB,oBAAVA,EACT,OAAO,EAGT,MAAM,IAAIuN,MAAM,8CAClB,GC9BM21C,IAAgB/jD,EAAAA,EAAAA,GAEjB,IAAIgD,IAAI,CAAC,SAAOO,QAAAvD,EAAAA,EAAAA,GAAKb,OAAOmD,KAAK6lC,QAQhC6b,GAAoB,CAAC,WAAY,2BAA4B,oBAM7DC,GACJF,GAAc79B,QAAO,SAAClnB,GAAG,OAJN,SAACA,GAAG,OAAKglD,GAAkBzhD,SAASvD,EAAI,CAI5BklD,CAAallD,EAAI,IAO5CmlD,IACJviD,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACKzC,OAAOilD,YAAYH,GAAgBj5C,KAAI,SAAChM,GAAG,MAAK,CAACykD,GAAYzkD,GAAMA,EAAI,MACvEG,OAAOilD,YAAYH,GAAgBj5C,KAAI,SAAChM,GAAG,MAAK,CAACA,EAAIqB,cAAerB,EAAI,MAIzEqlD,IAAmBziD,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACpBzC,OAAOilD,YAAYH,GAAgBj5C,KAAI,SAAChM,GAAG,MAAK,CAACykD,GAAYzkD,GAAMglC,GAAgBhlC,GAAK,MACxFG,OAAOilD,YAAYH,GAAgBj5C,KAAI,SAAChM,GAAG,MAAK,CAACA,EAAIqB,cAAe2jC,GAAgBhlC,GAAK,MAIxFslD,GAAmB,SAACtlD,GAAG,MAAK,KAAOA,CAAG,EAEtCulD,GAAW,SAAAhW,IAAA1nC,EAAAA,EAAAA,GAAA09C,EAAAhW,GAAA,IAAAznC,GAAAC,EAAAA,EAAAA,GAAAw9C,GAGf,SAAAA,IAAc,IAAA5hD,EAYV,OAZUvB,EAAAA,EAAAA,GAAA,KAAAmjD,GACZ5hD,EAAAmE,EAAAxH,KAAA,OAEA4hB,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,kBALe,GAMfA,EAAK2F,OAAK1G,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACLe,EAAK2F,OACLnJ,OAAOilD,YACRjlD,OAAOiqB,QAAQ+e,IAAen9B,KAAI,SAAAgS,GAAA,IAAAmI,GAAAoE,EAAAA,GAAAA,GAAAvM,EAAA,GAAEhe,EAAGmmB,EAAA,GAAEtkB,EAAKskB,EAAA,SAAM,CAClD6e,GAAuEhlC,GACvE6B,EACD,MAEH8B,CACJ,CAuJC,OArJDX,EAAAA,EAAAA,GAAAuiD,EAAA,EAAAvlD,IAAA,yBAAA6B,MAKA,SAAuB7B,EAAK6B,GAC1B,GAAIojD,GAAgB1hD,SAASvD,GAAM,CAEjC,IACwBwJ,EADlBwoC,GAAKhxC,EAAAA,EAAAA,GAAO,IAAIgD,IAAI,CAACygD,GAAYzkD,GAAMA,EAAIqB,iBAAiBsI,GAAAC,EAAAA,EAAAA,GAC/CooC,GAAK,IAAxB,IAAAroC,EAAAE,MAAAL,EAAAG,EAAAG,KAAAC,MAA0B,KAAfgC,EAAIvC,EAAA3H,MACQ,qBAAVA,GAAmC,OAAVA,EAClCS,KAAKiI,gBAAgBwB,GACZzJ,KAAKmF,aAAasE,KAAUlK,EAAMkjB,YAC3CziB,KAAKyK,aAAahB,EAAMlK,EAAMkjB,WAElC,CAAC,OAAA/a,GAAAL,EAAAM,EAAAD,EAAA,SAAAL,EAAAO,GAAA,CACH,CACF,GAEA,CAAAlK,IAAA,qBAAA6B,MAKA,SAAmB7B,EAAK6B,GAClBS,KAAK4N,EAAE80B,GAAgBhlC,MAAU6B,IAEjCS,KAAK4N,EAAE80B,GAAgBhlC,IADJ,qBAAV6B,GAAmC,OAAVA,EACHsnC,GAAcnpC,GAEd6B,EAGrC,GAEA,CAAA7B,IAAA,YAAA6B,MAKA,SAAU7B,EAAK6B,GACb,IAAM2jD,EAA4CljD,KAE5CmjD,EDkC0B,SAACzlD,EAAK6B,GACxC,GAAqB,qBAAVA,GAAmC,OAAVA,EAIpC,IACE,OAAOgjD,GAAQ7kD,GAAK6B,EAItB,CAHE,MAAO6jD,GAEP,OADAphD,QAAQuV,MAAM,iCAADtV,OAAkCvE,EAAG,MAAM0lD,GACjDvc,GAAcnpC,EACvB,CACF,CC7C4B2lD,CAAqB3lD,EAAK6B,GAE5CgW,EAAgBytC,GAAiBtlD,GACnCwlD,EAAQ3tC,KAAmB4tC,IAE/BnjD,KAAKsjD,mCAAmC5lD,EAAKwlD,EAAQ3tC,GAAgB4tC,GAErED,EAAQ3tC,GAAiB4tC,EAGzBnjD,KAAKujD,uBAAuB7lD,EAAKylD,GACjCnjD,KAAKwjD,mBAAmB9lD,EAAKylD,GAE7BnjD,KAAK2f,WAAW,gBAAD1d,OAAiBvE,EAAG,KAAKylD,GAC1C,GAEA,CAAAzlD,IAAA,YAAA6B,MAIA,SAAU7B,GAGR,OAFkDsC,KAC5BgjD,GAAiBtlD,GAEzC,GAEA,CAAAA,IAAA,qCAAA6B,MAKA,SAAmC7B,EAAK+lD,EAAeC,GACjD1jD,KAAKmhC,IAAI4H,OAET2a,IAAcD,GACO,kBAAdC,GACkB,kBAAlBD,GACP72C,KAAKqoB,UAAUyuB,KAAe92C,KAAKqoB,UAAUwuB,KAE7CzhD,QAAQrB,KAAK,uBAADsB,OACavE,EAAG,2EAE5BsE,QAAQrB,KAAK,yGAGbqB,QAAQrB,KAAK,gBAADsB,OAAiBvE,EAAG,qBAAqB+lD,GACrDzhD,QAAQrB,KAAK,gBAADsB,OAAiBvE,EAAG,gBAAgBgmD,GAGtD,GAAC,CAAAhmD,IAAA,eAAA6B,MAED,WAAe,IAAAiC,EAAA,KACbyc,GAAAgtB,EAAAA,EAAAA,GAAAgY,EAAAnlD,WAAA,qBAAAE,KAAA,MACA,IAKiCkM,EAL3Bg5C,EAA4CljD,KAIlDqK,GAAA/C,EAAAA,EAAAA,GACkBq7C,IAAe,QAAAr4C,EAAA,eAAtB5M,EAAGwM,EAAA3K,MACZiC,EAAK2E,IACHu8B,GAAgBhlC,IAChB,SAAC6B,GACCiC,EAAKmiD,UAAUjmD,EAAK6B,EACtB,IACA,EACA,EAPJ,IAAA8K,EAAA9C,MAAA2C,EAAAG,EAAA7C,KAAAC,MAAmC6C,GAQlC,OAAA5C,GAAA2C,EAAA1C,EAAAD,EAAA,SAAA2C,EAAAzC,GAAA,KAE8BuH,EAF9BC,GAAA9H,EAAAA,EAAAA,GAEiBm7C,IAAa,QAAA9kB,EAAA,eAAAimB,EAApBlmD,EAAGyR,EAAA5P,MAINskD,EAA2B,QAAfD,EAAGV,EAAQxlD,UAAI,IAAAkmD,EAAAA,EAAIpiD,EAAKoM,EAAE80B,GAAgBhlC,IACxDmmD,IAAiBhd,GAAcnpC,IACjC8D,EAAKmiD,UAAUjmD,EAAKmmD,GAKtBhmD,OAAOuB,eAAeoC,EAAM9D,EAAK,CAE/B6E,IAAK,SAAChD,GACJiC,EAAKmiD,UAAUjmD,EAAK6B,EACtB,EACA+C,IAAK,WACH,OAAOd,EAAKsiD,UAAUpmD,EACxB,GACC,EAnBL,IAAA0R,EAAA7H,MAAA4H,EAAAC,EAAA5H,KAAAC,MAAiCk2B,GAoBhC,OAAAj2B,GAAA0H,EAAAzH,EAAAD,EAAA,SAAA0H,EAAAxH,GAAA,CACH,GAEA,CAAAlK,IAAA,2BAAA6B,MAKA,SAAyBX,EAAMqV,EAAQC,GACrC,GAAID,IAAWC,EAAf,CAEkDlU,KACtC6iD,GAAejkD,IAMZsV,CATc,CAU/B,KAAC+uC,CAAA,CAvKc,CAAS/Z,IA0K1B+Z,GAAYc,eAAehB,IAE3B,IAI+BvzC,GAJ/BC,IAAAnI,EAAAA,EAAAA,GAIkBm7C,IAAa,IAA/B,IAAAhzC,GAAAlI,MAAAiI,GAAAC,GAAAjI,KAAAC,MAAiC,KAAtB/J,GAAG8R,GAAAjQ,MACQ0jD,GAAYnlD,UAAWJ,SAAOqD,CACpD,CAIA,OAAA2G,IAAA+H,GAAA9H,EAAAD,GAAA,SAAA+H,GAAA7H,GAAA,CACO,IAAMo8C,GAAwDf,GClOxDgB,GAAI,SAAAhX,IAAA1nC,EAAAA,EAAAA,GAAA0+C,EAAAhX,GAAA,IAAAznC,GAAAC,EAAAA,EAAAA,GAAAw+C,GACf,SAAAA,IAAc,IAAA5iD,EAQV,OARUvB,EAAAA,EAAAA,GAAA,KAAAmkD,IACZ5iD,EAAAmE,EAAAxH,KAAA,OAEKgJ,OAAK1G,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACLe,EAAK2F,OAAK,IACbpI,KAAM,GACNkR,KAAM,GACNkH,MAAO,KACP3V,CACJ,CAiBC,OAjBAX,EAAAA,EAAAA,GAAAujD,EAAA,EAAAvmD,IAAA,eAAA6B,MAED,WAAe,IAAAiC,EAAA,KACbyc,GAAAgtB,EAAAA,EAAAA,GAAAgZ,EAAAnmD,WAAA,qBAAAE,KAAA,MACAgC,KAAKmG,IAAI,QAAQ,SAACvF,GAChB,GAAKA,EAAL,CAGA,IAAIsjD,EAAW,YAAHjiD,OAAerB,GAC3BY,EAAKs/B,eAAe,oBAAoB,SAACkI,GACvC,GAAIA,EAAkB,CACpB,IAAMmb,EAAiBnb,EAAiBpoC,GACxCsjD,EAAyB,OAAdC,QAAc,IAAdA,EAAAA,EAAkBD,CAC/B,CACA1iD,EAAKoM,EAAEkC,KAAOo0C,CAChB,GARA,CASF,GACF,KAACD,CAAA,CA3Bc,CAAS/a,IA8B1B+a,GAAKj+C,SAAqB,uIAO1Bi+C,GAAKF,eAAe,CAClBnlD,KAAM,OACNoY,MAAO,UCrCF,ICHMotC,GAAYvmD,OAAO6E,OAAO,CACrC,WAAY,CAAC,EACbokC,OAAQ,CAAC,EACTrW,KAAM,CAAC,EACP4zB,IAAK,CAAC,EAGNC,KAAM,CACJjtC,QAAS,GAEXktC,aAAc,CAAC,EACfC,YAAa,CACX,EAEF,YAAa,CACXntC,QAjBqB,wBAmBvB,cAAe,CAAC,EAChB,wBAAyB,CAAC,EAC1B,iBAAkB,CAChBA,QAAS,GAEX,oBAAqB,CAAC,EACtBotC,OAAQ,CAAC,EACT,iBAAkB,CAAC,EACnBC,YAAa,CAAC,EACdC,QAAS,CAAC,EACV,oBAAqB,CAAC,EACtB,kBAAmB,CACjBttC,QAAS,KC/BAutC,GAAW,YACXC,GAAkB,aAGlBC,IACV1/C,OAAOsS,SAAS6iC,KAAKtwC,QAAU7E,OAAOsS,SAAS6iC,KAAKt5C,SAAS,MAAQmE,OAAOsS,SAASqtC,SAAS9jD,SAAS,aAK7F+jD,GAAcnnD,OAAO6E,OAAO,CACvCuiD,QAAS,UACTC,KAAM,SCPFC,GAAYtnD,OAAO4C,OAAO,MAChC,IAAK,IAAIJ,MAAQ+jD,GAAW,KAAAgB,GAC1BD,GAAUP,GAAWvkD,KAAuB,QAAf+kD,GAAAhB,GAAU/jD,WAAK,IAAA+kD,QAAA,EAAfA,GAAiB/tC,UAAW,EAC3D,CAEO,IAAMguC,GAAS,SAAAn4C,IAAA3H,EAAAA,EAAAA,GAAA8/C,EAAAn4C,GAAA,IAAA1H,GAAAC,EAAAA,EAAAA,GAAA4/C,GAAA,SAAAA,IAAA,IAAAhkD,GAAAvB,EAAAA,EAAAA,GAAA,KAAAulD,GAAA,QAAA3kC,EAAA5f,UAAA1C,OAAAuiB,EAAA,IAAA9Y,MAAA6Y,GAAAzD,EAAA,EAAAA,EAAAyD,EAAAzD,IAAA0D,EAAA1D,GAAAnc,UAAAmc,GACA,OADA5b,EAAAmE,EAAAxH,KAAAoL,MAAA5D,EAAA,OAAAvD,OAAA0e,KAAAf,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,WACT8jD,IAAS9jD,CAAA,CAmFnB,OAnFmBX,EAAAA,EAAAA,GAAA2kD,EAAA,EAAA3nD,IAAA,KAAA6B,MAMpB,SAAG7B,GACD,OAAOsC,KAAK4N,EAAEg3C,GAAWlnD,EAC3B,GAEA,CAAAA,IAAA,QAAA6B,MACA,SAAMiS,GACJ,IAAK,IAAI9T,KAAO8T,EACdxR,KAAK4N,EAAEg3C,GAAWlnD,GAAO8T,EAAM9T,EAEnC,GAEA,CAAAA,IAAA,QAAA6B,MAIA,SAAM7B,EAAK4nD,GACTtlD,KAAKmG,IAAIy+C,GAAWlnD,GAAK,SAACkD,GAGZ,OAARA,GAAwB,KAARA,GAGpB0kD,EAAK1kD,EACP,GACF,GAAC,CAAAlD,IAAA,kBAAA6B,MAED,WACE,MAAO,WAAP0C,OAAkB0xC,GAAY,KAAA1xC,OAAI2xC,GAAe,WACnD,GAAC,CAAAl2C,IAAA,iBAAA6B,MAED,SAAeyF,IACbtG,EAAAA,EAAAA,GAAIsB,KAAKwJ,YAAYlI,SAAQ,SAACmI,GACvB26C,GAAU36C,EAAK7K,OAClBoG,EAAGyF,aAAahB,EAAK7K,KAAM6K,EAAKlK,MAEpC,GACF,GAEA,CAAA7B,IAAA,mBAAA6B,MAIA,SAAiByF,EAAIugD,GAAO,IAAA/jD,EAAA,KAM1BxB,KAAKwlD,aAAe,IAAIC,sBAAqB,SAAC39B,GAC5CA,EAAQxmB,SAAQ,SAACokD,GACXA,EAAIC,iBACNJ,IACA/jD,EAAKgkD,aAAaI,UAAU5gD,GAEhC,GACF,GAZW,CACT6J,KAAM,KACNg3C,WAAY,QAWd7lD,KAAKwlD,aAAazwC,QAAQ/P,GACrBhF,KAAK8lD,YAER9lD,KAAK8lD,UAAY,IAAIpkD,KAEvB1B,KAAK8lD,UAAUnkD,IAAIqD,EACrB,GAAC,CAAAtH,IAAA,kBAAA6B,MAED,WAAkB,IAAAmG,EAAA,KAChBuY,GAAAgtB,EAAAA,EAAAA,GAAAoa,EAAAvnD,WAAA,wBAAAE,KAAA,MACIgC,KAAKwlD,eACPxlD,KAAK8lD,UAAUxkD,SAAQ,SAAC0D,GACtBU,EAAK8/C,aAAaI,UAAU5gD,EAC9B,IACAhF,KAAKwlD,aAAe,MAEtB5lD,EAAKisC,UAAU7rC,KACjB,GAAC,CAAAtC,IAAA,2BAAA6B,MAMD,SAAyBX,EAAMqV,EAAQC,GAAQ,IAAA7G,EAAA,KAC7CjI,OAAOuB,YAAW,WAChB0G,EAAKO,EAAEg3C,GAAWhmD,GAAQsV,CAC5B,GACF,IAAC,EAAAxW,IAAA,qBAAA4E,IARD,WACE,OAAOzE,OAAOmD,KAAKojD,GACrB,KAACiB,CAAA,CApFmB,CAASx/C,GCMlBkgD,GAAO,SAAAC,IAAAzgD,EAAAA,EAAAA,GAAAwgD,EAAAC,GAAA,IAAAxgD,GAAAC,EAAAA,EAAAA,GAAAsgD,GAAA,SAAAA,IAAA,IAAA1kD,GAAAvB,EAAAA,EAAAA,GAAA,KAAAimD,GAAA,QAAArlC,EAAA5f,UAAA1C,OAAAuiB,EAAA,IAAA9Y,MAAA6Y,GAAAzD,EAAA,EAAAA,EAAAyD,EAAAzD,IAAA0D,EAAA1D,GAAAnc,UAAAmc,GAEO,OAFP5b,EAAAmE,EAAAxH,KAAAoL,MAAA5D,EAAA,OAAAvD,OAAA0e,KAAAf,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,OACX,IAAI4kD,QAAOrmC,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,cACJ,IAAI4kD,OAAO5kD,CAAA,CAoYxB,OApYwBX,EAAAA,EAAAA,GAAAqlD,EAAA,EAAAroD,IAAA,UAAA6B,MAMzB,SAAQ8kD,GAKN,OAJaA,EAAIpjD,SAAS,QACZ6jD,KACZT,EAAM,IAAI9tC,IAAI8tC,EAAK97C,SAAS29C,SAASp2C,MAEhCu0C,CACT,GAEA,CAAA3mD,IAAA,gBAAA6B,MAMA,SAAcuC,GACZ,GAAqB,MAAb,OAAJA,QAAI,IAAJA,OAAI,EAAJA,EAAMmI,QAAe,CAEvB,IAAIk8C,EAAcrkD,EAAKwK,MAAM,OAAO,GAGhC85C,EAAiBtkD,EAAKwK,MAAM,aAAa,GAEvC+5C,EAAK35C,SAASy5C,EAAa,IAEjC,GAAIx0C,OAAO00C,GFxCY,KEwCWrmD,KAAKsmD,aACrC,OFzCqB,IEyCEF,EAClB,GAAIz0C,OAAO00C,GF3CC,ME2CmBrmD,KAAKsmD,aACzC,OF5CiB,IE4CEF,CAEvB,CAEA,OAAOtkD,CACT,GAEA,CAAApE,IAAA,mBAAA6B,MAMA,SAAiBuC,EAAMykD,GACrB,IAAMv8B,EAAS,CACby6B,OAAQzkD,KAAKwmD,GAAG,UAChB7B,QAAS3kD,KAAKwmD,GAAG,WACjB5mB,OAAQ5/B,KAAKymD,cAAc3kD,GAC3BykD,KAAAA,EACA,iBAAkBvmD,KAAKwmD,GAAG,kBAC1BE,UAAW1mD,KAAK2mD,mBAGlB,OAAO1jB,GAAAA,WAAsB,GAADvkC,EAAAA,EAAAA,GC1EG,SAACsrB,GAAM,OACxCnsB,OAAOiqB,QAAQkC,GACZpF,QAAO,SAAAlJ,GAAA,IAAAmI,GAAAoE,EAAAA,GAAAA,GAAAvM,EAAA,GAAOnc,GAAFskB,EAAA,GAAOA,EAAA,gBAAgB9iB,IAAVxB,GAAiC,KAAVA,CAAY,IAC5DmK,KAAI,SAAAwa,GAAkB,IAAA+B,GAAAgC,EAAAA,GAAAA,GAAA/D,EAAA,GAAhBxmB,EAAGuoB,EAAA,GAAE1mB,EAAK0mB,EAAA,GACf,MAAY,mBAARvoB,GAGQ,cAARA,EAFK6B,EAMF,GAAP0C,OAAUvE,EAAG,KAAAuE,OAAI1C,EACnB,GAAE,CD8D8BqnD,CAAoB58B,IACtD,GAEA,CAAAtsB,IAAA,cAAA6B,MAMA,WAAkC,IAAtBuC,EAAIhB,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAAG,GAAIylD,EAAIzlD,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAAG,GAC5B,GAAId,KAAKwmD,GAAG,OAAOxnD,WAAW,UAAYgB,KAAKwmD,GAAG,OAAOxnD,WAAW,SAClE,OAAOgB,KAAKwmD,GAAG,OAIjB,GAAI1B,IAAY9kD,KAAKwmD,GAAG,SAAWxmD,KAAKwmD,GAAG,OAAOvlD,SAAS,MACzD,OAAOjB,KAAK6mD,UAAU7mD,KAAKwmD,GAAG,QAGhC,IAAIjiB,EAAevkC,KAAK8mD,iBAAiBhlD,EAAMykD,GAE/C,OAAIvmD,KAAKwmD,GAAG,OAAOxnD,WAAWgB,KAAKwmD,GAAG,cAC7BniB,GAAarkC,KAAKwmD,GAAG,OAAQjiB,GAIlCvkC,KAAKwmD,GAAG,cAAgBxmD,KAAKwmD,GAAG,SAWhCxmD,KAAKwmD,GAAG,QAVHxmD,KAAK6mD,UACVxiB,GAEEI,GAAkBzkC,KAAKwmD,GAAG,aAAcxmD,KAAKwmD,GAAG,SAChDjiB,IAiBFvkC,KAAKwmD,GAAG,eACHxmD,KAAK6mD,UACVxiB,GAEErkC,KAAKwmD,GAAG,eACRjiB,EACAvkC,KAAK+mD,QAAQ/mD,KAAKwmD,GAAG,UAMvBxmD,KAAKwmD,GAAG,UACHxmD,KAAK6mD,UACVxiB,GACE,WAAApiC,OACWjC,KAAKwmD,GAAG,UAAS,YAC5BjiB,EACAvkC,KAAK+mD,QAAQ/mD,KAAKwmD,GAAG,eAN3B,CAUF,GAEA,CAAA9oD,IAAA,YAAA6B,MAKA,SAAUmX,GAER,OADmB1W,KAAKwmD,GAAG,yBAIpBvkC,GACLjiB,KAAKwmD,GAAG,yBACR,CAAEha,WAAY91B,GACd,CAAE6L,UAAW,SAAChjB,GAAK,OAAK6F,OAAOqnC,mBAAmBltC,EAAM,IALjDmX,CAOX,GAEA,CAAAhZ,IAAA,aAAA6B,MAKA,SAAWyF,GAAyB,IAArB4B,EAAC9F,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAAG,EAAGkmD,IAAKlmD,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,KAAAA,UAAA,GACrBivC,EAAO/qC,EAAGiiD,wBACVnW,EAAIlqC,EAAI9C,KAAK4oB,MAAMqjB,EAAKI,OACxBkD,EAAI2T,EAAQ,GAAKpgD,EAAI9C,KAAK4oB,MAAMqjB,EAAKK,QAEzC,OAAIU,GAAKuC,EACA,GAAPpxC,OAAU6uC,GAAQ,GAAE,KAAA7uC,OAAIoxC,GAAQ,IAEzB,IAEX,GAEA,CAAA31C,IAAA,mBAAA6B,MACA,SAAiB2nD,GAQf,IARoB,IAAA1lD,EAAA,KAEhB2lD,EAAe,SAACx/C,GAClBA,EAAEy/C,kBACF,IAAIjvC,EAAQ,IAAIkvC,MAAM1/C,EAAEkN,KAAMlN,GAC9BnG,EAAK+W,cAAcJ,EACrB,EAEAtG,EAAA,EAAAy1C,EADa,CAAC,OAAQ,SACEz1C,EAAAy1C,EAAAlpD,OAAAyT,IAAE,CAArB,IAAIsG,EAAKmvC,EAAAz1C,GACZq1C,EAAIhuC,iBAAiBf,EAAOgvC,EAC9B,CACF,GAEA,CAAAzpD,IAAA,MAAA4E,IACA,WAKE,OAJKtC,KAAKunD,kBACRvnD,KAAKwnD,qBAAqB,CAAEC,OAAQznD,KAAK0nD,OACzC1nD,KAAKiH,YAAYjH,KAAK0nD,OAEjB1nD,KAAK0nD,IACd,GAAC,CAAAhqD,IAAA,aAAA4E,IAED,WACE,OAAOtC,KAAKunD,gBACR,CACE1yC,KAAMmwC,GAAYC,QAClBiC,IAAKlnD,KAAK2nD,aAEZ,CACE9yC,KAAMmwC,GAAYE,KAClBgC,IAAKlnD,KAAKknD,IAElB,GAAC,CAAAxpD,IAAA,kBAAA4E,IAED,WACE,OAAOtC,KAAKwmD,GAAG,kBACjB,GAAC,CAAA9oD,IAAA,aAAA4E,IAED,WACE,OAAOtC,KAAKwmD,GAAG,oBACjB,GAAC,CAAA9oD,IAAA,cAAA4E,IAED,WACE,GAAItC,KAAKwmD,GAAG,eAAgB,CAC1B,IAAMtI,EAAOxZ,GAAc1kC,KAAKwmD,GAAG,gBACnC,OJ7NsBtkB,EI6NHgc,EAAKx0C,KAAI,SAAC28C,GAAE,OAAK35C,SAAS25C,EAAI,GAAG,KJ5NxD3nD,EAAAA,EAAAA,GAAW,IAAIgD,IAAIwgC,GI6NjB,CACE,OAAO,KJ/Nc,IAACA,CIiO1B,GAAC,CAAAxkC,IAAA,eAAA4E,IAED,WACE,MAA2C,SAApCtC,KAAKwmD,GAAG,UAAUznD,aAC3B,GAEA,CAAArB,IAAA,WAAA6B,MACA,SAASyF,GACP,IAAI4iD,EAAS,IAAIlmD,IAEjBkmD,EAAOjmD,IAAI,QAADM,OAASjC,KAAK6nD,YAAY7nD,KAAK8nD,WAAW9iD,IAAI,UACpDhF,KAAKwmD,GAAG,mBACVoB,EAAOjmD,IAAI,QAADM,OAASjC,KAAK6nD,YAAY7nD,KAAK8nD,WAAW9iD,EFhPlC,IEgPgD,OAAA/C,OFhPhD,EEgP8D,MAG9EjC,KAAKwmD,GAAG,sBACVoB,EAAOjmD,IAAI,QAADM,OAASjC,KAAK6nD,YAAY7nD,KAAK8nD,WAAW9iD,EFnP/B,IEmPgD,OAAA/C,OFnPhD,EEmPiE,MAGxF,IAAI8lD,EAAO,aAAH9lD,QAAgBvD,EAAAA,EAAAA,GAAIkpD,GAAQh+C,KAAK,MAAK,KAC9C5E,EAAGW,MAAMyK,YAAY,mBAAoB23C,GACzC/iD,EAAGW,MAAMyK,YAAY,mBAAoB,WAAa23C,EACxD,GAAC,CAAArqD,IAAA,YAAA6B,MAED,WAAY,IAAAmG,EAAA,KACNsiD,EAAS,IAAItmD,IAoBjB,OAnBI1B,KAAKwkD,YACPxkD,KAAKwkD,YAAYljD,SAAQ,SAAC+kD,GACxB2B,EAAOrmD,IAAI+D,EAAKmiD,YAAYxB,EAAK,KAAO,IAAHpkD,OAAOyD,EAAK+gD,cAAcJ,EAAK,OAChE3gD,EAAK8gD,GAAG,mBACVwB,EAAOrmD,IAAI+D,EAAKmiD,YFlQF,EEkQcxB,EAAgB,KAAO,IAAHpkD,OAAOyD,EAAK+gD,cFlQ9C,EEkQ4DJ,EAAgB,OAExF3gD,EAAK8gD,GAAG,sBACVwB,EAAOrmD,IAAI+D,EAAKmiD,YFpQC,EEoQWxB,EAAmB,KAAO,IAAHpkD,OAAOyD,EAAK+gD,cFpQ9C,EEoQ4DJ,EAAmB,MAEpG,KAEA2B,EAAOrmD,IAAI3B,KAAK6nD,YAAY7nD,KAAK8nD,WAAW9nD,KAAKioD,WAAWf,MAAQ,OAChElnD,KAAKwmD,GAAG,mBACVwB,EAAOrmD,IAAI3B,KAAK6nD,YAAY7nD,KAAK8nD,WAAW9nD,KAAKioD,WAAWf,IAAK,IAAM,OAErElnD,KAAKwmD,GAAG,sBACVwB,EAAOrmD,IAAI3B,KAAK6nD,YAAY7nD,KAAK8nD,WAAW9nD,KAAKioD,WAAWf,IAAK,IAAM,SAGpExoD,EAAAA,EAAAA,GAAIspD,GAAQp+C,MACrB,GAAC,CAAAlM,IAAA,SAAA6B,MAED,WACE,OAAOS,KAAK6nD,aACd,GAAC,CAAAnqD,IAAA,gBAAA4E,IAED,WACE,OAAOtC,KAAK6nD,YAAY,OAAQ,MAClC,GAAC,CAAAnqD,IAAA,mBAAA6B,MAED,WAAmB,IAAA8N,EAAA,MACjB3O,EAAAA,EAAAA,GAAI6J,SAASxD,iBAAiB/E,KAAKkoD,aAAa5mD,SAAQ,SAAC0D,GACnDqI,EAAKm5C,GAAG,gBACVn5C,EAAK86C,iBAAiBnjD,GAAI,WACxBqI,EAAK+6C,SAASpjD,EAChB,IAEAqI,EAAK+6C,SAASpjD,EAElB,GACF,GAAC,CAAAtH,IAAA,aAAA6B,MAED,SAAAmc,GAAoC,IAAvB+rC,EAAM/rC,EAAN+rC,OAAQpD,EAAG3oC,EAAH2oC,IAAK2D,EAAMtsC,EAANssC,OACpB3D,IACFoD,EAAOpD,IAAMA,GAGX2D,IACFP,EAAOO,OAASA,EAEpB,GAAC,CAAAtqD,IAAA,uBAAA6B,MAED,SAAAskB,GAAiC,IAAV4jC,EAAM5jC,EAAN4jC,OACrBznD,KAAKqoD,iBAAiBZ,GACtBznD,KAAKsoD,eAAeb,EACtB,GAAC,CAAA/pD,IAAA,cAAA6B,MAED,SAAA2kB,GAAqC,IAAA1V,EAAA,KAAvB61C,EAAGngC,EAAHmgC,IAAK2D,EAAM9jC,EAAN8jC,OAAQP,EAAMvjC,EAANujC,OACzB,OAAO,IAAI9qC,SAAQ,SAACC,EAASC,GAC3BrO,EAAKg5C,qBAAqB,CAAEC,OAAAA,IAE5BA,EAAOh9C,aAAao6C,GAAiB,IAErC4C,EAAOvuC,iBAAiB,QAAQ,WAC9BuuC,EAAOx/C,gBAAgB48C,IACvBjoC,EAAQ6qC,EACV,IAEAA,EAAOvuC,iBAAiB,SAAS,WAC/B2D,GAAO,EACT,IAEArO,EAAK+5C,WAAW,CACdd,OAAAA,EACApD,IAAAA,EACA2D,OAAAA,GAEJ,GACF,GAAC,CAAAtqD,IAAA,cAAA6B,MAAA,eAAAipD,GAAA7sC,EAAAA,EAAAA,GAAAC,EAAAA,MAED,SAAAqc,IAAA,IAAAwwB,EAAAC,EAAA73C,EAAA,YAAA+K,EAAAA,MAAA,SAAAsc,GAAA,cAAAA,EAAA/rB,KAAA+rB,EAAA9rB,MAAA,WACMpM,KAAKwmD,GAAG,gBAAiB,CAAFtuB,EAAA9rB,KAAA,QA6BtB,OA5BCpM,KAAKunD,kBACPvnD,KAAKwnD,qBAAqB,CAAEC,OAAQznD,KAAK2nD,cACzC3nD,KAAKiH,YAAYjH,KAAK2nD,cAGxB3nD,KAAKmoD,iBAAiBnoD,KAAKioD,WAAWf,KAAGvrC,EAAAA,EAAAA,GAAAC,EAAAA,MAAE,SAAAC,IAAA,IAAA8sC,EAAA,OAAA/sC,EAAAA,MAAA,SAAAE,GAAA,cAAAA,EAAA3P,KAAA2P,EAAA1P,MAAA,OAGxC,OAFGyE,EAAK02C,kBACP12C,EAAK82C,YAAYtD,IAAMxzC,EAAK+3C,eAC7B9sC,EAAA3P,KAAA,EAAA2P,EAAA1P,KAAA,EAGOyE,EAAKg4C,YAAY,CACrBxE,IAAKxzC,EAAKi4C,SACVd,OAAQn3C,EAAKk4C,YACbtB,OAAQ52C,EAAK62C,OACb,WAEE72C,EAAK02C,gBAAiB,CAAFzrC,EAAA1P,KAAA,eAAA0P,EAAA1P,KAAA,EAChByE,EAAK82C,YAAY/lD,SAAQ,OAGjCiP,EAAK5J,YAAY4J,EAAK62C,MAAM5rC,EAAA1P,KAAA,oBAAA0P,EAAA3P,KAAA,GAAA2P,EAAAC,GAAAD,EAAA,UAExBjL,EAAK02C,gBAAiB,CAAFzrC,EAAA1P,KAAA,gBAAA0P,EAAA1P,KAAA,GACA,QADAu8C,EAChB93C,EAAK82C,mBAAW,IAAAgB,OAAA,EAAhBA,EAAkB/mD,SAAQ,QAElCiP,EAAK5J,YAAY4J,EAAK62C,MAAM,yBAAA5rC,EAAAI,OAAA,GAAAL,EAAA,oBAE7Bqc,EAAAN,OAAA,oBAAAM,EAAA/rB,KAAA,GAMCnM,KAAKunD,gBAAiB,CAAFrvB,EAAA9rB,KAAA,eAAA8rB,EAAA9rB,KAAA,EAChBpM,KAAK6oD,YAAY,CACrBxE,IAAKrkD,KAAK4oD,cACVnB,OAAQznD,KAAK2nD,cACb,OAEF3nD,KAAKiH,YAAYjH,KAAK2nD,aAAa,cAAAzvB,EAAA9rB,KAAA,GAG/BpM,KAAK6oD,YAAY,CACrBxE,IAAKrkD,KAAK8oD,SACVd,OAAQhoD,KAAK+oD,YACbtB,OAAQznD,KAAK0nD,OACb,YAEE1nD,KAAKunD,gBAAiB,CAAFrvB,EAAA9rB,KAAA,gBAAA8rB,EAAA9rB,KAAA,GACA,QADAq8C,EAChBzoD,KAAK2nD,mBAAW,IAAAc,OAAA,EAAhBA,EAAkB7mD,SAAQ,QAGlC5B,KAAKiH,YAAYjH,KAAK0nD,MAAMxvB,EAAA9rB,KAAA,oBAAA8rB,EAAA/rB,KAAA,GAAA+rB,EAAAnc,GAAAmc,EAAA,UAExBl4B,KAAKunD,gBAAiB,CAAFrvB,EAAA9rB,KAAA,gBAAA8rB,EAAA9rB,KAAA,GACA,QADAs8C,EAChB1oD,KAAK2nD,mBAAW,IAAAe,OAAA,EAAhBA,EAAkB9mD,SAAQ,QAElC5B,KAAKiH,YAAYjH,KAAK0nD,MAAM,yBAAAxvB,EAAAhc,OAAA,GAAA+b,EAAA,mBAE/B,yBAAAuwB,EAAAp/C,MAAA,KAAAtI,UAAA,EAhEA,IAgEA,CAAApD,IAAA,OAAA6B,MAED,WACMS,KAAKkoD,WACPloD,KAAKgpD,mBAELhpD,KAAKipD,aAET,KAAClD,CAAA,CAtYiB,CAASV,IEdhB6D,GAAG,SAAAC,IAAA5jD,EAAAA,EAAAA,GAAA2jD,EAAAC,GAAA,IAAA3jD,GAAAC,EAAAA,EAAAA,GAAAyjD,GAAA,SAAAA,IAAA,OAAAppD,EAAAA,EAAAA,GAAA,KAAAopD,GAAA1jD,EAAA4D,MAAA,KAAAtI,UAAA,CAiBb,OAjBaJ,EAAAA,EAAAA,GAAAwoD,EAAA,EAAAxrD,IAAA,eAAA6B,MACd,WAAe,IAAA8B,EAAA,KACb4c,GAAAgtB,EAAAA,EAAAA,GAAAie,EAAAprD,WAAA,qBAAAE,KAAA,MAEAgC,KAAKopD,MAAM,OAAO,WAChB/nD,EAAKI,MACP,IAEAzB,KAAKopD,MAAM,QAAQ,WACjB/nD,EAAKI,MACP,IAEAzB,KAAKopD,MAAM,QAAQ,SAACxoD,GACbS,EAAKmlD,GAAG,sBAAyBnlD,EAAKmlD,GAAG,qBAC5CnlD,EAAK6lD,IAAImC,QAAUzoD,EAAM,OAAS,QAEtC,GACF,KAACsoD,CAAA,CAjBa,CAASnD,ICEZuD,GAAS,SAAAC,IAAAhkD,EAAAA,EAAAA,GAAA+jD,EAAAC,GAAA,IAAA/jD,GAAAC,EAAAA,EAAAA,GAAA6jD,GAEpB,SAAAA,IAAc,IAAAjoD,EAUV,OAVUvB,EAAAA,EAAAA,GAAA,KAAAwpD,GACZjoD,EAAAmE,EAAAxH,KAAA,OAAQ4hB,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,mBAFQ,GAIhBA,EAAK2F,OAAK1G,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACLe,EAAK2F,OAAK,IACbwiD,cAAc,EACdC,QAAS,WACPpoD,EAAKqoD,UACP,EACA,cAAe,KACfroD,CACJ,CAkBC,OAlBAX,EAAAA,EAAAA,GAAA4oD,EAAA,EAAA5rD,IAAA,eAAA6B,MAED,WAAe,IAAAiC,EAAA,KACbyc,GAAAgtB,EAAAA,EAAAA,GAAAqe,EAAAxrD,WAAA,qBAAAE,KAAA,MAEAgC,KAAK2pD,eACH,YAEA,SAAC/oD,GACoB,qBAARA,IAGXY,EAAKoM,EAAE47C,aAAehkB,GAAU5kC,GAClC,IAEFZ,KAAK8gC,eAAe,YAAY,SAAClgC,GAC/BY,EAAKoM,EAAE,eAAiBhN,EAAM,eAAiB,aACjD,GACF,KAAC0oD,CAAA,CA/BmB,CAAS3O,IAkC/B2O,GAAUtjD,SAAqB,oTAW/BsjD,GAAUvF,eAAe,CAEvB6F,SAAU,OCjDL,IAAMC,GAAS,SAAAjP,IAAAr1C,EAAAA,EAAAA,GAAAskD,EAAAjP,GAAA,IAAAp1C,GAAAC,EAAAA,EAAAA,GAAAokD,GAAA,SAAAA,IAAA,IAAAxoD,GAAAvB,EAAAA,EAAAA,GAAA,KAAA+pD,GAAA,QAAAnpC,EAAA5f,UAAA1C,OAAAuiB,EAAA,IAAA9Y,MAAA6Y,GAAAzD,EAAA,EAAAA,EAAAyD,EAAAzD,IAAA0D,EAAA1D,GAAAnc,UAAAmc,GAGO,OAHP5b,EAAAmE,EAAAxH,KAAAoL,MAAA5D,EAAA,OAAAvD,OAAA0e,KAAAf,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,kBACH,IAAIue,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,eAEN,cAAYA,CAAA,CAK1B,OANDX,EAAAA,EAAAA,GAAAmpD,EAAA,EAAAnsD,IAAA,eAAA6B,MAGA,WACE0e,GAAAgtB,EAAAA,EAAAA,GAAA4e,EAAA/rD,WAAA,qBAAAE,KAAA,MACAgC,KAAK8pD,iBAAiB9pD,KAAK6pC,aAC7B,KAACggB,CAAA,CARmB,CAAS7c,IC4GxB,SAAS+c,GAAaC,GAI3B,IAFA,IAAMC,EAAY,GACZC,EAAW,GAAG5/C,EAAA,SACX3M,GACP,IAhE2BwsD,EAAaC,EAgEpC3jD,EAAOujD,EAAaxjD,MAAM7I,GAC9B,IAAK8I,EACH,iBAEF,GAAkB,SAAdA,EAAK4jD,KAAiB,CACxB,IAAMC,EAAW7jD,EAAKoO,KACtB,GAAqC,oBAA1BpO,EAAK8jD,kBAAqF,oBAAtB9jD,EAAM+jD,WAA4B,CAC/G,IAAIziC,EAC+B,oBAA1BthB,EAAK8jD,iBACR9jD,EAAK8jD,mBACe9jD,EAAM+jD,aAQhC,OAPAN,EAASniD,MA3EcoiD,EA4ECpiC,EA5EYqiC,EA4ELE,EA3E9B,IAAI3tC,SAAQ,SAACC,GAClB,IAAI6tC,EAAU,EAERR,EAAY,GAGZS,EAAY,SAAC3iC,GACZA,IACH/lB,QAAQrB,KAAK,4CAA6C,CAAEgqD,MAAO,kBACnE/tC,EAAQ,OAENmL,EAAM2B,QACR+gC,IACoC1iC,EAAOsC,MAAK,SAACA,GAC/CogC,IAEA,IAAMG,EAAa,IAAIjhC,KAAK,CAACU,GAAOA,EAAKzrB,KAAM,CAAEiW,KAAMwV,EAAKxV,MAAQu1C,IACpEH,EAAUliD,KAAK,CACb8M,KAAM,OACNwV,KAAMugC,EACN7Q,SAAUhyB,EAAMgyB,WAGF,IAAZ0Q,GACF7tC,EAAQqtC,EAEZ,KACSliC,EAAM8iC,aACfC,EAA2D/iC,EAAOgjC,eAEtE,EAGID,EAAoB,SAACE,GACvBP,IAEAO,EAAOC,aAAY,SAACnjC,GAClB2iC,IAAU,IACevjD,EADfG,GAAAC,EAAAA,EAAAA,GACQwgB,GAAO,IAAzB,IAAAzgB,EAAAE,MAAAL,EAAAG,EAAAG,KAAAC,MAA2B,KAAlBsgB,EAAK7gB,EAAA3H,MACZmrD,EAAU3iC,EACZ,CAAC,OAAArgB,IAAAL,EAAAM,EAAAD,GAAA,SAAAL,EAAAO,GAAA,CAEe,IAAZ6iD,GACF7tC,EAAQqtC,EAEZ,GACF,EAEAS,EAAUP,EACZ,KA0B+CvkC,MAAK,SAACpf,GACvCA,GACFyjD,EAAUliD,KAAIqB,MAAd6gD,GAASvrD,EAAAA,EAAAA,GAAS8H,GAEtB,KAEF,UACF,CAEA,IAAM6jB,EAAO5jB,EAAKykD,YAClB7gC,GACE6/B,EAASniD,KAxHjB,SAA0BsiB,GACxB,OAAO,IAAI1N,SAAQ,SAACC,GACe,oBAAtBxX,OAAO+lD,YAChBvuC,GAAQ,GAGV,IACE,IAAIouC,EAAS,IAAIG,WACjBH,EAAO1vC,QAAU,WACfsB,GAAQ,EACV,EAEA,IAAIwuC,EAAS,SAACzjD,GACG,YAAXA,EAAEkN,MACJm2C,EAAO5iC,QAETxL,GAAQ,EACV,EACAouC,EAAOK,UAAYD,EACnBJ,EAAO9hC,WAAakiC,EAEpBJ,EAAOM,cAAcjhC,EAGvB,CAFE,MAAO3iB,IACPkV,GAAQ,EACV,CACF,GACF,CA+FU2uC,CAAiBlhC,GAAMzE,MAAK,SAACilC,GACvBA,GAGFZ,EAAUliD,KAAK,CACb8M,KAAM,OACNwV,KAAAA,GAGN,IAEN,KAAyB,WAAd5jB,EAAK4jD,MAAqB5jD,EAAKoO,KAAKvI,MAAM,mBACnD49C,EAASniD,KACP,IAAI4U,SAAQ,SAACC,GACXnW,EAAK+kD,aAAY,SAACjsD,GAChB0qD,EAAUliD,KAAK,CACb8M,KAAM,MACN6B,IAAKnX,IAEPqd,OAAQ7b,EACV,GACF,IAEH,EAhDMpD,EAAI,EAAGA,EAAIqsD,EAAaxjD,MAAMpI,OAAQT,IAAK2M,EAA3C3M,GAmDT,OAAOgf,QAAQY,IAAI2sC,GAAUtkC,MAAK,kBAAMqkC,CAAS,GACnD,CDzJAJ,GAAU7jD,SAAqB,6CEVxB,IAAMylD,GAAgB,CAC3BC,OAAQ,EACRC,SAAU,EACVC,KAAM,EACNC,KAAM,GAGJC,GAAe,CAAC,SAEhBC,GAAmB,IAAIvpD,IAqBpB,SAASwpD,GAAYh2C,GAC1B,IAIoB3G,EAJhB48C,EAAe,EAEfC,EAAO3jD,SAAS2jD,KAChBC,EAAiB,IAAIzqD,IAErB42C,EAAQmT,GAAcE,SAEtBS,EAAW,SAACC,GACVr2C,EAAKs2C,gBAAkBD,IAAaZ,GAAcE,WAGlDrT,IAAU+T,GACZF,EAAe7qD,SAAQ,SAAC+N,GAAE,OAAKA,EAAGg9C,EAAS,IAE7C/T,EAAQ+T,EACV,EAEIE,EAAa,WAAH,OAASN,EAAe,CAAC,EAbnB58C,EAeP,SAACg9C,GAAQ,OAAKr2C,EAAKw2C,SAASH,EAAS,EAfvBF,EAAexqD,IAAI0N,GAiB9C,IAAIo9C,EAAe,WACjBR,EAAe,EACfG,EAASX,GAAcE,SACzB,EACIe,EAAc,WAChBT,GAAgB,EACZ3T,IAAUmT,GAAcE,UAC1BS,EAASX,GAAcC,OAE3B,EACIiB,EAAc,WAChBV,GAAgB,EACXM,KACHH,EAASX,GAAcE,SAE3B,EACIiB,EAAS,SAACjlD,GACZA,EAAEklD,iBACFZ,EAAe,EACfG,EAASX,GAAcE,SACzB,EAEImB,EAAa,SAACnlD,GAChB,IAAIqO,EAAKs2C,eAAT,CAIKC,MACHN,GAAgB,GAIlB,IAAIc,EAAY,CAACplD,EAAEsoC,EAAGtoC,EAAEuoC,GACpB8c,EAAah3C,EAAKo0B,QAAQ6c,wBAC1BgG,EAAWnpD,KAAKsoC,MAtExB,SAAkBziC,EAAGujD,GACnB,IAAIC,EAAKrpD,KAAK0tC,IAAI1tC,KAAKw1B,IAAI3vB,EAAE,GAAIujD,EAAEjd,EAAIid,EAAE/c,OAAQ+c,EAAEjd,GAC/Cmd,EAAKtpD,KAAK0tC,IAAI1tC,KAAKw1B,IAAI3vB,EAAE,GAAIujD,EAAEhd,EAAIgd,EAAE9c,QAAS8c,EAAEhd,GAEpD,OAAOpsC,KAAKupD,MAAM1jD,EAAE,GAAKwjD,IAAOxjD,EAAE,GAAKwjD,IAAOxjD,EAAE,GAAKyjD,IAAOzjD,EAAE,GAAKyjD,GACrE,CAiE8BE,CAASP,EAAWC,IAC1CO,EAASN,EA/EC,IAgFVO,EAAS7lD,EAAE8lD,eAAexsD,SAAS+U,EAAKo0B,SAE5C2hB,GAAiBxpD,IAAIyT,EAAKo0B,QAAS6iB,GACnC,IAAIS,EAAY5pD,KAAKw1B,IAAGlwB,MAARtF,MAAIpF,EAAAA,EAAAA,GAAQqtD,GAAiBljD,aAAcokD,EAEvDO,GAAUE,GACZ/lD,EAAEklD,iBACFT,EAASX,GAAcI,OAEvBO,EADSmB,GAAUG,EACVjC,GAAcG,KAEdH,GAAcC,OAtBzB,CAwBF,EAEIiC,EAAa,eAAAjyC,GAAAC,EAAAA,EAAAA,GAAAC,EAAAA,MAAG,SAAAC,EAAOlU,GAAC,IAAAnB,EAAA,OAAAoV,EAAAA,MAAA,SAAAE,GAAA,cAAAA,EAAA3P,KAAA2P,EAAA1P,MAAA,WACtB4J,EAAKs2C,eAAgB,CAAFxwC,EAAA1P,KAAA,eAAA0P,EAAA8b,OAAA,iBAGJ,OAAnBjwB,EAAEklD,iBAAiB/wC,EAAA1P,KAAA,EACD29C,GAAapiD,EAAEqiD,cAAa,OAA1CxjD,EAAKsV,EAAAG,KACTjG,EAAK43C,QAAQpnD,GACb4lD,EAASX,GAAcE,UAAU,wBAAA7vC,EAAAI,OAAA,GAAAL,EAAA,KAClC,gBARgBM,GAAA,OAAAT,EAAAtS,MAAA,KAAAtI,UAAA,KAmBjB,OATAorD,EAAKhzC,iBAAiB,OAAQ0zC,GAC9BV,EAAKhzC,iBAAiB,YAAayzC,GACnCT,EAAKhzC,iBAAiB,YAAawzC,GACnCR,EAAKhzC,iBAAiB,WAAY4zC,GAClC92C,EAAKo0B,QAAQlxB,iBAAiB,OAAQy0C,GACtC7B,GAAaxqD,SAAQ,SAACusD,GACpBzoD,OAAO8T,iBAAiB20C,EAAWpB,EACrC,IAEO,WACLV,GAAiBlqD,OAAOmU,EAAKo0B,SAC7B8hB,EAAK3yC,oBAAoB,OAAQqzC,GACjCV,EAAK3yC,oBAAoB,YAAaozC,GACtCT,EAAK3yC,oBAAoB,YAAamzC,GACtCR,EAAK3yC,oBAAoB,WAAYuzC,GACrC92C,EAAKo0B,QAAQ7wB,oBAAoB,OAAQo0C,GACzC7B,GAAaxqD,SAAQ,SAACusD,GACpBzoD,OAAOmU,oBAAoBs0C,EAAWpB,EACxC,GACF,CACF,CC9HA,IAAMqB,GAAkB,eAClBC,GAAe,GAAH9rD,OAAM6rD,GAAe,aAE1BE,GAAQ,SAAAzE,IAAAhkD,EAAAA,EAAAA,GAAAyoD,EAAAzE,GAAA,IAAA/jD,GAAAC,EAAAA,EAAAA,GAAAuoD,GACnB,SAAAA,IAAc,IAAA3sD,EAaV,OAbUvB,EAAAA,EAAAA,GAAA,KAAAkuD,IACZ3sD,EAAAmE,EAAAxH,KAAA,OAEKgJ,OAAK1G,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACLe,EAAK2F,OAAK,IAAA4Y,EAAAA,EAAAA,GAAA,CACb04B,MAAOmT,GAAcE,SACrBsC,UAAU,EACVC,aAAa,EACbC,cAAc,EACdC,WAAW,EACXC,WAAW,EACXhrC,KAAM,IACL0qC,GAAe,OAChB1sD,CACJ,CA2MC,OA3MAX,EAAAA,EAAAA,GAAAstD,EAAA,EAAAtwD,IAAA,WAAA6B,MAED,WACE,IAAKS,KAAK4N,EAAEwgD,UACV,OAAO,EAET,IAAME,EAAStuD,KAAKinD,wBACdsH,EAAUD,EAAOne,MAAQ,GAAKme,EAAOle,OAAS,EAC9Coe,EACJF,EAAOG,KAAO,GACdH,EAAOI,MAAQ,GACfJ,EAAOK,SAAWvpD,OAAOoc,aAAejZ,SAAS+Y,gBAAgBstC,eACjEN,EAAOO,QAAUzpD,OAAO0pD,YAAcvmD,SAAS+Y,gBAAgBytC,aAE3DppD,EAAQP,OAAOmP,iBAAiBvU,MAChCgvD,EAA+B,WAArBrpD,EAAMspD,YAA6C,SAAlBtpD,EAAMC,QAEvD,OAAO2oD,GAAWS,GAAWR,CAC/B,GAAC,CAAA9wD,IAAA,eAAA6B,MAED,WAAe,IAAAiC,EAAA,KACbyc,GAAAgtB,EAAAA,EAAAA,GAAA+iB,EAAAlwD,WAAA,qBAAAE,KAAA,MAEAgC,KAAKypC,SAAS,QAAQ,kBAAMjoC,EAAKghC,KAAK,kBAAkB,IAEnDxiC,KAAK4N,EAAEmgD,MACV/tD,KAAK4N,EAAEmgD,IAAgB,IAAIrsD,KAE7B1B,KAAK4N,EAAEmgD,IAAcpsD,IAAI3B,MAEzBA,KAAK2pD,eACH,YAC8B,SAACpqD,GAC7BiC,EAAKkF,KAAK,CAAE0nD,WAAY5oB,GAAUjmC,IACpC,IAEFS,KAAK2pD,eACH,aAC8B,SAACpqD,GAC7BiC,EAAKkF,KAAK,CAAEwnD,YAAa1oB,GAAUjmC,IACrC,IAEFS,KAAK2pD,eACH,aAC8B,SAACpqD,GAC7BiC,EAAKkF,KAAK,CAAEunD,SAAUzoB,GAAUjmC,IAClC,IAEFS,KAAK2pD,eACH,cAC8B,SAACpqD,GAC7BiC,EAAKkF,KAAK,CAAEynD,aAAc3oB,GAAUjmC,IACtC,IAGFS,KAAK2pD,eACH,QAC8B,SAACpqD,GACR,kBAAVA,EACTiC,EAAKioC,SAAS,QAAQ,kBAAMjoC,EAAKghC,KAAKjjC,IAAUA,CAAK,IAErDiC,EAAKioC,SAAS,QAAQ,kBAAMjoC,EAAKghC,KAAK,kBAAkB,GAE5D,IAIFxiC,KAAKkvD,iBAAmBlD,GAAY,CAClC5hB,QAASpqC,KACTssD,aAAc,kBAAM9qD,EAAK2tD,eAAe,EAExC3C,SAAU,SAAClU,GACT92C,EAAKoM,EAAE0qC,MAAQA,CACjB,EAEAsV,QAAS,SAACpnD,GACHA,EAAMpI,SAIXoI,EAAMlF,SAAQ,SAAqDmF,GAC/C,QAAdA,EAAKoO,KACPrT,EAAK4tD,eAAe3oD,EAAKiQ,IAAK,CAAElZ,OAAQ81C,GAAaE,YAC9B,SAAd/sC,EAAKoO,MACdrT,EAAKy8C,kBAAkBx3C,EAAK4jB,KAAM,CAAE7sB,OAAQ81C,GAAaE,UAAWuG,SAAUtzC,EAAKszC,UAEvF,IACIv4C,EAAK42C,iBAAiBt2C,OACxBN,EAAKkF,KAAK,CACR,mBAAoBsmC,GAAc6B,WAAWI,cAE/CztC,EAAKotC,cAAc,gBAAgB,IAEvC,IAGF,IAAIygB,EAAmBrvD,KAAKsJ,IAAI,mBAC5B+lD,IACFrvD,KAAKsvD,+BAAiCtD,GAAY,CAChD5hB,QAASilB,EAET7C,SAAU,SAAClU,GAAU,IAAAiX,EACbC,EACiC,QADxBD,EAAG1xD,OAAOiqB,QAAQ2jC,IAC9Bnd,MAAK,SAAA5yB,GAAS,OAATuM,EAAAA,GAAAA,GAAAvM,EAAA,GAAS,KAAgB48B,CAAK,WAAC,IAAAiX,OAAA,EADrBA,EACwB,GACvCxwD,cACHywD,GAAaH,EAAiB5kD,aAAa,aAAc+kD,EAC3D,EACA5B,QAAS,WAAO,EAChBtB,aAAc,kBAAM9qD,EAAK2tD,eAAe,KAI5CnvD,KAAKmG,IAAI,SAAS,SAACmyC,GAAU,IAAAmX,EACrBD,EACiC,QADxBC,EAAG5xD,OAAOiqB,QAAQ2jC,IAC9Bnd,MAAK,SAAApqB,GAAS,OAAT+D,EAAAA,GAAAA,GAAA/D,EAAA,GAAS,KAAgBo0B,CAAK,WAAC,IAAAmX,OAAA,EADrBA,EACwB,GACvC1wD,cACCywD,GACFhuD,EAAKiJ,aAAa,aAAc+kD,EAEpC,IAEAxvD,KAAK8gC,eAAe,cAAc,SAACvhC,GACjC,IAAM2+C,EAAOxZ,GAAcnlC,GAE3BiC,EAAKoM,EAAEwgD,UAAYlQ,EAAKj9C,SAAS05C,GAAcuH,YAAY3O,OAE3D/xC,EAAKoM,EAAEygD,UAAY7sD,EAAKoM,EAAEwgD,YAAc5sD,EAAKwN,cAAc,sBAC7D,IAEAhP,KAAKmG,IAAI,aAAa,SAAC5G,GACrBiC,EAAKkuD,gBAAgB,UAAWnwD,EAClC,IAEAS,KAAKmG,IAAI,eAAe,SAAC5G,GACvBiC,EAAKkuD,gBAAgB,YAAanwD,EACpC,IAEIS,KAAK4N,EAAEsgD,cAETluD,KAAK2vD,eAAiB,WACpBnuD,EAAKouD,kBACP,EACA5vD,KAAKkZ,iBAAiB,QAASlZ,KAAK2vD,gBAExC,GAEA,CAAAjyD,IAAA,gBAAA6B,MAMA,WAAgB,IAAAmG,EAAA,KACd,OAAK1F,KAAK4N,EAAEwgD,aAGPpuD,KAAK6vD,uBAGL7vD,KAAK4N,EAAEugD,eAGSzvD,EAAAA,EAAAA,GAAIsB,KAAK4N,EAAEmgD,KAAenpC,QAAO,SAAC5f,GAAE,OAAKA,IAAOU,CAAI,IACtCkf,QAAO,SAA4B5f,GACpE,OAAOA,EAAG8qD,UACZ,IACqB1xD,OAAS,EAChC,GAEA,CAAAV,IAAA,oBAAA6B,MACA,WACE,IAAIwwD,EAAa/vD,KAAKmhC,IAAI4F,SACtBE,EAAcjnC,KAAKmhC,IAAI8F,YACvB+oB,EAAoBhwD,KAAKo4C,iBAAiBt2C,KAE9C,QAAIiuD,GAAc9oB,GAAe+oB,GAAqB/oB,OAIjD8oB,GAAcC,EAAoB,EAKzC,GAAC,CAAAtyD,IAAA,kBAAA6B,MAED,WAAkB,IAAA0wD,EAAAC,EAChBjyC,GAAAgtB,EAAAA,EAAAA,GAAA+iB,EAAAlwD,WAAA,wBAAAE,KAAA,MAGA,IAAMmyD,EAAWnwD,KAAK4N,EAAEmgD,IACpBoC,IACFA,EAAStuD,OAAO7B,MACM,IAAlBmwD,EAASruD,MACXlC,EAAKisC,UAAUiiB,KAIE,QAArBmC,EAAAjwD,KAAKkvD,wBAAgB,IAAAe,GAArBA,EAAAjyD,KAAAgC,MACmC,QAAnCkwD,EAAAlwD,KAAKsvD,sCAA8B,IAAAY,GAAnCA,EAAAlyD,KAAAgC,MACIA,KAAK2vD,gBACP3vD,KAAKuZ,oBAAoB,QAASvZ,KAAK2vD,eAE3C,KAAC3B,CAAA,CA1NkB,CAASrT,IA6N9BqT,GAAShoD,SAAqB,mXAa9BgoD,GAASjK,eAAe,CAEtB,YAAa,KAEbqM,UAAW,KAEX/sC,KAAM,KAENgtC,WAAY,KAEZC,SAAU,OC7PZ,IAaaC,GAAS,SAAAhH,IAAAhkD,EAAAA,EAAAA,GAAAgrD,EAAAhH,GAAA,IAAA/jD,GAAAC,EAAAA,EAAAA,GAAA8qD,GAUpB,SAAAA,IAAc,IAAAlvD,EAOV,OAPUvB,EAAAA,EAAAA,GAAA,KAAAywD,GACZlvD,EAAAmE,EAAAxH,KAAA,OAAQ4hB,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,mBAVQ,IAAIue,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,YAEfN,IAAS6e,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,mBAKG,CAAC,GAKlBA,EAAK2F,OAAK1G,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACLe,EAAK2F,OAAK,IACbwpD,SAAU,UACV,WAAY,KACZnvD,CACJ,CAkGC,OAlGAX,EAAAA,EAAAA,GAAA6vD,EAAA,EAAA7yD,IAAA,YAAA6B,MAED,WAAY,IAAAiC,EAAA,KACVxB,KAAKywD,aAAa,CAChB57C,KAAM8lC,GAAcuH,YAAY3O,MAChCiL,SAAU,WAER,OADAh9C,EAAKouD,oBACE,CACT,IAEF5vD,KAAKywD,aAAa,CAChB57C,KAAM8lC,GAAcuH,YAAY3rC,IAChCo3B,SAAUX,GAAc6B,WAAWt4B,IACnCm6C,QAAS,aAEX1wD,KAAKywD,aAAa,CAChB57C,KAAM8lC,GAAcuH,YAAYnT,OAChCpB,SAAUX,GAAc6B,WAAWE,OACnCyP,SAAU,WACR,IAAMmS,EAAkB,YAAapoD,SAAS+G,cAAc,SAI5D,OAHIqhD,GACFnvD,EAAKouD,iBAAiB,CAAE9R,eAAe,KAEjC6S,CACV,IAEF3wD,KAAKywD,aAAa,CAChB57C,KAAM,OACN84B,SAAUX,GAAc6B,WAAWG,KACnC4hB,KAAM,cAGR,IAAK,IAAL/+C,EAAA,EAAAC,EAA+BjU,OAAOgL,OAAO8xC,GAAc2G,YAAWzvC,EAAAC,EAAA1T,OAAAyT,IAAE,CAAnE,IAAIg/C,EAAkB/+C,EAAAD,GACzB7R,KAAKywD,aAAa,CAChB57C,KAAMg8C,EACNljB,SAAUX,GAAc6B,WAAWO,SACnC0hB,eAAgB,CACdD,mBAAoBA,IAG1B,CACF,GAAC,CAAAnzD,IAAA,eAAA6B,MAED,WAAe,IAAAmG,EAAA,KACbuY,GAAAgtB,EAAAA,EAAAA,GAAAslB,EAAAzyD,WAAA,qBAAAE,KAAA,MACAgC,KAAK+wD,YAEL/wD,KAAKyK,aAAa,OAAQ,UAC1BzK,KAAK2pD,eACH,QAEA,SAAC/oD,GACMA,GAGL8E,EAAKsrD,UAAUpwD,EACjB,GAEJ,GAEA,CAAAlD,IAAA,eAAA6B,MACA,SAAa0xD,GACXjxD,KAAKkxD,iBAAiBD,EAAWp8C,MAAQo8C,CAC3C,GAEA,CAAAvzD,IAAA,UAAA6B,MACA,SAAQsV,GACN,OAAO7U,KAAKkxD,iBAAiBr8C,EAC/B,GAAC,CAAAnX,IAAA,WAAA6B,MAED,WACE,GAAKS,KAAK6U,KAAV,CAGA,IAAMs8C,EAAanxD,KAAKkxD,iBAAiBlxD,KAAK6U,MACtC84B,EAA4CwjB,EAA5CxjB,SAAU6Q,EAAkC2S,EAAlC3S,SAAQ4S,EAA0BD,EAAxBL,eAAAA,OAAc,IAAAM,EAAG,CAAC,EAACA,GAC1B5S,EAAWA,MAAe7Q,IAE7C3tC,KAAK0G,KAAK,CACR,yBAA0BoqD,EAC1B,mBAAoBnjB,GAPxB,CASF,GAEA,CAAAjwC,IAAA,YAAA6B,MACA,SAAUsV,GAAM,IAAAxH,EAAA,KACR8jD,EAAanxD,KAAKkxD,iBAAiBr8C,GACzC,GAAKs8C,EAAL,CAIA,IAAAE,EAAwCF,EAAhCT,QAAAA,OAAO,IAAAW,EAAGx8C,EAAIw8C,EAAAC,EAAkBH,EAAhBP,KAAAA,OAAI,IAAAU,EAAGz8C,EAAIy8C,EAEnCtxD,KAAK4N,EAAE,YAAc,GAAH3L,OA5HF,aA4HmBA,OAAGyuD,GACtC1wD,KAAK4N,EAAE4iD,SAAWI,EAClB5wD,KAAKuxD,QAAU,WACblkD,EAAKmxC,UACP,CAPA,MAFEx8C,QAAQrB,KAAK,4BAA8BkU,EAU/C,KAAC07C,CAAA,CApHmB,CAAS5V,IAsH/B4V,GAAUvqD,SAAqB,6FAI/BuqD,GAAUxM,eAAe,CAEvBlvC,KAAM,OC1ID,IAAM28C,GAAU,SAAAvkB,IAAA1nC,EAAAA,EAAAA,GAAAisD,EAAAvkB,GAAA,IAAAznC,GAAAC,EAAAA,EAAAA,GAAA+rD,GAAA,SAAAA,IAAA,OAAA1xD,EAAAA,EAAAA,GAAA,KAAA0xD,GAAAhsD,EAAA4D,MAAA,KAAAtI,UAAA,CAepB,OAfoBJ,EAAAA,EAAAA,GAAA8wD,EAAA,EAAA9zD,IAAA,eAAA6B,MACrB,WAAe,IAAA8B,EAAA,KACb4c,GAAAgtB,EAAAA,EAAAA,GAAAumB,EAAA1zD,WAAA,qBAAAE,KAAA,MACAgC,KAAK8gC,eAAe,cAAc,SAAuBlgC,GACvD,IAAIs9C,EAAOxZ,GAAc9jC,GACrB6wD,EAAO,GACXvT,EAAK58C,SAAQ,SAACowD,GACZD,GAAkB,wBAAVxvD,OAAmCyvD,EAAO,qBACpD,IACIrwD,EAAK8/B,IAAIkH,eACXhnC,EAAK0E,UAAY0rD,EAEjBpwD,EAAKswD,UAAYF,CAErB,GACF,KAACD,CAAA,CAfoB,CAAStoB,ICF1B0oB,GAAiB,WACnB,IAAMC,EAAQ,GAwDd,MAAO,CACHA,MAAAA,EACAC,sBAzD0B,SAACn6B,GAAI,OAAK,IAAIhb,SAAQ,SAACC,EAASC,GAC1D,IAAIk1C,EAAM,EACJC,EAAa,SAACr6B,EAAM7iB,GACtB,IAAMk2C,EAAS,IAAIG,WACnBH,EAAO9xC,iBAAiB,QAAQ,WAC5BpE,EAAG,IAAIm9C,SAASjH,EAAOrgD,QAC3B,IACAqgD,EAAO9xC,iBAAiB,SAAS,SAACvR,GAC9BkV,EAAO,iBAAD5a,OAAkB0F,GAC5B,IACAqjD,EAAOkH,kBAAkBv6B,EAC7B,EACMw6B,EAAW,WAAH,OAASH,EAAWr6B,EAAKvwB,MAAM2qD,EAAKA,EAAM,MAAM,SAACK,GAC3D,IAAIz0D,EAAG00D,EAAG/oD,EACV,IAAK3L,EAAI00D,EAAI,EAAG/oD,EAAM8oD,EAAKE,WAAYhpD,GAAO,EAAI+oD,EAAI/oD,EAAM+oD,EAAI/oD,EAAK3L,EAAI2L,GAAO,IAAM+oD,IAAMA,EACxF,GAAyB,MAArBD,EAAKG,SAAS50D,GAAa,CAC3Bo0D,GAAOp0D,EACP,KACJ,CAEJ60D,GACJ,GAAE,EACIA,EAAgB,WAClB,IAAMC,EAAWV,EACjB,OAAOC,EAAWr6B,EAAKvwB,MAAM2qD,EAAMA,GAAO,IAAK,SAACK,GAC5C,GAAwB,IAApBA,EAAKE,YAAyC,MAArBF,EAAKG,SAAS,GAA3C,CAIA,IAAMG,EAASN,EAAKG,SAAS,GAC7B,GAAe,MAAXG,EAAJ,CAIA,IAAMt0D,EAASg0D,EAAKO,UAAU,GAAK,EACnC,OAAOX,EAAWr6B,EAAKvwB,MAAM2qD,EAAMA,GAAO3zD,IAAU,SAACg0D,GAC7CA,EAAKE,aAAel0D,GAIxByzD,EAAM9pD,KAAK,CAAE0qD,SAAAA,EAAUr0D,OAAAA,EAAQs0D,OAAAA,EAAQN,KAAAA,IACvCD,KAJIt1C,EAAO,YAKf,GATA,CAFID,GAAQ,EAHZ,MAFIC,EAAO,YAiBf,GACJ,EACMsuC,YAAc8G,UAChBp1C,EAAO,eAEXm1C,EAAWr6B,EAAKvwB,MAAM,EAAG,IAAI,SAACgrD,GACA,QAAtBA,EAAKO,UAAU,IACf91C,EAAO,YAEXs1C,GACJ,GACJ,GAAE,EAKN,EAEMS,GAAa,eAAAl3C,GAAAC,EAAAA,EAAAA,GAAAC,EAAAA,MAAG,SAAAC,EAAO8b,GAAI,IAAAk7B,EAAAC,EAAAhB,EAAAD,EAAA,OAAAj2C,EAAAA,MAAA,SAAAE,GAAA,cAAAA,EAAA3P,KAAA2P,EAAA1P,MAAA,OAEO,OAD9BymD,EAAa,GAAEC,EACoBlB,KAAjCE,EAAqBgB,EAArBhB,sBAAuBD,EAAKiB,EAALjB,MAAK/1C,EAAA1P,KAAA,EAC9B0lD,EAAsBn6B,GAAK,OAW9B,OAVHk6B,EAAMvwD,SAAQ,SAAAuiB,GAAsB,IAAnB6uC,EAAM7uC,EAAN6uC,OAAQN,EAAIvuC,EAAJuuC,KACN,MAAXM,GAGsB,aAAtBN,EAAKW,UAAU,IACW,aAAtBX,EAAKW,UAAU,IACO,aAAtBX,EAAKW,UAAU,IACfF,EAAW9qD,KAAKqqD,EAG5B,IAAGt2C,EAAA8b,OAAA,SACIi7B,GAAU,wBAAA/2C,EAAAI,OAAA,GAAAL,EAAA,KACpB,gBAhBkBM,GAAA,OAAAT,EAAAtS,MAAA,KAAAtI,UAAA,KAkBbkyD,GAAgB,eAAA9uC,GAAAvI,EAAAA,EAAAA,GAAAC,EAAAA,MAAG,SAAAqc,EAAON,EAAM+6B,EAAQO,GAAM,IAAAC,EAAAC,EAAAC,EAAAtB,EAAAD,EAAAwB,EAAAhsD,EAAAH,EAAA6yB,EAAAu5B,EAAAvB,EAAAp0D,EAAA,OAAAie,EAAAA,MAAA,SAAAsc,GAAA,cAAAA,EAAA/rB,KAAA+rB,EAAA9rB,MAAA,OAIR,OAF9B8mD,EAAc,GACdC,EAAiB,GAAEC,EACgBxB,KAAjCE,EAAqBsB,EAArBtB,sBAAuBD,EAAKuB,EAALvB,MAAK35B,EAAA9rB,KAAA,EAC9B0lD,EAAsBn6B,GAAK,OACjCk6B,EAAMvwD,SAAQ,SAACy4B,GACX,GAAIA,EAAM24B,SAAWA,EAEjB,OADAQ,EAAYnrD,KAAKgyB,EAAM04B,UAChBU,EAAeprD,KAAKgyB,EAAM37B,OAEzC,IACMi1D,EAAY,CAAC17B,EAAKvwB,MAAM,EAAG,IAAGC,GAAAC,EAAAA,EAAAA,GAChB2rD,GAAM,IAA1B,IAAA5rD,EAAAE,MAAAL,EAAAG,EAAAG,KAAAC,MAAWsyB,EAAK7yB,EAAA3H,OACN+zD,EAAQ,IAAIrB,SAAS,IAAIsB,YAAY,KACrCC,UAAU,EAAG,MAASd,GAC5BY,EAAME,UAAU,EAAGz5B,EAAMu4B,WAAa,GACtCe,EAAUtrD,KAAKurD,EAAMG,QACrBJ,EAAUtrD,KAAKgyB,EAClB,OAAAryB,IAAAL,EAAAM,EAAAD,GAAA,SAAAL,EAAAO,GAAA,CAED,IADImqD,EAAM,EACDp0D,EAAI,EAAGA,EAAIu1D,EAAY90D,OAAQT,IAChCu1D,EAAYv1D,GAAKo0D,GACjBsB,EAAUtrD,KAAK4vB,EAAKvwB,MAAM2qD,EAAKmB,EAAYv1D,KAE/Co0D,EAAMmB,EAAYv1D,GAAKw1D,EAAex1D,GAAK,EAEJ,OAA3C01D,EAAUtrD,KAAK4vB,EAAKvwB,MAAM2qD,EAAKp6B,EAAK71B,OAAOo2B,EAAAN,OAAA,SACpC,IAAIvhB,KAAKg9C,EAAW,CACvBx+C,KAAM8iB,EAAK9iB,QACb,yBAAAqjB,EAAAhc,OAAA,GAAA+b,EAAA,KAET,gBAhCqBE,EAAAwB,EAAAC,GAAA,OAAA1V,EAAA9a,MAAA,KAAAtI,UAAA,KAmChB4yD,GAAoB,SAAC/7B,EAAMg8B,GAC7B,OAAOX,GAAiBr7B,EAFb,IAE2Bg8B,EAAYjqD,KAAI,SAACqwB,GAAK,OAAKA,EAAM05B,MAAM,IACjF,EAEMG,GAAe,eAAA3tC,GAAAtK,EAAAA,EAAAA,GAAAC,EAAAA,MAAG,SAAA6d,EAAO9B,GAAI,OAAA/b,EAAAA,MAAA,SAAA8d,GAAA,cAAAA,EAAAvtB,KAAAutB,EAAAttB,MAAA,cAAAstB,EAAAvtB,KAAA,EAAAutB,EAAAttB,KAAA,EAEdsnD,GAAkB/7B,EAAM,IAAG,cAAA+B,EAAA9B,OAAA,SAAA8B,EAAAzd,MAAA,aAAAyd,EAAAvtB,KAAA,EAAAutB,EAAA3d,GAAA2d,EAAA,SAGlC,IAAI5sB,MAAM,gCAAD7K,OAAAy3B,EAAA3d,KAAqC,wBAAA2d,EAAAxd,OAAA,GAAAud,EAAA,kBAE3D,gBAPoBI,GAAA,OAAA5T,EAAA7c,MAAA,KAAAtI,UAAA,KASf+yD,GAAe,SAACC,EAAQj/C,EAAM8vC,GAChC,OAAO,IAAIhoC,SAAQ,SAACC,EAASC,GAQzBi3C,EAAOC,QAPU,SAACp8B,GACTA,EAIL/a,EAAQ+a,GAHJ9a,EAAO,mCAIf,GACwBhI,EAAM8vC,GAC9BmP,EAAO3jB,MAAQ2jB,EAAO1jB,OAAS,CACnC,GACJ,EAEM4jB,GAAe,WACjB,IAAMF,EAASvrD,SAAS+G,cAAc,UAChC4B,EAAM4iD,EAAOG,WAAW,MAC9B,MAAO,CACHH,OAAAA,EACA5iD,IAAAA,EAER,EAEMgjD,GAAkB,SAAChN,GACrB,IAEAiN,EAAwBH,KAAhB9iD,EAAGijD,EAAHjjD,IAAK4iD,EAAMK,EAANL,OACbA,EAAO3jB,MAAQ2jB,EAAO1jB,OAHH,GAKnBl/B,EAAIkjD,UAAUlN,EAAK,EAAG,EALH,OAOnB,IAAMmN,EAAYnjD,EAAIojD,aAAa,EAAG,EAPnB,OAO8ClyD,KAEjE0xD,EAAO3jB,MAAQ2jB,EAAO1jB,OAAS,EAE/B,IAAK,IAAIzyC,EAAI,EAAGA,EAAI02D,EAAUj2D,OAAQT,GAAK,EACvC,GAAI02D,EAAU12D,GAAK,IACf,OAAO,EAIf,OAAO,CACX,EAEM42D,GAAO,eAAAjtC,GAAA3L,EAAAA,EAAAA,GAAAC,EAAAA,MAAG,SAAAmf,EAAOpD,GAAI,IAAA68B,EAAAC,EAAA3C,EAAAD,EAAA,OAAAj2C,EAAAA,MAAA,SAAAsf,GAAA,cAAAA,EAAA/uB,KAAA+uB,EAAA9uB,MAAA,OAEa,OADhCooD,EAAO,KAAIC,EAC0B7C,KAAjCE,EAAqB2C,EAArB3C,sBAAuBD,EAAK4C,EAAL5C,MAAK32B,EAAA9uB,KAAA,EAC9B0lD,EAAsBn6B,GAAK,OAa9B,OAZHk6B,EAAMvwD,SAAQ,SAAAgpB,GAAsB,IAAnBooC,EAAMpoC,EAANooC,OAAQN,EAAI9nC,EAAJ8nC,MAChBoC,GAAmB,MAAX9B,GACLN,EAAKE,YAAc,IAGG,aAAtBF,EAAKW,UAAU,IACW,IAAtBX,EAAKO,UAAU,KACf6B,EAAOpC,EAKvB,IAAGl3B,EAAAtD,OAAA,SACI48B,GAAI,wBAAAt5B,EAAAhf,OAAA,GAAA6e,EAAA,KACd,gBAlBYM,GAAA,OAAA/T,EAAAle,MAAA,KAAAtI,UAAA,KA0BT4zD,QAAY3zD,EAmDV4zD,GAAqB,SAACH,EAAMI,IAjCN,SAACJ,EAAMK,GAC/B,IAAIxC,EAAGyC,EAAQvpD,EAAQjC,EACvB,GAAKkrD,KACDA,EAAKlC,WAAa,KACI,aAAtBkC,EAAKzB,UAAU,IACO,IAAtByB,EAAK7B,UAAU,GAHnB,CAMA,GAA0B,QAAtB6B,EAAK7B,UAAU,GACfmC,GAAS,MAER,IAA0B,QAAtBN,EAAK7B,UAAU,GAIpB,OAHAmC,GAAS,CAIb,CACA,GAAkC,KAA9BN,EAAK7B,UAAU,EAAGmC,GAKtB,IAFAvpD,EAAS,EAAIipD,EAAKzB,UAAU,GAAI+B,GAE3BzC,EAAI,EAAG/oD,EADEkrD,EAAK7B,UAAUpnD,EAAS,EAAGupD,GAChBxrD,GAAO,EAAI+oD,EAAI/oD,EAAM+oD,EAAI/oD,EAAKA,GAAO,IAAM+oD,IAAMA,EAAG,CACzE,GAAImC,EAAKlC,WAAa/mD,EAAS,GAC3B,OAEmC,MAAnCipD,EAAK7B,UAAUpnD,EAAQupD,IACvBD,EAAatpD,EAAS,EAAGupD,GAE7BvpD,GAAU,EACd,CAvBA,CAwBJ,CAGIwpD,CAAoBP,GAAM,SAACjpD,EAAQypD,GAAY,OAAKR,EAAKhB,UAAUjoD,EAAQqpD,EAAaI,EAAa,GACzG,EACMC,GAAW,eAAAhjB,GAAAt2B,EAAAA,EAAAA,GAAAC,EAAAA,MAAG,SAAAue,EAAOxC,EAAM68B,EAAMU,GAAa,OAAAt5C,EAAAA,MAAA,SAAA6e,GAAA,cAAAA,EAAAtuB,KAAAsuB,EAAAruB,MAAA,OAG/C,OAFG8oD,GACAP,GAAmBH,EAAM,GAC5B/5B,EAAA7C,OAAA,SACMo7B,GAAiBr7B,EAAM,IAAM,CAAC68B,EAAKf,UAAQ,wBAAAh5B,EAAAve,OAAA,GAAAie,EAAA,KACrD,gBALgBmB,EAAAH,EAAAK,GAAA,OAAAyW,EAAA7oC,MAAA,KAAAtI,UAAA,KAyBXq0D,GAAc,SAACC,GACjB,OAnBiB,SAACA,EAAO/Q,GACzB,OAAO,IAAI1nC,SAAQ,SAACC,EAASC,GACrBwnC,IACA+Q,EAAM/Q,IAAMA,GAEZ+Q,EAAMC,SACNz4C,EAAQw4C,IAGRA,EAAMl8C,iBAAiB,QAAQ,WAC3B0D,EAAQw4C,EACZ,IACAA,EAAMl8C,iBAAiB,SAAS,WAC5B2D,EAAO,IAAI/P,MAAM,gDACrB,IAER,GACJ,CAEWwoD,CAAa,IAAIrP,MAASmP,EACrC,EAEMG,GAAc,CAChB,EACA,GAGEC,GAAU,CACZ,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,KAGEC,GAAQ,CACVC,WAAY,CAIR5xD,KAAKsoC,MAAMtoC,KAAKupD,KAAK,MAGrB,KAEA,KAEA,MAEA,MAEA,MAEA,MAKA,OAEJsI,UAAW,CAEP,KAEA,KAGA,MAIA,MAMA,QAIFC,GAAgB,eAAA7oC,GAAApR,EAAAA,EAAAA,GAAAC,EAAAA,MAAG,SAAA+f,EAAOhE,GAAI,IAAAk+B,EAAAC,EAAAhE,EAAAD,EAAA,OAAAj2C,EAAAA,MAAA,SAAAmgB,GAAA,cAAAA,EAAA5vB,KAAA4vB,EAAA3vB,MAAA,OAEI,OADhCypD,GAAO,EAAKC,EACyBlE,KAAjCE,EAAqBgE,EAArBhE,sBAAuBD,EAAKiE,EAALjE,MAAK91B,EAAA3vB,KAAA,EACvB0lD,EAAsBn6B,GAC9B/R,MAAK,WASN,OARAisC,EAAMvwD,SAAQ,SAAAmsB,GAAsB,IAAnBilC,EAAMjlC,EAANilC,OAAQN,EAAI3kC,EAAJ2kC,KACrB,IAAKyD,GAAQL,GAAQv3D,QAAQy0D,IAAW,EAAG,CACvC,IAAMqD,EAAQ3D,EAAKG,SAAS,GACxBgD,GAAYt3D,QAAQ83D,GAAS,IAC7BF,GAAO,EAEf,CACJ,IACOA,CACX,IACKtvC,OAAM,kBAAMsvC,CAAI,IAAC,cAAA95B,EAAAnE,OAAA,SAAAmE,EAAA9f,MAAA,wBAAA8f,EAAA7f,OAAA,GAAAyf,EAAA,KACzB,gBAhBqBF,GAAA,OAAA1O,EAAA3jB,MAAA,KAAAtI,UAAA,KAkBhB82C,GAAU,SAACvoC,EAAI2mD,GACjB,IAAMne,EAAQ,CAAC,EACf,OAAO,WAAa,QAAAn3B,EAAA5f,UAAA1C,OAATuiB,EAAI,IAAA9Y,MAAA6Y,GAAAzD,EAAA,EAAAA,EAAAyD,EAAAzD,IAAJ0D,EAAI1D,GAAAnc,UAAAmc,GACX,IAAMvf,EAAMs4D,EAAWr1C,EAAMk3B,GAC7B,OAAOn6C,KAAOm6C,EAAQA,EAAMn6C,GAAQm6C,EAAMn6C,GAAO2R,EAAEjG,WAAC,EAAGuX,EAC3D,CACJ,EAQMs1C,GAAoB,SAACt1C,EAAMk3B,GAK7B,IAJA,IAAO/G,GAAP7oB,EAAAA,GAAAA,GAAYtH,EAAI,GAAR,GACFu1C,EAAer4D,OAAOmD,KAAK62C,GAC5BnuC,KAAI,SAAC9I,GAAG,OAAK8L,SAAS9L,EAAK,GAAG,IAC9Bu1D,MAAK,SAACC,EAAGrsB,GAAC,OAAKqsB,EAAIrsB,CAAC,IAChBpsC,EAAI,EAAGA,EAAIu4D,EAAa93D,OAAQT,IAAK,CAC1C,IAAM04D,EAAcH,EAAav4D,GAC3B24D,IAAgBze,EAAMwe,GAE5B,GAAIA,EAAcvlB,GAAKwlB,EACnB,OAAOD,EAGX,GAAIA,EAAcvlB,IAAMwlB,EACpB,OAAOD,CAEf,CAGA,OAAOvlB,CACX,EAGMylB,GACC,GADDA,GAEC,IAFDA,GAGC,IAHDA,GAIC,IAEDC,GAAa,QAAHv0D,OAAWs0D,GAAW,MAAAt0D,OAAKs0D,GAAW,MAAAt0D,OAAKs0D,GAAW,MAAAt0D,OAAKs0D,GAAc,IAAG,KACtFE,GAAa,SAACtmB,EAAOC,GACvB,IACI,IAAMxV,EAAO,CAACuV,EAAQ,EAAGC,EAAS,EAAG,EAAG,GACxCsmB,EAA0C1C,KAA1B2C,EAAOD,EAAf5C,OAAsB8C,EAAOF,EAAZxlD,IACzBylD,EAAQxmB,MAAQ,EAChBwmB,EAAQvmB,OAAS,EACjB,IAAAymB,EAA0C7C,KAA1B8C,EAAOD,EAAf/C,OAAsBiD,EAAOF,EAAZ3lD,IACzB4lD,EAAQ3mB,MAAQA,EAChB2mB,EAAQ1mB,OAASA,EACb2mB,IACAA,EAAQC,UAAYR,GACpBO,EAAQE,SAAQ7tD,MAAhB2tD,EAAoBn8B,GAIpBg8B,EAAQxC,UAAU0C,EAAS3mB,EAAQ,EAAGC,EAAS,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAErE,IAAMikB,EAAYuC,GAAWA,EAAQtC,aAAa,EAAG,EAAG,EAAG,GAAGlyD,KAC1D80D,GAAa,EAYjB,OAXI7C,IAIA6C,EACI7C,EAAU,KAAOkC,IACblC,EAAU,KAAOkC,IACjBlC,EAAU,KAAOkC,IACjBlC,EAAU,KAAOkC,IAE7BO,EAAQ3mB,MAAQ2mB,EAAQ1mB,OAAS,EAC1B8mB,CAKX,CAHA,MAAOvvD,GAEH,OADA3F,QAAQuV,MAAM,yCAADtV,OAA0CkuC,EAAK,KAAAluC,OAAImuC,EAAM,OAC/D,CACX,CACJ,EAEA,SAAS+mB,GAAU9nD,GACf,OAAO,WAAa,QAAA+nD,EAAAt2D,UAAA1C,OAATuiB,EAAI,IAAA9Y,MAAAuvD,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAJ12C,EAAI02C,GAAAv2D,UAAAu2D,GACX,OAAO,IAAI16C,SAAQ,SAACC,GAChBjW,YAAW,WACP,IAAMgE,EAAS0E,EAAEjG,WAAC,EAAGuX,GACrB/D,EAAQjS,EACZ,GAAG,EACP,GACJ,CACJ,CACA,IAAM2sD,GAAaH,GAAUvf,GAAQ6e,GAAYR,KAC3CsB,GAAgBJ,GAAUvf,GAAQ6e,GAAYR,KAC9CuB,GAAc,eAAAjpC,GAAA5S,EAAAA,EAAAA,GAAAC,EAAAA,MAAG,SAAA67C,EAAO3mB,EAAGuC,GAAC,IAAAqkB,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAn8C,EAAAA,MAAA,SAAAo8C,GAAA,cAAAA,EAAA7rD,KAAA6rD,EAAA5rD,MAAA,OAE8C,GADtEsrD,EAAiBjC,GAAMC,WAAWpnB,MAAK,SAAC2pB,GAAI,OAAKA,EAAOA,GAAQnnB,EAAIuC,CAAC,IACrEskB,EAAgBlC,GAAME,UAAUrnB,MAAK,SAAC2pB,GAAI,OAAKA,GAAQnnB,GAAKmnB,GAAQ5kB,CAAC,IACtEqkB,GAAmBC,EAAa,CAAAK,EAAA5rD,KAAA,cAC3B,IAAIU,MAAM,iBAAgB,cAAAkrD,EAAA5rD,KAAA,EAEgBuQ,QAAQY,IAAI,CAC5D+5C,GAAWI,EAAgBA,GAC3BH,GAAcI,EAAe,KAC/B,OAHwC,GAGxCC,EAAAI,EAAA/7C,KAAA47C,GAAA5vC,EAAAA,GAAAA,GAAA2vC,EAAA,GAHKE,EAAeD,EAAA,GAAEE,EAAkBF,EAAA,IAItCC,IAAmBC,EAAkB,CAAAC,EAAA5rD,KAAA,gBAAA4rD,EAAApgC,OAAA,UAC9B,GAAI,cAGL,IAAI9qB,MAAM,iBAAgB,yBAAAkrD,EAAA97C,OAAA,GAAAu7C,EAAA,KAEvC,gBAhBmBS,EAAAC,GAAA,OAAA5pC,EAAAnlB,MAAA,KAAAtI,UAAA,KAkBds3D,GAAY,eAAAzpC,GAAAhT,EAAAA,EAAAA,GAAAC,EAAAA,MAAG,SAAAy8C,EAAOnR,EAAKpW,EAAGuC,GAAC,IAAAilB,EAAApnD,EAAA4iD,EAAA,OAAAl4C,EAAAA,MAAA,SAAA28C,GAAA,cAAAA,EAAApsD,KAAAosD,EAAAnsD,MAAA,OAY5B,OAZ4BmsD,EAAApsD,KAAA,EAAAmsD,EAELtE,KAAhB9iD,EAAGonD,EAAHpnD,KAAK4iD,EAAMwE,EAANxE,QACN3jB,MAAQW,EACfgjB,EAAO1jB,OAASiD,EAChBniC,EAAIsnD,sBAAwB,OAC5BtnD,EAAIkjD,UAAUlN,EAAK,EAAG,EAAGpW,EAAGuC,GACxB6T,aAAeuR,mBACfvR,EAAI7C,IAAM,QAEV6C,aAAewR,oBACfxR,EAAI/W,MAAQ+W,EAAI9W,OAAS,GAC5BmoB,EAAA3gC,OAAA,SACMk8B,GAAM,cAAAyE,EAAApsD,KAAA,GAAAosD,EAAAx8C,GAAAw8C,EAAA,SAGP,IAAIzrD,MAAM,sBAAuB,CAAEmyC,MAAKsZ,EAAAx8C,KAAM,yBAAAw8C,EAAAr8C,OAAA,GAAAm8C,EAAA,mBAE3D,gBAlBiBM,EAAAC,EAAAC,GAAA,OAAAlqC,EAAAvlB,MAAA,KAAAtI,UAAA,KA6DZg4D,GAAW,SAAHhpC,GAAiD,IAA3Co3B,EAAGp3B,EAAHo3B,IACV6R,EAzBc,SAAHrpC,GAAkD,IAAnCspC,EAAOtpC,EAAPspC,QAASC,EAAOvpC,EAAPupC,QAASC,EAAOxpC,EAAPwpC,QAAS30D,EAAImrB,EAAJnrB,KACrDw0D,EAAQ,GACVI,EAAKF,EACLG,EAAKF,EAKT,GACIH,EAAMhxD,KAAK,CAACoxD,EAAIC,IAChBD,EAAKr1D,KAAK4oB,MAAMysC,EAAK50D,GACrB60D,EAAKt1D,KAAK4oB,MAAM0sC,EAAK70D,SAChB40D,EAAKH,EAAUz0D,GACxB,OAAOw0D,EAAMM,SACjB,CAWkBC,CAAgB,CAAEN,QADJlpC,EAAPkpC,QACoBC,QADJnpC,EAAPmpC,QACoBC,QADJppC,EAAPopC,QACoB30D,KADPurB,EAAJvrB,OAEhD,OAAOw0D,EAAMp6D,QAAO,SAAC46D,EAAKtpC,GAAa,IAAAM,GAAAtI,EAAAA,GAAAA,GAAAgI,EAAA,GAAV6gB,EAACvgB,EAAA,GAAE8iB,EAAC9iB,EAAA,GAC7B,OAAOgpC,EAAM3zC,MAAK,SAACkuC,GACf,OAAQ0D,GAAe1mB,EAAGuC,GACrBztB,MAAK,kBAAMwyC,GAAatE,EAAQhjB,EAAGuC,EAAE,IAErC9sB,OAAM,kBAAMutC,CAAM,GAC3B,GACJ,GAAGn3C,QAAQC,QAAQsqC,GACvB,EAYMsS,GAAWC,UAAUC,gBACvBD,UAAUC,eAAiB,GAC3B,WAAWjhC,KAAKghC,UAAUE,UAExBC,GAAO,IACPC,GAAc,SAAC3S,EAAK4S,GAEtB,GAAI5S,EAAI/W,MAAQypB,GAAO1S,EAAI9W,OAASwpB,GAAOE,EAASh4D,KAChD,MAAM,IAAIgL,MAAM,gBAEpB,IAAMksD,EAAU9R,EAAI/W,MACd4pB,EAAU7S,EAAI9W,OACd4pB,EAAQhB,EAAUe,EAElBd,EAAUn1D,KAAKsoC,MAAMtoC,KAAKupD,KAAKyM,EAASh4D,KAAOk4D,IAC/Cd,EAAUp1D,KAAKsoC,MAAM0tB,EAASh4D,KAAOgC,KAAKupD,KAAKyM,EAASh4D,KAAOk4D,IAErE,OAAOxC,GAAeyB,EAASC,GAC1BtzC,MAAK,WAMN,MAJsB,0BADNouC,KAAR9iD,OA5BR,mBAAmBunB,KAAKghC,UAAUE,WAI1BF,UAAUC,gBACdD,UAAUC,eAAiB,GAC3B,WAAWjhC,KAAKghC,UAAUE,aA0ByBH,GA/EhD,SAAHlqC,GAAA,IAAM43B,EAAG53B,EAAH43B,IAAK+R,EAAO3pC,EAAP2pC,QAASC,EAAO5pC,EAAP4pC,QAAO,OAAOd,GAAalR,EAAK+R,EAASC,EAAQ,CAiFnEe,CAAO,CAAE/S,IAAAA,EAAK+R,QAAAA,EAASC,QAAAA,IACvBJ,GAAS,CAAE5R,IAAAA,EAAK8R,QAAAA,EAASC,QAAAA,EAASC,QAAAA,EAAS30D,KAAMq1D,IAC3D,IACKrzC,OAAM,kBAAM5J,QAAQE,OAAO,gBAAgB,GACpD,EAEMq9C,GAAU,eAAAC,GAAAx+C,EAAAA,EAAAA,GAAAC,EAAAA,MAAG,SAAAw+C,EAAOC,EAAWP,GAAQ,IAAAQ,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAzF,EAAAtB,EAAArP,EAAAE,EAAAmW,EAAAtG,EAAAuG,EAAAz1C,EAAA,OAAA1J,EAAAA,MAAA,SAAAo/C,GAAA,cAAAA,EAAA7uD,KAAA6uD,EAAA5uD,MAAA,cAAA4uD,EAAA7uD,KAAA,EAAA6uD,EAAA5uD,KAAA,EAEZwpD,GAAiByE,GAAU,OAApC,IAAAW,EAAA/+C,KACA,CAAF++C,EAAA5uD,KAAA,cACJ,IAAIU,MAAM,kBAAiB,cAAAkuD,EAAA5uD,KAAA,EAGXuQ,QAAQs+C,WAAW,CACzC1G,GAAQ8F,GAhZT,IAAI19C,SAAQ,SAACC,GAChB,QAAkB7b,IAAd2zD,GACA93C,EAAQ83C,QAEP,CACD,IAAMU,EAAQ,IAAInP,MAClBmP,EAAMl8C,iBAAiB,QAAQ,WAC3Bw7C,GAAYU,EAAM8F,aAAe9F,EAAM+F,cACvC/F,EAAM/Q,IAAM,OACZznC,EAAQ83C,GACZ,IACAU,EAAM/Q,IAlBK,wTAmBf,CACJ,IAqYQuO,GAAcyH,KAChB,OAKF,OATMC,EAAWU,EAAA/+C,KAKXs+C,EAAaD,EAAY/lB,MAAK,SAAC5pC,GAAM,MAAuB,aAAlBA,EAAO0d,MAAqB,IAEtEmyC,GAAUD,EAAUE,GAAAxyC,EAAAA,GAAAA,GAC6CqyC,EAAW,GAA3EI,EAAUD,EAAA,GAAEE,EAA8BF,EAAA,GAAEG,EAAgBH,EAAA,GACnEO,EAAA5uD,KAAA,GACkCwnD,GAAgByG,GAAW9zC,OAAM,kBAAM8zC,CAAS,IAAC,QAA1D,OAAnBQ,EAAmBG,EAAA/+C,KAAA++C,EAAA5uD,KAAG,GACR+oD,GAAY5+C,IAAIC,gBAAgBqkD,IAAqB,QAEzE,OAFMzF,EAAK4F,EAAA/+C,KACX1F,IAAIqlC,gBAAgBwZ,EAAM/Q,KAC1B2W,EAAA5uD,KAAA,GACqBytD,GAAYzE,EAAO0E,GAAS,QAOjD,OAPMhG,EAAMkH,EAAA/+C,KACRwoC,EAAS,aACTE,GAAkB,OAARmV,QAAQ,IAARA,OAAQ,EAARA,EAAUnV,UAAW,IAC9B6V,GAAUtG,GAAgBJ,KAC3BrP,EAAS,YACTE,OAAU5jD,GAEdi6D,EAAA5uD,KAAA,GACoBynD,GAAaC,EAAQrP,EAAQE,GAAQ,QAA9C,GAAPmW,EAAOE,EAAA/+C,MAEPu+C,GAAgC,cAAtBE,EAAWryC,SAA0BqyC,EAAWn7D,MAAK,CAAAy7D,EAAA5uD,KAAA,SAIpD,OAHLooD,EAAOkG,EAAWn7D,MAClBw7D,EAAqE,cAA1CJ,EAA+BtyC,QAC1DsyC,EAA+Bp7D,MAC1By7D,EAAA5uD,KAAA,GACK6oD,GAAY6F,EAAStG,EAAMuG,GAAyB,QAApED,EAAOE,EAAA/+C,KAAA,aAKPu+C,GAC4B,cAA5BI,EAAiBvyC,QACjBuyC,EAAiBr7D,MAAMnB,OAAS,GAAC,CAAA48D,EAAA5uD,KAAA,gBAAA4uD,EAAA5uD,KAAA,GACjBsnD,GAAkBoH,EAASF,EAAiBr7D,OAAM,QAAlEu7D,EAAOE,EAAA/+C,KAAA,eAAA++C,EAAApjC,OAAA,SAIJkjC,GAAO,QASb,MATaE,EAAA7uD,KAAA,GAAA6uD,EAAAj/C,GAAAi/C,EAAA,SAIVA,EAAAj/C,cAAajP,QACbwY,EAAU01C,EAAAj/C,GAAEuJ,SAEC,kBAAb01C,EAAAj/C,KACAuJ,EAAO01C,EAAAj/C,IAEL,IAAIjP,MAAM,2BAAD7K,OAA4BqjB,EAAU,aAAHrjB,OAAgBqjB,EAAO,MAAO,IAAM,CAAE25B,MAAK+b,EAAAj/C,KAAM,yBAAAi/C,EAAA9+C,OAAA,GAAAk+C,EAAA,mBAE1G,gBA5DegB,EAAAC,GAAA,OAAAlB,EAAA/wD,MAAA,KAAAtI,UAAA,KC9kBhB,SAASw6D,GAAiBC,GACxB,IAAI5jC,EAAO,IAAIthB,KAAK,CAACklD,GAAM,CACzB1mD,KAAM,kBAER,OAAO0B,IAAIC,gBAAgBmhB,EAC7B,CA6BO,SAAS6jC,KAAiE,IAAvDC,EAAK36D,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAAG,qBAAsBqvC,EAAKrvC,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAAG,GAAIsvC,EAAMtvC,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAAG,GAC3E,OAAOw6D,GAAwB,mBAAPr5D,OACVkuC,EAAK,cAAAluC,OAAamuC,EAAM,mIAAAnuC,OACkBw5D,EAAK,2gBAG/D,CCxCO,SAASC,GAAcC,GAAoB,IAAX75D,EAAIhB,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAAG,GAC5C,GAAqB,kBAAjB66D,EAAQ9mD,KACV,OAAO0B,IAAIC,gBAAgBmlD,GAE7B,IAAI7H,EAASvrD,SAAS+G,cAAc,UAChC4B,EAAM4iD,EAAOG,WAAW,MACxB/M,EAAM,IAAIjB,MACV2V,EAAU,IAAIj/C,SAAQ,SAACC,EAASC,GAClCqqC,EAAIn3C,OAAS,WACX,IAAIiqD,EAAQ9S,EAAI9W,OAAS8W,EAAI/W,MACzB6pB,EAAQ,GACVlG,EAAO3jB,MAAQruC,EACfgyD,EAAO1jB,OAAStuC,EAAOk4D,IAEvBlG,EAAO1jB,OAAStuC,EAChBgyD,EAAO3jB,MAAQruC,EAAOk4D,GAExB9oD,EAAI8lD,UAAY,qBAChB9lD,EAAI+lD,SAAS,EAAG,EAAGnD,EAAO3jB,MAAO2jB,EAAO1jB,QACxCl/B,EAAIkjD,UAAUlN,EAAK,EAAG,EAAG4M,EAAO3jB,MAAO2jB,EAAO1jB,QAC9C0jB,EAAOC,QAAO,SAACp8B,GACb,GAAKA,EAAL,CAIA,IAAIjhB,EAAMH,IAAIC,gBAAgBmhB,GAC9B/a,EAAQlG,EAFR,MAFEmG,GAKJ,GACF,EACAqqC,EAAI5rC,QAAU,SAAC5T,GACbmV,EAAOnV,EACT,CACF,IAEA,OADAw/C,EAAI7C,IAAM9tC,IAAIC,gBAAgBmlD,GACvBC,CACT,CCrCA,IAEMC,GAAe,6CCOfC,GAAgBj+D,OAAO6E,OAAO,CAClCq5D,SAAU55D,OAAO,GACjB65D,OAAQ75D,OAAO,GACf85D,UAAW95D,OAAO,GAClB+5D,KAAM/5D,OAAO,KAGFg6D,GAAQ,SAAA5S,IAAAhkD,EAAAA,EAAAA,GAAA42D,EAAA5S,GAAA,IAAA/jD,GAAAC,EAAAA,EAAAA,GAAA02D,GAqBnB,SAAAA,IAAc,IAAA96D,EAkCV,OAlCUvB,EAAAA,EAAAA,GAAA,KAAAq8D,GACZ96D,EAAAmE,EAAAxH,KAAA,OAAQ4hB,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,mBArBQ,IAAIue,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,eACR,IAAIue,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,aAGL,IAAIK,MAAKke,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,SAKb,OAAIue,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,mBAEK,IAAKue,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,0BAEG6e,EAAS7e,EAAK+6D,mBAAmBj+C,MAAI7Q,EAAAA,EAAAA,GAAAjM,IAAQ,OAAIue,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,2BAEhD6e,EAAS7e,EAAKg7D,gBAAgBl+C,MAAI7Q,EAAAA,EAAAA,GAAAjM,IAAQ,OAAIue,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,iBAGzD,GAKdA,EAAK2F,OAAK1G,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACLe,EAAK2F,OAAK,IACb9E,IAAK,GACLo6D,SAAU,GACVC,UAAW,GACXziB,SAAU,GACV0iB,cAAe,EACfC,iBAAiB,EACjBC,UAAW,GACXC,YAAY,EACZ/jB,UAAU,EACVC,aAAa,EACb+jB,WAAW,EACXC,YAAY,EACZvkB,MAAOwjB,GAAcI,KACrBY,OAAQ,WACNz7D,EAAKqF,KAAK,CACR,gBAAiBrF,EAAK2mB,SAEpB3mB,EAAKyoC,eAAc,SAACC,GAAC,OAAKA,EAAEF,eAAiBmD,GAAc6B,WAAWQ,OAAO,IAC/EhuC,EAAKuM,EAAE,oBAAsBo/B,GAAc6B,WAAWQ,QAEtDhuC,EAAKuM,EAAE,oBAAsBo/B,GAAc6B,WAAWM,cAE1D,EACA4tB,SAAU,WACR17D,EAAK+2C,iBAAiBx2C,OAAOP,EAAKuM,EAAE1L,IACtC,EACA86D,SAAU,WACR37D,EAAK4nB,QACP,IACA5nB,CACJ,CA6VC,OA7VAX,EAAAA,EAAAA,GAAAy7D,EAAA,EAAAz+D,IAAA,SAAA6B,MAED,WAAS,IACwB2H,EADxBG,GAAAC,EAAAA,EAAAA,GACStH,KAAKi9D,YAAU,IAA/B,IAAA51D,EAAAE,MAAAL,EAAAG,EAAAG,KAAAC,MAAiC,CAArBP,EAAA3H,MACNqC,QACN,CAAC,OAAA8F,IAAAL,EAAAM,EAAAD,GAAA,SAAAL,EAAAO,GAAA,CAED5H,KAAKk9D,wBAAwBt8C,SAC7B5gB,KAAKm9D,yBAAyBv8C,SAC9B5gB,KAAKi9D,WAAa,IAAIv7D,IACtB1B,KAAKgoB,OAAS,IAChB,GAEA,CAAAtqB,IAAA,oBAAA6B,MAIA,SAAkBuoB,GAChB,IAAKC,GAALE,EAAAA,GAAAA,GAAcH,EAAO,GAAX,GACV9nB,KAAKo9D,gBAAkBr1C,EAAM49B,eAEzB59B,EAAM49B,iBAAmB3lD,KAAKq9D,gBAChCr9D,KAAKmT,SACLnT,KAAKq9D,eAAgB,GAES,IAA5Bt1C,EAAMu1C,kBACRt9D,KAAKk9D,wBAAwBt8C,SAE7B5gB,KAAKk9D,yBAET,GAEA,CAAAx/D,IAAA,kBAAA6B,MACA,WACE,GAAKS,KAAKgoB,OAAV,CAGA,IAAID,EAAQ/nB,KAAKgoB,OACbswB,EAAQwjB,GAAcI,KAEtBn0C,EAAMyvB,SAAS,UAAUp5C,OAAS,EACpCk6C,EAAQwjB,GAAcE,OACbj0C,EAAMyvB,SAAS,eACxBc,EAAQwjB,GAAcG,UACbl0C,EAAMyvB,SAAS,cACxBc,EAAQwjB,GAAcC,UAGxB/7D,KAAK4N,EAAE0qC,MAAQA,CAZf,CAaF,GAEA,CAAA56C,IAAA,qBAAA6B,MAAA,eAAAg+D,GAAA5hD,EAAAA,EAAAA,GAAAC,EAAAA,MACA,SAAAC,IAAA,IAAA6/B,EAAA3zB,EAAAjmB,EAAAg4C,EAAA0jB,EAAAC,EAAAhC,EAAAiC,EAAA,OAAA9hD,EAAAA,MAAA,SAAAE,GAAA,cAAAA,EAAA3P,KAAA2P,EAAA1P,MAAA,UACOpM,KAAKgoB,OAAQ,CAAFlM,EAAA1P,KAAA,eAAA0P,EAAA8b,OAAA,iBAGO,KAAnB7P,EAAQ/nB,KAAKgoB,QAEPwvB,SAAS,cAAezvB,EAAMyvB,SAAS,WAAU,CAAA17B,EAAA1P,KAAA,QAYxD,OAXGtK,EAAO9B,KAAKmhC,IAAIyG,UAChBkS,EAAW95C,KAAK29D,SAClBt5B,GACEI,GAAkBzkC,KAAKmhC,IAAIoH,SAAUvoC,KAAKgoB,OAAOwvB,SAAS,SAC1DvU,GAAsBlb,EAAMyvB,SAAS,mBAAoB,cAAFv1C,OAAgBH,EAAI,KAAAG,OAAIH,EAAI,eAGnF07D,EAAkBz1C,EAAMyvB,SAAS,eACbsC,IACtB/xB,EAAMsuB,SAAS,WAAYyD,IACZ,OAAf0jB,QAAe,IAAfA,OAAe,EAAfA,EAAiBx+D,WAAW,WAAYuX,IAAIqlC,gBAAgB4hB,IAC7D1hD,EAAA8b,OAAA,qBAIC7P,EAAMyvB,SAAS,YAAa,CAAF17B,EAAA1P,KAAA,gBAAA0P,EAAA8b,OAAA,qBAIJ,QAJI8jB,EAI1B3zB,EAAMyvB,SAAS,eAAO,IAAAkE,IAAtBA,EAAwB7mC,KAAK5T,SAAS,SAAQ,CAAA6a,EAAA1P,KAAA,gBAAA0P,EAAA3P,KAAA,GAAA2P,EAAA1P,KAAA,GAEzBsvD,GAAc3zC,EAAMyvB,SAAS,QAASx3C,KAAKmhC,IAAIyG,WAAU,QAA1EkS,EAAQh+B,EAAAG,KACZ8L,EAAMsuB,SAAS,WAAYyD,GAAUh+B,EAAA1P,KAAA,iBAAA0P,EAAA3P,KAAA,GAAA2P,EAAAC,GAAAD,EAAA,UAEjC2/C,EAAQr2D,OAAOmP,iBAAiBvU,MAAMwU,iBAAiB,2BAC3DuT,EAAMsuB,SAAS,WAAYmlB,GAAUC,IAAQ,QAAA3/C,EAAA1P,KAAA,iBAG3CqvD,EAAQr2D,OAAOmP,iBAAiBvU,MAAMwU,iBAAiB,2BAC3DuT,EAAMsuB,SAAS,WAAYmlB,GAAUC,IAAQ,yBAAA3/C,EAAAI,OAAA,GAAAL,EAAA,oBAEhD,yBAAA0hD,EAAAn0D,MAAA,KAAAtI,UAAA,EAvCD,IAyCA,CAAApD,IAAA,YAAA6B,MAKA,SAAUc,EAAMuQ,GAAS,IAAApP,EAAA,KACnB2E,EAAMnG,KAAKgoB,OAAOmP,UACpB92B,GAC0B,SAACd,GACrBiC,EAAKuP,aACPH,EAAQrR,EAEZ,IAEFS,KAAKi9D,WAAWt7D,IAAIwE,EACtB,GAEA,CAAAzI,IAAA,iBAAA6B,MAIA,SAAe88B,GAAI,IAAAmgB,EAAA92C,EAAA,KACjB1F,KAAK49D,SAGL,IAAI71C,EAA6B,QAAxBy0B,EAAGx8C,KAAKo4C,wBAAgB,IAAAoE,OAAA,EAArBA,EAAuBjrC,KAAK8qB,GACxCr8B,KAAKgoB,OAASD,EAETA,IAIL/nB,KAAK69D,UAAU,kBAAkB,SAAClkB,GAChCj0C,EAAKkI,EAAE4uD,cAAgB7iB,CACzB,IAEA35C,KAAK69D,UAAU,YAAY,SAACj/D,GAC1B8G,EAAKkI,EAAE0uD,SAAW19D,GAAQmpB,EAAMyvB,SAAS,gBAAkB9xC,EAAK88B,KAAK,gBACrE98B,EAAKy3D,0BACP,IAEAn9D,KAAK69D,UAAU,eAAe,SAACtkB,GAC7B7zC,EAAKkI,EAAE0uD,SAAWv0C,EAAMyvB,SAAS,aAAe+B,GAAe7zC,EAAK88B,KAAK,eAC3E,IAEAxiC,KAAK69D,UAAU,YAAY,SAACnrC,GAC1BhtB,EAAKy3D,2BACDzqC,GAAYhtB,EAAK03D,iBACnB13D,EAAKw3D,yBAET,IAEAl9D,KAAK69D,UAAU,mBAAmB,WAC5Bn4D,EAAK03D,iBACP13D,EAAKw3D,yBAET,IAEAl9D,KAAK69D,UAAU,YAAY,SAAC/jB,GAC1Bp0C,EAAKkI,EAAEksC,SAAWA,EAAW,OAAH73C,OAAU63C,EAAQ,KAAM,EACpD,IAEA95C,KAAK69D,UAAU,UAAU,kBAAMn4D,EAAKy3D,0BAA0B,IAC9Dn9D,KAAK69D,UAAU,eAAe,kBAAMn4D,EAAKy3D,0BAA0B,IACnEn9D,KAAK69D,UAAU,YAAY,kBAAMn4D,EAAKy3D,0BAA0B,IAChEn9D,KAAK69D,UAAU,YAAY,kBAAMn4D,EAAKy3D,0BAA0B,IAChEn9D,KAAK69D,UAAU,WAAW,kBAAMn4D,EAAKy3D,0BAA0B,IAE3Dn9D,KAAKo9D,iBACPp9D,KAAKk9D,0BAET,GAAC,CAAAx/D,IAAA,eAAA6B,MAED,WAAe,IAAA8N,EAAA,KACb4Q,GAAAgtB,EAAAA,EAAAA,GAAAkxB,EAAAr+D,WAAA,qBAAAE,KAAA,MAEAgC,KAAKmG,IAAI,OAAO,SAACjE,GACfmL,EAAKywD,eAAe57D,EACtB,IAEAlC,KAAKmG,IAAI,SAAS,SAACmyC,GACjBjrC,EAAK0wD,aAAazlB,EACpB,IAEAt4C,KAAK8gC,eAAe,uBAAuB,kBAAMzzB,EAAK8vD,0BAA0B,IAEhFn9D,KAAKuxD,QAAU,WACb4K,EAAS6B,gBAAgB18D,SAAQ,SAAC28D,GAC5BA,IAAS5wD,EACX4wD,EAAKxzD,aAAa,UAAW,IAE7BwzD,EAAKh2D,gBAAgB,UAEzB,GACF,EAEAjI,KAAKmG,IACH,kBAEA,SAACg1C,GACMA,EAAchqC,IAAI9D,EAAK2a,OAAO9lB,MAGnCyE,YAAW,kBAAM0G,EAAK0D,aAAe1D,EAAK4b,QAAQ,GACpD,IAEFkzC,EAAS6B,gBAAgBr8D,IAAI3B,KAC/B,GAEA,CAAAtC,IAAA,eAAA6B,MACA,SAAa+4C,GAAO,IAAA4lB,EAAAC,EAAAC,EAAAC,EACd/lB,IAAUwjB,GAAcE,OAC1Bh8D,KAAK4N,EAAE8uD,UAAY,cACVpkB,IAAUwjB,GAAcC,WACjC/7D,KAAK4N,EAAE8uD,UAAY,iBAGjBpkB,IAAUwjB,GAAcG,UAC1Bj8D,KAAK4N,EAAEgvD,WAAY,EAEnB58D,KAAK4N,EAAE4uD,cAAgB,EAGzBx8D,KAAK0G,KAAK,CACRkyC,SAAUN,IAAUwjB,GAAcE,OAClCnjB,YAAaP,IAAUwjB,GAAcG,UACrCU,WAAYrkB,IAAUwjB,GAAcC,SACpCU,gBAAiBnkB,IAAUwjB,GAAcG,UACzCY,WAAY78D,KAAKmhC,IAAI4G,sBAAkC,QAAfm2B,EAAIl+D,KAAKgoB,cAAM,IAAAk2C,OAAA,EAAXA,EAAa1mB,SAAS,cAAyB,QAAf2mB,EAAIn+D,KAAKgoB,cAAM,IAAAm2C,OAAA,EAAXA,EAAa3mB,SAAS,WACtG+kB,UAAyC,QAAhC6B,EAAEp+D,KAAKgoB,OAAOwvB,SAAS,iBAAS,IAAA4mB,GAAK,QAALC,EAA9BD,EAAiC,UAAE,IAAAC,OAAL,EAA9BA,EAAqC/4C,SAEpD,GAAC,CAAA5nB,IAAA,kBAAA6B,MAED,WACE0e,GAAAgtB,EAAAA,EAAAA,GAAAkxB,EAAAr+D,WAAA,wBAAAE,KAAA,MAEAm+D,EAAS6B,gBAAgBn8D,OAAO7B,MAEhCA,KAAK49D,QACP,GAAC,CAAAlgE,IAAA,oBAAA6B,MAED,WACE0e,GAAAgtB,EAAAA,EAAAA,GAAAkxB,EAAAr+D,WAAA,0BAAAE,KAAA,MAGAgC,KAAKs+D,UAAY,IAAIl5D,OAAOqgD,qBAAqBzlD,KAAKu+D,kBAAkBpgD,KAAKne,MAAO,CAClF6O,KAAM7O,KAAKkL,cACX26C,WAAY,kBACZ2Y,UAAW,CAAC,EAAG,KAEjBx+D,KAAKs+D,UAAUvpD,QAAQ/U,KACzB,GAAC,CAAAtC,IAAA,uBAAA6B,MAED,WAAuB,IAAAk/D,EACrBxgD,GAAAgtB,EAAAA,EAAAA,GAAAkxB,EAAAr+D,WAAA,6BAAAE,KAAA,MAEAgC,KAAKk9D,wBAAwBt8C,SACf,QAAd69C,EAAAz+D,KAAKs+D,iBAAS,IAAAG,GAAdA,EAAgBzqD,YAClB,GAAC,CAAAtW,IAAA,oBAAA6B,MAED,WACE,OD7TuB,SAACA,GAC1B,IAAMm/D,EAAQ7C,GAAaphB,KAAU,OAALl7C,QAAK,IAALA,OAAK,EAALA,EAAOo/D,sBAAwB,GAE/D,IAAKD,EAAMtgE,OACT,OAAO,EAGT,IAAMwgE,EAAaF,EAAM,GAAKA,EAAM,GAGpC,OAAIE,EAFYC,WAGd78D,QAAQrB,KACN,wCAAAsB,OAAwC6B,KAAKsoC,MAAM0yB,YAAsB,wBAAA78D,OACvDy8D,EAAM,GAAE,KAAAz8D,OAAIy8D,EAAM,GAAE,MAAI,GAAAz8D,OACrC6B,KAAKqxC,KAAKypB,EAAa,IAAO,KAAO,GAAE,UAEvC,GAGF,CACLja,QAAS+Z,EAAM,GAAKA,EAAM,GAAK,SAAM39D,EACrCe,KAAM88D,EAEV,CCsSWG,CAAY/+D,KAAKmhC,IAAI+G,YAC9B,GAEA,CAAAxqC,IAAA,iBAAA6B,MAIA,SAAe8qB,GACb,OAAO6vC,GAAW7vC,EAAMrqB,KAAKg/D,oBAC/B,GAAC,CAAAthE,IAAA,SAAA6B,MAAA,eAAA0/D,GAAAtjD,EAAAA,EAAAA,GAAAC,EAAAA,MAED,SAAA6d,IAAA,IAAA1R,EAAAkf,EAAAi4B,EAAAC,EAAAC,EAAA9e,EAAA+e,EAAAxlB,EAAAylB,EAAA5sC,EAAAlkB,EAAA,YAAAoN,EAAAA,MAAA,SAAA8d,GAAA,cAAAA,EAAAvtB,KAAAutB,EAAAttB,MAAA,OACyB,GAAnB2b,EAAQ/nB,KAAKgoB,OAEZhoB,KAAKo4C,iBAAiB7mC,KAAKwW,EAAM7lB,KAAM,CAAFw3B,EAAAttB,KAAA,eAAAstB,EAAA9B,OAAA,sBAItC7P,EAAMyvB,SAAS,aAAezvB,EAAMyvB,SAAS,gBAAkBzvB,EAAMyvB,SAAS,UAAUp5C,OAAS,GAAC,CAAAs7B,EAAAttB,KAAA,eAAAstB,EAAA9B,OAAA,iBAGtC,MAA1DqP,EAAcjnC,KAAKmhC,IAAI4F,SAAW/mC,KAAKmhC,IAAI8F,YAAc,IAC5CjnC,KAAKo4C,iBAAiBt2C,KAAOmlC,GAAW,CAAAvN,EAAAttB,KAAA,eAAAstB,EAAA9B,OAAA,iBAsCzD,OAlCF53B,KAAKm9D,2BACLp1C,EAAMsuB,SAAS,eAAe,GAC9BtuB,EAAMsuB,SAAS,SAAU,IAAI3c,EAAAvtB,KAAA,GAGvB0tC,EAAkB,IAAI3jB,gBAC1BnO,EAAMsuB,SAAS,kBAAmBwD,GAE5BylB,EAAU,eAAA5jD,GAAAC,EAAAA,EAAAA,GAAAC,EAAAA,MAAG,SAAAqc,IAAA,IAAA5N,EAAAwzB,EAAA0hB,EAAAxf,EAAA,OAAAnkC,EAAAA,MAAA,SAAAsc,GAAA,cAAAA,EAAA/rB,KAAA+rB,EAAA9rB,MAAA,OACgB,KAA7Bie,EAAOtC,EAAMyvB,SAAS,WACdhpC,EAAK2yB,IAAI+G,YAAW,CAAAhQ,EAAA9rB,KAAA,eAAA8rB,EAAA9rB,KAAA,EACjBoC,EAAKgxD,eAAen1C,GAAM9D,OAAM,kBAAM8D,CAAI,IAAC,OAAxDA,EAAI6N,EAAAjc,KAAA,OAgB0B,OAb1B4hC,EAAYxzB,GAAQtC,EAAMyvB,SAAS,gBAAkBzvB,EAAMyvB,SAAS,QACpE+nB,EAA0B/wD,EAAK2xC,yBACrCjoB,EAAAnc,GAAAzb,EAAAA,EAAA43B,EAAAlc,IAAA1b,EAAAA,EAAAA,GAAA,GAEKi/D,GAAuBrnC,EAAAunC,GAAA,GAAAvnC,EAAAwnC,GAChB33C,EAAMyvB,SAAS,YAAWtf,EAAAynC,GAC5B53C,EAAMyvB,SAAS,UAAStf,EAAA0nC,GACpB,SAAC3nB,GACX,GAAIA,EAAS7uB,aAAc,CACzB,IAAIy2C,EAA8B,IAAjB5nB,EAAS14C,MAC1BwoB,EAAMsuB,SAAS,iBAAkBwpB,EACnC,CACF,EAAC3nC,EAAA4nC,GACOjmB,EAAgBn0B,OAAMwS,EAAA9rB,KAAA,GACdoC,EAAKuxD,eAAeh4C,EAAM7lB,KAAI,QAEkB,OAFlBg2B,EAAA8nC,GAAA9nC,EAAAjc,KAAAic,EAAA+nC,GAAA,CAT9CvyC,SAAQwK,EAAAwnC,GACRliE,OAAM06B,EAAAynC,GACNj4C,WAAUwQ,EAAA0nC,GAMVl6C,OAAMwS,EAAA4nC,GACN7xC,SAAQiK,EAAA8nC,IAXJjgB,GAAsB,EAAH7nB,EAAAnc,IAAAmc,EAAAlc,GAAAkc,EAAAunC,GAAAvnC,EAAA+nC,IAazBzxD,EAAKmR,WAAW,iBAAkBk+B,EAAWkC,GAAqB7nB,EAAAN,OAAA,SAC3D2D,GAAWsiB,EAAWkC,IAAoB,yBAAA7nB,EAAAhc,OAAA,GAAA+b,EAAA,KAClD,kBAxBe,OAAAvc,EAAAtS,MAAA,KAAAtI,UAAA,KA0BhB44B,EAAAttB,KAAA,GACqBpM,KAAK4N,EAAE,gBAAgBjM,IAAI29D,GAAW,QAAvD5sC,EAAQgH,EAAAzd,KACZ8L,EAAM4zB,kBAAkB,CACtBjpB,SAAAA,EACAmmB,aAAa,EACbnrB,SAAUgF,EAASU,iBACnBiF,SAAU3F,EAAS5wB,KACnBoxB,QAASR,EAASQ,QAClBC,SAA0C,QAAlC+rC,EAAsB,QAAtBC,EAAEzsC,EAASa,mBAAW,IAAA4rC,GAAM,QAANC,EAApBD,EAAsBe,YAAI,IAAAd,OAAN,EAApBA,EAA4Bc,YAAI,IAAAhB,EAAAA,EAAIxsC,EAASS,SACvD1C,KAAMiC,EAASjC,KACfsC,OAAgC,QAA1ButB,EAAEv4B,EAAMyvB,SAAS,iBAAS,IAAA8I,EAAAA,EAAI5tB,EAASK,OAC7C6mB,gBAAkD,QAAnCylB,EAAEt3C,EAAMyvB,SAAS,0BAAkB,IAAA6nB,EAAAA,EAAI,GACtD1lB,eAAgB,MAGd5xB,IAAU/nB,KAAKgoB,QACjBhoB,KAAKm9D,2BACNzjC,EAAAttB,KAAA,iBAAAstB,EAAAvtB,KAAA,GAAAutB,EAAA3d,GAAA2d,EAAA,UAEGA,EAAA3d,cAAiB+J,IAAe4T,EAAA3d,GAAMokD,SACxCp4C,EAAM4zB,kBAAkB,CACtB9C,aAAa,EACbc,eAAgB,IAGlB5xB,EAAM4zB,kBAAkB,CACtB9C,aAAa,EACbc,eAAgB,EAChBK,YAAWtgB,EAAA3d,KAIXgM,IAAU/nB,KAAKgoB,QACjBhoB,KAAKm9D,2BACN,yBAAAzjC,EAAAxd,OAAA,GAAAud,EAAA,oBAEJ,yBAAAwlC,EAAA71D,MAAA,KAAAtI,UAAA,EAvFA,MAuFAq7D,CAAA,CArZkB,CAASxhB,IAwZ9BwhB,GAASn2D,SAAqB,4lCAyB9Bm2D,GAAS6B,gBAAkB,IAAIt8D,IChcxB,IAAM0+D,GAAK,SAAAnzB,IAAA1nC,EAAAA,EAAAA,GAAA66D,EAAAnzB,GAAA,IAAAznC,GAAAC,EAAAA,EAAAA,GAAA26D,GAGhB,SAAAA,IAAc,IAAA/+D,EAOV,OAPUvB,EAAAA,EAAAA,GAAA,KAAAsgE,GACZ/+D,EAAAmE,EAAAxH,KAAA,OAAQ4hB,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,wBASa,WACrBA,EAAKg/D,cACP,KAACzgD,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,gBAEc,WACbA,EAAKutC,cAAc,gBAAgB,EACrC,KAAChvB,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,sBAEoB,WACnBA,EAAKg/D,cACP,KAACzgD,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,0BAGwB,SAACsG,GAExBtG,EAAKi/D,iBAAmB34D,EAAE/J,MAC5B,KAACgiB,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,wBAGsB,SAACsG,GAClBA,EAAE/J,SAAWyD,EAAKiI,IAAIi3D,QAAU54D,EAAE/J,SAAWyD,EAAKi/D,kBACpDj/D,EAAKg/D,cAET,IA/BEh/D,EAAK2F,OAAK1G,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACLe,EAAK2F,OAAK,IACb,gBAAgB,EAChBw5D,QAAQ,EACRC,aAAcp/D,EAAKq/D,qBACnBr/D,CACJ,CA6FC,OAzEDX,EAAAA,EAAAA,GAAA0/D,EAAA,EAAA1iE,IAAA,OAAA6B,MAOA,WACMS,KAAKsJ,IAAIi3D,OAAOI,UAClB3gE,KAAKsJ,IAAIi3D,OAAOI,YAEhB3gE,KAAKsJ,IAAIi3D,OAAO91D,aAAa,OAAQ,GAEzC,GAAC,CAAA/M,IAAA,OAAA6B,MAED,WACMS,KAAKsJ,IAAIi3D,OAAO39C,MAClB5iB,KAAKsJ,IAAIi3D,OAAO39C,QAEhB5iB,KAAKsJ,IAAIi3D,OAAOt4D,gBAAgB,OAEpC,GAAC,CAAAvK,IAAA,eAAA6B,MAED,WAAe,IAAAiC,EAAA,KAEb,GADAyc,GAAAgtB,EAAAA,EAAAA,GAAAm1B,EAAAtiE,WAAA,qBAAAE,KAAA,MACiC,oBAAtB4iE,kBACT5gE,KAAKsJ,IAAIi3D,OAAOrnD,iBAAiB,QAASlZ,KAAK0gE,oBAC/C1gE,KAAKsJ,IAAIi3D,OAAOrnD,iBAAiB,YAAalZ,KAAK6gE,wBACnD7gE,KAAKsJ,IAAIi3D,OAAOrnD,iBAAiB,UAAWlZ,KAAK8gE,0BAC5C,CACL9gE,KAAKyK,aAAa,kBAAmB,IACrC,IAAIs2D,EAAWx4D,SAAS+G,cAAc,OACtCyxD,EAAS/2B,UAAY,WACrBhqC,KAAKiH,YAAY85D,GACjBA,EAAS7nD,iBAAiB,QAASlZ,KAAKghE,qBAC1C,CAEAhhE,KAAKmG,IAAI,gBAAgB,SAAC2nC,GACpBtsC,EAAKoM,EAAE4yD,SAAW1yB,IACpBtsC,EAAKoM,EAAE4yD,OAAS1yB,GAGdA,GAAetsC,EAAK2/B,IAAIgH,gBAC1B5/B,SAAS2jD,KAAKvmD,MAAMs7D,SAAW,SAE/B14D,SAAS2jD,KAAKvmD,MAAMs7D,SAAW,EAEnC,IAEAjhE,KAAK8gC,eAAe,wBAAwB,SAAClgC,GACvCA,EACFY,EAAKiJ,aAAa,UAAW,IAE7BjJ,EAAKyG,gBAAgB,UAEzB,IAEAjI,KAAKmG,IAAI,UAAU,SAACq6D,GACdA,EACFh/D,EAAK0/D,OAEL1/D,EAAK2/D,MAET,GACF,GAAC,CAAAzjE,IAAA,kBAAA6B,MAED,WACE0e,GAAAgtB,EAAAA,EAAAA,GAAAm1B,EAAAtiE,WAAA,wBAAAE,KAAA,MACAuK,SAAS2jD,KAAKvmD,MAAMs7D,SAAW,GAC/BjhE,KAAKsgE,sBAAmBv/D,EACxBf,KAAKsJ,IAAIi3D,OAAOhnD,oBAAoB,QAASvZ,KAAK0gE,oBAClD1gE,KAAKsJ,IAAIi3D,OAAOhnD,oBAAoB,YAAavZ,KAAK6gE,wBACtD7gE,KAAKsJ,IAAIi3D,OAAOhnD,oBAAoB,UAAWvZ,KAAK8gE,qBACtD,KAACV,CAAA,CAxGe,CAASl3B,KAyG1BtpB,EAAAA,EAAAA,GAzGYwgD,GAAK,qBACY,SA0G9BA,GAAMp6D,SAAqB,8DCtGpB,IAAMo7D,GAAW,SAAC/xD,EAAIkR,GAE3B,IAAI8gD,EAEAC,EAEAC,EAEEC,EAAY,WAAa,QAAA9gD,EAAA5f,UAAA1C,OAATuiB,EAAI,IAAA9Y,MAAA6Y,GAAAzD,EAAA,EAAAA,EAAAyD,EAAAzD,IAAJ0D,EAAI1D,GAAAnc,UAAAmc,GACnBokD,GAKH3uD,aAAa4uD,GACbA,EAAS36D,YACP,WACM8yC,KAAKC,MAAQ6nB,GAAYhhD,IAC3BlR,EAAEjG,WAAC,EAAGuX,GACN4gD,EAAW9nB,KAAKC,MAEpB,GACA51C,KAAK0tC,IAAIjxB,GAAQk5B,KAAKC,MAAQ6nB,GAAW,MAZ3ClyD,EAAEjG,WAAC,EAAGuX,GACN4gD,EAAW9nB,KAAKC,MAChB2nB,GAAa,EAajB,EAUA,OATAxjE,OAAOuB,eAAeoiE,EAAW,SAAU,CACzC/hE,cAAc,EACdC,UAAU,EACVF,YAAY,EACZD,MAAO,WACLmT,aAAa4uD,EACf,IAGK,CACT,EC7BaG,GAAU,SAAAlY,IAAAhkD,EAAAA,EAAAA,GAAAk8D,EAAAlY,GAAA,IAAA/jD,GAAAC,EAAAA,EAAAA,GAAAg8D,GAOrB,SAAAA,IAAc,IAAApgE,EA6BV,OA7BUvB,EAAAA,EAAAA,GAAA,KAAA2hE,GACZpgE,EAAAmE,EAAAxH,KAAA,OAAQ4hB,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,mBALQ,IAAIue,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,kBACL,IAAIue,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,eACN2rC,GAAc6B,WAAWI,cAAWrvB,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,mCAmChB+/D,IAAS,WACrC//D,EAAK0P,cAGV1P,EAAKqgE,sBAEArgE,EAAKotC,mBAAqBptC,EAAKuM,EAAE,sBAAwBvM,EAAKwoC,cACjExoC,EAAKmsC,cAET,GAAG,MAvCDnsC,EAAK2F,OAAK1G,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACLe,EAAK2F,OAAK,IACb26D,gBAAgB,EAChBC,gBAAgB,EAChBC,kBAAkB,EAClBC,mBAAmB,EACnBC,mBAAmB,EACnBC,WAAY,GACZC,mBAAoB,GAEpBC,UAAU,EACVC,MAAO,WACL9gE,EAAKqoD,UAAS,EAChB,EACAsT,SAAU,WACR37D,EAAKmzB,KAAKjW,EAAUW,cACpB7d,EAAK+gE,YACL/gE,EAAKghE,kCACP,EACAC,OAAQ,WACNjhE,EAAKmzB,KAAKjW,EAAUU,WAAY5d,EAAK+5C,4BACrC/5C,EAAKkhE,UACP,EACA98C,SAAU,WACRpkB,EAAK+2C,iBAAiBuF,UACxB,IACAt8C,CACJ,CA4IC,OA1IDX,EAAAA,EAAAA,GAAA+gE,EAAA,EAAA/jE,IAAA,sBAAA6B,MAaA,WAAsB,IAAAiC,EAAA,KACd65C,EAAkBr7C,KAAKo7C,2BAEvBonB,EAAU,CACdl5C,MAAO+xB,EAAgBlD,WACvBsqB,QAASpnB,EAAgB7C,aACzBkqB,UAAWrnB,EAAgB3C,eAC3BiqB,OAAQtnB,EAAgBhD,aAEpBuqB,GAAwBvnB,EAAgBnD,OAAO3D,MACnD,SAAC7sC,GAAG,MAAkB,mBAAbA,EAAImN,MAA0C,kBAAbnN,EAAImN,IAAwB,IAElEguD,EAAUxnB,EAAgBnD,OAAO3D,MAAK,SAAC7sC,GAAG,MAAkB,mBAAbA,EAAImN,IAAyB,IAC5EiuD,EAAQznB,EAAgBlD,cAAgBn4C,KAAKmhC,IAAI4F,SAAW/mC,KAAKmhC,IAAI8F,YAAc,GAErF46B,GAAmB,EACnBkB,GAAU,EACVnB,GAAiB,EAECY,EAAQl5C,MAAQk5C,EAAQC,QAAUD,EAAQE,UAAYF,EAAQG,OAChE,GAAKC,EACvBf,GAAmB,GAEnBkB,GAAU,EACVnB,EAAiBY,EAAQl5C,QAAUk5C,EAAQC,SAAWG,GAVhB,IAAnBJ,EAAQG,QAa7B3iE,KAAK0G,KAAK,CACRi7D,eAAgBoB,EAChBnB,eAAgBA,EAEhBC,iBAAAA,EAEAE,kBAAqC,IAAlBS,EAAQl5C,QAAiBu5C,IAAYC,EACxDhB,mBAAoBgB,GAAS9iE,KAAKmhC,IAAI4F,WAGxC/mC,KAAKypC,SAAS,cAAc,kBAAMjoC,EAAKwhE,eAAeR,EAAQ,GAChE,GAEA,CAAA9kE,IAAA,iBAAA6B,MAIA,SAAeijE,GAAS,IAAA98D,EAAA,KAEhBu9D,EAAgB,SAAC56C,GACrB,IAAM1G,EAAQ6gD,EAAQn6C,GACtB,OAAO3iB,EAAK88B,KAAK,UAADvgC,OAAWomB,GAAU,CACnC1G,MAAOA,GAEX,EACA,OAAI6gD,EAAQE,UAAY,EACfO,EAAc,aAEnBT,EAAQG,OAAS,EACZM,EAAc,UAEnBT,EAAQC,QAAU,EACbQ,EAAc,WAGhBA,EAAc,QACvB,GAAC,CAAAvlE,IAAA,oBAAA4E,IAED,WACE,OAAOtC,KAAKmhC,IAAI0G,eAAiB7nC,KAAKo4C,iBAAiBt2C,KAAO,CAChE,GAAC,CAAApE,IAAA,eAAA6B,MAED,WAAe,IAAA8N,EAAA,KACb4Q,GAAAgtB,EAAAA,EAAAA,GAAAw2B,EAAA3jE,WAAA,qBAAAE,KAAA,MAEAgC,KAAK8pD,iBAAiB9pD,KAAK6pC,cAE3B7pC,KAAK8gC,eAAe,WAAY9gC,KAAKqiE,kCACrCriE,KAAK8gC,eAAe,cAAe9gC,KAAKqiE,kCACxCriE,KAAK8gC,eAAe,cAAe9gC,KAAKqiE,kCAExCriE,KAAKmG,IAAI,oBAAoB,SAACkoC,GACvBhhC,EAAKohC,mBAAqBJ,IAAoBhhC,EAAKw8B,eACtDx8B,EAAKO,EAAE,oBAAsBP,EAAK61D,aAEtC,IAIAljE,KAAKo4C,iBAAiBkF,kBAAkBt9C,KAAKqiE,kCAE7CriE,KAAKmG,IACH,eACA,SAAC+3C,GACC7wC,EAAKg1D,mCAELh1D,EAAK3G,KAAK,CACRw7D,SAAUhkB,EAAK9/C,OAAS,IAGrBiP,EAAK8zB,IAAIgG,eACZ95B,EAAK+0D,WAET,IACA,GAGFpiE,KAAKmG,IACH,qBAEA,SAAC+xC,GACC,IAAMirB,EAAajrB,EAAOtzB,QAAO,SAACld,GAAG,MAAkB,0BAAbA,EAAImN,IAAgC,IAAE,GAC3EsuD,EAML91D,EAAK3G,KAAK,CACRu7D,mBAAoBkB,EAAW79C,UAN/BjY,EAAK3G,KAAK,CACRu7D,mBAAoB,MAO1B,GAEJ,GAAC,CAAAvkE,IAAA,kBAAA6B,MAED,WACE0e,GAAAgtB,EAAAA,EAAAA,GAAAw2B,EAAA3jE,WAAA,wBAAAE,KAAA,MACAgC,KAAKo4C,iBAAiBX,oBAAoBz3C,KAAKqiE,iCACjD,KAACZ,CAAA,CAjLoB,CAAS9mB,IAoLhC8mB,GAAWz7D,SAAqB,k3CC/LzB,IAAMo9D,GAAS,SAAA7Z,IAAAhkD,EAAAA,EAAAA,GAAA69D,EAAA7Z,GAAA,IAAA/jD,GAAAC,EAAAA,EAAAA,GAAA29D,GAAA,SAAAA,IAAA,IAAA/hE,GAAAvB,EAAAA,EAAAA,GAAA,KAAAsjE,GAAA,QAAA1iD,EAAA5f,UAAA1C,OAAAuiB,EAAA,IAAA9Y,MAAA6Y,GAAAzD,EAAA,EAAAA,EAAAyD,EAAAzD,IAAA0D,EAAA1D,GAAAnc,UAAAmc,GAoBjB,OApBiB5b,EAAAmE,EAAAxH,KAAAoL,MAAA5D,EAAA,OAAAvD,OAAA0e,KAAAf,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,mBACF,IAAIue,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,eACP2rC,GAAc6B,WAAWt4B,MAAGqJ,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,SAAAf,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAGtCe,EAAK2F,OAAK,IACbq8D,gBAAgB,EAChBrG,SAAU,SAACr1D,GACTA,EAAEklD,iBAEF,IAAIn2C,EAAMrV,EAAKiI,IAAI0C,MAAa,MAChC3K,EAAK+tD,eAAe14C,EAAK,CAAElZ,OAAQ81C,GAAaG,UAChDpyC,EAAKuM,EAAE,oBAAsBo/B,GAAc6B,WAAWI,WACxD,EACAxpB,SAAU,WACRpkB,EAAKmsC,aACP,EACA81B,QAAS,SAAC37D,GACR,IAAIpI,EAAyCoI,EAAE/J,OAAQ2B,MACvD8B,EAAKqF,KAAK,CAAE28D,gBAAiB9jE,GAC/B,KAAC8B,CAAA,CAWF,OAXEX,EAAAA,EAAAA,GAAA0iE,EAAA,EAAA1lE,IAAA,eAAA6B,MAGH,WAAe,IAAAiC,EAAA,KACbyc,GAAAgtB,EAAAA,EAAAA,GAAAm4B,EAAAtlE,WAAA,qBAAAE,KAAA,MACAgC,KAAK8pD,iBAAiB9pD,KAAK6pC,aAAc,CACvCmE,WAAY,WACVxsC,EAAK8H,IAAI0C,MAAa,MAAI,GAC1BxK,EAAK8H,IAAI0C,MAAMu3D,OACjB,GAEJ,KAACH,CAAA,CA/BmB,CAASzoB,IAkC/ByoB,GAAUp9D,SAAqB,muBCtCxB,IAAMw9D,GAAuB,WAClC,MAAwC,qBAA1B/J,UAAUgK,WAC1B,ECIaC,GAAY,SAAAna,IAAAhkD,EAAAA,EAAAA,GAAAm+D,EAAAna,GAAA,IAAA/jD,GAAAC,EAAAA,EAAAA,GAAAi+D,GAAA,SAAAA,IAAA,IAAAriE,GAAAvB,EAAAA,EAAAA,GAAA,KAAA4jE,GAAA,QAAAhjD,EAAA5f,UAAA1C,OAAAuiB,EAAA,IAAA9Y,MAAA6Y,GAAAzD,EAAA,EAAAA,EAAAyD,EAAAzD,IAAA0D,EAAA1D,GAAAnc,UAAAmc,GAwFhB,OAxFgB5b,EAAAmE,EAAAxH,KAAAoL,MAAA5D,EAAA,OAAAvD,OAAA0e,KAAAf,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,mBACL,IAAIue,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,eACP2rC,GAAc6B,WAAWE,SAAMnvB,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,oBAG1B,OAAIue,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,SAAAf,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAGnBe,EAAK2F,OAAK,IACb28D,MAAO,KACPC,kBAAmB,KACnBC,iBAAiB,EACjBC,aAAa,EACbC,eAAe,EACfC,iBAAkBR,KAClBS,oBAAqB,KACrBC,oBAAoB,EACpBC,YAAa,GAEbC,qBAAsB,SAACz8D,GAErBtG,EAAKgjE,kBAAoB18D,EAAE/J,OAAO2B,MAClC8B,EAAKijE,UACP,EACA7+C,SAAU,WACRpkB,EAAKmsC,aACP,EACA+2B,OAAQ,WACNljE,EAAKmjE,OACP,EACAC,qBAAsB,WACpBpjE,EAAKijE,UACP,MAAC1kD,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,eAIW,WACRmiE,MACFniE,EAAKqjE,wBAEPrjE,EAAKijE,UACP,KAAC1kD,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,iBAGe,WACVA,EAAKsjE,mBACPtjE,EAAKsjE,oBAGPtjE,EAAKujE,cACP,KAAChlD,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,4BAG0B,WACzBA,EAAKijE,UACP,KAAC1kD,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,uBAMsB6e,GAAS,SAACo4B,GAC/Bj3C,EAAK4oC,UAAUC,OAAO,cAAyB,YAAVoO,GAEvB,YAAVA,EACFj3C,EAAKqF,KAAK,CACRo9D,aAAa,EACbD,iBAAiB,EACjBE,eAAe,IAEE,WAAVzrB,GACTj3C,EAAKuM,EAAEu2D,YAAc,4BACrB9iE,EAAKqF,KAAK,CACRo9D,aAAa,EACbD,iBAAiB,EACjBE,eAAe,IAEjB1iE,EAAKujE,iBAELvjE,EAAKuM,EAAEu2D,YAAc,4BAErB9iE,EAAKqF,KAAK,CACRo9D,aAAa,EACbD,iBAAiB,EACjBE,eAAe,IAEjB1iE,EAAKujE,eAET,GAAG,MAAIvjE,CAAA,CAsHN,OArJDX,EAAAA,EAAAA,GAAAgjE,EAAA,EAAAhmE,IAAA,wBAAA6B,MAiCe,WAAf,IAAAslE,GAAAlpD,EAAAA,EAAAA,GAAAC,EAAAA,MACA,SAAAC,IAAA,OAAAD,EAAAA,MAAA,SAAAE,GAAA,cAAAA,EAAA3P,KAAA2P,EAAA1P,MAAA,cAAA0P,EAAA3P,KAAA,EAAA2P,EAAA1P,KAAA,EAGoCqtD,UAAUgK,YAAY73C,MAAM,CAAEhtB,KAAM,WAAW,OAAxDkd,EAAAG,KACH/C,iBAAiB,SAAUlZ,KAAK8kE,0BAA0BhpD,EAAA1P,KAAA,gBAAA0P,EAAA3P,KAAA,EAAA2P,EAAAC,GAAAD,EAAA,SAE9E9Z,QAAQgG,IAAI,kEAAiE8T,EAAAC,IAC7E/b,KAAKskE,WAAW,yBAAAxoD,EAAAI,OAAA,GAAAL,EAAA,kBAEnB,yBAAAgpD,EAAAz7D,MAAA,KAAAtI,UAAA,EAVc,IAYf,CAAApD,IAAA,WAAA6B,MAAA,eAAAwlE,GAAAppD,EAAAA,EAAAA,GAAAC,EAAAA,MACA,SAAAqc,IAAA,IAAA+sC,EAAAC,EAAAzjE,EAAA,YAAAoa,EAAAA,MAAA,SAAAsc,GAAA,cAAAA,EAAA/rB,KAAA+rB,EAAA9rB,MAAA,OA0BwC,OAzBlC44D,EAAS,CACXrB,MAAO,CACLxzB,MAAO,CACL+0B,MAAO,MAET90B,OAAQ,CACN80B,MAAO,MAETC,UAAW,CACTD,MAAO,KAGXE,OAAO,GAELplE,KAAKqkE,oBACPW,EAAOrB,MAAM0B,SAAW,CACtBvC,MAAO9iE,KAAKqkE,oBAIhBrkE,KAAKslE,QAAU/8D,SAAS+G,cAAc,UAEtCtP,KAAKulE,KAAOvlE,KAAKslE,QAAQrR,WAAW,MAAM/7B,EAAA/rB,KAAA,EAGxCnM,KAAKwlE,qBAAqB,UAAUttC,EAAA9rB,KAAA,EACjBqtD,UAAUgM,aAAaC,aAAaV,GAAO,QAA1DC,EAAM/sC,EAAAjc,MACH/C,iBAAiB,YAAY,WAClC1X,EAAKgkE,qBAAqB,SAC5B,IACAxlE,KAAK4N,EAAE+1D,MAAQsB,EAEfjlE,KAAK2lE,YAAa,EAClB3lE,KAAKwlE,qBAAqB,WAAWttC,EAAA9rB,KAAA,iBAAA8rB,EAAA/rB,KAAA,GAAA+rB,EAAAnc,GAAAmc,EAAA,SAErCl4B,KAAKwlE,qBAAqB,UAC1BxjE,QAAQuV,MAAM,2BAA0B2gB,EAAAnc,IAAO,yBAAAmc,EAAAhc,OAAA,GAAA+b,EAAA,mBAElD,yBAAA8sC,EAAA37D,MAAA,KAAAtI,UAAA,EAxCD,IA0CA,CAAApD,IAAA,eAAA6B,MACA,WACuB,IAAAqmE,EAAjB5lE,KAAK2lE,aACK,QAAZC,EAAA5lE,KAAK4N,EAAE+1D,aAAK,IAAAiC,GAAZA,EAAcC,YAAY,GAAG3pD,OAC7Blc,KAAK4N,EAAE+1D,MAAQ,KACf3jE,KAAK2lE,YAAa,EAEtB,GAEA,CAAAjoE,IAAA,QAAA6B,MACA,WAAQ,IAAAmG,EAAA,KACN1F,KAAKslE,QAAQl1B,OAASpwC,KAAKsJ,IAAIq6D,MAAmB,YAClD3jE,KAAKslE,QAAQn1B,MAAQnwC,KAAKsJ,IAAIq6D,MAAkB,WAEhD3jE,KAAKulE,KAAKnR,UAAUp0D,KAAKsJ,IAAIq6D,MAAO,EAAG,GACvC,IAAMmC,EAAOrsB,KAAKC,MACZ96C,EAAO,UAAHqD,OAAa6jE,EAAI,SACrBrhB,EAAS,aACfzkD,KAAKslE,QAAQvR,QAAO,SAACp8B,GACnB,IAAItN,EAAO,IAAIV,KAAK,CAACgO,GAAO/4B,EAAM,CAChC46C,aAAcssB,EACdjxD,KAAM4vC,IAER/+C,EAAKu4C,kBAAkB5zB,EAAM,CAAE7sB,OAAQ81C,GAAavE,SACpDrpC,EAAKgB,KAAK,CACR,mBAAoBsmC,GAAc6B,WAAWI,aAEjD,GAAGwV,EACL,GAAC,CAAA/mD,IAAA,eAAA6B,MAAA,eAAAwmE,GAAApqD,EAAAA,EAAAA,GAAAC,EAAAA,MAED,SAAA6d,IAAA,IAAAusC,EAAAC,EAAAhC,EAAA52D,EAAA,YAAAuO,EAAAA,MAAA,SAAA8d,GAAA,cAAAA,EAAAvtB,KAAAutB,EAAAttB,MAAA,OASK,OARH6R,GAAAgtB,EAAAA,EAAAA,GAAAy4B,EAAA5lE,WAAA,qBAAAE,KAAA,MACAgC,KAAK8pD,iBAAiB9pD,KAAK6pC,aAAc,CACvCmE,WAAYhuC,KAAKkmE,YACjBj4B,aAAcjuC,KAAKmmE,gBAGrBnmE,KAAK8gC,eAAe,gBAAgB,SAAClgC,GACnCyM,EAAKO,EAAEg2D,kBAAoBhjE,EAAM,aAAe,IAClD,IAAG84B,EAAAvtB,KAAA,EAAAutB,EAAAttB,KAAA,EAGsBqtD,UAAUgM,aAAaW,mBAAkB,OAA5DH,EAAUvsC,EAAAzd,MACVgoD,EAAsBgC,EACvBrhD,QAAO,SAAC4L,GACP,MAAqB,eAAdA,EAAK65B,IACd,IACC3gD,KAAI,SAAC8mB,EAAMhsB,GACV,MAAO,CACL6e,KAAMmN,EAAK61C,MAAMp8D,QAAU,GAAJhI,OAAOoL,EAAKm1B,KAAK,kBAAiB,KAAAvgC,OAAIuC,EAAM,GACnEjF,MAAOixB,EAAK60C,SAEhB,KACsBjnE,OAAS,IAC/B4B,KAAK4N,EAAEq2D,oBAAsBA,EAC7BjkE,KAAK4N,EAAEs2D,oBAAqB,GAE9BlkE,KAAKqkE,kBAA0C,QAAzB2B,EAAG/B,EAAoB,UAAE,IAAA+B,OAAA,EAAtBA,EAAwBzmE,MAAMm6B,EAAAttB,KAAA,iBAAAstB,EAAAvtB,KAAA,GAAAutB,EAAA3d,GAAA2d,EAAA,kCAAAA,EAAAxd,OAAA,GAAAud,EAAA,mBAK1D,yBAAAssC,EAAA38D,MAAA,KAAAtI,UAAA,EAlCA,MAkCA4iE,CAAA,CA9MsB,CAAS/oB,IAiNlC+oB,GAAa19D,SAAqB,yvCCpNY,IACxCsgE,GAAsB,SAAA/c,IAAAhkD,EAAAA,EAAAA,GAAA+gE,EAAA/c,GAAA,IAAA/jD,GAAAC,EAAAA,EAAAA,GAAA6gE,GAAA,SAAAA,IAAA,IAAAjlE,GAAAvB,EAAAA,EAAAA,GAAA,KAAAwmE,GAAA,QAAA5lD,EAAA5f,UAAA1C,OAAAuiB,EAAA,IAAA9Y,MAAA6Y,GAAAzD,EAAA,EAAAA,EAAAyD,EAAAzD,IAAA0D,EAAA1D,GAAAnc,UAAAmc,GACL,OADK5b,EAAAmE,EAAAxH,KAAAoL,MAAA5D,EAAA,OAAAvD,OAAA0e,KAAAf,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,kBACT,GAAIA,CAAA,CAYpB,OAZoBX,EAAAA,EAAAA,GAAA4lE,EAAA,EAAA5oE,IAAA,eAAA6B,MAErB,WACE0e,GAAAgtB,EAAAA,EAAAA,GAAAq7B,EAAAxoE,WAAA,qBAAAE,KAAA,MAEAgC,KAAK4N,EAAE,iBAAiB24D,WAAWvmE,KACrC,GAAC,CAAAtC,IAAA,kBAAA6B,MAED,WACE0e,GAAAgtB,EAAAA,EAAAA,GAAAq7B,EAAAxoE,WAAA,wBAAAE,KAAA,MAEAgC,KAAK4N,EAAE,iBAAiB44D,aAAaxmE,KACvC,KAACsmE,CAAA,CAbyB,CAAS3rB,IAgBrC2rB,GAAuB/nD,UAAYA,EAwB5B,IAAMkoD,GAA8EH,GC1C9EI,GAAc,oBAAAA,KAAA5mE,EAAAA,EAAAA,GAAA,KAAA4mE,IAAA9mD,EAAAA,EAAAA,GAAA,sBACR,wBAAqBA,EAAAA,EAAAA,GAAA,qBACtB,iBAAcA,EAAAA,EAAAA,GAAA,sBACb,QAAKA,EAAAA,EAAAA,GAAA,mBACR,KAAI,CAMjB,OANiBlf,EAAAA,EAAAA,GAAAgmE,EAAA,EAAAhpE,IAAA,gBAAA6B,MAClB,WACEyC,QAAQgG,IAAI,YACd,GAAC,CAAAtK,IAAA,aAAA6B,MACD,WACES,KAAkB,aACpB,KAAC0mE,CAAA,CAVwB,GAadC,GAAkB,SAAA/rB,IAAAr1C,EAAAA,EAAAA,GAAAohE,EAAA/rB,GAAA,IAAAp1C,GAAAC,EAAAA,EAAAA,GAAAkhE,GAAA,SAAAA,IAAA,IAAAtlE,GAAAvB,EAAAA,EAAAA,GAAA,KAAA6mE,GAAA,QAAAjmD,EAAA5f,UAAA1C,OAAAuiB,EAAA,IAAA9Y,MAAA6Y,GAAAzD,EAAA,EAAAA,EAAAyD,EAAAzD,IAAA0D,EAAA1D,GAAAnc,UAAAmc,GAciB,OAdjB5b,EAAAmE,EAAAxH,KAAAoL,MAAA5D,EAAA,OAAAvD,OAAA0e,KAAAf,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,eACd2rC,GAAc6B,WAAWK,eAAYtvB,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,YAGxC,IAAIqlE,KAAgB9mD,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,SAAAf,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAG3Be,EAAK2F,OAAK,IACb4/D,gBAAiB,GACjBC,WAAY,GACZC,cAAe,GACfC,WAAY,GACZ,gBAAiB,KACjBC,UAAW3lE,EAAK4lE,UAAUC,cAC1BC,OAAQ9lE,EAAK4lE,UAAUG,WAAWjpD,MAAI7Q,EAAAA,EAAAA,GAAAjM,OAAMA,CAAA,CA4B7C,OAvCDX,EAAAA,EAAAA,GAAAimE,EAAA,EAAAjpE,IAAA,eAAA6B,MAcA,WAAe,IAAAiC,EAAA,KACbyc,GAAAgtB,EAAAA,EAAAA,GAAA07B,EAAA7oE,WAAA,qBAAAE,KAAA,MACAgC,KAAK0G,KAAK,CACRmgE,WAAY7mE,KAAKwiC,KAAKxiC,KAAKinE,UAAUI,eACrCP,cAAe9mE,KAAKwiC,KAAKxiC,KAAKinE,UAAUK,gBACxCP,WAAY/mE,KAAKwiC,KAAKxiC,KAAKinE,UAAUM,eAEvCvnE,KAAKmG,IAAI,iBAAiB,SAA+BqhE,GAClDA,GAGLhmE,EAAKkF,KAAK,CACR,mBAAoBsmC,GAAc6B,WAAWK,aAC7C03B,gBAAiBplE,EAAKghC,KAAKglC,EAAIC,gBAC/BZ,WAAYrlE,EAAKghC,KAAKglC,EAAIH,eAC1BP,cAAetlE,EAAKghC,KAAKglC,EAAIF,gBAC7BP,WAAYvlE,EAAKghC,KAAKglC,EAAID,aAC1BJ,OAAQ,WACNK,EAAIJ,YACN,EACAJ,UAAW,WACTQ,EAAIN,eACN,GAEJ,GACF,KAACP,CAAA,CA1C4B,CAAS35B,IA6CxC25B,GAAmB3gE,SAAqB,6oBC1DjC,IAAM0hE,GAAiB,SAAAne,IAAAhkD,EAAAA,EAAAA,GAAAmiE,EAAAne,GAAA,IAAA/jD,GAAAC,EAAAA,EAAAA,GAAAiiE,GAAA,SAAAA,IAAA,IAAArmE,GAAAvB,EAAAA,EAAAA,GAAA,KAAA4nE,GAAA,QAAAhnD,EAAA5f,UAAA1C,OAAAuiB,EAAA,IAAA9Y,MAAA6Y,GAAAzD,EAAA,EAAAA,EAAAyD,EAAAzD,IAAA0D,EAAA1D,GAAAnc,UAAAmc,GAMN,OANM5b,EAAAmE,EAAAxH,KAAAoL,MAAA5D,EAAA,OAAAvD,OAAA0e,KAAAf,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,SAAAf,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAEvBe,EAAK2F,OAAK,IACbgoD,SAAS,EACTzvD,MAAO,EAEP,kBAAmB,KAAC8B,CAAA,CAgCrB,OAhCqBX,EAAAA,EAAAA,GAAAgnE,EAAA,EAAAhqE,IAAA,eAAA6B,MAGtB,WAAe,IAAAiC,EAAA,KACbyc,GAAAgtB,EAAAA,EAAAA,GAAAy8B,EAAA5pE,WAAA,qBAAAE,KAAA,MAEAgC,KAAKm9C,qBAAuBn9C,KAAKo4C,iBAAiBkF,mBAAkB,WAClE,IAAIqqB,EAAenmE,EAAK42C,iBAAiB5xC,QAAQ+tC,MAAK,SAAClY,GAErD,OADW76B,EAAK42C,iBAAiB7mC,KAAK8qB,GAC1Bmb,SAAS,cACvB,IAEAh2C,EAAKoM,EAAEohD,QAAU2Y,CACnB,IAEA3nE,KAAKmG,IAAI,WAAW,SAAC6oD,GACfA,EACFxtD,EAAKiJ,aAAa,SAAU,IAE5BjJ,EAAKyG,gBAAgB,SAEzB,IAEAjI,KAAKmG,IAAI,mBAAmB,SAAC8xC,GAC3Bz2C,EAAKoM,EAAErO,MAAQ04C,CACjB,GACF,GAAC,CAAAv6C,IAAA,kBAAA6B,MAED,WAAkB,IAAAy9C,EAChB/+B,GAAAgtB,EAAAA,EAAAA,GAAAy8B,EAAA5pE,WAAA,wBAAAE,KAAA,MAEyB,QAAzBg/C,EAAAh9C,KAAKm9C,4BAAoB,IAAAH,GAAzBA,EAAAh/C,KAAAgC,KACF,KAAC0nE,CAAA,CAtC2B,CAAS/sB,IAyCvC+sB,GAAkB1hE,SAAqB,6ECzChC,IAAM4hE,GAAW,SAAA36B,IAAA1nC,EAAAA,EAAAA,GAAAqiE,EAAA36B,GAAA,IAAAznC,GAAAC,EAAAA,EAAAA,GAAAmiE,GAAA,SAAAA,IAAA,IAAAvmE,GAAAvB,EAAAA,EAAAA,GAAA,KAAA8nE,GAAA,QAAAlnD,EAAA5f,UAAA1C,OAAAuiB,EAAA,IAAA9Y,MAAA6Y,GAAAzD,EAAA,EAAAA,EAAAyD,EAAAzD,IAAA0D,EAAA1D,GAAAnc,UAAAmc,GAOV,OAPU5b,EAAAmE,EAAAxH,KAAAoL,MAAA5D,EAAA,OAAAvD,OAAA0e,KAAAf,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,SAEb,IAACue,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,SAAAf,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAGLe,EAAK2F,OAAK,IACbmpC,MAAO,EACP03B,QAAS,KAACxmE,CAAA,CAyBX,OA/BDX,EAAAA,EAAAA,GAAAknE,EAAA,EAAAlqE,IAAA,eAAA6B,MASA,WAAe,IAAAiC,EAAA,KACbyc,GAAAgtB,EAAAA,EAAAA,GAAA28B,EAAA9pE,WAAA,qBAAAE,KAAA,MACAgC,KAAK2pD,eAAe,SAAS,SAACpqD,GAC5B,QAAcwB,IAAVxB,EAAJ,CAGA,IAAMuoE,EAAYtmE,EAAKsb,OACvBtb,EAAKsb,OAASvd,EAEA,IAAVA,GAAeuoE,EAAY,EAC7BtmE,EAAK8H,IAAIof,KAAKxP,iBAAiB,iBAAiB,WAC9C1X,EAAKmE,MAAMyK,YAAY,YAAa5O,EAAKsb,OAAO2F,WAClD,IAIFjhB,EAAKmE,MAAMyK,YAAY,YAAa5O,EAAKsb,OAAO2F,WAXhD,CAYF,IAEAziB,KAAK2pD,eAAe,WAAW,SAACqF,GAC9BxtD,EAAK8H,IAAIof,KAAKuhB,UAAUC,OAAO,oBAAqB8kB,EACtD,GACF,KAAC4Y,CAAA,CAhCqB,CAAS1+B,IAmCjC0+B,GAAY5hE,SAAqB,4CCrC1B,IAAM+hE,GACX,qHCGWC,GAAW,SAAA/6B,IAAA1nC,EAAAA,EAAAA,GAAAyiE,EAAA/6B,GAAA,IAAAznC,GAAAC,EAAAA,EAAAA,GAAAuiE,GAOtB,SAAAA,IAAc,IAAA3mE,EAHc,OAGdvB,EAAAA,EAAAA,GAAA,KAAAkoE,GACZ3mE,EAAAmE,EAAAxH,KAAA,OAAQ4hB,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,SAAAf,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GANLe,EAAK2F,OAAK,IACbihE,cAAc,EACd5jB,IAAK0jB,MAAqB1mE,CAK5B,CAkCC,OAlCAX,EAAAA,EAAAA,GAAAsnE,EAAA,EAAAtqE,IAAA,eAAA6B,MAED,WAAe,IAAAiC,EAAA,KACbyc,GAAAgtB,EAAAA,EAAAA,GAAA+8B,EAAAlqE,WAAA,qBAAAE,KAAA,MACAgC,KAAKmG,IAAI,gBAAgB,WACvB3E,EAAKmE,MAAMuiE,gBAAkB1mE,EAAKoH,aAAa,gBAAkB,OAAH3G,OfF7D,WAA0E,IAA9BkmE,EAAMrnE,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAAG,oBAC1D,OAAOw6D,GAAwB,2IAAPr5D,OADcnB,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAAG,OAEgB,6DAAAmB,OACNkmE,EAAM,+DAAAlmE,OACJkmE,EAAM,kBAE7D,CeJ8EC,GAAmB,KAAM,OACnG,GACF,GAAC,CAAA1qE,IAAA,kBAAA6B,MAED,WACE0e,GAAAgtB,EAAAA,EAAAA,GAAA+8B,EAAAlqE,WAAA,wBAAAE,KAAA,MACAuY,IAAIqlC,gBAAgB57C,KAAKqoE,eAC3B,GAEA,CAAA3qE,IAAA,WAAA6B,MACA,SAAS2nD,GACPlnD,KAAK4N,EAAEy2C,IAAM6C,EAAI7C,GACnB,GAEA,CAAA3mD,IAAA,eAAA6B,MACA,SAAao8D,GACX,IAAIjlD,EAAMH,IAAIC,gBAAgBmlD,GAC9B37D,KAAK4N,EAAEy2C,IAAM3tC,EACb1W,KAAKqoE,eAAiB3xD,CACxB,GAEA,CAAAhZ,IAAA,cAAA6B,MACA,SAAYmX,GACV1W,KAAK4N,EAAEy2C,IAAM3tC,CACf,GAAC,CAAAhZ,IAAA,QAAA6B,MAED,WACEgX,IAAIqlC,gBAAgB57C,KAAKqoE,gBACzBroE,KAAK4N,EAAEy2C,IAAM0jB,EACf,KAACC,CAAA,CA3CqB,CAAS9+B,ICJjC,SAASo/B,KAAmB,QAAA5nD,EAAA5f,UAAA1C,OAANuiB,EAAI,IAAA9Y,MAAA6Y,GAAAzD,EAAA,EAAAA,EAAAyD,EAAAzD,IAAJ0D,EAAI1D,GAAAnc,UAAAmc,GACxB,OAAO0D,EAAKhiB,QAAO,SAACgM,EAAQ49D,GAC1B,GAAmB,kBAARA,EAET,OADA59D,EAAO49D,IAAO,EACP59D,EAGT,IAAK,IAALkH,EAAA,EAAAiS,EAAkBjmB,OAAOmD,KAAKunE,GAAI12D,EAAAiS,EAAA1lB,OAAAyT,IAAE,CAA/B,IAAI4d,EAAK3L,EAAAjS,GACZlH,EAAO8kB,GAAS84C,EAAI94C,EACtB,CAEA,OAAO9kB,CACT,GAAG,CAAC,EACN,CAEO,SAAS69D,KACd,IAAIjmB,EAAU+lB,GAASl/D,WAAC,EAADtI,WACvB,OAAOjD,OAAOmD,KAAKuhD,GAChB5jD,QAAO,SAACgM,EAAQ8kB,GAKf,OAJI8yB,EAAQ9yB,IACV9kB,EAAO5C,KAAK0nB,GAGP9kB,CACT,GAAG,IACFf,KAAK,IACV,CDwBAo+D,GAAYhiE,SAAqB,0EAEjCgiE,GAAYjkB,eAAe,CACzBkkB,aAAc,iBE/CT,IAAMQ,GAAY,SAACC,GACxB,IAAKA,EAAM,OAAOtiC,GAClB,IzDL6B7mC,EyDKvBopE,GzDLuBppE,EyDKEmpE,EzDJ1BnpE,EAIEA,EAAM+E,MAAM,KAAKoF,KAAI,SAACjD,GAAI,OAAKA,EAAKwD,MAAM,IAHxC,IyDG4B2a,QAAO,SAACgkD,GAAG,OAAKxiC,GAASnlC,SAAS2nE,EAAI,IAC3E,OAAuB,IAAnBD,EAAQvqE,OACHgoC,GAEFuiC,CACT,ECbA,ICGaE,GAAqB,OAAV5mE,ODHxB,ysUCIkB,yvBAAAA,OAkBE8lE,GAAqB,+gBCH5Be,GAAqB,SAAA77B,IAAA1nC,EAAAA,EAAAA,GAAAujE,EAAA77B,GAAA,IAAAznC,GAAAC,EAAAA,EAAAA,GAAAqjE,GAIhC,SAAAA,IAAc,IAAAznE,ECdUyD,EDoBpB,OANUhF,EAAAA,EAAAA,GAAA,KAAAgpE,GACZznE,EAAAmE,EAAAxH,KAAA,OAAQ4hB,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,YAJC,IAAIue,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,uBAaQ6e,EAAS7e,EAAK0nE,YAAY5qD,MAAI7Q,EAAAA,EAAAA,GAAAjM,IAAQ,MAP3DA,EAAK2F,OAAK1G,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACLe,EAAK2F,QClBYlC,GDmBRwI,EAAAA,EAAAA,GAAAjM,GClBT,CACL,eAAgB,KAChB,WAAY,KACZ,aAAc,KACd,SAAU,KACV,kBAAmB,KACnB,oBAAoB,EACpB,aAAc,KAEd,yBAA0B,CAAC,EAE3B,kBAAmB,GACnB,WAAY+kC,GACZ,SAAUJ,GAAMC,KAEhBle,MAAO,KACPihD,UAAW,KACXC,YAAY,EACZC,aAAc,GACdh2C,SAAS,EACTnc,IAAK,GACLstC,IAAK0jB,GACLoB,SAAU,GACVC,YAAY,EAGZ34C,KAAM,KACNsC,OAAQ,KACRkV,WAAY,GACZygC,KAAM9hC,GAAaR,IAEnB,4BAA4B,EAC5B,yBAAyB,EACzB,0BAA0B,EAC1B,0BAA0B,EAE1B,mBAAoB,WAClB,IACsBl/B,EADlBmiE,EAASvkE,EAAMC,iBAAiB,OAAOsC,GAAAC,EAAAA,EAAAA,GAC3B+hE,GAAM,IAAtB,IAAAhiE,EAAAE,MAAAL,EAAAG,EAAAG,KAAAC,MAAwB,KAAfy/C,EAAGhgD,EAAA3H,MACN+pE,EAAcpiB,EAAI7C,IACtB6C,EAAI7C,IAAM0jB,GACV7gB,EAAI7C,IAAMilB,CACZ,CAAC,OAAA5hE,IAAAL,EAAAM,EAAAD,GAAA,SAAAL,EAAAO,GAAA,CACD9C,EAAM8I,EAAE,qBAAsB,CAChC,EAEA,YAAa,SAACq3B,GACZ,GAAKA,EAAL,CAGA,IAAIskC,EAAczkE,EAAM8I,EAAE,gBACtBgsC,EAAkB3W,GAAsB+B,GAA4BC,GAAkB,WAItFukC,EAAY,CACdD,YAAAA,EACA3vB,gBAAAA,EACA7mB,OANWsR,GAAaklC,EAAa3vB,GAOrC3U,gBAAAA,GAEFngC,EAAMyT,cACJ,IAAIH,YAAY,QAAS,CACvBE,OAAQkxD,EACRC,SAAS,EACTC,UAAU,KAGd5kE,EAAMlD,QAnBN,CAoBF,EACA,aAAc,WACZkD,EAAMlD,SAENkD,EAAMyT,cACJ,IAAIH,YAAY,SAAU,CACxBqxD,SAAS,EACTC,UAAU,IAGhB,KD5DEroE,CACJ,CA4LC,OA1LDX,EAAAA,EAAAA,GAAAooE,EAAA,EAAAprE,IAAA,cAAA6B,MAOA,SAAY2hE,GACVlhE,KAAK4N,EAAEw7D,WAAalI,CACtB,GAEA,CAAAxjE,IAAA,eAAA6B,MAMA,WAAe,IAAAiC,EAAA,KAEb,OAAO,IAAImb,SAAQ,SAACC,EAASC,GAC3B,IAAMwD,EAAY1Z,YAAW,WAC3BkW,EAAO,IAAI/P,MAAM,oEACnB,GAJc,KAKR68D,EAAiB,IAAIC,gBAAe,SAAAluD,GAAe,IAAb0uB,GAAaniB,EAAAA,GAAAA,GAAAvM,EAAA,GAAN,GAC7C0uB,EAAQy/B,YAAY15B,MAAQ,GAAK/F,EAAQy/B,YAAYz5B,OAAS,IAChExzB,IACAlK,aAAa2N,GACbspD,EAAe31D,aAEnB,IACA21D,EAAe50D,QAAQvT,EACzB,GACF,GAAC,CAAA9D,IAAA,eAAA6B,MAED,WACE0e,GAAAgtB,EAAAA,EAAAA,GAAA69B,EAAAhrE,WAAA,qBAAAE,KAAA,MAEAgC,KAAK4N,EAAE,YAAc5N,KAAKsJ,IAAI,YAC9BtJ,KAAK4N,EAAE,cAAgB5N,KAAKsJ,IAAI,cAChCtJ,KAAK4N,EAAE,mBAAqB5N,KAAKsJ,IAAI,oBAErCtJ,KAAK8pE,YACP,GAAC,CAAApsE,IAAA,cAAA6B,MAAA,eAAAwqE,GAAApuD,EAAAA,EAAAA,GAAAC,EAAAA,MAED,SAAAC,IAAA,IAAA4U,EAAA84C,EAAAxmC,EAAAkC,EAAA+kC,EAAAj3C,EAAAk3C,EAAA95B,EAAAC,EAAA,OAAAx0B,EAAAA,MAAA,SAAAE,GAAA,cAAAA,EAAA3P,KAAA2P,EAAA1P,MAAA,UACOpM,KAAK+Q,YAAa,CAAF+K,EAAA1P,KAAA,eAAA0P,EAAA8b,OAAA,wBAAA9b,EAAA1P,KAAA,EAGfpM,KAAKkqE,eAAc,WAErBlqE,KAAK4N,EAAEmlB,OAAQ,CAAFjX,EAAA1P,KAAA,SAE2C,GADpDqkB,EAAOgT,GAAYzjC,KAAK4N,EAAEmlB,SAC1Bw2C,EAAc9kC,GAAkBzkC,KAAK4N,EAAEmlB,OAAQtC,MACjCzwB,KAAK4N,EAAE,gBAAe,CAAAkO,EAAA1P,KAAA,eAAA0P,EAAA8b,OAAA,iBAG1C53B,KAAK4N,EAAE,gBAAkB27D,EACnBxmC,EAAaa,GAAkB5jC,KAAK4N,EAAEmlB,QACtCkS,EAAkBU,GAA4B5C,GACpD/iC,KAAK4N,EAAE,0BAA4Bq3B,EAAgBnpB,EAAA1P,KAAA,qBAC1CpM,KAAK4N,EAAE6iB,KAAM,CAAF3U,EAAA1P,KAAA,SACiD,IAA/Dm9D,EAAc9kC,GAAkBzkC,KAAKmhC,IAAIoH,SAAUvoC,KAAK4N,EAAE6iB,SAC5CzwB,KAAK4N,EAAE,gBAAe,CAAAkO,EAAA1P,KAAA,gBAAA0P,EAAA8b,OAAA,kBAG1C53B,KAAK4N,EAAE,gBAAkB27D,EACzBvpE,KAAK4N,EAAE,0BAA4B,CAAC,EAAEkO,EAAA1P,KAAA,uBAEhC,IAAIU,MAAM,gCAA+B,QAUmC,OAPhF9M,KAAK4N,EAAE,YAAco4B,GAAMC,KAC7BjmC,KAAK4N,EAAE,cAAcu8D,WAAW,CAAEC,OAAO,IAEzCpqE,KAAK4N,EAAE,YAAYu8D,aACpBruD,EAAA3P,KAAA,GAGO4mB,EAASsR,GAAarkC,KAAK4N,EAAE,gBAAiBq1B,GAAsB,SAAQnnB,EAAA1P,KAAA,GAC/DyrB,MAAM9E,GAAQnN,MAAK,SAACmD,GAAQ,OAAKA,EAASkhD,MAAM,IAAC,QAA9DA,EAAInuD,EAAAG,KAEFk0B,EAAoE85B,EAApE95B,MAAOC,EAA6D65B,EAA7D75B,OACfpwC,KAAK4N,EAAE,cAAgB,CAAEuiC,MAAAA,EAAOC,OAAAA,GAE5BpwC,KAAK4N,EAAE,YAAco4B,GAAMC,KAC7BjmC,KAAK4N,EAAE,cAAc4wC,SAASx+C,KAAK4N,EAAE,eAErC5N,KAAK4N,EAAE,YAAY4wC,SAAS,CAAE9nC,IAAK1W,KAAK4N,EAAE,kBAC3CkO,EAAA1P,KAAA,iBAAA0P,EAAA3P,KAAA,GAAA2P,EAAAC,GAAAD,EAAA,UAEDA,EAAAC,IACE/Z,QAAQuV,MAAM,4BAA2BuE,EAAAC,IAC1C,yBAAAD,EAAAI,OAAA,GAAAL,EAAA,oBAEJ,yBAAAkuD,EAAA3gE,MAAA,KAAAtI,UAAA,EApDA,IAoDA,CAAApD,IAAA,aAAA6B,MAAA,eAAA8qE,GAAA1uD,EAAAA,EAAAA,GAAAC,EAAAA,MAED,SAAAqc,IAAA,IAAAvyB,EAAA,YAAAkW,EAAAA,MAAA,SAAAsc,GAAA,cAAAA,EAAA/rB,KAAA+rB,EAAA9rB,MAAA,cAAA8rB,EAAA/rB,KAAA,EAAA+rB,EAAA9rB,KAAA,EAEUpM,KAAKkqE,eAAc,OAAAhyC,EAAA9rB,KAAA,eAKxB,OALwB8rB,EAAA/rB,KAAA,EAAA+rB,EAAAnc,GAAAmc,EAAA,SAErBl4B,KAAK+Q,aAEP/O,QAAQuV,MAAM2gB,EAAAnc,GAAIuJ,SACnB4S,EAAAN,OAAA,iBAIH53B,KAAKsJ,IAAI,UAAU4P,iBAAiB,QAAQ,WAC1CxT,EAAK4kE,aAAc,EACnB5kE,EAAK6kE,sBAAqB,GAEtB7kE,EAAKkI,EAAEy2C,MAAQ0jB,KACjBriE,EAAKkI,EAAE,qBAAsB,EAEjC,IAEA5N,KAAKsJ,IAAI,UAAU4P,iBAAiB,SAAS,WAC3CxT,EAAK4kE,aAAc,EACnB5kE,EAAK6kE,sBAAqB,GAE1B7kE,EAAKkI,EAAE,qBAAsB,CAC/B,IAEA5N,KAAKmG,IAAI,OAAO,SAACk+C,GACf,IAAIr/C,EAAKU,EAAK4D,IAAI,UACdtE,EAAGq/C,MAAQA,IACb3+C,EAAK4kE,aAAc,EACnBtlE,EAAGq/C,IAAMA,GAAO0jB,GAEpB,IAEA/nE,KAAKmG,IAAI,cAAc,SAACvF,GACtB8E,EAAKkI,EAAE,mBAAqBslC,GAAgBtyC,EAC9C,IAEAZ,KAAKmG,IACH,QAC2B,SAACvF,GAC1B8E,EAAKkI,EAAE,YAAc66D,GAAU7nE,EACjC,IAGFZ,KAAKmG,IAAI,UAAU,SAACqkE,GAClB9kE,EAAK4D,IAAI,UAAU0gC,UAAYw+B,GAAW,QAAS,CACjDiC,wBAAyBD,IAAUxkC,GAAMC,KACzCykC,qBAAsBF,IAAUxkC,GAAMC,MAE1C,IAEAjmC,KAAKiqC,UAAUtoC,IAAI,aAEnB3B,KAAKmG,IAAI,oBAAoB,SAACwkE,GAC5BjlE,EAAKkI,EAAE,4BAA8B+8D,EACrCjlE,EAAKkI,EAAE,0BAA4B+8D,CACrC,IAEA3qE,KAAKmG,IACH,0BACA,SAAC8+B,GACC,GAA4C,IAAxCpnC,OAAOmD,KAAKikC,GAAiB7mC,OAAjC,CAGA,IAAImrE,EAAc7jE,EAAKkI,EAAE,gBACrBgsC,EAAkB3W,GAAsB+B,GAA4BC,GAAkB,WAItFukC,EAAY,CACdD,YAAAA,EACA3vB,gBAAAA,EACA7mB,OANWsR,GAAaklC,EAAa3vB,GAOrC3U,gBAAAA,GAEFv/B,EAAK6S,cACH,IAAIH,YAAY,SAAU,CACxBE,OAAQkxD,EACRC,SAAS,EACTC,UAAU,IAhBd,CAmBF,IACA,GAGF1pE,KAAKmG,IAAI,QAAQ,SAACvF,GAAG,OAAKA,GAAO8E,EAAKklE,aAAa,IACnD5qE,KAAKmG,IAAI,UAAU,SAACvF,GAAG,OAAKA,GAAO8E,EAAKklE,aAAa,IAAE,yBAAA1yC,EAAAhc,OAAA,GAAA+b,EAAA,kBACxD,yBAAAoyC,EAAAjhE,MAAA,KAAAtI,UAAA,EA5FA,MA4FAgoE,CAAA,CAvM+B,CAAS5/B,KAwM1CtpB,EAAAA,EAAAA,GAxMYkpD,GAAqB,YAEb,sBAwMrBA,GAAsB9iE,SAAW6iE,GACjCC,GAAsB/kB,eAAe,CACnCtzB,KAAM,OACN,UAAW,SACX,cAAe,aACfi4C,KAAM,SEvMD,IAAMmC,GAAS,SAAA59B,IAAA1nC,EAAAA,EAAAA,GAAAslE,EAAA59B,GAAA,IAAAznC,GAAAC,EAAAA,EAAAA,GAAAolE,GACpB,SAAAA,IAAc,IAAAxpE,EAewD,OAfxDvB,EAAAA,EAAAA,GAAA,KAAA+qE,IACZxpE,EAAAmE,EAAAxH,KAAA,OAEKgJ,OAAK1G,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACLe,EAAK2F,OAAK,IACb8jE,UAAU,IAIZzpE,EAAK0pE,iBAAmB1pE,EAAK2pE,kBAAkB7sD,MAAI7Q,EAAAA,EAAAA,GAAAjM,IAGnDA,EAAK4pE,mBAAqB5pE,EAAK6pE,oBAAoB/sD,MAAI7Q,EAAAA,EAAAA,GAAAjM,IAGvDA,EAAK8pE,sBAAwB9pE,EAAK+pE,uBAAuBjtD,MAAI7Q,EAAAA,EAAAA,GAAAjM,IAAOA,CACtE,CA+cC,OA7cDX,EAAAA,EAAAA,GAAAmqE,EAAA,EAAAntE,IAAA,yBAAA6B,MAIA,SAAuB8rC,GACrB,IAAIiG,EAAWtxC,KAAK4N,EAAE,aACtB,GAAK0jC,EAAL,CAIA,GAAkB,KAAdjG,GAAoBiG,EAASlB,Q1DhDR,G0DgDmCkB,EAASnB,O1DhD5C,E0DiDvB,OAAO,EAGT,IAAIk7B,EAAU/5B,EAASlB,Q1DpDE,I0DoD0B/E,EAAUpqC,SAAS,MAAQoqC,EAAUpqC,SAAS,MAC7FqqE,EAAUh6B,EAASnB,O1DrDE,I0DqDyB9E,EAAUpqC,SAAS,MAAQoqC,EAAUpqC,SAAS,MAChG,OAAOoqE,GAAWC,CARlB,CASF,GAEA,CAAA5tE,IAAA,kBAAA6B,MACA,WAEE,IAAIgsE,EAAUvrE,KAAK4N,EAAE,YACrB,GAAK29D,EAAL,CAGA,IAAMt7B,EAAwBs7B,EAAxBt7B,EAAGC,EAAqBq7B,EAArBr7B,EAAGC,EAAkBo7B,EAAlBp7B,MAAOC,EAAWm7B,EAAXn7B,OACfmrB,EAAMv7D,KAAKsJ,IAAI,UAEfkiE,EAAO57B,GAAc,OAAQ,CAAEvT,GAAI,kBACnCovC,EAAgB77B,GAAc,OAAQ,CACxCK,EAAG,EACHC,EAAG,EACHC,MAAO,OACPC,OAAQ,OACRxV,KAAM,UAEJ8wC,EAAgB97B,GAAc,OAAQ,CACxCK,EAAAA,EACAC,EAAAA,EACAC,MAAAA,EACAC,OAAAA,EACAxV,KAAM,UAER4wC,EAAKvkE,YAAYwkE,GACjBD,EAAKvkE,YAAYykE,GAEjB,IAAIC,EAAe/7B,GAAc,OAAQ,CACvCK,EAAG,EACHC,EAAG,EACHC,MAAO,OACPC,OAAQ,OACRxV,KAAM,gCACN,eAAgB,IAChB4wC,KAAM,wBAERjQ,EAAIt0D,YAAY0kE,GAChBpQ,EAAIt0D,YAAYukE,GAEhBxrE,KAAK4rE,cAAgBJ,EACrBxrE,KAAK6rE,mBAAqBH,CAnC1B,CAoCF,GAEA,CAAAhuE,IAAA,kBAAA6B,MAIA,WAAkB,IAAAiC,EAAA,KACXxB,KAAK4rE,gBAGV5rE,KAAK4rE,cAAcjmE,MAAMC,QAAU,OACnCR,OAAO0mE,uBAAsB,WACvBtqE,EAAKoqE,gBACPpqE,EAAKoqE,cAAcjmE,MAAMC,QAAU,QAEvC,IACF,GAEA,CAAAlI,IAAA,kBAAA6B,MACA,WAEE,IAAIgsE,EAAUvrE,KAAK4N,EAAE,YACrB,GAAK29D,EAAL,CAGA,IAAMt7B,EAAwBs7B,EAAxBt7B,EAAGC,EAAqBq7B,EAArBr7B,EAAGC,EAAkBo7B,EAAlBp7B,MAAOC,EAAWm7B,EAAXn7B,OAEnBpwC,KAAK6rE,oBAAsBp8B,GAAgBzvC,KAAK6rE,mBAAoB,CAAE57B,EAAAA,EAAGC,EAAAA,EAAGC,MAAAA,EAAOC,OAAAA,GAHnF,CAIF,GAEA,CAAA1yC,IAAA,eAAA6B,MACA,WAEE,IAAIgsE,EAAUvrE,KAAK4N,EAAE,YAErB,GAAK29D,GAAYvrE,KAAK+rE,cAAiB/rE,KAAKgsE,aAA5C,CAGA,IAAK,IAALn6D,EAAA,EAAAC,EAAkBjU,OAAOgL,OAAO7I,KAAKgsE,cAAan6D,EAAAC,EAAA1T,OAAAyT,IAAE,CAA/C,IAAIo6D,EAAKn6D,EAAAD,GACNw5B,EAAoD4gC,EAApD5gC,UAAW6gC,EAAyCD,EAAzCC,SAAUC,EAA+BF,EAA/BE,gBAAiBC,EAAcH,EAAdG,UACxCC,EAAyB,KAAdhhC,EACXihC,EAAgC,IAArBjhC,EAAUjtC,OACnB6xC,EAAwBs7B,EAAxBt7B,EAAGC,EAAqBq7B,EAArBr7B,EAAGC,EAAkBo7B,EAAlBp7B,MAAOC,EAAWm7B,EAAXn7B,OAEnB,GAAIi8B,EAAU,CAOZ58B,GAAgB08B,EANM,CACpBl8B,EAAGA,EAAIE,EAAQ,EACfD,EAAGA,EAAIE,EAAS,EAChBD,MAAOA,EAAQ,EACfC,OAAQA,EAAS,GAGrB,KAAO,CACL,IAAMm8B,EAAsBt5B,GAC1BnvC,KAAKw1B,IAAI6W,EAAOC,GAAU,GAA4C,EACtE,EACA,GAGF10B,EAAoB4wD,EAChBx8B,GAAWy7B,EAASlgC,EAAWkhC,GAC/B17B,GACE06B,EAC+ElgC,EAC/EkhC,GALA57B,EAACj1B,EAADi1B,EAAGC,EAAMl1B,EAANk1B,OAOH9uC,EAAOgC,KAAK0tC,I1DpKU,G0DqKHyB,GAAMnvC,KAAKw1B,IAAI6W,EAAOC,G1DrKnB,G0DqKoD,EAAG,EAAG,G1DpK1D,G0DuK5BX,GAAgB08B,EAAiB,CAC/Bl8B,EAAGW,EAAO,GAAK9uC,EACfouC,EAAGU,EAAO,GAAK9uC,EACfquC,MAAc,EAAPruC,EACPsuC,OAAe,EAAPtuC,IAEV2tC,GAAgBy8B,EAAU,CAAEv7B,EAAAA,GAC9B,CAEA,IAAI67B,EAAexsE,KAAKysE,uBAAuBphC,GAC/C+gC,EAAU3hE,aACR,QACA+9D,GAAW,QAAS,CAClB,gBAAiBgE,EACjB,kBAAmBA,IAGzB,CAEA/8B,GAAgBzvC,KAAK+rE,aAAc,CACjC97B,EAAGs7B,EAAQt7B,EAAIy8B,GACfx8B,EAAGq7B,EAAQr7B,EAAIw8B,GACfv8B,MAAOo7B,EAAQp7B,M1DjMa,E0DkM5BC,OAAQm7B,EAAQn7B,O1DlMY,G0D0I9B,CA0DF,GAEA,CAAA1yC,IAAA,gBAAA6B,MACA,WAaE,IAFA,IAAMotE,EAAc,CAAC,EAEZhvE,EAAI,EAAGA,EAAI,EAAGA,IACrB,IAAK,IAAI00D,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B,IAAIhnB,EAAyD,GAA7CppC,OAAkD,CAAC,IAAK,GAAI,KAAKtE,IAAEsE,OAAG,CAAC,IAAK,GAAI,KAAKowD,IACjG+Z,EAAYx8B,GAAc,KAC9Bw8B,EAAUniC,UAAUtoC,IAAI,SACxByqE,EAAU3hE,aAAa,eAAgB,IACvC,IAAI0hE,EAAkBv8B,GAAc,OAAQ,CAC1ChV,KAAM,gBAEJsxC,EAAWt8B,GAAc,OAAQ,CACnCg9B,OAAQ,eACRhyC,KAAM,OACN,e1DnOwB,I0DqO1BwxC,EAAUnlE,YAAYilE,GACtBE,EAAUnlE,YAAYklE,GACtBQ,EAAYthC,GAAa,CACvBA,UAAAA,EACA6gC,SAAAA,EACAC,gBAAAA,EACAC,UAAAA,GAGFD,EAAgBjzD,iBAAiB,cAAelZ,KAAK6sE,mBAAmB1uD,KAAKne,KAAMqrC,GACrF,CAGF,OAAOshC,CACT,GAEA,CAAAjvE,IAAA,gBAAA6B,MACA,WACE,IAAIg8D,EAAM3rB,GAAc,OAEpBG,EAAOH,GAAc,OAAQ,CAC/BK,EAAG,EACHC,EAAG,EACHC,MAAO,OACPC,OAAQ,OACRxV,KAAM,OACNgyC,OAAQ,UACR,e1D7P4B,E0D8P5B,iBAAkB,KAEpBrR,EAAIt0D,YAAY8oC,GAEhB,IAAK,IAAIpyC,EAAI,EAAGA,GAAK,EAAGA,IAAK,CAC3B,IAAI+qB,EAAOknB,GAAc,OAAQ,CAC/Bk9B,GAAI,GAAF7qE,OAAKutC,GAAc7xC,EAAC,KACtBovE,GAAI,KACJC,GAAI,GAAF/qE,OAAKutC,GAAc7xC,EAAC,KACtBsvE,GAAI,OACJL,OAAQ,UACR,e1DzQ0B,E0D0Q1B,iBAAkB,KAEpBrR,EAAIt0D,YAAYyhB,EAClB,CAEA,IAAK,IAAI/qB,EAAI,EAAGA,GAAK,EAAGA,IAAK,CAC3B,IAAI+qB,EAAOknB,GAAc,OAAQ,CAC/Bk9B,GAAI,KACJC,GAAI,GAAF9qE,OAAKutC,GAAc7xC,EAAC,KACtBqvE,GAAI,OACJC,GAAI,GAAFhrE,OAAKutC,GAAc7xC,EAAC,KACtBivE,OAAQ,UACR,e1DtR0B,E0DuR1B,iBAAkB,KAEpBrR,EAAIt0D,YAAYyhB,EAClB,CAIA,OAFA6yC,EAAItxB,UAAUtoC,IAAI,SAAU,uBAErB45D,CACT,GAEA,CAAA79D,IAAA,eAAA6B,MACA,WACE,IAAIg8D,EAAMv7D,KAAKsJ,IAAI,UACfzE,EAAK0D,SAASC,yBAEd0kE,EAAcltE,KAAKmtE,gBACvBtoE,EAAGoC,YAAYimE,GAGf,IADA,IAAIP,EAAc3sE,KAAKotE,gBACvBpiD,EAAA,EAAAqiD,EAA0BxvE,OAAOgL,OAAO8jE,GAAY3hD,EAAAqiD,EAAAjvE,OAAA4sB,IAAE,CAAjD,IAAMohD,EAASiB,EAAAriD,GAATohD,UACTvnE,EAAGoC,YAAYmlE,EACjB,CAEA7Q,EAAIt0D,YAAYpC,GAChB7E,KAAKgsE,aAAeW,EACpB3sE,KAAK+rE,aAAemB,CACtB,GAEA,CAAAxvE,IAAA,qBAAA6B,MAKA,SAAmB8rC,EAAW1jC,GAC5B,GAAK3H,KAAKgsE,aAAV,CACA,IAAIC,EAAQjsE,KAAKgsE,aAAa3gC,GAC9B,IAAIrrC,KAAKysE,uBAAuBphC,GAAhC,CAIA,IAAIkgC,EAAUvrE,KAAK4N,EAAE,YACrB0/D,EAA2BttE,KAAKsJ,IAAI,UAAU29C,wBAArCsmB,EAAID,EAAPr9B,EAAYu9B,EAAIF,EAAPp9B,EACXD,EAAItoC,EAAEsoC,EAAIs9B,EACVr9B,EAAIvoC,EAAEuoC,EAAIs9B,EAEdxtE,KAAK4N,EAAEk9D,UAAW,EAClB9qE,KAAKytE,eAAiBxB,EACtBjsE,KAAK0tE,gBAAkB,CAACz9B,EAAGC,GAE3BlwC,KAAK2tE,gBAAcrtE,EAAAA,EAAAA,GAAA,GAAQirE,EAX3B,CAJ8B,CAgBhC,GAEA,CAAA7tE,IAAA,oBAAA6B,MAIA,SAAkBoI,GAChB3H,KAAK4tE,gBAEA5tE,KAAK4N,EAAEk9D,WAGZnjE,EAAEy/C,kBACFz/C,EAAEklD,iBAEF7sD,KAAK4N,EAAEk9D,UAAW,EACpB,GAEA,CAAAptE,IAAA,sBAAA6B,MAIA,SAAoBoI,GAClB,GAAK3H,KAAK4N,EAAEk9D,UAAa9qE,KAAK0tE,iBAAoB1tE,KAAKytE,eAAvD,CAGA9lE,EAAEy/C,kBACFz/C,EAAEklD,iBAEF,IACAghB,EADU7tE,KAAKsJ,IAAI,UACY29C,wBAAtBsmB,EAAIM,EAAP59B,EAAYu9B,EAAIK,EAAP39B,EACXD,EAAItoC,EAAEsoC,EAAIs9B,EACVr9B,EAAIvoC,EAAEuoC,EAAIs9B,EACV97B,EAAKzB,EAAIjwC,KAAK0tE,gBAAgB,GAC9Bn8B,EAAKrB,EAAIlwC,KAAK0tE,gBAAgB,GAC5BriC,EAAcrrC,KAAKytE,eAAnBpiC,UAEAyiC,EAAe9tE,KAAK+tE,aAAa1iC,EAAW,CAACqG,EAAIH,IACnDu8B,IACF9tE,KAAK4N,EAAE,YAAckgE,EAdvB,CAgBF,GAEA,CAAApwE,IAAA,eAAA6B,MAKA,SAAa8rC,EAAW+F,GAAO,IAAA48B,EAAAC,EAC7BC,GAAAjmD,EAAAA,GAAAA,GAAiBmpB,EAAK,GAAfM,EAAEw8B,EAAA,GAAE38B,EAAE28B,EAAA,GAET58B,EAAWtxC,KAAK4N,EAAE,aAClBmiC,EAAyE,QAAlEi+B,EAA+ChuE,KAAK2tE,sBAAc,IAAAK,EAAAA,EAAKhuE,KAAK4N,EAAE,YAEnFq6B,EAAsC,QAA5BgmC,EAAGjuE,KAAK4N,EAAE,0BAAkB,IAAAqgE,OAAA,EAAzBA,EAA4B,GACzC58B,EAAcpJ,EAAaA,EAAWkI,MAAQlI,EAAWmI,YAASrvC,EAQxE,GALEgvC,EADgB,KAAd1E,EzD3RD,SAAiB3vB,GAAsC,IAAnCq0B,EAAIr0B,EAAJq0B,KAAIo+B,GAAAlmD,EAAAA,GAAAA,GAAAvM,EAAE01B,MAAK,GAAGM,EAAEy8B,EAAA,GAAE58B,EAAE48B,EAAA,GAAG78B,EAAQ51B,EAAR41B,SAChD,OAAOP,IAAczwC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAD,EAEdyvC,GAAI,IACPE,EAAGF,EAAKE,EAAIyB,EACZxB,EAAGH,EAAKG,EAAIqB,IAEdD,EAEJ,CyDmRa88B,CAAS,CAAEr+B,KAAAA,EAAMqB,MAAO,CAACM,EAAIH,GAAKD,SAAAA,IAElCJ,GAAW,CAAEnB,KAAAA,EAAMqB,MAAO,CAACM,EAAIH,GAAKlG,UAAAA,EAAWgG,YAAAA,EAAaC,SAAAA,IAGhEzzC,OAAOgL,OAAOknC,GAAMs+B,OAAM,SAACn5B,GAAM,OAAKvjC,OAAOsb,SAASioB,IAAWA,GAAU,CAAC,IAMjF,OAAOnE,GAAeiC,GAAUjD,GAAO/vC,KAAK4N,EAAE,cAL5C5L,QAAQuV,MAAM,kDAAmD,CAC/DwI,QAASgwB,GAKf,GAEA,CAAAryC,IAAA,yBAAA6B,MAIA,SAAuBoI,GAAG,IAAAjC,EAAA,KACxB,GAAK1F,KAAKgsE,aAAV,CAEA,IAAIsC,EAAazwE,OAAOgL,OAAO7I,KAAKgsE,cAAc19B,MAAK,SAAC29B,GACtD,GAAIvmE,EAAK+mE,uBAAuBR,EAAM5gC,WACpC,OAAO,EAET,IACIijB,EADO2d,EAAME,gBACCllB,wBAOdsnB,EzDuNH,SAA2Bx+B,EAAIphB,GAAU,IAAAW,GAAArH,EAAAA,GAAAA,GAAA0G,EAAA,GAAPshB,EAAC3gB,EAAA,GAAE4gB,EAAC5gB,EAAA,GAC3C,OAAOygB,EAAKE,GAAKA,GAAKA,GAAKF,EAAKE,EAAIF,EAAKI,OAASJ,EAAKG,GAAKA,GAAKA,GAAKH,EAAKG,EAAIH,EAAKK,MACtF,CyDzNkBo+B,CAND,CACTv+B,EAAGqe,EAAOre,EACVC,EAAGoe,EAAOpe,EACVC,MAAOme,EAAOne,MACdC,OAAQke,EAAOle,QAEmB,CAACzoC,EAAEsoC,EAAGtoC,EAAEuoC,IAC5C,OAAOq+B,CACT,IAEAvuE,KAAKyuE,YAAcH,EACnBtuE,KAAK4tE,eAnByB,CAoBhC,GAEA,CAAAlwE,IAAA,gBAAA6B,MACA,WACE,IzD9VwB8rC,EyD8VpBijC,EAAatuE,KAAKyuE,YACtBzuE,KAAKsJ,IAAI,UAAU3D,MAAM+oE,OAASJ,EzD9VlB,MADQjjC,EyD+VmCijC,EAAWjjC,WzD7V/D,OAEL,CAAC,IAAK,KAAKpqC,SAASoqC,GACf,YAEL,CAAC,IAAK,KAAKpqC,SAASoqC,GACf,YAEL,CAAC,KAAM,MAAMpqC,SAASoqC,GACjB,cAEF,cyDkV8E,SACrF,GAEA,CAAA3tC,IAAA,UAAA6B,MACA,WACES,KAAK2uE,kBACL3uE,KAAK4uE,cACP,GAEA,CAAAlxE,IAAA,eAAA6B,MACA,SAAayvD,GACNhvD,KAAKgsE,cACVnuE,OAAOgL,OAAO7I,KAAKgsE,cAChBtiE,KAAI,SAAAma,GAAY,OAAAA,EAATuoD,SAAyB,IAChC9qE,SAAQ,SAAC8qE,GACRA,EAAU3hE,aACR,QACA+9D,GAAW,QAAS,CAClB,iBAAkBxZ,EAClB,iBAAkBA,IAGxB,GACJ,GAAC,CAAAtxD,IAAA,eAAA6B,MAED,WAAe,IAAA8N,EAAA,KACb4Q,GAAAgtB,EAAAA,EAAAA,GAAA4/B,EAAA/sE,WAAA,qBAAAE,KAAA,MAEAgC,KAAK6uE,kBACL7uE,KAAK8uE,eAEL9uE,KAAKmG,IAAI,aAAa,WACpBkH,EAAK0hE,kBACL3pE,OAAO0mE,uBAAsB,WAC3Bz+D,EAAK2hE,SACP,GACF,IAEAhvE,KAAKmG,IAAI,YAAY,SAAColE,GACfA,IAGLl+D,EAAK4hE,cAAgB1D,EAAQn7B,Q1DvdN,G0DudiCm7B,EAAQp7B,O1DvdzC,E0DwdvB/qC,OAAO0mE,uBAAsB,WAC3Bz+D,EAAK2hE,SACP,IACF,IAEAhvE,KAAKmG,IAAI,YAAY,SAAC2kE,GACfz9D,EAAK0+D,cACV1+D,EAAK0+D,aAAathE,aAChB,QACA+9D,GAAW,CACT,iBAAkBn7D,EAAK4hE,cACvB,mBAAoB5hE,EAAK4hE,eAAiBnE,EAC1C,uBAAwBz9D,EAAK4hE,gBAAkBnE,IAGrD,IAEA9qE,KAAKsJ,IAAI,UAAU4P,iBAAiB,cAAelZ,KAAKmrE,uBAAuB,GAC/E5iE,SAAS2Q,iBAAiB,cAAelZ,KAAKirE,oBAAoB,GAClE1iE,SAAS2Q,iBAAiB,YAAalZ,KAAK+qE,kBAAkB,EAChE,GAAC,CAAArtE,IAAA,kBAAA6B,MAED,WACE0e,GAAAgtB,EAAAA,EAAAA,GAAA4/B,EAAA/sE,WAAA,wBAAAE,KAAA,MAEAuK,SAASgR,oBAAoB,cAAevZ,KAAKirE,oBACjD1iE,SAASgR,oBAAoB,YAAavZ,KAAK+qE,iBACjD,KAACF,CAAA,CAhemB,CAAS3hC,IAme/B2hC,GAAU7kE,SAAqB,4EC3fxB,IAAMkpE,GAAmB,SAAAjiC,IAAA1nC,EAAAA,EAAAA,GAAA2pE,EAAAjiC,GAAA,IAAAznC,GAAAC,EAAAA,EAAAA,GAAAypE,GAAA,SAAAA,IAAA,IAAA7tE,GAAAvB,EAAAA,EAAAA,GAAA,KAAAovE,GAAA,QAAAxuD,EAAA5f,UAAA1C,OAAAuiB,EAAA,IAAA9Y,MAAA6Y,GAAAzD,EAAA,EAAAA,EAAAyD,EAAAzD,IAAA0D,EAAA1D,GAAAnc,UAAAmc,GAMZ,OANY5b,EAAAmE,EAAAxH,KAAAoL,MAAA5D,EAAA,OAAAvD,OAAA0e,KAAAf,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,SAAAf,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAEzBe,EAAK2F,OAAK,IACbmoE,QAAQ,EACRn4D,MAAO,GACP45C,KAAM,GACN,WAAY,QAAIvvD,CAAA,CA+BjB,OA/BiBX,EAAAA,EAAAA,GAAAwuE,EAAA,EAAAxxE,IAAA,eAAA6B,MAGlB,WAAe,IAAAiC,EAAA,KACbyc,GAAAgtB,EAAAA,EAAAA,GAAAikC,EAAApxE,WAAA,qBAAAE,KAAA,MAEAgC,KAAKovE,SAAWpvE,KAAKsJ,IAAI,YACzBtJ,KAAKqvE,QAAUrvE,KAAKsJ,IAAI,WAExBtJ,KAAKyK,aAAa,OAAQ,WACH,IAAnBzK,KAAKsvE,WACPtvE,KAAKsvE,SAAW,GAGlBtvE,KAAKmG,IAAI,SAAS,SAAC6Q,GACHxV,EAAK4tE,WAEjB5tE,EAAK4tE,SAASzpE,MAAMC,QAAUoR,EAAQ,QAAU,OAEpD,IAEAhX,KAAKmG,IAAI,UAAU,SAACgpE,GAClB3tE,EAAKwoC,UAAYw+B,GAAW,CAC1B2G,OAAQA,EACRI,YAAaJ,GAEjB,IAEAnvE,KAAKmG,IAAI,YAAY,SAACsjD,GACpBjoD,EAAK+vD,QAAU9H,CACjB,GACF,KAACylB,CAAA,CArC6B,CAAShmC,IAwCzCgmC,GAAoBlpE,SAAqB,kICzBlC,IAAMwpE,GAAuB,SAAAC,IAAAlqE,EAAAA,EAAAA,GAAAiqE,EAAAC,GAAA,IAAAjqE,GAAAC,EAAAA,EAAAA,GAAA+pE,GAAA,SAAAA,IAAA,OAAA1vE,EAAAA,EAAAA,GAAA,KAAA0vE,GAAAhqE,EAAA4D,MAAA,KAAAtI,UAAA,CAmBjC,OAnBiCJ,EAAAA,EAAAA,GAAA8uE,EAAA,EAAA9xE,IAAA,eAAA6B,MAClC,WAAe,IAAA8B,EAAA,KACb4c,GAAAgtB,EAAAA,EAAAA,GAAAukC,EAAA1xE,WAAA,qBAAAE,KAAA,MAEAgC,KAAK2pD,eAAe,aAAa,SAAC/mB,GAC3BA,IAKLvhC,EAAKquE,WAAa9sC,EAClBvhC,EAAKuM,EAAQ,KAAIg1B,EACnB,IAEA5iC,KAAK4N,EAAE,YAAc,SAACjG,GACpB,IAAIwE,EAAO9K,EAAKuM,EAAE,cAAc4pC,SAASn2C,EAAKquE,YAC1CtjE,EA1BV,SAAmBw2B,EAAWz2B,GAC5B,MAAkB,WAAdy2B,EAPN,SAAmBz2B,GACjB,IAAIsmC,EAAQtmC,EAAO,GAEnB,OADQsmC,GAAS,IAAM,EAAIA,CAE7B,CAIWk9B,CAAUxjE,GAEf,CAAC,SAAU,QAAQlL,SAAS2hC,IACtBz2B,EAEH,IACT,CAkBiBu3C,CAAUriD,EAAKquE,WAAYvjE,GACtC9K,EAAKuM,EAAE,cAAcyoC,SAASh1C,EAAKquE,WAAYtjE,EACjD,CACF,KAACojE,CAAA,CAnBiC,CAASN,ICfvCU,GACI,SADJA,GAEa,kBAGNC,GAAuB,WAEvBC,GAAY,SAAA7iC,IAAA1nC,EAAAA,EAAAA,GAAAuqE,EAAA7iC,GAAA,IAAAznC,GAAAC,EAAAA,EAAAA,GAAAqqE,GAAA,SAAAA,IAAA,IAAAzuE,GAAAvB,EAAAA,EAAAA,GAAA,KAAAgwE,GAAA,QAAApvD,EAAA5f,UAAA1C,OAAAuiB,EAAA,IAAA9Y,MAAA6Y,GAAAzD,EAAA,EAAAA,EAAAyD,EAAAzD,IAAA0D,EAAA1D,GAAAnc,UAAAmc,GAYpB,OAZoB5b,EAAAmE,EAAAxH,KAAAoL,MAAA5D,EAAA,OAAAvD,OAAA0e,KAAAf,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,SAAAf,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAElBe,EAAK2F,OAAK,IACbspD,UAAU,EACVh3B,IAAK,EACLkY,IAAK,IACLjyC,MAAO,EACPwwE,aAAc,EACdtpC,KAAM,EACN,WAAY,SAAClnC,GACX8B,EAAKuM,EAAE,YAAYrL,IAAIhD,GACvB8B,EAAKuM,EAAErO,MAAQA,CACjB,KAAC8B,CAAA,CAuFF,OAvFEX,EAAAA,EAAAA,GAAAovE,EAAA,EAAApyE,IAAA,eAAA6B,MAOH,SAAaqjC,EAAWhe,GACtB5kB,KAAKgwE,aAA6B,WAAdptC,EAAyBgtC,GAAqBA,GAClE5vE,KAAK0vE,WAAa9sC,EAClB5iC,KAAKiwE,UAAYrtC,EACjB5iC,KAAKkwE,OAASttC,EAAU9jC,cACxBkB,KAAKmwE,QAAUvrD,EAEf5kB,KAAKowE,oBAELpwE,KAAK4N,EAAE,YAAY4wC,SAAS,CAC1B9nC,IAAK1W,KAAK4N,EAAE,gBACZg1B,UAAW5iC,KAAK0vE,WAChBnwE,MAAOS,KAAKmwE,UAAYN,QAAuB9uE,EAAYf,KAAK4N,EAAErO,MAClEqlB,OAAQ5kB,KAAKmwE,UAAYN,QAAuB9uE,EAAYf,KAAKmwE,QACjEE,YAAY,GAEhB,GAEA,CAAA3yE,IAAA,oBAAA6B,MACA,WACE,IAAA+wE,EAAsB9pC,GAAwBxmC,KAAK0vE,YAA7ChpC,EAAK4pC,EAAL5pC,MAAOD,EAAI6pC,EAAJ7pC,KACb8pC,GAAAtoD,EAAAA,GAAAA,GAAiBye,EAAK,GAAjBpN,EAAGi3C,EAAA,GAAE/+B,EAAG++B,EAAA,GAEbvwE,KAAK4N,EAAE0rB,IAAMA,EACbt5B,KAAK4N,EAAE4jC,IAAMA,EACbxxC,KAAK4N,EAAE64B,KAAOA,EAEd,IAAI+pC,EAAiBxwE,KAAK4N,EAAE,0BAA0B5N,KAAK0vE,YAC3D,GAAI1vE,KAAKgwE,eAAiBJ,GAAoB,CAC5C,IAAIrwE,EAAQiyC,EACZ,GAAIg/B,EAAgB,CAClB,IAAM5xE,EAAiB4xE,EAAjB5xE,KAAMsmC,EAAWsrC,EAAXtrC,OACZ3lC,EAAQX,IAASoB,KAAKmwE,QAAUjrC,EAASsM,CAC3C,CACAxxC,KAAK4N,EAAErO,MAAQA,EACfS,KAAK4N,EAAEmiE,aAAexwE,CACxB,CACA,GAAIS,KAAKgwE,eAAiBJ,GAA6B,CACrD,IAAIrwE,EAAkC,qBAAnBixE,EAAiCA,EAAiB/pC,EACrEzmC,KAAK4N,EAAErO,MAAQA,EACfS,KAAK4N,EAAEmiE,aAAexwE,CACxB,CACF,GAAC,CAAA7B,IAAA,QAAA6B,MAED,WACE,IAAIkxE,EAGAA,EAFAzwE,KAAKgwE,eAAiBJ,GACpB5vE,KAAKmwE,UAAYN,GACF,KAEA,CAAEjxE,KAAMoB,KAAKmwE,QAASjrC,OAAQllC,KAAK4N,EAAErO,OAGvCS,KAAK4N,EAAErO,MAI1B,IAAI0lC,GAAe3kC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACdN,KAAK4N,EAAE,2BAAyB,IAAAgS,EAAAA,EAAAA,GAAA,GAClC5f,KAAK0vE,WAAae,IAGrBzwE,KAAK4N,EAAE,0BAA4Bq3B,CACrC,GAAC,CAAAvnC,IAAA,SAAA6B,MAED,WACES,KAAK4N,EAAE,YAAYu8D,WAAW,CAAEhJ,MAAM,GACxC,GAAC,CAAAzjE,IAAA,eAAA6B,MAED,WAAe,IAAAiC,EAAA,KACbyc,GAAAgtB,EAAAA,EAAAA,GAAA6kC,EAAAhyE,WAAA,qBAAAE,KAAA,MAEAgC,KAAKmG,IAAI,gBAAgB,SAACojE,GACxB/nE,EAAKwoE,aAAeT,CACtB,IAEAvpE,KAAKmG,IAAI,SAAS,SAAC5G,GACjB,IAAImxE,EAAU,GAAHzuE,OAAMT,EAAK2uE,SAAW3uE,EAAKkuE,WAAU,KAAAztE,OAAI1C,GACpDiC,EAAKoM,EAAE,qBAAuB8iE,CAChC,GACF,KAACZ,CAAA,CAnGsB,CAAS5mC,ICR3B,SAASynC,GAAatsB,GAC3B,IAAI+Q,EAAQ,IAAInP,MAchB,MAAO,CAAE2V,QAZK,IAAIj/C,SAAQ,SAACC,EAASC,GAClCu4C,EAAM/Q,IAAMA,EACZ+Q,EAAMrlD,OAAS6M,EACfw4C,EAAM95C,QAAUuB,CAClB,IAQkBu4C,MAAAA,EAAOx0C,OANZ,WACgB,IAAvBw0C,EAAM8F,eACR9F,EAAM/Q,IAAM0jB,GAEhB,EAGF,CAEO,SAAS6I,GAAmB1yB,GACjC,IAEoBh3C,EAFhB2pE,EAAa,GAAGxpE,GAAAC,EAAAA,EAAAA,GAEJ42C,GAAI,IAApB,IAAA72C,EAAAE,MAAAL,EAAAG,EAAAG,KAAAC,MAAsB,KAChBqpE,EAAUH,GADJzpE,EAAA3H,OAEVsxE,EAAW9oE,KAAK+oE,EAClB,CAAC,OAAAppE,IAAAL,EAAAM,EAAAD,GAAA,SAAAL,EAAAO,GAAA,CAED,IAAIyhE,EAASwH,EAAWnnE,KAAI,SAAConE,GAAO,OAAKA,EAAQ1b,KAAK,IAClDwG,EAAUj/C,QAAQs+C,WAAW4V,EAAWnnE,KAAI,SAAConE,GAAO,OAAKA,EAAQlV,OAAO,KAO5E,MAAO,CAAEA,QAAAA,EAASyN,OAAAA,EAAQzoD,OANb,WACXiwD,EAAWvvE,SAAQ,SAACwvE,GAClBA,EAAQlwD,QACV,GACF,EAGF,CD2EAkvD,GAAa9pE,SAAqB,6KE1G3B,IAAM+qE,GAAmB,SAAAtB,IAAAlqE,EAAAA,EAAAA,GAAAwrE,EAAAtB,GAAA,IAAAjqE,GAAAC,EAAAA,EAAAA,GAAAsrE,GAAA,SAAAA,IAAA,IAAA1vE,GAAAvB,EAAAA,EAAAA,GAAA,KAAAixE,GAAA,QAAArwD,EAAA5f,UAAA1C,OAAAuiB,EAAA,IAAA9Y,MAAA6Y,GAAAzD,EAAA,EAAAA,EAAAyD,EAAAzD,IAAA0D,EAAA1D,GAAAnc,UAAAmc,GAQZ,OARY5b,EAAAmE,EAAAxH,KAAAoL,MAAA5D,EAAA,OAAAvD,OAAA0e,KAAAf,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,SAAAf,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAEzBe,EAAK2F,OAAK,IACbmoE,QAAQ,EACRn4D,MAAO,GACP45C,KAAM,GACNogB,YAAY,EACZC,SAAU,KACV,WAAY,QAAI5vE,CAAA,CAoIjB,OApIiBX,EAAAA,EAAAA,GAAAqwE,EAAA,EAAArzE,IAAA,cAAA6B,MAGlB,WACE,IAAI2xE,EAAcxkE,SAAStH,OAAOmP,iBAAiBvU,MAAMwU,iBAAiB,sBAAuB,IAC7F28D,EAAM/rE,OAAOgsE,iBACbtvE,EAAOgC,KAAKqxC,KAAKg8B,EAAMD,GACvBvsB,EAAUwsB,GAAO,EAAI,WAAa,SAIlClsC,GAAe3kC,EAAAA,EAAAA,GAAA,GAAQN,KAAK4N,EAAE,2BASlC,OARAq3B,EAAgBjlC,KAAK0vE,YACnB1vE,KAAKmwE,UAAYN,GACb,CACEjxE,KAAMoB,KAAKmwE,QACXjrC,OARU,UAUZnkC,EAECsjC,GACLrkC,KAAKgqE,aACL/mC,GACEqC,GACAN,GAA4BC,GAAgB,WAAAhjC,OACjC0iD,GAAO,cAAA1iD,OACJH,EAAI,KAAAG,OAAIH,EAAI,YAGhC,GAEA,CAAApE,IAAA,oBAAA6B,MAIA,SAAkBuoB,EAAS4iB,GAAU,IAAAlpC,EAAA,KAEnC,GADwBsmB,EAAQ,GACV69B,eAAgB,CACpC,IAAItB,EAAMrkD,KAAK29D,SAAS39D,KAAKqxE,eACzBC,EAAYtxE,KAAKsJ,IAAI,cACzBioE,EAA0BZ,GAAatsB,GAAjCuX,EAAO2V,EAAP3V,QAASh7C,EAAM2wD,EAAN3wD,OACf5gB,KAAKwxE,eAAiB5wD,EACtBg7C,EACGr1C,OAAM,SAAC7e,GACNlG,EAAKoM,EAAE,qBAAsB,EAC7B5L,QAAQuV,MAAM,uBAAwB,CAAEA,MAAO7P,GACjD,IACCy2B,SAAQ,WACPmzC,EAAU3rE,MAAMuiE,gBAAkB,OAAHjmE,OAAUoiD,EAAG,KAC5CitB,EAAU7mE,aAAa,SAAU,IAEjCigC,EAASkb,UAAUpkD,EACrB,GACJ,MACExB,KAAKwxE,gBAAkBxxE,KAAKwxE,gBAEhC,GAAC,CAAA9zE,IAAA,eAAA6B,MAED,WAAe,IAAAmG,EAAA,KACbuY,GAAAgtB,EAAAA,EAAAA,GAAA8lC,EAAAjzE,WAAA,qBAAAE,KAAA,MAEAgC,KAAK4N,EAAE,YAAc,SAACjG,GACfjC,EAAKkI,EAAEuhE,OAGAzpE,EAAKkI,EAAEojE,aACjBtrE,EAAKkI,EAAE,aAAa6jE,aAAa/rE,EAAKgqE,WAAYhqE,EAAKyqE,SACvDzqE,EAAKkI,EAAE,gBAAiB,IAJxBlI,EAAKkI,EAAE,aAAa6jE,aAAa/rE,EAAKgqE,WAAYhqE,EAAKyqE,SACvDzqE,EAAKkI,EAAE,aAAaxE,SAMtB1D,EAAKkI,EAAE,kBAAoBlI,EAAKyqE,OAClC,EAEAnwE,KAAK2pD,eAAe,UAAU,SAAC/kC,GAC7Blf,EAAKgqE,WAAa,SAClBhqE,EAAKyqE,QAAUvrD,EACflf,EAAKkI,EAAEojE,WAAapsD,IAAWirD,GAC/BnqE,EAAKkI,EAAEgjD,KAAOlrD,EAAKkI,EAAEojE,WAAa,WAAa,QACjD,IAEAhxE,KAAKs+D,UAAY,IAAIl5D,OAAOqgD,qBAAqBzlD,KAAKu+D,kBAAkBpgD,KAAKne,MAAO,CAClFw+D,UAAW,CAAC,EAAG,KAGjB,IAAI+K,EAAcvpE,KAAK4N,EAAE,gBACzB5N,KAAKgqE,aAAeT,EAEhBvpE,KAAK4N,EAAEojE,WACThxE,KAAKsJ,IAAI,WAAW2gC,UAAUtoC,IAAI,iBAElC3B,KAAKs+D,UAAUvpD,QAAQ/U,MAGzBA,KAAKmG,IAAI,kBAAkB,SAACurE,GAC1BhsE,EAAKkI,EAAEuhE,OAASuC,GAAiBA,IAAkBhsE,EAAKyqE,OAC1D,IAEAnwE,KAAKmG,IAAI,cAAc,SAAC6qE,GACtBtrE,EAAKkI,EAAEqjE,SAAWD,EAAa,GAAK,EACtC,IAEAhxE,KAAKmG,IAAI,UAAU,SAACgpE,GAClB,IAAIzpE,EAAKkI,EAAEojE,WAAX,CAGatrE,EAAK4D,IAAI,WACf3D,MAAMkiE,QAAUsH,EAAS,IAAM,IAEtC,IAAImC,EAAY5rE,EAAK4D,IAAI,cACrB6lE,EACFmC,EAAU3rE,MAAMkiE,QAAU,IACjByJ,EAAU3rE,MAAMuiE,kBACzBoJ,EAAU3rE,MAAMkiE,QAAU,IAR5B,CAUF,IAEA7nE,KAAKmG,IAAI,oBAAoB,SAACwkE,GAC5B,IAAKA,EAAiB,CACpB,IAAItmB,EAAM3+C,EAAKi4D,SAASj4D,EAAK2rE,eACzBC,EAAY5rE,EAAK4D,IAAI,cACrBgoE,EAAU3rE,MAAMuiE,kBAClBoJ,EAAU3rE,MAAMuiE,gBAAkB,OAClCoJ,EAAU3rE,MAAMuiE,gBAAkB,OAAHjmE,OAAUoiD,EAAG,KAEhD,CACF,GACF,GAAC,CAAA3mD,IAAA,kBAAA6B,MAED,WAAkB,IAAAk/D,EAChBxgD,GAAAgtB,EAAAA,EAAAA,GAAA8lC,EAAAjzE,WAAA,wBAAAE,KAAA,MACc,QAAdygE,EAAAz+D,KAAKs+D,iBAAS,IAAAG,GAAdA,EAAgBzqD,aAChBhU,KAAKwxE,gBAAkBxxE,KAAKwxE,gBAC9B,KAACT,CAAA,CA5I6B,CAAS7B,IA+IzC6B,GAAoB/qE,SAAqB,4JClJlC,IAAM2rE,GAAsB,SAAAlC,IAAAlqE,EAAAA,EAAAA,GAAAosE,EAAAlC,GAAA,IAAAjqE,GAAAC,EAAAA,EAAAA,GAAAksE,GAAA,SAAAA,IAAA,IAAAtwE,GAAAvB,EAAAA,EAAAA,GAAA,KAAA6xE,GAAA,QAAAjxD,EAAA5f,UAAA1C,OAAAuiB,EAAA,IAAA9Y,MAAA6Y,GAAAzD,EAAA,EAAAA,EAAAyD,EAAAzD,IAAA0D,EAAA1D,GAAAnc,UAAAmc,GAKlB,OALkB5b,EAAAmE,EAAAxH,KAAAoL,MAAA5D,EAAA,OAAAvD,OAAA0e,KAAAf,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,aAKpB,IAAEA,CAAA,CA6Bd,OAjCDX,EAAAA,EAAAA,GAAAixE,EAAA,EAAAj0E,IAAA,eAAA6B,MAMA,WAAe,IAAAiC,EAAA,KACbyc,GAAAgtB,EAAAA,EAAAA,GAAA0mC,EAAA7zE,WAAA,qBAAAE,KAAA,MAEAgC,KAAK4N,EAAE,YAAc,SAACjG,GACpBnG,EAAKoM,EAAE,aAAa6jE,aAAajwE,EAAKkuE,YACtCluE,EAAKoM,EAAE,gBAAiB,EACxBpM,EAAKoM,EAAE,qBAAuBpM,EAAKkuE,UACrC,EAEA1vE,KAAK2pD,eAAe,aAAa,SAAC/mB,GAC5BA,IACFphC,EAAKkuE,WAAa9sC,EAClBphC,EAAKoM,EAAQ,KAAIg1B,EACjBphC,EAAKioC,SAAS,SAAS,kBAAMjoC,EAAKghC,KAAKI,EAAU,IAErD,IAEA5iC,KAAKmG,IAAI,0BAA0B,SAACyrE,GAClC,GAAKpwE,EAAKkuE,WAAV,CAIA,IAAMjpC,EAASD,GAAwBhlC,EAAKkuE,YAAtCjpC,KACFlnC,EAAQqyE,EAAsBpwE,EAAKkuE,YACnC5f,EAA4B,qBAAVvwD,GAAwBA,IAAUknC,EACxDjlC,EAAKoM,EAAEuhE,OAASrf,CALhB,CAMF,GACF,KAAC6hB,CAAA,CAlCgC,CAASzC,ICArC,SAAS2C,GAAetI,EAAap5B,EAAOlL,GACjD,IACIksC,EAAM/rE,OAAOgsE,iBACbtvE,EAAOgC,KAAKw1B,IAAIx1B,KAAKqxC,KAAKhF,EAAQghC,GAFZ,KAGtBxsB,EAAUwsB,GAAO,EAAI,WAAa,SAEtC,OAAO9sC,GACLklC,EACAtmC,GACEqC,GACAN,GAA4BC,GAAgB,WAAAhjC,OACjC0iD,GAAO,wBAAA1iD,OACMH,EAAI,MAGlC,CCyBO,IAAMgwE,GAAkB,SAAA7kC,IAAA1nC,EAAAA,EAAAA,GAAAusE,EAAA7kC,GAAA,IAAAznC,GAAAC,EAAAA,EAAAA,GAAAqsE,GAE7B,SAAAA,IAAc,IAAAzwE,EAmC8B,OAnC9BvB,EAAAA,EAAAA,GAAA,KAAAgyE,GACZzwE,EAAAmE,EAAAxH,KAAA,OAAQ4hB,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,YAFC,GAITA,EAAK2F,OAAK1G,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACLe,EAAK2F,OAAK,IACbouD,MAAO,KACP,WlEnDsB,GkEqDtB,cAAe,CACbl2B,OAAQ,EACR2F,QAAQ,EACRC,MAAM,GAGR,YAAa,CACXmL,EAAG,EACHC,EAAG,EACHC,MAAO,EACPC,OAAQ,GAGV,WAAY,CACVH,EAAG,EACHC,EAAG,EACHC,MAAO,EACPC,OAAQ,KAKZ/uC,EAAK0wE,iBAAmB7xD,EAAS7e,EAAK2wE,QAAQ7zD,MAAI7Q,EAAAA,EAAAA,GAAAjM,IAAQ,KAG1DA,EAAK4wE,uBAAyB7Q,GAAS//D,EAAK6wE,cAAc/zD,MAAI7Q,EAAAA,EAAAA,GAAAjM,IAAQ,KAEtEA,EAAK8wE,WAAa,CAAEhiC,MAAO,EAAGC,OAAQ,GAAI/uC,CAC5C,CA+cC,OA7cDX,EAAAA,EAAAA,GAAAoxE,EAAA,EAAAp0E,IAAA,gBAAA6B,MACA,WACOS,KAAK+Q,aAAgB/Q,KAAKoyE,YAG/BpyE,KAAKqyE,cACLryE,KAAKsyE,uBACLtyE,KAAKuyE,cACLvyE,KAAKwyE,aACLxyE,KAAKyyE,QACP,GAEA,CAAA/0E,IAAA,uBAAA6B,MACA,WACE,IACImzE,EC7FD,SAAcpzE,EAAK0B,GACxB,IACoBkG,EADhByD,EAAS,CAAC,EAAEtD,GAAAC,EAAAA,EAAAA,GACAtG,GAAI,IAApB,IAAAqG,EAAAE,MAAAL,EAAAG,EAAAG,KAAAC,MAAsB,KAAb/J,EAAGwJ,EAAA3H,MACNA,EAAQD,EAAI5B,IACZ4B,EAAIvB,eAAeL,SAAkBqD,IAAVxB,KAC7BoL,EAAOjN,GAAO6B,EAElB,CAAC,OAAAmI,IAAAL,EAAAM,EAAAD,GAAA,SAAAL,EAAAO,GAAA,CACD,OAAO+C,CACT,CDoFgCgoE,CADN3yE,KAAK4N,EAAE,0BACqB/P,OAAOmD,KAAKhB,KAAK4N,EAAE,iBACjEm1B,GAAUziC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAQN,KAAK4N,EAAE,gBAAmB8kE,GAChD1yE,KAAK4N,EAAE,eAAiBm1B,CAC1B,GAEA,CAAArlC,IAAA,cAAA6B,MACA,WAEE,IAAIu0D,EAAS9zD,KAAKsJ,IAAI,aAClB4H,EAAM4iD,EAAOG,WAAW,MAExB9jB,EAAQnwC,KAAK4yE,YACbxiC,EAASpwC,KAAK6yE,aACd1B,EAAM/rE,OAAOgsE,iBACjBtd,EAAOnuD,MAAMwqC,MAAQ,GAAHluC,OAAMkuC,EAAK,MAC7B2jB,EAAOnuD,MAAMyqC,OAAS,GAAHnuC,OAAMmuC,EAAM,MAC/B0jB,EAAO3jB,MAAQA,EAAQghC,EACvBrd,EAAO1jB,OAASA,EAAS+gC,EACtB,OAAHjgE,QAAG,IAAHA,GAAAA,EAAK4hE,MAAM3B,EAAKA,GAEhBnxE,KAAKslE,QAAUxR,EACf9zD,KAAKulE,KAAOr0D,CACd,GAEA,CAAAxT,IAAA,cAAA6B,MACA,WACE,GAAKS,KAAKoyE,WAAcpyE,KAAK4N,EAAEwnD,MAA/B,CAIA,IAOI9jB,EAPA8jB,EAAQp1D,KAAK4N,EAAEwnD,MACf2d,EAAU/yE,KAAK4N,EAAE,YAEfsxB,EADWl/B,KAAK4N,EAAE,eAClBsxB,OAEFovB,EAAkBtuD,KAAK4yE,YAAvBtkB,EAA4CtuD,KAAK6yE,aACjDG,EAAcxgC,GAAW,CAAErC,MAAOilB,EAAM8F,aAAc9qB,OAAQglB,EAAM+F,eAAiBj8B,GAGzF,GAAI8zC,EAAY7iC,MAAQme,EAAyB,EAAVykB,GAAeC,EAAY5iC,OAASke,EAA0B,EAAVykB,EAAa,CACtG,IAAIE,EAAmBD,EAAY7iC,MAAQ6iC,EAAY5iC,OAGvD,GAAI6iC,EAFsB3kB,EAAeA,EAEG,CAC1C,IAAIne,EAAQme,EAAyB,EAAVykB,EACvB3iC,EAASD,EAAQ8iC,EAGrB3hC,EAAW,CAAErB,EAFL,EAAI8iC,EAEI7iC,EADR6iC,GAAWzkB,EAA0B,EAAVykB,GAAe,EAAI3iC,EAAS,EAC5CD,MAAAA,EAAOC,OAAAA,EAC5B,KAAO,CACL,IAAIA,EAASke,EAA0B,EAAVykB,EACzB5iC,EAAQC,EAAS6iC,EAGrB3hC,EAAW,CAAErB,EAFL8iC,GAAWzkB,EAAyB,EAAVykB,GAAe,EAAI5iC,EAAQ,EAE7CD,EADR,EAAI6iC,EACO5iC,MAAAA,EAAOC,OAAAA,EAC5B,CACF,KAAO,CACL,IAAMD,EAAkB6iC,EAAlB7iC,MAAOC,EAAW4iC,EAAX5iC,OAGbkB,EAAW,CAAErB,EAFL8iC,GAAWzkB,EAAyB,EAAVykB,GAAe,EAAI5iC,EAAQ,EAE7CD,EADR6iC,GAAWzkB,EAA0B,EAAVykB,GAAe,EAAI3iC,EAAS,EAC5CD,MAAAA,EAAOC,OAAAA,EAC5B,CAEApwC,KAAK4N,EAAE,aAAeolC,GAAU1B,EAnChC,CAoCF,GAEA,CAAA5zC,IAAA,aAAA6B,MACA,WAAa,IAAA0uE,EACP1C,EAAUvrE,KAAK4N,EAAE,YACjB0jC,EAAWtxC,KAAK4N,EAAE,aAEhBsxB,EADWl/B,KAAK4N,EAAE,eAClBsxB,OACFg0C,EAAqBlzE,KAAK4N,EAAE,0BAAgC,KAChEulE,EAAwDnzE,KAAK4N,EAAE,aAAlDwlE,EAAYD,EAAnBhjC,MAAwBkjC,EAAQF,EAAXljC,EAAgBqjC,EAAQH,EAAXjjC,EAExC,GAAIgjC,EAAoB,CACtB,IAAAK,GAAAtrD,EAAAA,GAAAA,GAGIirD,EAFF/tC,WAAU,GAAGgL,EAAKojC,EAAA,GAAEnjC,EAAMmjC,EAAA,GAAAC,GAAAvrD,EAAAA,GAAAA,GAExBirD,EADF9tC,OAAM,GAAG6K,EAACujC,EAAA,GAAEtjC,EAACsjC,EAAA,GAGXxZ,EAAQoZ,EADiB5gC,GAAWxyC,KAAKmyE,WAAYjzC,GAAnDiR,MAENo7B,EAAUx6B,GACRiC,GAAU,CACR/C,EAAGojC,EAAWpjC,EAAI+pB,EAClB9pB,EAAGojC,EAAWpjC,EAAI8pB,EAClB7pB,MAAOA,EAAQ6pB,EACf5pB,OAAQA,EAAS4pB,IAEnBh6D,KAAK4N,EAAE,aAEX,CAGA,IjEsdqCmiC,EAAMsB,EAbdL,EAAOC,EiEzc9BhJ,EAAsC,QAA5BgmC,EAAGjuE,KAAK4N,EAAE,0BAAkB,IAAAqgE,OAAA,EAAzBA,EAA4B,GACzCwF,EAAkBxrC,EAAaA,EAAWkI,MAAQlI,EAAWmI,YAASrvC,EAE5E,GjEscoCkwC,EiErcPK,KjEqcAN,EiErcTu6B,GjEucdt7B,GAAKgB,EAAMhB,GACjBe,EAAMd,GAAKe,EAAMf,GACjBc,EAAMf,EAAIe,EAAMb,OAASc,EAAMhB,EAAIgB,EAAMd,OACzCa,EAAMd,EAAIc,EAAMZ,QAAUa,EAAMf,EAAIe,EAAMb,SiEzcvCqjC,IjEidkC1jC,EiEjdWw7B,EjEidLl6B,EiEjdcoiC,IjEmdpD3vE,KAAKiuC,IAAIhC,EAAKI,MAAQJ,EAAKK,OAASiB,GADzB,KiEjdd,CACA,IAAM4hC,EAAmB3hC,EAASnB,MAAQmB,EAASlB,OAC/CD,EAAQmB,EAASnB,MACjBC,EAASkB,EAASlB,OAClBqjC,IACER,EAAmBQ,EACrBtjC,EAAQrsC,KAAKw1B,IAAIgY,EAASlB,OAASqjC,EAAiBniC,EAASnB,OAE7DC,EAAStsC,KAAKw1B,IAAIgY,EAASnB,MAAQsjC,EAAiBniC,EAASlB,SAGjEm7B,EAAU,CACRt7B,EAAGqB,EAASrB,EAAIqB,EAASnB,MAAQ,EAAIA,EAAQ,EAC7CD,EAAGoB,EAASpB,EAAIoB,EAASlB,OAAS,EAAIA,EAAS,EAC/CD,MAAAA,EACAC,OAAAA,EAEJ,CAEApwC,KAAK4N,EAAE,YAAcmjC,GAAeiC,GAAUu4B,GAAUvrE,KAAK4N,EAAE,aACjE,GAEA,CAAAlQ,IAAA,aAAA6B,MACA,WACE,IAAI2R,EAAMlR,KAAKulE,KACf,GAAKr0D,EAAL,CACA,IAAIkkD,EAAQp1D,KAAK4N,EAAEwnD,MACf9jB,EAAWtxC,KAAK4N,EAAE,aAClBm1B,EAAa/iC,KAAK4N,EAAE,eAClBi3B,EAAyB9B,EAAzB8B,OAAQC,EAAiB/B,EAAjB+B,KAAM5F,EAAW6D,EAAX7D,OAChBw0C,EAAUlhC,GAAW,CAAErC,MAAOmB,EAASnB,MAAOC,OAAQkB,EAASlB,QAAUlR,GAC7EhuB,EAAIyiE,OACJziE,EAAI0iE,UAAUtiC,EAASrB,EAAIqB,EAASnB,MAAQ,EAAGmB,EAASpB,EAAIoB,EAASlB,OAAS,GAC9El/B,EAAIguB,OAAQA,EAASp7B,KAAK+vE,IAAM,EAAK,KACrC3iE,EAAI4hE,MAAMjuC,GAAU,EAAI,EAAGC,GAAQ,EAAI,GACvC5zB,EAAIkjD,UAAUgB,GAAQse,EAAQvjC,MAAQ,GAAIujC,EAAQtjC,OAAS,EAAGsjC,EAAQvjC,MAAOujC,EAAQtjC,QACrFl/B,EAAI4iE,SAXY,CAYlB,GAEA,CAAAp2E,IAAA,QAAA6B,MACA,WACE,GAAKS,KAAKoyE,WAAcpyE,KAAK4N,EAAEwnD,OAAUp1D,KAAKslE,SAAYtlE,KAAKulE,KAA/D,CAGA,IAAIzR,EAAS9zD,KAAKslE,QACRtlE,KAAKulE,KAEXwO,UAAU,EAAG,EAAGjgB,EAAO3jB,MAAO2jB,EAAO1jB,QAEzCpwC,KAAKg0E,YANL,CAOF,GAEA,CAAAt2E,IAAA,aAAA6B,MAIA,SAAA2kB,GAA2B,IAAA1iB,EAAA,KAAd6uE,EAAUnsD,EAAVmsD,WACPrwE,KAAK4N,EAAEwnD,QACTp1D,KAAKsJ,IAAI,YAAY2qE,cAAa,GAClCj0E,KAAKk0E,qBACLvtE,YAAW,WACTnF,EAAKwoC,UAAYw+B,GAAW,CAC1B2L,mBAAoB9D,EACpB+D,oBAAqB/D,EACrBgE,oBAAoB,GAExB,IAEJ,GAEA,CAAA32E,IAAA,qBAAA6B,MAIA,WACE,IAAIgsE,EAAUvrE,KAAK4N,EAAE,YACjB0jC,EAAWtxC,KAAK4N,EAAE,aAEhBsxB,EADWl/B,KAAK4N,EAAE,eAClBsxB,OACOk0C,EAAwC9hC,EAA/CnB,MAA6BmkC,EAAkBhjC,EAA1BlB,OAC3BmkC,EAAmD/hC,GAAWxyC,KAAKmyE,WAAYjzC,GAAlEs1C,EAAWD,EAAlBpkC,MAA4BskC,EAAYF,EAApBnkC,OACbwC,EAAkC24B,EAAzCp7B,MAA0B0C,EAAe04B,EAAvBn7B,OACpBskC,EAAStB,EAAeoB,EACxBG,EAASL,EAAgBG,EAQ7B,MALiB,CACfxhC,GAAMnvC,KAAK4oB,MAAMkmB,EAAY8hC,GAAS,EAAGF,GACzCvhC,GAAMnvC,KAAK4oB,MAAMmmB,EAAa8hC,GAAS,EAAGF,GAI9C,GAEA,CAAA/2E,IAAA,yBAAA6B,MAIA,WACE,IAAIgsE,EAAUvrE,KAAK4N,EAAE,YACjB0jC,EAAWtxC,KAAK4N,EAAE,aAEhBsxB,EADWl/B,KAAK4N,EAAE,eAClBsxB,OACOk0C,EAAkE9hC,EAAzEnB,MAA6BmkC,EAA4ChjC,EAApDlB,OAA0BijC,EAA0B/hC,EAA7BrB,EAAgBqjC,EAAahiC,EAAhBpB,EAC/D0kC,EAAmDpiC,GAAWxyC,KAAKmyE,WAAYjzC,GAAlEs1C,EAAWI,EAAlBzkC,MAA4BskC,EAAYG,EAApBxkC,OACjB0C,EAAoBy4B,EAAvBt7B,EAAa8C,EAAUw4B,EAAbr7B,EACZwkC,EAAStB,EAAeoB,EACxBG,EAASL,EAAgBG,EAEzBtvC,EAAanlC,KAAK60E,qBAClBh1C,EAAO,CACTsF,WAAAA,EACAC,OAAyC,CACvC6N,GAAMnvC,KAAK4oB,OAAOomB,EAAQugC,GAAYqB,GAAS,EAAGF,EAAcrvC,EAAW,IAC3E8N,GAAMnvC,KAAK4oB,OAAOqmB,EAAQugC,GAAYqB,GAAS,EAAGF,EAAetvC,EAAW,MAGhF,GA7RJ,SAAsBtF,GACpB,OAAKA,GAIa,CAChB,SAAAnkB,GAAA,IAAGypB,EAAUzpB,EAAVypB,WAAYC,EAAM1pB,EAAN0pB,OAAM,MACnB,GAAAnjC,QAAAvD,EAAAA,EAAAA,GAAIymC,IAAUzmC,EAAAA,EAAAA,GAAK0mC,IAAQipC,OAAM,SAACn5B,GAAM,OAAKvjC,OAAOmjE,UAAU5/B,IAAWvjC,OAAOsb,SAASioB,EAAO,GAAC,EACnG,SAAArxB,GAAA,IAAGshB,EAAUthB,EAAVshB,WAAYC,EAAMvhB,EAANuhB,OAAM,OAAOD,EAAWkpC,OAAM,SAAC19B,GAAC,OAAKA,EAAI,CAAC,KAAKvL,EAAOipC,OAAM,SAAC0G,GAAC,OAAKA,GAAK,CAAC,GAAC,GAExE1G,OAAM,SAAC2G,GAAO,OAAKA,EAAQn1C,EAAK,GACrD,CAkRSo1C,CAAap1C,IAMlB,GAAIsF,EAAW,KAAOqvC,GAAervC,EAAW,KAAOsvC,EAIvD,OAAO50C,OATL79B,QAAQuV,MAAM,kDAAmD,CAC/DwI,QAAS8f,GASf,GAEA,CAAAniC,IAAA,UAAA6B,MACA,WACE,GAAKS,KAAK+Q,aAAgB/Q,KAAKmyE,WAA/B,CAGA,IAAIpvC,EAAa/iC,KAAK4N,EAAE,eAClBsxB,EAAyB6D,EAAzB7D,OAAQ2F,EAAiB9B,EAAjB8B,OAAQC,EAAS/B,EAAT+B,KAClBjF,EAAO7/B,KAAKk1E,yBAEZtD,EAAwB5xE,KAAK4N,EAAE,0BAC/Bq3B,GAAe3kC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACdsxE,GAAqB,IACxB/xC,KAAAA,EACAX,OAAAA,EACA2F,OAAAA,EACAC,KAAAA,IAGF9kC,KAAK4N,EAAE,0BAA4Bq3B,CAdnC,CAeF,GAEA,CAAAvnC,IAAA,WAAA6B,MAKA,SAASqjC,EAAWrjC,GAClBS,KAAK4N,EAAE,gBAActN,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAChBN,KAAK4N,EAAE,gBAAc,IAAAgS,EAAAA,EAAAA,GAAA,GACvBgjB,EAAYrjC,IAGVS,KAAKoyE,YAIVpyE,KAAKuyE,cACLvyE,KAAKwyE,aACLxyE,KAAKyyE,QACP,GAEA,CAAA/0E,IAAA,WAAA6B,MAIA,SAASqjC,GACP,OAAO5iC,KAAK4N,EAAE,eAAeg1B,EAC/B,GAEA,CAAAllC,IAAA,WAAA6B,MAAA,eAAAsuC,GAAAlyB,EAAAA,EAAAA,GAAAC,EAAAA,MAIA,SAAAC,EAAes5D,GAAS,IAAAlvD,EAAAoqD,EAAA3qE,EAAA,KAAA0vE,EAAAt0E,UAAA,OAAA8a,EAAAA,MAAA,SAAAE,GAAA,cAAAA,EAAA3P,KAAA2P,EAAA1P,MAAA,OAAc,GAAd6Z,EAAAmvD,EAAAh3E,OAAA,QAAA2C,IAAAq0E,EAAA,GAAAA,EAAA,GAAmB,CAAC,EAAhB/E,EAAUpqD,EAAVoqD,YACtBrwE,KAAKoyE,UAAW,CAAFt2D,EAAA1P,KAAA,eAAA0P,EAAA8b,OAAA,iBAKqC,OAFvD53B,KAAKoyE,WAAY,EACjBpyE,KAAKmyE,WAAagD,EAClBn1E,KAAKuZ,oBAAoB,gBAAiBvZ,KAAK49D,QAAQ9hD,EAAA3P,KAAA,EAAA2P,EAAA1P,KAAA,EAGhCpM,KAAKq1E,cAAcr1E,KAAK4N,EAAE,gBAAiB5N,KAAK4N,EAAE,2BAA0B,OAAjG5N,KAAK4N,EAAEwnD,MAAKt5C,EAAAG,KACZjc,KAAKsyE,uBACLtyE,KAAKs1E,WAAW,CAAEjF,WAAAA,IAAcv0D,EAAA1P,KAAA,iBAAA0P,EAAA3P,KAAA,GAAA2P,EAAAC,GAAAD,EAAA,SAEhC9Z,QAAQuV,MAAM,6BAA8B,CAAEA,MAAKuE,EAAAC,KAAS,QAG9D/b,KAAKs+D,UAAY,IAAIsL,gBAAe,SAAAtiD,GAAa,IAAXS,GAAWE,EAAAA,GAAAA,GAAAX,EAAA,GAAN,GACrBS,EAAM8hD,YAAY15B,MAAQ,GAAKpoB,EAAM8hD,YAAYz5B,OAAS,GAC3D1qC,EAAK0sE,WAAa1sE,EAAKkI,EAAEwnD,OAC1C1vD,EAAKusE,wBAET,IACAjyE,KAAKs+D,UAAUvpD,QAAQ/U,MAAM,yBAAA8b,EAAAI,OAAA,GAAAL,EAAA,mBAC9B,gBAAA8d,GAAA,OAAAkU,EAAAzkC,MAAA,KAAAtI,UAAA,EA3BD,IA2BC,CAAApD,IAAA,aAAA6B,MACD,WAAmC,IAAAk/D,EAAAxsB,EAAAnxC,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAAJ,CAAC,EAACy0E,EAAAtjC,EAApBm4B,MAAAA,OAAK,IAAAmL,GAAQA,EACnBv1E,KAAKoyE,aAGThI,GAASpqE,KAAKgyE,UACfhyE,KAAKoyE,WAAY,EAEjBpyE,KAAKw1E,oBAELx1E,KAAKgqC,UAAYw+B,GAAW,CAC1B2L,oBAAoB,EACpBC,oBAAoB,EACpBC,oBAAoB,IAGtBr0E,KAAKsJ,IAAI,YAAY2qE,cAAa,GAClCj0E,KAAKkZ,iBAAiB,gBAAiBlZ,KAAK49D,OAAQ,CAAE/3C,MAAM,IAC9C,QAAd44C,EAAAz+D,KAAKs+D,iBAAS,IAAAG,GAAdA,EAAgBzqD,aAClB,GAEA,CAAAtW,IAAA,oBAAA6B,MACA,WACE,IAAI4lC,EAAanlC,KAAK60E,qBAClBY,EAAS3xE,KAAKw1B,IAAIt5B,KAAK4yE,YAAaztC,EAAW,IAAMnlC,KAAK4N,EAAE,YAAYuiC,MACxEulC,EAAS5xE,KAAKw1B,IAAIt5B,KAAK6yE,aAAc1tC,EAAW,IAAMnlC,KAAK4N,EAAE,YAAYwiC,OACzE0iC,EAAQhvE,KAAKw1B,IAAIm8C,EAAQC,GACzBC,EAAc31E,KAAK4N,EAAE,YAAYqiC,EAAIjwC,KAAK4N,EAAE,YAAYuiC,MAAQ,EAChEylC,EAAc51E,KAAK4N,EAAE,YAAYsiC,EAAIlwC,KAAK4N,EAAE,YAAYwiC,OAAS,EAErEpwC,KAAK2F,MAAM4c,UAAY,SAAHtgB,OAAY6wE,EAAK,gBAAA7wE,QAAgBjC,KAAK4yE,YAAc,EAAI+C,GAAe7C,EAAK,QAAA7wE,QAC7FjC,KAAK6yE,aAAe,EAAI+C,GAAe9C,EAAK,OAE/C9yE,KAAK2F,MAAMkwE,gBAAkB,GAAH5zE,OAAM0zE,EAAW,OAAA1zE,OAAM2zE,EAAW,KAC9D,GAEA,CAAAl4E,IAAA,qBAAA6B,MACA,WACE,IAAIo2E,EAAc31E,KAAK4N,EAAE,YAAYqiC,EAAIjwC,KAAK4N,EAAE,YAAYuiC,MAAQ,EAChEylC,EAAc51E,KAAK4N,EAAE,YAAYsiC,EAAIlwC,KAAK4N,EAAE,YAAYwiC,OAAS,EAErEpwC,KAAK2F,MAAM4c,UAAY,WACvBviB,KAAK2F,MAAMkwE,gBAAkB,GAAH5zE,OAAM0zE,EAAW,OAAA1zE,OAAM2zE,EAAW,KAC9D,GAEA,CAAAl4E,IAAA,SAAA6B,MACA,WACMS,KAAKoyE,YAGTpyE,KAAK4N,EAAEwnD,MAAQ,KACjB,GAEA,CAAA13D,IAAA,gBAAA6B,MAMA,SAAcgqE,EAAatkC,GAAiB,IAAA53B,EAAA,KACtC8iC,EAAQnwC,KAAK4yE,YACjB3tC,GAAe3kC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACV2kC,GAAe,IAClBpF,UAAM9+B,EACNm+B,YAAQn+B,EACR+jC,UAAM/jC,EACN8jC,YAAQ9jC,IAEV,IAAIsjD,EAAMrkD,KAAK29D,SAASkU,GAAetI,EAAap5B,EAAOlL,IAC3DssC,EAAiCZ,GAAatsB,GAAxCuX,EAAO2V,EAAP3V,QAASh7C,EAAM2wD,EAAN3wD,OAAQw0C,EAAKmc,EAALnc,MAEnBl5C,EAAOlc,KAAK81E,oBAAoBzxB,GAMpC,OALA+Q,EAAMl8C,iBAAiB,OAAQgD,EAAM,CAAE2J,MAAM,IAC7CuvC,EAAMl8C,iBAAiB,QAASgD,EAAM,CAAE2J,MAAM,IAC9C7lB,KAAKwxE,gBAAkBxxE,KAAKwxE,iBAC5BxxE,KAAKwxE,eAAiB5wD,EAEfg7C,EACJh2C,MAAK,kBAAMwvC,CAAK,IAChB7uC,OAAM,SAAC7e,GAGN,OAFA1F,QAAQuV,MAAM,uBAAwB,CAAEA,MAAO7P,IAC/C2F,EAAKO,EAAE,qBAAsB,EACtB+O,QAAQC,QAAQw4C,EACzB,GACJ,GAEA,CAAA13D,IAAA,sBAAA6B,MAKA,SAAoB8kD,GAAK,IAAA71C,EAAA,KACnBo0B,EAAY,OACZmzC,EAAoB/1E,KAAK4N,EAAE,sBAU/B,OATKmoE,EAAkBzzE,IAAIsgC,IACzBmzC,EAAkBxzE,IAAIqgC,EAAW,IAAIpgC,KAGlCuzE,EAAkBzzE,IAAIsgC,GAAWtgC,IAAI+hD,KACxC0xB,EAAkBxzE,IAAIqgC,EAAWmzC,EAAkBzzE,IAAIsgC,GAAWrgC,IAAI8hD,GAAK,IAC3ErkD,KAAK4N,EAAE,sBAAwBmoE,GAG1B,WAAM,IAAAC,EACU,OAAjBD,QAAiB,IAAjBA,GAAiC,QAAhBC,EAAjBD,EAAmBzzE,IAAIsgC,UAAU,IAAAozC,GAAjCA,EAAmC7kE,IAAIkzC,KACzC0xB,EAAkBzzE,IAAIsgC,GAAW/gC,OAAOwiD,GACxC71C,EAAKZ,EAAE,sBAAwBmoE,EAEnC,CACF,GAAC,CAAAr4E,IAAA,eAAA6B,MAED,WAAe,IAAAsR,EAAA,KACboN,GAAAgtB,EAAAA,EAAAA,GAAA6mC,EAAAh0E,WAAA,qBAAAE,KAAA,MAEAgC,KAAKmG,IAAI,aAAa,WACpB0K,EAAK4hE,OACP,IAEAzyE,KAAKmG,IAAI,YAAY,WACf0K,EAAKjD,EAAEwnD,OACTvkD,EAAKkhE,kBAET,IAEA/xE,KAAKmG,IAAI,mBAAmB,WAC1B0K,EAAK2hE,YACP,IAEA7rE,YAAW,WACTkK,EAAK1K,IAAI,oBAAoB,SAACwkE,GACvBA,GACH95D,EAAKuhE,WAAavhE,EAAK2tC,SAAS3tC,EAAKshE,WAAY,CAAE9B,YAAY,GAEnE,GACF,GAAG,EACL,GAAC,CAAA3yE,IAAA,kBAAA6B,MAED,WAAkB,IAAA02E,EAChBh4D,GAAAgtB,EAAAA,EAAAA,GAAA6mC,EAAAh0E,WAAA,wBAAAE,KAAA,MACc,QAAdi4E,EAAAj2E,KAAKs+D,iBAAS,IAAA2X,GAAdA,EAAgBjiE,YAClB,KAAC89D,CAAA,CArf4B,CAAS5oC,IErCjC,SAASgtC,GAAS9f,EAAGrsB,EAAGviC,GAG7B,IAFA,IAAI2uE,EAAMtuE,MAAML,GAEP7J,IADT6J,EACgB7J,GAAK,EAAGA,IACtBw4E,EAAIx4E,GAAKmG,KAAKqxC,MAAMx3C,EAAIosC,GAAKviC,EAAI7J,GAAKy4D,GAAK5uD,GAE7C,OAAO2uE,CACT,CCWA,SAASC,GAAmBC,EAAW92E,EAAOknC,GAC5C,IAbuB6vC,EAanBC,GAbmBD,EAaOD,EAZvBC,EAAQ33E,QACb,SAAC89B,EAAK+5C,EAAOhyE,GAAG,OAAMA,EAAM8xE,EAAQl4E,OAAS,EAAI,GAAH6D,QAAAvD,EAAAA,EAAAA,GAAO+9B,GAAG,CAAE,CAAC+5C,EAAOF,EAAQ9xE,EAAM,MAAOi4B,CAAG,GAC1F,KAUuC6R,MAAK,SAAA5yB,GAAA,IAAAmI,GAAAoE,EAAAA,GAAAA,GAAAvM,EAAA,GAAEgzC,EAAI7qC,EAAA,GAAEgrC,EAAKhrC,EAAA,UAAM6qC,GAAQnvD,GAASA,GAASsvD,CAAK,IAChG,OAAOwnB,EAAU3sE,KAAI,SAAC8sE,GACpB,IAAIlpB,EAAWxpD,KAAKiuC,IAAIwkC,EAAQ,GAAKA,EAAQ,IACzCE,EAAW3yE,KAAKiuC,IAAIxyC,EAAQg3E,EAAQ,IAAMjpB,EAE9C,OAAIipB,EAAQ,KAAOC,EACVj3E,EAAQknC,EAAO,EAAI,EAAIgwC,EAE5BF,EAAQ,KAAOC,EACVj3E,GAASknC,EAAOgwC,EAAW,EAE7B,CACT,GACF,CAeA,SAASC,GAAe9zC,EAAWrjC,GACjC,IAAIiI,EAAIg/B,GAAwB5D,GAAW+D,gBAC3C2pC,EAAsB9pC,GAAwB5D,GAAxC8D,EAAK4pC,EAAL5pC,MAAOD,EAAI6pC,EAAJ7pC,KAEb,OAAO/nC,EAAAA,EAAAA,GAAI,IAAIgD,IAAI,GAADO,QAAAvD,EAAAA,EAAAA,GAAKw3E,GAASxvC,EAAM,GAAID,EAAMj/B,EAAI,KAAE9I,EAAAA,EAAAA,GAAKw3E,GAASzvC,EAAMC,EAAM,GAAIl/B,EAAI,IAAE,CAAEi/B,EAAMlnC,MAAS42D,MACzG,SAACC,EAAGrsB,GAAC,OAAKqsB,EAAIrsB,CAAC,GAEnB,CHueA+nC,GAAmB9rE,SAAqB,2GG5djC,IAAM2wE,GAAgB,SAAA1pC,IAAA1nC,EAAAA,EAAAA,GAAAoxE,EAAA1pC,GAAA,IAAAznC,GAAAC,EAAAA,EAAAA,GAAAkxE,GAC3B,SAAAA,IAAc,IAAAt1E,EAkB8B,OAlB9BvB,EAAAA,EAAAA,GAAA,KAAA62E,IACZt1E,EAAAmE,EAAAxH,KAAA,OAMKo0E,WAAY,EAMjB/wE,EAAKu1E,SAAU,EAGfv1E,EAAKw1E,sBAAwB32D,EAAS7e,EAAKy1E,aAAa34D,MAAI7Q,EAAAA,EAAAA,GAAAjM,IAAQ,KAEpEA,EAAK4oC,UAAUtoC,IAAI,uBAAuBN,CAC5C,CAsWC,OApWDX,EAAAA,EAAAA,GAAAi2E,EAAA,EAAAj5E,IAAA,sBAAA6B,MAKA,SAAoB8kD,GAAK,IAAA7iD,EAAA,KACnBohC,EAAY5iC,KAAK0vE,WAEjBqG,EAAoB/1E,KAAK4N,EAAE,sBAU/B,OATKmoE,EAAkBzzE,IAAIsgC,IACzBmzC,EAAkBxzE,IAAIqgC,EAAW,IAAIpgC,KAGlCuzE,EAAkBzzE,IAAIsgC,GAAWtgC,IAAI+hD,KACxC0xB,EAAkBxzE,IAAIqgC,EAAWmzC,EAAkBzzE,IAAIsgC,GAAWrgC,IAAI8hD,GAAK,IAC3ErkD,KAAK4N,EAAE,sBAAwBmoE,GAG1B,WAAM,IAAAC,EACU,OAAjBD,QAAiB,IAAjBA,GAAiC,QAAhBC,EAAjBD,EAAmBzzE,IAAIsgC,UAAU,IAAAozC,GAAjCA,EAAmC7kE,IAAIkzC,KACzC0xB,EAAkBzzE,IAAIsgC,GAAW/gC,OAAOwiD,GACxC7iD,EAAKoM,EAAE,sBAAwBmoE,EAEnC,CACF,GAEA,CAAAr4E,IAAA,SAAA6B,MACA,WAAS,IAAAmG,EAAA,KACPN,OAAO2xE,qBAAqB/2E,KAAKg3E,MACjCh3E,KAAKg3E,KAAO5xE,OAAO0mE,uBAAsB,WAAM,IACf5kE,EADeG,GAAAC,EAAAA,EAAAA,GAC9B5B,EAAKuxE,YAAU,IAA9B,IAAA5vE,EAAAE,MAAAL,EAAAG,EAAAG,KAAAC,MAAgC,KAAvByvE,EAAEhwE,EAAA3H,MACH61D,EAAU8hB,EAAV9hB,MACFA,IACFA,EAAMzvD,MAAMkiE,QAAUqP,EAAGrP,QAAQplD,WACjC2yC,EAAMzvD,MAAMwxE,OAASD,EAAGC,OAAO10D,WAEnC,CAAC,OAAA/a,IAAAL,EAAAM,EAAAD,GAAA,SAAAL,EAAAO,GAAA,CACH,GACF,GAEA,CAAAlK,IAAA,YAAA6B,MASA,WAA6E,IAAA2kB,EAAApjB,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAAJ,CAAC,EAACs2E,EAAAlzD,EAA/DxN,IAAAA,OAAG,IAAA0gE,EAAGp3E,KAAKq3E,KAAID,EAAAE,EAAApzD,EAAEU,OAAAA,OAAM,IAAA0yD,EAAGt3E,KAAKmwE,QAAOmH,EAAE10C,EAAS1e,EAAT0e,UAAWrjC,EAAK2kB,EAAL3kB,MACzD0lC,GAAe3kC,EAAAA,EAAAA,GAAA,GAAQN,KAAKu3E,kBAE5B30C,IACFqC,EAAgBrC,GAAahe,EAAS,CAAEhmB,KAAMgmB,EAAQsgB,OAAQ3lC,GAAUA,GAI1E,IAAI4wC,EAAQnwC,KAAK4yE,YACjB,OAAO5yE,KAAK29D,SAASkU,GAAen7D,EAAKy5B,EAAOlL,GAClD,GAEA,CAAAvnC,IAAA,qBAAA6B,MAMA,SAAmBqjC,EAAWrjC,GAE5B,MAAO,CACL8kD,IAFQrkD,KAAKw3E,UAAU,CAAE50C,UAAAA,EAAWrjC,MAAAA,IAGpC61D,MAAO,KACPyS,QAAS,EACTsP,OAAQ,EACR53E,MAAAA,EAEJ,GAEA,CAAA7B,IAAA,UAAA6B,MAQA,SAAQqjC,EAAWhe,GACjB,OAAO5kB,KAAK0vE,aAAe9sC,GAAa5iC,KAAKmwE,UAAYvrD,CAC3D,GAEA,CAAAlnB,IAAA,eAAA6B,MAMA,SAAaqjC,EAAWhe,EAAQrlB,GAAO,IAAA8N,EAAA,KACjCoqE,EAAa,WAAH,OACXpqE,EAAKqqE,QAAQ90C,EAAWhe,IAAWvX,EAAKyP,SAAWvd,KAAW8N,EAAK4pE,WAAW3oC,MAAK,SAAC4oC,GAAE,OAAKA,EAAG33E,QAAUA,CAAK,GAAC,EAEjH,IAAIk4E,IAAJ,CAGA,IAAIE,EAAW33E,KAAK43E,mBAAmBh1C,EAAWrjC,GAC9C61D,EAAQ,IAAInP,MAChBmP,EAAM/Q,IAAMszB,EAAStzB,IACrB,IAAInoC,EAAOlc,KAAK81E,oBAAoB6B,EAAStzB,KAC7C+Q,EAAMl8C,iBAAiB,OAAQgD,EAAM,CAAE2J,MAAM,IAC7CuvC,EAAMl8C,iBAAiB,QAASgD,EAAM,CAAE2J,MAAM,IAC9C8xD,EAASviB,MAAQA,EACjBA,EAAMnrB,UAAUtoC,IAAI,eAEpByzD,EAAMl8C,iBACJ,QACA,WACE,IAAIu+D,IAAJ,CAGA,IAAIpB,EAAYhpE,EAAK4pE,WACjBzyE,EAAM6xE,EAAUwB,WAAU,SAACX,GAAE,OAAKA,EAAG33E,MAAQA,CAAK,IAClDu4E,EAAmBtzE,EAAM6xE,EAAUj4E,OAASi4E,EAAU7xE,GAAK4wD,MAAQ,MAClE/nD,EAAK0qE,YAAeD,IAAqBzqE,EAAK0qE,WAAWC,SAASF,KAGvEzB,EAAU4B,OAAOzzE,EAAK,EAAGmzE,GACzBtqE,EAAK0qE,WAAWG,aAAa9iB,EAAO0iB,GACpCzqE,EAAK8qE,QAAQv1C,EAAWrjC,GATxB,CAUF,GACA,CAAEsmB,MAAM,IAGVuvC,EAAMl8C,iBACJ,SACA,WACE7L,EAAKO,EAAE,qBAAsB,CAC/B,GACA,CAAEiY,MAAM,GAlCV,CAoCF,GAEA,CAAAnoB,IAAA,MAAA6B,MACA,SAAIA,GACFA,EAAyB,kBAAVA,EAAqBmN,SAASnN,EAAO,IAAMA,EAC1DS,KAAKm4E,QAAQn4E,KAAK0vE,WAAYnwE,GAC9BS,KAAK62E,sBAAsB72E,KAAK0vE,WAAY1vE,KAAKmwE,QAAS5wE,EAC5D,GAEA,CAAA7B,IAAA,UAAA6B,MAKA,SAAQqjC,EAAWrjC,GACjBS,KAAK0vE,WAAa9sC,EAClB5iC,KAAK8c,OAASvd,EAQd,IANA,IAAMknC,EAASD,GAAwB5D,GAAjC6D,KAEF2xC,EAAiBp4E,KAAKi3E,WAAWvtE,KAAI,SAACwtE,GAAE,OAAKA,EAAG33E,KAAK,IACrD84E,EAAYjC,GAAmBgC,EAAgB74E,EAAOknC,GACtD6xC,EAjNR,SAA2BjC,EAAW5vC,GACpC,OAAO4vC,EAAU3sE,KAAI,SAAC8sE,EAAOhyE,GAAG,OAAMgyE,EAAQ/vC,EAAO4vC,EAAUj4E,OAASoG,EAAMA,CAAG,GACnF,CA+MmB+zE,CAAkBH,EAAgB3xC,GAEjD50B,EAAA,EAAA4Y,EAAsB5sB,OAAOiqB,QAAQ9nB,KAAKi3E,YAAWplE,EAAA4Y,EAAArsB,OAAAyT,IAAE,CAAlD,IAAA6Y,GAAAzC,EAAAA,GAAAA,GAAAwC,EAAA5Y,GAAA,GAAKrN,EAAGkmB,EAAA,GAAEwsD,EAAExsD,EAAA,GACfwsD,EAAGrP,QAAUwQ,EAAU7zE,GACvB0yE,EAAGC,OAASmB,EAAS9zE,EACvB,CAEAxE,KAAKw4E,QACP,GAEA,CAAA96E,IAAA,sBAAA6B,MACA,WACE,IAAI61D,EAAQ,IAAInP,MAGhB,OAFAmP,EAAMnrB,UAAUtoC,IAAI,cAAe,wBACnCyzD,EAAMzvD,MAAMkiE,QAAU,IACfzS,CACT,GAEA,CAAA13D,IAAA,aAAA6B,MAAA,eAAAk5E,GAAA98D,EAAAA,EAAAA,GAAAC,EAAAA,MACA,SAAAC,IAAA,IAAAhX,EAAA6zE,EAAAC,EAAAC,EAAAvP,EAAAzN,EAAAh7C,EAAAgiB,EAAAhe,EAAApW,EAAA,YAAAoN,EAAAA,MAAA,SAAAE,GAAA,cAAAA,EAAA3P,KAAA2P,EAAA1P,MAAA,OAqB2B,OApBrBvH,EAAK0D,SAASC,yBAClBxI,KAAK64E,cAAgB74E,KAAK64E,eAAiB74E,KAAK84E,uBAC/C94E,KAAKg4E,SAASh4E,KAAK64E,gBAAkBh0E,EAAGoC,YAAYjH,KAAK64E,eAEtDH,EAAYnwE,SAAS+G,cAAc,OACvCzK,EAAGoC,YAAYyxE,GAEXC,EAAU34E,KAAKi3E,WAAWvtE,KAAI,SAACwtE,GAAE,OAAKA,EAAG7yB,GAAG,IAACu0B,EAEfhI,GAAmB+H,GAA/CtP,EAAMuP,EAANvP,OAAQzN,EAAOgd,EAAPhd,QAASh7C,EAAMg4D,EAANh4D,OACvByoD,EAAO/nE,SAAQ,SAACoJ,GACd,IAAIwR,EAAO1N,EAAKsnE,oBAAoBprE,EAAK25C,KACzC35C,EAAKwO,iBAAiB,OAAQgD,GAC9BxR,EAAKwO,iBAAiB,QAASgD,EACjC,IACAlc,KAAK+4E,kBAAoB,WACvBn4D,IACApS,EAAKuqE,uBAAoBh4E,CAC3B,EACI6hC,EAAY5iC,KAAK0vE,WACjB9qD,EAAS5kB,KAAKmwE,QAAOr0D,EAAA1P,KAAA,GACnBwvD,EAAO,QACT57D,KAAKoyE,WAAapyE,KAAK03E,QAAQ90C,EAAWhe,KAC5C5kB,KAAK+3E,YAAc/3E,KAAK+3E,WAAWn2E,SACnC5B,KAAK+3E,WAAaW,EAClB14E,KAAKi3E,WAAW31E,SAAQ,SAAC41E,EAAI1yE,GAC3B,IAAIw0E,EAAU3P,EAAO7kE,GACrBw0E,EAAQ/uC,UAAUtoC,IAAI,eACtBu1E,EAAG9hB,MAAQ4jB,EACXxqE,EAAKupE,WAAW9wE,YAAY+xE,EAC9B,IACAh5E,KAAKiH,YAAYpC,GACjB7E,KAAKw4E,UACN,yBAAA18D,EAAAI,OAAA,GAAAL,EAAA,UACF,yBAAA48D,EAAArvE,MAAA,KAAAtI,UAAA,EApCD,IAsCA,CAAApD,IAAA,qBAAA6B,MACA,SAAmB0lC,GAAiB,IAAAp0B,EAAA,KAElC,GADA7Q,KAAKu3E,iBAAmBtyC,EACpBjlC,KAAK64E,cAAe,CACtB,IAAIx0B,EAAMrkD,KAAKw3E,YACXt7D,EAAOlc,KAAK81E,oBAAoBzxB,GACpCrkD,KAAK64E,cAAcx0B,IAAMA,EACzBrkD,KAAK64E,cAAc3/D,iBAAiB,OAAQgD,EAAM,CAAE2J,MAAM,IAC1D7lB,KAAK64E,cAAc3/D,iBAAiB,QAASgD,EAAM,CAAE2J,MAAM,IAC3D7lB,KAAK64E,cAAclzE,MAAMkiE,QAAU,IAEnC7nE,KAAK64E,cAAc3/D,iBACjB,SACA,WACErI,EAAKjD,EAAE,qBAAsB,CAC/B,GACA,CAAEiY,MAAM,GAEZ,CACF,GAEA,CAAAnoB,IAAA,UAAA6B,MAOA,SAAA0mB,GAA2C,IAAA7U,EAAA,KAAjCsF,EAAGuP,EAAHvP,IAAKkO,EAAMqB,EAANrB,OAAQge,EAAS3c,EAAT2c,UAAWrjC,EAAK0mB,EAAL1mB,MAChCS,KAAKi5E,qBAAuBj5E,KAAKi5E,sBAEjC,IAEMr4D,EAAWgwD,GAFD8F,GAAe9zC,EAAWrjC,GAClBmK,KAAI,SAACwtE,GAAE,OAAK9lE,EAAKomE,UAAU,CAAE9gE,IAAAA,EAAKkO,OAAAA,EAAQge,UAAAA,EAAWrjC,MAAO23E,GAAK,KACnFt2D,OAEN5gB,KAAKi5E,oBAAsBr4D,CAC7B,GAEA,CAAAljB,IAAA,kBAAA6B,MACA,SAAgB8kD,GAAK,IAAA7xC,EAAA,KACf4iD,EAAQp1D,KAAK64E,eAAiB74E,KAAK84E,sBAIvC,IAHC94E,KAAKg4E,SAAS5iB,IAAUp1D,KAAKiH,YAAYmuD,GAC1Cp1D,KAAK64E,cAAgBzjB,EAEjBA,EAAM/Q,MAAQA,EAQhB,OAPA+Q,EAAMzvD,MAAMkiE,QAAU,IACtBzS,EAAMzvD,MAAM4c,UAAY,gBACxBviB,KAAKgqC,UAAYw+B,GAAW,CAC1B2L,mBAAoBn0E,KAAKk5E,YACzBC,qBAAsBn5E,KAAKk5E,YAC3BE,qBAAqB,KAIzBhkB,EAAMzvD,MAAMkiE,QAAU,IACtB,IAAI3rD,EAAOlc,KAAK81E,oBAAoBzxB,GACpC+Q,EAAMl8C,iBAAiB,QAASgD,EAAM,CAAE2J,MAAM,IAC9CuvC,EAAM/Q,IAAMA,EACZ+Q,EAAMl8C,iBACJ,QACA,WACEgD,IACIk5C,IACFA,EAAMzvD,MAAMkiE,QAAU,IACtBzS,EAAMzvD,MAAM4c,UAAY,WACxB/P,EAAKw3B,UAAYw+B,GAAW,CAC1B2L,mBAAoB3hE,EAAK0mE,YACzBC,qBAAsB3mE,EAAK0mE,YAC3BE,qBAAqB,IAG3B,GACA,CAAEvzD,MAAM,IAEVuvC,EAAMl8C,iBACJ,SACA,WACE1G,EAAK5E,EAAE,qBAAsB,CAC/B,GACA,CAAEiY,MAAM,GAEZ,GAEA,CAAAnoB,IAAA,WAAA6B,MAQA,SAAA+nB,GAAwD,IAAA7T,EAAA,KAA7CiD,EAAG4Q,EAAH5Q,IAAKksB,EAAStb,EAATsb,UAAWrjC,EAAK+nB,EAAL/nB,MAAOqlB,EAAM0C,EAAN1C,OAAQyrD,EAAU/oD,EAAV+oD,WAUxC,GATArwE,KAAKoyE,WAAY,EACjBpyE,KAAK42E,SAAU,EACf52E,KAAKq3E,KAAO3gE,EACZ1W,KAAK0vE,WAAa9sC,GAAa,UAC/B5iC,KAAK8c,OAASvd,EACdS,KAAKmwE,QAAUvrD,EACf5kB,KAAKk5E,YAAc7I,EAEe,kBAAV9wE,IAAuBqlB,EAC/B,CACd,IAAIy/B,EAAMrkD,KAAKw3E,UAAU,CAAE50C,UAAAA,EAAWrjC,MAAAA,IAGtC,OAFAS,KAAKq5E,gBAAgBh1B,QACrBrkD,KAAK+3E,YAAc/3E,KAAK+3E,WAAWn2E,SAErC,CACA5B,KAAKi3E,WAAaP,GAAe9zC,EAAWrjC,GAAOmK,KAAI,SAACqZ,GAAQ,OAAKtP,EAAKmkE,mBAAmBh1C,EAAW7f,EAAS,IAEjH/iB,KAAKm4E,QAAQv1C,EAAWrjC,GACxBS,KAAKs5E,YACP,GAEA,CAAA57E,IAAA,aAAA6B,MACA,WAAiC,IAAA+V,EAAA,KAAAgV,EAAAxpB,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAAJ,CAAC,EAACy4E,EAAAjvD,EAAlB62C,KAAAA,OAAI,IAAAoY,GAAOA,EACtBv5E,KAAKoyE,WAAY,EAEjBpyE,KAAK+4E,mBAAqB/4E,KAAK+4E,oBAC/B/4E,KAAKi5E,qBAAuBj5E,KAAKi5E,sBAE7B9X,IAASnhE,KAAK42E,SAChB52E,KAAK42E,SAAU,EACX52E,KAAK64E,gBACP74E,KAAK64E,cAAclzE,MAAM4c,UAAY,YAEvCviB,KAAKgqC,UAAYw+B,GAAW,CAC1B2L,oBAAoB,EACpBgF,qBAAqB,EACrBC,qBAAqB,IAEvBp5E,KAAKkZ,iBACH,iBACA,WACE5D,EAAKyiE,YAAcziE,EAAKyiE,WAAWn2E,QACrC,GACA,CAAEikB,MAAM,KAGV7lB,KAAK+3E,YAAc/3E,KAAK+3E,WAAWn2E,QAEvC,KAAC+0E,CAAA,CA1X0B,CAASztC,ICnEzBswC,GAAc,SAAAvsC,IAAA1nC,EAAAA,EAAAA,GAAAi0E,EAAAvsC,GAAA,IAAAznC,GAAAC,EAAAA,EAAAA,GAAA+zE,GAAA,SAAAA,IAAA,OAAA15E,EAAAA,EAAAA,GAAA,KAAA05E,GAAAh0E,EAAA4D,MAAA,KAAAtI,UAAA,CAaxB,OAbwBJ,EAAAA,EAAAA,GAAA84E,EAAA,EAAA97E,IAAA,eAAA6B,MACzB,WAAe,IAAA8B,EAAA,KACb4c,GAAAgtB,EAAAA,EAAAA,GAAAuuC,EAAA17E,WAAA,qBAAAE,KAAA,MAEAgC,KAAKkZ,iBAAiB,SAAS,SAACvR,GAC9BA,EAAEklD,iBACF,IAAM4sB,EAAmB9xE,EAAnB8xE,OAAQC,EAAW/xE,EAAX+xE,OACV51E,KAAKiuC,IAAI2nC,GATC,EAUZr4E,EAAKs4E,YAAcD,EAEnBr4E,EAAKs4E,YAAcF,CAEvB,GACF,KAACD,CAAA,CAbwB,CAAStwC,IAgBpCswC,GAAexzE,SAAqB,kBC4B7B,IAAM4zE,GAAa,SAAA3sC,IAAA1nC,EAAAA,EAAAA,GAAAq0E,EAAA3sC,GAAA,IAAAznC,GAAAC,EAAAA,EAAAA,GAAAm0E,GACxB,SAAAA,IAAc,IAAAv4E,EAwE2D,OAxE3DvB,EAAAA,EAAAA,GAAA,KAAA85E,GACZv4E,EAAAmE,EAAAxH,KAAA,OAAQ4hB,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,qBAqOW6e,GAAS,WAC5B,IAMwC25D,EANlC50C,EAAkB5jC,EAAKuM,EAAE,0BAEzBksE,EAAmBz4E,EAAKuM,EAAE,qBAC5ByV,EAAO,GACP2rC,GAAU,EAEd,GAAI3tD,EAAKuM,EAAE,YAAco4B,GAAMG,QAE7B,GADA6oB,GAAU,EACN3tD,EAAKuM,EAAE,oBAAoC,OAAfq3B,QAAe,IAAfA,GAAuB,QAAR40C,EAAf50C,EAAiBrgB,cAAM,IAAAi1D,OAAR,EAAfA,EAAyBj7E,QAASyC,EAAKuM,EAAE,kBAAmB,KAAAmsE,EACtFx6E,GAAuB,OAAf0lC,QAAe,IAAfA,GAAuB,QAAR80C,EAAf90C,EAAiBrgB,cAAM,IAAAm1D,OAAR,EAAfA,EAAyB70C,SAAU,IAC/C7hB,EAAOhiB,EAAKuM,EAAE,kBAAoB,IAAMrO,CAC1C,MACE8jB,EAAOhiB,EAAKmhC,KAAKqtC,SAEd,GAAIxuE,EAAKuM,EAAE,YAAco4B,GAAME,QAAU4zC,EAAkB,CAChE9qB,GAAU,EACV,IAAIzvD,GAAuB,OAAf0lC,QAAe,IAAfA,OAAe,EAAfA,EAAkB60C,KAAqBtzC,GAAwBszC,GAAkBrzC,KAC7FpjB,EAAOhiB,EAAKmhC,KAAKs3C,GAAoB,IAAMv6E,CAC7C,CACIyvD,IACF3tD,EAAKuM,EAAE,qBAAuByV,GAEhChiB,EAAKiI,IAAI,cAAc2gC,UAAUC,OAAO,uBAAwB8kB,EAClE,GAAG,IA3PD3tD,EAAK2F,OAAK1G,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACLe,EAAK2F,OAAK,IACb,YAAa,KAEb,qBAAsB,IAAIxE,IAC1B,eAAe,EACf,iBAAkBqtE,GAClB,oBAAqB,KACrBzG,YAAY,EACZ4Q,QAAS1zC,GACT2zC,gBAAiB5zC,GACjB6zC,eAAgB3zC,GAChB,oBAAqB,KAErB,wBAAwB,EACxB,uBAAuB,EACvB,uBAAuB,EACvB,4BAA4B,EAC5B,8BAA8B,EAC9B,+BAA+B,EAC/B,2BAA2B,EAC3B,6BAA6B,EAC7B,8BAA8B,EAC9B,+BAAgC,CAC9B4zC,OAAQ,0BACRnrB,QAAS,wBAEX,kCAAmC,CACjCmrB,OAAQ,6BACRnrB,QAAS,wBAEX,4BAA6B,CAC3BmrB,OAAQ,sBACRnrB,QAAS,wBAEX,2BAA4B,CAC1BmrB,OAAQ,qBACRnrB,QAAS,uBAEX,4BAA6B,CAC3BmrB,OAAQ,sBACRnrB,QAAS,wBAEX,YAAa,WACX3tD,EAAKmwE,gBAAkBnwE,EAAKmwE,iBAC5BnwE,EAAKuM,EAAE,eACT,EACA,WAAY,WACVvM,EAAKuM,EAAE,aAAavM,EAAKuM,EAAE,0BAC7B,EACA,iBAAkB,WAChBvM,EAAKiI,IAAI,aAAaF,QACtB/H,EAAK+4E,gBACP,EACA,kBAAmB,WACjB/4E,EAAKiI,IAAI,aAAasX,SACtBvf,EAAK+4E,gBACP,EAEA,cAAe,SAACzyE,GACd,IAAM00B,EAAiC10B,EAAE0yE,cAAel1E,aAAa,WACjEk3B,GACFh7B,EAAKi5E,aAAaj+C,EAAI,CAAEg0C,YAAY,GAExC,IAKFhvE,EAAKkpE,qBAAuBrqD,EAAS7e,EAAK0nE,YAAY5qD,MAAI7Q,EAAAA,EAAAA,GAAAjM,IAAQ,KAAKA,CACzE,CAqQC,OAnQDX,EAAAA,EAAAA,GAAAk5E,EAAA,EAAAl8E,IAAA,iBAAA6B,MACA,WACES,KAAK4N,EAAE,gBAAiB,EACpB5N,KAAK4N,EAAE,YAAco4B,GAAME,QAC7BlmC,KAAKsJ,IAAI,cAAc2gC,UAAUC,OAAO,wBAAwB,EAEpE,GAEA,CAAAxsC,IAAA,0BAAA6B,MAIA,SAAwBqjC,GACtB,IAAI59B,EAAK,IAAI2sE,GAGb,OADA3sE,EAAG49B,UAAYA,EACR59B,CACT,GAEA,CAAAtH,IAAA,uBAAA6B,MAIA,SAAqBqlB,GACnB,IAAI5f,EAAK,IAAI+rE,GAGb,OADA/rE,EAAG4f,OAASA,EACL5f,CACT,GAEA,CAAAtH,IAAA,uBAAA6B,MAIA,SAAqBqjC,GACnB,IAAI59B,EAAK,IAAIwqE,GAGb,OADAxqE,EAAG49B,UAAYA,EACR59B,CACT,GAEA,CAAAtH,IAAA,sBAAA6B,MAIA,SAAoBirE,GAAO,IAAAhpE,EAAA,KACrB+4E,EAASv6E,KAAKsJ,IAAI,iBAADrH,OAAkBuoE,IACnC3lE,EAAK0D,SAASC,yBAEdgiE,IAAUxkC,GAAMC,KAClBjmC,KAAK4N,EAAEssE,eAAe54E,SACa,SAACshC,GAChC,IAAI59B,EAAKxD,EAAKg5E,qBAAqB53C,GAEnC/9B,EAAGoC,YAAYjC,EACjB,IAEOwlE,IAAUxkC,GAAMG,QACzB,CAAC0pC,IAAoB5tE,QAAAvD,EAAAA,EAAAA,GAAKsB,KAAK4N,EAAEosE,UAAS14E,SAAQ,SAACm5E,GACjD,IAAIz1E,EAAKxD,EAAKk5E,qBAAqBD,GAEnC51E,EAAGoC,YAAYjC,EACjB,IACSwlE,IAAUxkC,GAAME,QACzBlmC,KAAK4N,EAAEqsE,gBAAgB34E,SACY,SAACshC,GAChC,IAAI59B,EAAKxD,EAAKm5E,wBAAwB/3C,GAEtC/9B,EAAGoC,YAAYjC,EACjB,KAIJtG,EAAAA,EAAAA,GAAImG,EAAGyB,UAAUhF,SAAQ,SAAC0D,EAAIR,GACxBA,IAAQK,EAAGkE,WAAW3K,OAAS,GACjC4G,EAAGilC,UAAUtoC,IAAI,0BAErB,IAEA44E,EAAOx0E,UAAY,GACnBw0E,EAAOtzE,YAAYpC,EACrB,GAEA,CAAAnH,IAAA,eAAA6B,MAKA,SAAa88B,EAAE3gB,GAAkB,IAAd20D,EAAU30D,EAAV20D,WACjBrwE,KAAK4N,EAAE,UAAYyuB,EAEfA,IAAO2J,GAAMC,MACfjmC,KAAK4N,EAAE,YAAYu8D,aACnBnqE,KAAK4N,EAAE,cAAc4wC,SAASx+C,KAAK4N,EAAE,cAAe,CAAEyiE,WAAAA,MAEtDrwE,KAAK4N,EAAE,YAAY4wC,SAAS,CAAE9nC,IAAK1W,KAAK4N,EAAE,gBAAiByiE,WAAAA,IAC3DrwE,KAAK4N,EAAE,cAAcu8D,cACtB,IAEyBjjE,EAFzBG,GAAAC,EAAAA,EAAAA,GAEiB8+B,IAAQ,IAA1B,IAAA/+B,EAAAE,MAAAL,EAAAG,EAAAG,KAAAC,MAA4B,KAAnB+iE,EAAKtjE,EAAA3H,MACRq7E,EAAepQ,IAAUnuC,EAEXr8B,KAAKsJ,IAAI,cAADrH,OAAeuoE,IAC7B2E,OAASyL,EAEjBA,GACF56E,KAAK66E,oBAAoBx+C,GACzBr8B,KAAK86E,qBAEL96E,KAAK+6E,oBAAoBvQ,GAE3BxqE,KAAK4N,EAAE,uBAAD3L,OAAwBuoE,IAAWoQ,CAC3C,CAAC,OAAAlzE,IAAAL,EAAAM,EAAAD,GAAA,SAAAL,EAAAO,GAAA,CACH,GAEA,CAAAlK,IAAA,sBAAA6B,MAIA,SAAoBirE,GAClB,IAAI+P,EAASv6E,KAAKsJ,IAAI,iBAADrH,OAAkBuoE,IACnC+P,IACFA,EAAOx0E,UAAY,GAEvB,GAEA,CAAArI,IAAA,oBAAA6B,MACA,WACE,IAAIy7E,EAAch7E,KAAKsJ,IAAI,cAADrH,OAAejC,KAAK4N,EAAE,YAC9B5N,KAAKsJ,IAAI,kBACf3D,MAAM4c,UAAY,cAAHtgB,OAAiB+4E,EAAYC,WAAU,MACpE,GAEA,CAAAv9E,IAAA,sBAAA6B,MACA,WAAsB,IAAAmG,EAAA,KACpB,GAAI1F,KAAK4N,EAAE,oBAAsB5N,KAAK4N,EAAE,gBAAiB,CACvD,IAAIuiC,EAAQnwC,KAAK4N,EAAE,mBAAmBglE,YAClCvuB,EAAMrkD,KAAK29D,SAASkU,GAAe7xE,KAAK4N,EAAE,gBAAiBuiC,EAAOnwC,KAAK4N,EAAE,4BAC7E5N,KAAKwxE,gBAAkBxxE,KAAKwxE,iBAC5B,IAAM5wD,EAAWgwD,GAAmB,CAACvsB,IAA/BzjC,OACN5gB,KAAKwxE,eAAiB,WACpB5wD,IACAlb,EAAK8rE,oBAAiBzwE,CACxB,CACF,CACF,GAEA,CAAArD,IAAA,cAAA6B,MAIA,SAAY2hE,GACVlhE,KAAK4N,EAAEw7D,WAAalI,CACtB,GAAC,CAAAxjE,IAAA,eAAA6B,MA4BD,WAAe,IAAA8N,EAAA,KACb4Q,GAAAgtB,EAAAA,EAAAA,GAAA2uC,EAAA97E,WAAA,qBAAAE,KAAA,MAEAgC,KAAK4N,EAAE,aAAe5N,KAAKsJ,IAAI,aAE/BtJ,KAAKmG,IAAI,cAAc,SAACgvE,GAClBA,GACFxuE,YAAW,WACT0G,EAAKitE,aAAajtE,EAAKO,EAAE,UAAW,CAAEyiE,YAAY,GACpD,GAAG,EAEP,IAEArwE,KAAKmG,IAAI,0BAA0B,SAACyrE,GAA0B,IAAAsJ,EACxDC,EAAqC,OAArBvJ,QAAqB,IAArBA,GAA6B,QAARsJ,EAArBtJ,EAAuBhtD,cAAM,IAAAs2D,OAAR,EAArBA,EAA+Bt8E,KAC/CyO,EAAKO,EAAE,oBAAsButE,IAC/B9tE,EAAKO,EAAE,kBAAoButE,EAE/B,IAEAn7E,KAAKmG,IAAI,kBAAkB,WACzBkH,EAAK+tE,oBACP,IAEAp7E,KAAKmG,IAAI,qBAAqB,WAC5BkH,EAAK+tE,oBACP,IAEAp7E,KAAKmG,IAAI,UAAU,WACjBkH,EAAK+tE,oBACP,IAEAp7E,KAAKmG,IAAI,gBAAgB,WACvBkH,EAAKO,EAAE,aAAeP,EAAKO,EAAE,YAAYu8D,YAC3C,IAEAnqE,KAAKmG,IAAI,0BAA0B,SAAC8+B,GAClC53B,EAAKguE,sBACDhuE,EAAKO,EAAE,aACTP,EAAKO,EAAE,YAAY0tE,mBAAmBr2C,EAE1C,IAEAjlC,KAAKmG,IAAI,sBAAsB,SAAuD4vE,GACpF,IACmD7rE,EAD/CqxE,GAAa,EAAMlxE,GAAA/C,EAAAA,EAAAA,GACCyuE,EAAkBjuD,WAAS,IAAnD,IAAAzd,EAAA9C,MAAA2C,EAAAG,EAAA7C,KAAAC,MAAqD,KAAzC86C,GAAyCt6B,EAAAA,GAAAA,GAAA/d,EAAA3K,MAAA,GAAlC,GACjB,GAAIg8E,EACF,MACD,IACwCpsE,EADxCC,GAAA9H,EAAAA,EAAAA,GACuBi7C,EAAQz6B,WAAS,IAAzC,IAAA1Y,EAAA7H,MAAA4H,EAAAC,EAAA5H,KAAAC,MAA2C,CACzC,IADyCwgB,EAAAA,GAAAA,GAAA9Y,EAAA5P,MAAA,GAAxB,GACJ,CACXg8E,GAAa,EACb,KACF,CACF,CAAC,OAAA7zE,IAAA0H,EAAAzH,EAAAD,GAAA,SAAA0H,EAAAxH,GAAA,CACH,CAAC,OAAAF,IAAA2C,EAAA1C,EAAAD,GAAA,SAAA2C,EAAAzC,GAAA,CACDyF,EAAKk9D,qBAAqBgR,EAC5B,IAEAv7E,KAAKmG,IAAI,eAAe,SAACq1E,GACvBnuE,EAAKO,EAAE,uBAAyB4tE,EAChCnuE,EAAKO,EAAE,yBAA2B4tE,CACpC,IAEAx7E,KAAKmG,IAAI,YAAY,SAACwiE,GACpBt7D,EAAKO,EAAE,uBAAyB+6D,EAAQvqE,OAAS,EAAE,IACvBoR,EADuBC,GAAAnI,EAAAA,EAAAA,GAC/B8+B,IAAQ,IAA5B,IAAA32B,EAAAlI,MAAAiI,EAAAC,EAAAjI,KAAAC,MAA8B,KAAnB+iE,EAAKh7D,EAAAjQ,MACd8N,EAAKO,EAAE,sBAAD3L,OAAuBuoE,IAAW7B,EAAQ1nE,SAASupE,GACxCn9D,EAAK/D,IAAI,cAADrH,OAAeuoE,IAC/B7kE,MAAM81E,WAAa9S,EAAQ1qE,QAAQusE,GAAS,CACvD,CAAC,OAAA9iE,IAAA+H,EAAA9H,EAAAD,GAAA,SAAA+H,EAAA7H,GAAA,CAEI+gE,EAAQ1nE,SAASoM,EAAKO,EAAE,YAC3BP,EAAKitE,aAAa3R,EAAQ,GAAI,CAAE0H,YAAY,GAEhD,IAEArwE,KAAKo7E,oBACP,KAACxB,CAAA,CA/UuB,CAAS1wC,IAkVnC0wC,GAAc5zE,SAAqB,+cAAV/D,OASYmkC,GAAS18B,KAvW9C,SAA0B2yB,GACxB,MAAO,mFAAAp6B,OACuEo6B,EAAE,iMAAAp6B,OAGlBo6B,EAAE,uFAKlE,IA6VoEzyB,KAAK,IAAG,oVAAA3H,OAKhEmkC,GAAS18B,KA7XrB,SAAyB2yB,GACvB,MAAO,iFAAAp6B,OACqEo6B,EAAE,6GAAAp6B,OAGtDo6B,EAAE,wBAAAp6B,OACTo6B,EAAE,qBAAAp6B,OACLo6B,EAAE,2HAOlB,IA+W0CzyB,KAAK,IAAG,qqBC7Y3C,IAAM8xE,GAAO,SAAAzuC,IAAA1nC,EAAAA,EAAAA,GAAAm2E,EAAAzuC,GAAA,IAAAznC,GAAAC,EAAAA,EAAAA,GAAAi2E,GAClB,SAAAA,IAAc,IAAAr6E,EAqBT,OArBSvB,EAAAA,EAAAA,GAAA,KAAA47E,IACZr6E,EAAAmE,EAAAxH,KAAA,OAEK29E,eAAgB,EACrBt6E,EAAKu6E,aAAc,EACnBv6E,EAAKw6E,aAAc,EAEnBx6E,EAAK2F,OAAK1G,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACLe,EAAK2F,OAAK,IACbqc,KAAM,GACNutC,KAAM,GACNkrB,QAASz6E,EAAK06E,WACdC,MAAO,OAGT36E,EAAKsoD,eAAe,UAAU,SAACwlB,GACzBA,EACF9tE,EAAKoJ,aAAa,SAAU,IAE5BpJ,EAAK4G,gBAAgB,SAEzB,IAAG5G,CACL,CA+CC,OA/CAX,EAAAA,EAAAA,GAAAg7E,EAAA,EAAAh+E,IAAA,WAAA6B,MAED,WACE,OAAOipE,GAAW,OAAQ,CACxByT,WAAYj8E,KAAK27E,cACjBO,WAAYl8E,KAAK27E,cACjBQ,YAAan8E,KAAK67E,YAClBO,YAAap8E,KAAK47E,aAEtB,GAAC,CAAAl+E,IAAA,eAAA6B,MAED,WAAe,IAAAiC,EAAA,KACbyc,GAAAgtB,EAAAA,EAAAA,GAAAywC,EAAA59E,WAAA,qBAAAE,KAAA,MAEAgC,KAAKmG,IAAI,QAAQ,SAACqqD,GAChBhvD,EAAKo6E,aAAep6E,EAAKoM,EAAEyV,KAC3B7hB,EAAKq6E,aAAerrB,EACpBhvD,EAAKoM,EAAEkuE,QAAUt6E,EAAKu6E,UACxB,IAEA/7E,KAAKmG,IAAI,SAAS,SAAC61E,GACH,WAAVA,IACFx6E,EAAKwoC,UAAYgyC,EAErB,IAEAh8E,KAAKmG,IAAI,QAAQ,SAAC8E,GAChBzJ,EAAKo6E,aAAc,CACrB,IAEA57E,KAAKyK,aAAa,OAAQ,WACH,IAAnBzK,KAAKsvE,WACPtvE,KAAKsvE,SAAW,GAEbtvE,KAAK4I,aAAa,UACrB5I,KAAKyK,aAAa,QAAS,UAE/B,GAAC,CAAA/M,IAAA,UAAA6E,IAED,SAAY3B,GACNZ,KAAK4I,aAAa,YACpB5I,KAAK2F,MAAM02E,cAAgB,cAC3Br8E,KAAK27E,eAAgB,IAErB37E,KAAK27E,eAAgB,EACrB37E,KAAK2F,MAAM02E,cAAgB,KAE/B,KAACX,CAAA,CAtEiB,CAASxyC,IAwE7BwyC,GAAQ33B,eAAe,CAAE1gC,KAAM,OAAQutC,KAAM,OAAQyI,QAAS,UAAW2iB,MAAO,UAEhFN,GAAQ11E,SAAqB,sHC3EtB,IAAMs2E,GAAY,SAAArvC,IAAA1nC,EAAAA,EAAAA,GAAA+2E,EAAArvC,GAAA,IAAAznC,GAAAC,EAAAA,EAAAA,GAAA62E,GACvB,SAAAA,IAAc,IAAAj7E,EAWV,OAXUvB,EAAAA,EAAAA,GAAA,KAAAw8E,IACZj7E,EAAAmE,EAAAxH,KAAA,OAEKu+E,SAAU,EAEfl7E,EAAKm7E,0BAA4B,WAC/B,IAAIC,EAASp7E,EAAKiI,IAAI,WACtBmzE,EAAO92E,MAAM+2E,WAAa,UAC1BD,EAAO92E,MAAMkiE,QAAU,IACvB4U,EAAO92E,MAAM4c,UAAY,oBACzBlhB,EAAKk7E,SAAWl7E,EAAKs7E,QACvB,EAAEt7E,CACJ,CA6BC,OA7BAX,EAAAA,EAAAA,GAAA47E,EAAA,EAAA5+E,IAAA,eAAA6B,MAED,WAAe,IAAAiC,EAAA,KACbyc,GAAAgtB,EAAAA,EAAAA,GAAAqxC,EAAAx+E,WAAA,qBAAAE,KAAA,MACAgC,KAAK2pD,eAAe,UAAU,SAACwlB,GACP,mBAAXA,IACLA,EACF3tE,EAAKm7E,SAELn7E,EAAKo7E,QAGX,GACF,GAAC,CAAAl/E,IAAA,SAAA6B,MAED,WACES,KAAKu8E,SAAU,EACf,IAAMpsC,EAAUnwC,KAAKinD,wBAAf9W,MACFssC,EAASz8E,KAAKsJ,IAAI,WACtBmzE,EAAO92E,MAAM+2E,WAAa,eAC1BD,EAAO92E,MAAMkiE,QAAU,IACvB4U,EAAO92E,MAAM4c,UAAY,cAAHtgB,OAAiBkuC,EAAK,OAC5CssC,EAAOvjE,iBAAiB,gBAAiBlZ,KAAKw8E,0BAA2B,CACvE32D,MAAM,GAEV,GAAC,CAAAnoB,IAAA,QAAA6B,MAED,WACES,KAAKu8E,SAAU,CACjB,KAACD,CAAA,CA1CsB,CAASpzC,IA6ClCozC,GAAat2E,SAAqB,kFCpClC,IAAM62E,GACQ,aADRA,GAEK,UAFLA,GAGI,SAGGC,GAAc,SAAA7vC,IAAA1nC,EAAAA,EAAAA,GAAAu3E,EAAA7vC,GAAA,IAAAznC,GAAAC,EAAAA,EAAAA,GAAAq3E,GACzB,SAAAA,IAAc,IAAAz7E,EAwBT,OAxBSvB,EAAAA,EAAAA,GAAA,KAAAg9E,IACZz7E,EAAAmE,EAAAxH,KAAA,OAEK++E,UAAW,EAChB17E,EAAK27E,cAAgBH,GACrBx7E,EAAK47E,aAAeJ,GACpBx7E,EAAK67E,sBAAuB,EAE5B77E,EAAKsoD,eAAe,UAAU,SAAC7vC,GACxBA,IAGLzY,EAAK67E,sBAAuB,EAC5B77E,EAAK27E,cAAgBljE,EAAOk1C,QAC5B3tD,EAAK47E,aAAenjE,EAAOqgE,OAC7B,IAEA94E,EAAKsoD,eAAe,WAAW,SAACqF,GACP,mBAAZA,IAIX3tD,EAAK07E,SAAW/tB,EAChB3tD,EAAK87E,iBACP,IAAG97E,CACL,CAsBC,OAtBAX,EAAAA,EAAAA,GAAAo8E,EAAA,EAAAp/E,IAAA,iBAAA6B,MAED,WAAiB,IAAA69E,EACfp9E,KAAK2F,MAAMspD,WAAajvD,KAAK+8E,SAAW,UAAY,StBlBjD,SAAyB3yC,GAAkB,QAAAgtB,EAAAt2D,UAAA1C,OAANuiB,EAAI,IAAA9Y,MAAAuvD,EAAA,EAAAA,EAAA,KAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAJ12C,EAAI02C,EAAA,GAAAv2D,UAAAu2D,GAE9C,IADA,IAAI9U,EAAU+lB,GAASl/D,WAAC,EAAGuX,GAC3B7N,EAAA,EAAAuqE,EAAkBx/E,OAAOmD,KAAKuhD,GAAQzvC,EAAAuqE,EAAAj/E,OAAA0U,IAAE,CAAnC,IAAI2c,EAAK4tD,EAAAvqE,GACZs3B,EAAQH,UAAUC,OAAOza,EAAO8yB,EAAQ9yB,GAC1C,CACF,CsBcI6tD,CAAgBt9E,MAAIo9E,EAAA,IAAAx9D,EAAAA,EAAAA,GAAAw9D,EACjBP,IAA4B78E,KAAKk9E,uBAAoBt9D,EAAAA,EAAAA,GAAAw9D,EACrDp9E,KAAKg9E,cAAgBh9E,KAAK+8E,WAAQn9D,EAAAA,EAAAA,GAAAw9D,EAClCp9E,KAAKi9E,cAAgBj9E,KAAK+8E,UAAQK,IAErCp9E,KAAKyK,aAAa,cAAezK,KAAK+8E,SAAW,QAAU,OAC7D,GAAC,CAAAr/E,IAAA,eAAA6B,MAED,WAAe,IAAAiC,EAAA,KACbyc,GAAAgtB,EAAAA,EAAAA,GAAA6xC,EAAAh/E,WAAA,qBAAAE,KAAA,MACAgC,KAAKyK,aAAa,SAAU,IAEvBzK,KAAKk9E,sBACRl9E,KAAKiqC,UAAUtoC,IAAIk7E,IAGrB78E,KAAKm9E,iBACLx2E,YAAW,kBAAMnF,EAAKyG,gBAAgB,SAAS,GAAE,EACnD,KAAC60E,CAAA,CAhDwB,CAAS5zC,IAkDpC4zC,GAAe92E,SAAqB,kBCjE7B,IAAMu3E,GAAQ,SAAAtwC,IAAA1nC,EAAAA,EAAAA,GAAAg4E,EAAAtwC,GAAA,IAAAznC,GAAAC,EAAAA,EAAAA,GAAA83E,GAoBnB,SAAAA,IAAc,IAAAl8E,EAE0B,OAF1BvB,EAAAA,EAAAA,GAAA,KAAAy9E,GACZl8E,EAAAmE,EAAAxH,KAAA,OAAQ4hB,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,SAAAf,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAnBLe,EAAK2F,OAAK,IACbspD,UAAU,EACVh3B,IAAK,EACLkY,IAAK,IACL8xB,QAAS,KACT9W,SAAU,KACVujB,aAAc,KACd,iBAAkB,WAChB,IAAIxwE,EAAQmN,SAASrL,EAAKiI,IAAI,YAAY/J,MAAO,IACjD8B,EAAKm8E,aAAaj+E,GAClB8B,EAAKuM,EAAE01D,SAAWjiE,EAAKuM,EAAE01D,QAAQ/jE,EACnC,EACA,kBAAmB,WACjB,IAAIA,EAAQmN,SAASrL,EAAKiI,IAAI,YAAY/J,MAAO,IACjD8B,EAAKuM,EAAE4+C,UAAYnrD,EAAKuM,EAAE4+C,SAASjtD,EACrC,KAKA8B,EAAKoJ,aAAa,eAAgB,IAAIpJ,CACxC,CA6IC,OA7IAX,EAAAA,EAAAA,GAAA68E,EAAA,EAAA7/E,IAAA,eAAA6B,MAED,WAAe,IAAAiC,EAAA,KACbyc,GAAAgtB,EAAAA,EAAAA,GAAAsyC,EAAAz/E,WAAA,qBAAAE,KAAA,MAEAgC,KAAK2pD,eAAe,YAAY,SAAC2G,GAC/B9uD,EAAKoM,EAAE0iD,SAAWA,CACpB,IAEAtwD,KAAK2pD,eAAe,OAAO,SAACrwB,GAC1B93B,EAAKoM,EAAE0rB,IAAMA,CACf,IAEAt5B,KAAK2pD,eAAe,OAAO,SAACnY,GAC1BhwC,EAAKoM,EAAE4jC,IAAMA,CACf,IAEAxxC,KAAK2pD,eAAe,gBAAgB,SAAComB,GACnCvuE,EAAKoM,EAAEmiE,aAAeA,EACtBvuE,EAAK8H,IAAI,YAAY/J,MAAQwwE,EAC7BvuE,EAAKg8E,aAAazN,EACpB,IAEA/vE,KAAK2pD,eAAe,QAAQ,SAACljB,GAC3BjlC,EAAKi8E,MAAQh3C,CACf,IAEAzmC,KAAK2pD,eAAe,WAAW,SAAC2Z,GACzBA,IACL9hE,EAAKoM,EAAE01D,QAAUA,EACnB,IAEAtjE,KAAK2pD,eAAe,YAAY,SAAC6C,GAC1BA,IACLhrD,EAAKoM,EAAE4+C,SAAWA,EACpB,IAEAxsD,KAAK09E,eAEL19E,KAAKs+D,UAAY,IAAIsL,gBAAe,WAClCpoE,EAAKk8E,eACL,IAAIn+E,EAAQmN,SAASlL,EAAK8H,IAAI,YAAY/J,MAAO,IACjDiC,EAAKg8E,aAAaj+E,EACpB,IACAS,KAAKs+D,UAAUvpD,QAAQ/U,MAEvBA,KAAK29E,WAAajxE,SAAStH,OAAOmP,iBAAiBvU,MAAMwU,iBAAiB,kBAAmB,IAE7F7N,YAAW,WACT,IAAIpH,EAAQmN,SAASlL,EAAK8H,IAAI,YAAY/J,MAAO,IACjDiC,EAAKg8E,aAAaj+E,EACpB,GAAG,GAEHS,KAAKmG,IAAI,YAAY,SAACmqD,GACpB,IAAItrD,EAAKxD,EAAK8H,IAAI,YACdgnD,EACFtrD,EAAGyF,aAAa,WAAY,YAE5BzF,EAAGiD,gBAAgB,WAEvB,IAEA,IAAI21E,EAAU59E,KAAKsJ,IAAI,YACvBs0E,EAAQ1kE,iBAAiB,SAAS,WAChC1X,EAAKmE,MAAMyK,YAAY,iBAAkB,yBAC3C,IACAwtE,EAAQ1kE,iBAAiB,QAAQ,WAC/B1X,EAAKmE,MAAMyK,YAAY,iBAAkB,wBAC3C,GACF,GAAC,CAAA1S,IAAA,eAAA6B,MAED,SAAaA,GAAO,IAAAmG,EAAA,KAClB1F,KAAK69E,eAAet+E,GAEpB,IAAM4wC,EAAUnwC,KAAKinD,wBAAf9W,MAGF5kC,EAFQ,KAAOvL,KAAK4N,EAAE4jC,IAAMxxC,KAAK4N,EAAE0rB,MACZ/5B,EAAQS,KAAK4N,EAAE0rB,MACb6W,EAAQnwC,KAAK29E,YAAe,IAEzDv4E,OAAO0mE,uBAAsB,WAC3BpmE,EAAK4D,IAAI,YAAY3D,MAAM4c,UAAY,cAAHtgB,OAAiBsJ,EAAM,MAC7D,GACF,GAAC,CAAA7N,IAAA,iBAAA6B,MAED,SAAeA,GAAO,IAAA8N,EAAA,KACpB,GAAKrN,KAAK89E,WAAV,CAGIv+E,IAAUS,KAAKy9E,MACjBz9E,KAAK89E,WAAWn4E,MAAMkiE,QAAU,IAEhC7nE,KAAK89E,WAAWn4E,MAAMkiE,QAAU,MAElC,IAAM13B,EAAUnwC,KAAKinD,wBAAf9W,MAGF5kC,EAFQ,KAAOvL,KAAK4N,EAAE4jC,IAAMxxC,KAAK4N,EAAE0rB,MACZt5B,KAAKy9E,MAAQz9E,KAAK4N,EAAE0rB,MAClB6W,EAAQnwC,KAAK29E,YAAe,IACzDv4E,OAAO0mE,uBAAsB,WAC3Bz+D,EAAKywE,WAAWn4E,MAAM4c,UAAY,cAAHtgB,OAAiBsJ,EAAM,MACxD,GAZA,CAaF,GAAC,CAAA7N,IAAA,eAAA6B,MAED,WACE,IAEIw+E,EAAU/9E,KAAKsJ,IAAI,YACjB6mC,EAAU4tC,EAAQ92B,wBAAlB9W,MACF6tC,EAAOl6E,KAAKqxC,KAAKhF,EAAQ,GACzBxuB,EAAQ7d,KAAKqxC,KAAK6oC,EALL,IAKwB,EAEzC,GAAIh+E,KAAKi+E,cAAgBt8D,EAAzB,CAIA,IAAI9c,EAAK0D,SAASC,yBACd01E,EAAc31E,SAAS+G,cAAc,OACrC6uE,EAAe51E,SAAS+G,cAAc,OAC1C4uE,EAAYl0C,UAAY,aACxBm0C,EAAan0C,UAAY,cACzBnlC,EAAGoC,YAAYk3E,GACf,IAAK,IAAIxgF,EAAI,EAAGA,EAAIgkB,EAAOhkB,IACzBkH,EAAGoC,YAAYi3E,EAAYhvE,aAE7BrK,EAAGoC,YAAYk3E,EAAajvE,aAC5B,IAAK,IAAIvR,EAAI,EAAGA,EAAIgkB,EAAOhkB,IACzBkH,EAAGoC,YAAYi3E,EAAYhvE,aAE7BrK,EAAGoC,YAAYk3E,EAAajvE,aAE5B,IAAIkvE,EAAY71E,SAAS+G,cAAc,OACvC8uE,EAAUp0C,UAAY,WACtBnlC,EAAGoC,YAAYm3E,GACfp+E,KAAK89E,WAAaM,EAElBL,EAAQh4E,UAAY,GACpBg4E,EAAQ92E,YAAYpC,GACpB7E,KAAKi+E,YAAct8D,CAxBnB,CAyBF,GAAC,CAAAjkB,IAAA,kBAAA6B,MAED,WAAkB,IAAAk/D,EACF,QAAdA,EAAAz+D,KAAKs+D,iBAAS,IAAAG,GAAdA,EAAgBzqD,YAClB,KAACupE,CAAA,CApKkB,CAASr0C,IAsK9Bq0C,GAASv3E,SAAqB,mSCnKvB,IAAMq4E,GAAwB,SAAA90B,IAAAhkD,EAAAA,EAAAA,GAAA84E,EAAA90B,GAAA,IAAA/jD,GAAAC,EAAAA,EAAAA,GAAA44E,GAInC,SAAAA,IAAc,IAAAh9E,EAMV,OANUvB,EAAAA,EAAAA,GAAA,KAAAu+E,GACZh9E,EAAAmE,EAAAxH,KAAA,OAAQ4hB,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,mBAJQ,IAAIue,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,eACP2rC,GAAc6B,WAAWM,gBAKtC9tC,EAAK2F,OAAK1G,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACLe,EAAK2F,OAAK,IACb+rB,OAAQ,OACR1xB,CACJ,CA+FC,OA/FAX,EAAAA,EAAAA,GAAA29E,EAAA,EAAA3gF,IAAA,eAAA6B,MAED,WAAe,IAAAiC,EAAA,KACbyc,GAAAgtB,EAAAA,EAAAA,GAAAozC,EAAAvgF,WAAA,qBAAAE,KAAA,MAEAgC,KAAK8pD,iBAAiB9pD,KAAK6pC,aAAc,CACvCmE,WAAY,kBAAMxsC,EAAK88E,aAAa,EACpCrwC,aAAc,kBAAMzsC,EAAK+8E,eAAe,IAG1Cv+E,KAAKmG,IAAI,iBAAiB,SAAgE4hB,GACnFA,IAGLvmB,EAAKumB,MAAQA,EAEbvmB,EAAKumB,MAAMoP,UAAU,UAAU,SAACpE,GAC1BA,IACFvxB,EAAKoM,EAAEmlB,OAASA,EAEpB,IACF,IAEA/yB,KAAK8gC,eAAe,cAAc,SAACmH,GAC7BzmC,EAAKg9E,WAAah9E,EAAKg9E,UAAUr5E,aAAa,iBAAmB8iC,GACnEzmC,EAAKg9E,UAAU/zE,aAAa,cAAew9B,EAE/C,IAEAjoC,KAAK8gC,eAAe,wBAAwB,SAAC4nC,GACvClnE,EAAKg9E,WAAah9E,EAAKg9E,UAAUr5E,aAAa,UAAYujE,GAC5DlnE,EAAKg9E,UAAU/zE,aAAa,OAAQi+D,EAExC,GACF,GAEA,CAAAhrE,IAAA,cAAA6B,MACA,SAAYoI,GACV,GAAK3H,KAAK+nB,MAAV,CAGA,IAAIpd,EAAShD,EAAE2Q,OACftY,KAAK+nB,MAAM4zB,kBAAkB,CAC3B5oB,OAAQpoB,EAAOooB,OACf6mB,gBAAiBjvC,EAAOivC,kBAE1B55C,KAAKwtC,aANL,CAOF,GAAC,CAAA9vC,IAAA,eAAA6B,MAED,WACES,KAAKwtC,aACP,GAAC,CAAA9vC,IAAA,cAAA6B,MAED,WAAc,IAAAmG,EAAA,KACN+4E,EAAW,IAAI3V,GACf/1C,EAAS/yB,KAAK4N,EAAEmlB,OAChBkV,EAAajoC,KAAKmhC,IAAI8G,WACtBygC,EAAO1oE,KAAKmhC,IAAIuG,qBAEtB+2C,EAASh0E,aAAa,WAAYzK,KAAKqQ,SACvCouE,EAASh0E,aAAa,UAAWsoB,GAE7BkV,GACFw2C,EAASh0E,aAAa,cAAew9B,GAEnCygC,GACF+V,EAASh0E,aAAa,OAAQi+D,GAGhC+V,EAASvlE,iBAAiB,SAAS,SAACvR,GAClC,IAAM+2E,EAAkG/2E,EACxGjC,EAAKi5E,YAAYD,GACjBh5E,EAAKia,WAAW,uBAAwB++D,EAAYpmE,OACtD,IACAmmE,EAASvlE,iBAAiB,UAAU,SAACvR,GACnC,IAAM+2E,EAAgD/2E,EACtDjC,EAAKk5E,eACLl5E,EAAKia,WAAW,wBAAyB++D,EAAYpmE,OACvD,IACAmmE,EAASvlE,iBAAiB,UAAU,SAACvR,GACnC,IAAM+2E,EAAmG/2E,EACzGjC,EAAKia,WAAW,wBAAyB++D,EAAYpmE,OACvD,IAEAtY,KAAK+F,UAAY,GACjB/F,KAAKiH,YAAYw3E,GACjBz+E,KAAK6+E,UAAW,EAGhB7+E,KAAKw+E,UAAYC,CACnB,GAAC,CAAA/gF,IAAA,gBAAA6B,MAED,WACES,KAAKw+E,eAAYz9E,EACjBf,KAAK+F,UAAY,EACnB,KAACs4E,CAAA,CA1GkC,CAAS1jC,ICDxCmkC,GAAe,SAAU90E,GAC7B,OAAOA,EAAI/K,QAAQ,uCAAwC,OAC7D,EAOa8/E,GAAiB,SAAU/0E,GAAkB,IAAbg1E,EAAKl+E,UAAA1C,OAAA,QAAA2C,IAAAD,UAAA,GAAAA,UAAA,GAAG,IAC7C6nB,EAAQ3e,EAAI1F,MAAM,KAAKoF,IAAIo1E,IACjC,OAAO,IAAItmD,OAAO,IAAM7P,EAAM/e,KAAK,MAAQ,IAAKo1E,EAClD,ECJO,SAASC,GAAWvjE,GAAwE,IAArEwjE,EAASxjE,EAATwjE,UAAWC,EAAezjE,EAAfyjE,gBAAiBC,EAAS1jE,EAAT0jE,UAAWC,EAAc3jE,EAAd2jE,eAAgBC,EAAU5jE,EAAV4jE,WAC/EC,EAAS,aAAHt9E,OAAgBq9E,GAG1B,OAhBe,SAAC35E,GAChB,IAAI65E,EAAM3hF,OAAOmD,KAAK2E,GAAOhH,QAAO,SAAC89B,EAAKgjD,GACxC,IAAIC,EAAgB/5E,EAAM85E,GACtBE,EAAgB9hF,OAAOmD,KAAK0+E,GAAe/gF,QAAO,SAAC89B,EAAKp8B,GAC1D,IAAId,EAAQmgF,EAAcr/E,GAC1B,OAAOo8B,EAAM,GAAHx6B,OAAM5B,EAAI,MAAA4B,OAAK1C,EAAK,IAChC,GAAG,IACH,OAAOk9B,EAAM,GAAHx6B,OAAMw9E,EAAQ,KAAAx9E,OAAI09E,EAAa,IAC3C,GAAG,IACH,OAAOH,CACT,CAMSI,CAAW,CAChB1zB,KAAM,CACJuP,MAAOyjB,EACP,mBAAoBC,GAEtB,YAAa,CACXU,WAAY,UACZ,eAAgBN,GAElB,gBAAiB,CACfM,WAAY,WAEd,uBAAwB,CACtBA,WAAY,WAEd,uBAAwB,CACtBA,WAAY,WAEd,kBAAmB,CACjBpkB,MAAO,WAET,wBAAyB,CACvBokB,WAAYP,GAEd,yEAA0E,CACxE,aAAcC,GAEhB,+BAAgC,CAC9B,gBAAiBA,GAEnB,kBAAmB,CACjB9jB,MAAO2jB,GAET,wBAAyB,CACvB3jB,MAAO4jB,GAET,wBAAyB,CACvBQ,WAAY,GAAF59E,OAAKk9E,EAAe,6DAC9B,kBAAmB,aAErB,mBAAoB,CAClB,mBAAoBG,GAEtB,oEAAqE,CACnE7jB,MAAO2jB,GAET,0EAA2E,CACzE3jB,MAAO4jB,GAET,mBAAoB,CAClB5jB,MAAO2jB,GAET,yBAA0B,CACxB3jB,MAAO4jB,GAET,iKACE,CACE5jB,MAAO4jB,GAEX,8BAA+B,CAC7B5jB,MAAO2jB,GAET,oCAAqC,CACnC3jB,MAAO4jB,EACPQ,WAAY,SAGlB,CCnFA,IAAIC,GAAY,CAAC,EAEjB16E,OAAO8T,iBAAiB,WAAW,SAACvR,GAAM,IAAAo4E,EACpCz6D,EACJ,IACEA,EAAU1Y,KAAKC,MAAMlF,EAAEvF,KAGzB,CAFE,MAAOsF,IACP,MACF,CAEA,IAAW,QAAPq4E,EAAAz6D,SAAO,IAAAy6D,OAAA,EAAPA,EAASlrE,QAAQirE,GAAW,CAC9B,IACqC54E,EADjC84E,EAASF,GAAUx6D,EAAQzQ,MAAMxN,GAAAC,EAAAA,EAAAA,GACN04E,GAAM,IAArC,IAAA34E,EAAAE,MAAAL,EAAAG,EAAAG,KAAAC,MAAuC,KAAAw4E,GAAAh4D,EAAAA,GAAAA,GAAA/gB,EAAA3H,MAAA,GAA7B2gF,EAAMD,EAAA,GAAE1+E,EAAQ0+E,EAAA,GACpBt4E,EAAEnK,SAAW0iF,GACf3+E,EAAS+jB,EAEb,CAAC,OAAA5d,IAAAL,EAAAM,EAAAD,GAAA,SAAAL,EAAAO,GAAA,CACH,CACF,ICcO,IAAMu4E,GAAc,SAAA52B,IAAAhkD,EAAAA,EAAAA,GAAA46E,EAAA52B,GAAA,IAAA/jD,GAAAC,EAAAA,EAAAA,GAAA06E,GAIzB,SAAAA,IAAc,IAAA9+E,EAuBV,OAvBUvB,EAAAA,EAAAA,GAAA,KAAAqgF,GACZ9+E,EAAAmE,EAAAxH,KAAA,OAAQ4hB,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,mBAJQ,IAAIue,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,eACP2rC,GAAc6B,WAAWO,WAAQxvB,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,UAgCtC,MA3BRA,EAAK2F,OAAK1G,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACLe,EAAK2F,OAAK,IACbo5E,aAAc,GACdxZ,gBAAiB,GACjByZ,aAAc,GACdC,QAAS,EACTv5C,UAAU,EACVu7B,OAAQ,WAAM,IAC6Bp7D,EAD7BG,GAAAC,EAAAA,EAAAA,GACUjG,EAAKuM,EAAEyyE,cAAY,IAAzC,IAAAh5E,EAAAE,MAAAL,EAAAG,EAAAG,KAAAC,MAA2C,KAAhC6d,EAAOpe,EAAA3H,MACVmX,EAAMrV,EAAKk/E,sBAAsBj7D,GAC/BiI,EAAajI,EAAbiI,SACAsjC,EAAuBxvD,EAAKyvD,eAA5BD,mBACRxvD,EAAK+tD,eAAe14C,EAAK,CAAEgX,SAAUH,EAAU/vB,OAAQqzD,GACzD,CAAC,OAAAnpD,IAAAL,EAAAM,EAAAD,GAAA,SAAAL,EAAAO,GAAA,CAEDvG,EAAKuM,EAAE,oBAAsBo/B,GAAc6B,WAAWI,WACxD,EACAxpB,SAAU,WACRpkB,EAAKmsC,aACP,IACAnsC,CACJ,CA8JC,OA5JDX,EAAAA,EAAAA,GAAAy/E,EAAA,EAAAziF,IAAA,eAAA6B,MAMA,WAAe,IAAAiC,EAAA,KACbyc,GAAAgtB,EAAAA,EAAAA,GAAAk1C,EAAAriF,WAAA,qBAAAE,KAAA,MACAgC,KAAK8pD,iBAAiB9pD,KAAK6pC,aAAc,CACvCmE,WAAY,WACV,IAAM6iB,EAAsDrvD,EAAKsvD,eAA3DD,mBAENrvD,EAAKkF,KAAK,CACRkgE,gBAAiB,GAAF3kE,OAAuB,OAAlB4uD,QAAkB,IAAlBA,OAAkB,EAAlBA,EAAqB,GAAG/xD,eAAamD,OAAqB,OAAlB4uD,QAAkB,IAAlBA,OAAkB,EAAlBA,EAAoBzpD,MAAM,IACtFg5E,aAAcvvB,IAGhBrvD,EAAKg/E,aACP,IAEFxgF,KAAKmG,IAAI,oBAAoB,SAACvF,GACxBA,IAAQY,EAAKqoC,cACfroC,EAAKi/E,eAET,IACAzgF,KAAKmG,IAAI,gBAAgB,SAAC+3C,GACxB18C,EAAKoM,EAAE0yE,QAAUpiC,EAAK9/C,MACxB,IACA4B,KAAK8gC,eAAe,YAAY,SAACiG,GAC/BvlC,EAAKoM,EAAEm5B,SAAWA,CACpB,GACF,GAEA,CAAArpC,IAAA,wBAAA6B,MAIA,SAAsB+lB,GACpB,GAAIA,EAAQo7D,aAAc,CACxB,IAC0Cx2E,EADpCy2E,EAAiBj8C,GAAc1kC,KAAKmhC,IAAImG,+BAA+Bj9B,GAAA/C,EAAAA,EAAAA,GACjDq5E,GAAc,IAA1C,IAAAt2E,EAAA9C,MAAA2C,EAAAG,EAAA7C,KAAAC,MAEE,IAF0C,IAAjCm5E,EAAa12E,EAAA3K,MAChBshF,EAAS9B,GAAe6B,GAC9B/uE,EAAA,EAAA4Y,EAA8B5sB,OAAOiqB,QAAQxC,EAAQo7D,cAAa7uE,EAAA4Y,EAAArsB,OAAAyT,IAAE,CAA/D,IAAA6Y,GAAAzC,EAAAA,GAAAA,GAAAwC,EAAA5Y,GAAA,GAAOgD,EAAI6V,EAAA,GAAEo2D,EAAOp2D,EAAA,GACvB,GAAIm2D,EAAOpoD,KAAK5jB,GACd,OAAOisE,CAEX,CACD,OAAAp5E,IAAA2C,EAAA1C,EAAAD,GAAA,SAAA2C,EAAAzC,GAAA,CACH,CAEA,OAAO0d,EAAQ5O,GACjB,GAEA,CAAAhZ,IAAA,cAAA6B,MAIA,SAAY+lB,GAAS,IAAAy7D,EAAAC,EACP,QAAZD,EAAA/gF,KAAKihF,eAAO,IAAAF,GAAe,QAAfC,EAAZD,EAAcG,qBAAa,IAAAF,GAA3BA,EAA6BG,YAAYv0E,KAAKqoB,UAAU3P,GAAU,IACpE,GAEA,CAAA5nB,IAAA,qBAAA6B,MAAA,eAAA6hF,GAAAzlE,EAAAA,EAAAA,GAAAC,EAAAA,MAIA,SAAAC,EAAyByJ,GAAO,OAAA1J,EAAAA,MAAA,SAAAE,GAAA,cAAAA,EAAA3P,KAAA2P,EAAA1P,MAAA,UACzBpM,KAAK4N,EAAEm5B,WAAY/mC,KAAK4N,EAAEyyE,aAAajiF,OAAM,CAAA0d,EAAA1P,KAAA,eAAA0P,EAAA8b,OAAA,iBAIlD53B,KAAK4N,EAAEyyE,aAAe,GAAHp+E,QAAAvD,EAAAA,EAAAA,GAAOsB,KAAK4N,EAAEyyE,cAAY,CAAE/6D,IAE1CtlB,KAAK4N,EAAEm5B,UACV/mC,KAAK4N,EAAE00D,SACR,wBAAAxmD,EAAAI,OAAA,GAAAL,EAAA,UACF,gBAAAM,GAAA,OAAAilE,EAAAh4E,MAAA,KAAAtI,UAAA,EAdD,IAgBA,CAAApD,IAAA,mBAAA6B,MACA,WACES,KAAKwZ,aACP,GAEA,CAAA9b,IAAA,cAAA6B,MAIA,SAAY2S,GAEV,OADY9M,OAAOmP,iBAAiBvU,MACvBwU,iBAAiBtC,GAAUjI,MAC1C,GAEA,CAAAvM,IAAA,cAAA6B,MACA,WACE,IAAI8hF,EAAS,CACXlC,gBAAiBn/E,KAAKshF,YAAY,0BAClCpC,UAAWl/E,KAAKshF,YAAY,aAC5BhC,WAAYt/E,KAAKshF,YAAY,mBAC7BlC,UAAW,UACXC,eAAgB,WAGlBr/E,KAAKuhF,YAAY,CACf1sE,KAAM,YACNlP,MAAOs5E,GAAYoC,IAEvB,GAEA,CAAA3jF,IAAA,YAAA6B,MACA,WAAY,IAAAiiF,EAAAC,EACVC,EAAuD1hF,KAAKmhC,IAApD2F,EAAM46C,EAAN56C,OAAQwB,EAAmBo5C,EAAnBp5C,oBAAqBG,EAAai5C,EAAbj5C,cAC7BooB,EAAuB7wD,KAAK8wD,eAA5BD,mBAEF7mC,EAAS,CACb23D,MAF0C,QAA/BH,EAAAxhF,KAAKwiC,KAAK,6BAAqB,IAAAg/C,GAAY,QAAZC,EAA/BD,EAAiCl9E,MAAM,YAAI,IAAAm9E,OAAZ,EAA/BA,EAA8C,KAAM,KAG/DG,WAAY96C,EACZ+6C,cAAa,GAAMp/D,WACnBq/D,kBAAkB,EAClBC,YAAaz5C,GAET5xB,EAAM,IAAIH,IAAI,YAADtU,OAAa4uD,GAAsBpoB,GAEtD,OADA/xB,EAAIiB,OClLD,SAAqBqS,GAE1B,IADA,IAAIk0B,EAAO,GACXrsC,EAAA,EAAA4Y,EAAyB5sB,OAAOiqB,QAAQkC,GAAOnY,EAAA4Y,EAAArsB,OAAAyT,IAAE,CAA5C,IAAA6Y,GAAAzC,EAAAA,GAAAA,GAAAwC,EAAA5Y,GAAA,GAAKnU,EAAGgtB,EAAA,GAAEnrB,EAAKmrB,EAAA,QACJ3pB,IAAVxB,GAAiC,OAAVA,GAAoC,kBAAVA,GAAuC,IAAjBA,EAAMnB,QAGjF8/C,EAAKn2C,KAAK,GAAD9F,OAAIvE,EAAG,KAAAuE,OAAIwqC,mBAAmBltC,IACzC,CACA,OAAO2+C,EAAKt0C,KAAK,IACnB,CDyKiBo4E,CAAYh4D,GAClBtT,EAAI+L,UACb,GAEA,CAAA/kB,IAAA,cAAA6B,MACA,WAGE,ID1K8BsV,EAAMqrE,EAAQ3+E,EC0KxC0gF,EAASxhF,EAAO,CAClBoZ,IAAK,SACLrQ,WAAY,CACV66C,IAAKrkD,KAAKkiF,YACVC,aAAc,EACdC,YAAa,EACbC,YAAa,EACbC,mBAAmB,KAGvBL,EAAO/oE,iBAAiB,OAAQlZ,KAAKuiF,iBAAiBpkE,KAAKne,OAE3DA,KAAKsJ,IAAIk5E,cAAcz8E,UAAY,GACnC/F,KAAKsJ,IAAIk5E,cAAcv7E,YAAYg7E,GDvLLptE,ECyLd,gBDzLoBqrE,ECyLH+B,EAAOf,cDzLI3/E,ECyLWvB,KAAKyiF,mBAAmBtkE,KAAKne,MDxLhF6U,KAAQirE,KACZA,GAAUjrE,GAAQ,IAGpBirE,GAAUjrE,GAAM9M,KAAK,CAACm4E,EAAQ3+E,ICsL5BvB,KAAKihF,QAAUgB,EACfjiF,KAAK4N,EAAEyyE,aAAe,EACxB,GAEA,CAAA3iF,IAAA,gBAAA6B,MACA,WDxLwB,IAAUsV,EAAMqrE,ECyLtClgF,KAAKihF,UDzL2BpsE,ECyLE,gBDzLIqrE,ECyLalgF,KAAKihF,QAAQC,cDxL9DrsE,KAAQirE,KACVA,GAAUjrE,GAAQirE,GAAUjrE,GAAM+P,QAAO,SAACne,GAAI,OAAKA,EAAK,KAAOy5E,CAAM,MCwLrElgF,KAAKsJ,IAAIk5E,cAAcz8E,UAAY,GACnC/F,KAAKihF,QAAU,KACfjhF,KAAK4N,EAAEyyE,aAAe,GACtBrgF,KAAK4N,EAAE0yE,QAAU,CACnB,KAACH,CAAA,CA1LwB,CAASxlC,IA6LpCwlC,GAAen6E,SAAqB,88BEzN7B,IAAM08E,GAAI,SAAAz1C,IAAA1nC,EAAAA,EAAAA,GAAAm9E,EAAAz1C,GAAA,IAAAznC,GAAAC,EAAAA,EAAAA,GAAAi9E,GAAA,SAAAA,IAAA,OAAA5iF,EAAAA,EAAAA,GAAA,KAAA4iF,GAAAl9E,EAAA4D,MAAA,KAAAtI,UAAA,CA4Dd,OA5DcJ,EAAAA,EAAAA,GAAAgiF,EAAA,EAAAhlF,IAAA,gBAAA6B,MAEf,SAAcojF,GACZ,GAAKA,EAAL,CAGA,IAAIC,GAAOlkF,EAAAA,EAAAA,GAAOsB,KAAKsJ,IAAIu5E,QAAQ99E,iBAAiB,cAQpD,IAAK,IAAI+9E,KAPTF,EAAQthF,SAAQ,SAACyhF,GACXA,EAAM59E,aAAa,aAAew9E,EACpCI,EAAM96E,gBAAgB,UAEtB86E,EAAMt4E,aAAa,SAAU,GAEjC,IACiBzK,KAAKgjF,QAChBF,IAASH,EACX3iF,KAAKgjF,QAAQF,GAAMr4E,aAAa,UAAW,IAE3CzK,KAAKgjF,QAAQF,GAAM76E,gBAAgB,UAbvC,CAgBF,GAAC,CAAAvK,IAAA,eAAA6B,MAED,WAAe,IAAA8B,EAAA,KACb4c,GAAAgtB,EAAAA,EAAAA,GAAAy3C,EAAA5kF,WAAA,qBAAAE,KAAA,MAKAgC,KAAKgjF,QAAU,CAAC,EAChBhjF,KAAK2pD,eAAe,YAAY,SAAuB/oD,GAChDA,GAGS8jC,GAAc9jC,GACpBU,SAAQ,SAACqhF,GACf,IAAIM,EAAQxiF,EAAO,CACjBoZ,IAAK,MACLrQ,WAAY,CACV05E,MAAO,OAETnpE,WAAY,CACVw3C,QAAS,WACPlwD,EAAK8hF,cAAcR,EACrB,KAGJM,EAAM93E,YAAc9J,EAAKmhC,KAAKmgD,GAC9BthF,EAAKiI,IAAI85E,IAAIn8E,YAAYg8E,GACzB5hF,EAAK2hF,QAAQL,GAAcM,CAC7B,GACF,IAEAjjF,KAAK2pD,eAAe,WAAW,SAAC/oD,GAC9BS,EAAK8hF,cAAcviF,EACrB,IAEKZ,KAAK4I,aAAa,YACrB5I,KAAKmjF,cAActlF,OAAOmD,KAAKhB,KAAKgjF,SAAS,GAEjD,KAACN,CAAA,CA5Dc,CAASx5C,IA+D1Bw5C,GAAK3+B,eAAe,CAClB,WAAY,KACZ1sC,QAAS,OAGXqrE,GAAK18E,SAAqB,wHCpEnB,IAAMq9E,GAAS,SAAA95B,IAAAhkD,EAAAA,EAAAA,GAAA89E,EAAA95B,GAAA,IAAA/jD,GAAAC,EAAAA,EAAAA,GAAA49E,GAAA,SAAAA,IAAA,IAAAhiF,GAAAvB,EAAAA,EAAAA,GAAA,KAAAujF,GAAA,QAAA3iE,EAAA5f,UAAA1C,OAAAuiB,EAAA,IAAA9Y,MAAA6Y,GAAAzD,EAAA,EAAAA,EAAAyD,EAAAzD,IAAA0D,EAAA1D,GAAAnc,UAAAmc,GACC,OADD5b,EAAAmE,EAAAxH,KAAAoL,MAAA5D,EAAA,OAAAvD,OAAA0e,KAAAf,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,kBACH,GAAIA,CAAA,CAqFpB,OArFoBX,EAAAA,EAAAA,GAAA2iF,EAAA,EAAA3lF,IAAA,yBAAA6B,MAErB,WACE,IAAM+jF,EAAkB/6E,SAAS+G,cAAc,SAU/C,OATAg0E,EAAgBzuE,KAAO,OACvByuE,EAAgB1kF,KAAOoB,KAAKqQ,QAC5BizE,EAAgBC,SAAWvjF,KAAKmhC,IAAI6F,YAAc,EAClDs8C,EAAgBhU,UAAY,EAC5B91D,EAAY8pE,EAAiB,CAC3Bzb,QAAS,EACTz3B,OAAQ,EACRD,MAAO,IAEFmzC,CACT,GAAC,CAAA5lF,IAAA,eAAA6B,MAED,WAAe,IAAAiC,EAAA,KACbyc,GAAAgtB,EAAAA,EAAAA,GAAAo4C,EAAAvlF,WAAA,qBAAAE,KAAA,MAEAgC,KAAKwjF,wBAA0BxjF,KAAKyjF,yBACpCzjF,KAAKiH,YAAYjH,KAAKwjF,yBAEtBxjF,KAAKmG,IACH,oBACA,SAAqEk1C,GAMjE,GAJK75C,EAAKkiF,0BACRliF,EAAKkiF,wBAA0Bn7E,SAAS+G,cAAc,OACtD9N,EAAKyF,YAAYzF,EAAKkiF,2BAEnBliF,EAAKgiF,wBAAyB,CACjC,IAAMx3E,EAAQxK,EAAKiiF,yBACnBjiF,EAAKyF,YAAY+E,GACjBxK,EAAKgiF,wBAA0Bx3E,CACjC,CAIA,GAFAxK,EAAKkiF,wBAAwB39E,UAAY,GAEV,cAA3Bs1C,EAAgBhzB,QAAqD,SAA3BgzB,EAAgBhzB,OAG5D,OAFA7mB,EAAKgiF,wBAAwBjkF,MAAQ,QACrCiC,EAAKgiF,wBAAwBG,kBAAkB,IAIjD,GAA+B,WAA3BtoC,EAAgBhzB,OAAqB,KAAAu7D,EACjCC,EAAoC,QAA5BD,EAAGvoC,EAAgBnD,OAAO,UAAE,IAAA0rC,OAAA,EAAzBA,EAA2Bt+D,QAG5C,OAFA9jB,EAAKgiF,wBAAwBjkF,MAAQ,QACrCiC,EAAKgiF,wBAAwBG,kBAAkBE,EAEjD,CAEA,IAAM9zD,EAAQsrB,EAAgBtrB,MAAQsrB,EAAgBtrB,MAAQ,KAC9D,GAAIA,EAGF,OAFAvuB,EAAKgiF,wBAAwBjkF,MAAQwwB,EAAMgD,YAC3CvxB,EAAKgiF,wBAAwBG,kBAAkB,IAIjD,IAAMG,EAAUzoC,EAAgBtC,WAAWrvC,KAAI,SAACqe,GAAK,OAAKA,EAAMgL,MAAM,IAEtE,IAAKvxB,EAAK2/B,IAAI4F,UAA+B,IAAnB+8C,EAAQ1lF,OAGhC,OAFAoD,EAAKgiF,wBAAwBjkF,MAAQukF,EAAQ,QAC7CtiF,EAAKgiF,wBAAwBG,kBAAkB,IAKjDniF,EAAKgiF,wBAAwB5hF,SAC7BJ,EAAKgiF,wBAA0B,KAE/B,IAEyBt8E,EAFnBrC,EAAK,IAAIgC,iBAAmBQ,GAAAC,EAAAA,EAAAA,GAEhBw8E,GAAO,IAAzB,IAAAz8E,EAAAE,MAAAL,EAAAG,EAAAG,KAAAC,MAA2B,KAAlBlI,EAAK2H,EAAA3H,MACNyM,EAAQzD,SAAS+G,cAAc,SACrCtD,EAAM6I,KAAO,SACb7I,EAAMpN,KAAO,GAAHqD,OAAMT,EAAK6O,QAAO,MAC5BrE,EAAMzM,MAAQA,EACdsF,EAAGoC,YAAY+E,EACjB,CAAC,OAAAtE,IAAAL,EAAAM,EAAAD,GAAA,SAAAL,EAAAO,GAAA,CAEDpG,EAAKkiF,wBAAwBK,gBAAgBl/E,EAEjD,IACA,EAEJ,KAACw+E,CAAA,CAtFmB,CAAS1oC,ICFlBqpC,GAAc,SAAAppC,IAAAr1C,EAAAA,EAAAA,GAAAy+E,EAAAppC,GAAA,IAAAp1C,GAAAC,EAAAA,EAAAA,GAAAu+E,GAAA,SAAAA,IAAA,OAAAlkF,EAAAA,EAAAA,GAAA,KAAAkkF,GAAAx+E,EAAA4D,MAAA,KAAAtI,UAAA,QAAAJ,EAAAA,EAAAA,GAAAsjF,EAAA,EAASh3C,ICAvBi3C,GAAM,SAAAh3C,IAAA1nC,EAAAA,EAAAA,GAAA0+E,EAAAh3C,GAAA,IAAAznC,GAAAC,EAAAA,EAAAA,GAAAw+E,GAAA,SAAAA,IAAA,IAAA5iF,GAAAvB,EAAAA,EAAAA,GAAA,KAAAmkF,GAAA,QAAAvjE,EAAA5f,UAAA1C,OAAAuiB,EAAA,IAAA9Y,MAAA6Y,GAAAzD,EAAA,EAAAA,EAAAyD,EAAAzD,IAAA0D,EAAA1D,GAAAnc,UAAAmc,GAed,OAfc5b,EAAAmE,EAAAxH,KAAAoL,MAAA5D,EAAA,OAAAvD,OAAA0e,KAAAf,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,SAAAf,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAEZe,EAAK2F,OAAK,IACbk9E,YAAa,GACbzsE,QAAS,GACT0sE,WAAY,GACZC,SAAU,SAACz8E,GAAM,IAAA08E,EACf18E,EAAEklD,iBACFllD,EAAEy/C,kBACF/lD,EAAK9B,MAAQ8B,EAAKiI,IAAIwY,OAAOviB,MAC7B8B,EAAKuM,EAAEs2E,aAGH,QAFFG,EAAAhjF,EAAKuM,EAAE6J,QAAQ62B,MAAK,SAACg2C,GACnB,OAAOA,EAAI/kF,OAAS8B,EAAK9B,KAC3B,WAAE,IAAA8kF,OAAA,EAFFA,EAEIhhE,OAAQ,GACdhiB,EAAKkX,cAAc,IAAI8uC,MAAM,UAC/B,KAAChmD,CAAA,CAcF,OAdEX,EAAAA,EAAAA,GAAAujF,EAAA,EAAAvmF,IAAA,eAAA6B,MAGH,WAAe,IAAAiC,EAAA,KACbyc,GAAAgtB,EAAAA,EAAAA,GAAAg5C,EAAAnmF,WAAA,qBAAAE,KAAA,MAEAgC,KAAKmG,IAAI,WAAW,SAAkDsR,GAAY,IAAA8sE,EAChF/iF,EAAKoM,EAAEs2E,aAAqB,OAAPzsE,QAAO,IAAPA,GAAY,QAAL8sE,EAAP9sE,EAAU,UAAE,IAAA8sE,OAAL,EAAPA,EAAclhE,OAAQ,GAC3C,IAAIouC,EAAO,GACJ,OAAPh6C,QAAO,IAAPA,GAAAA,EAASnW,SAAQ,SAACgjF,GAChB7yB,GAAkB,kBAAVxvD,OAA6BqiF,EAAI/kF,MAAK,MAAA0C,OAAKqiF,EAAIjhE,KAAI,YAC7D,IACA7hB,EAAKoM,EAAEu2E,WAAa1yB,CACtB,GACF,KAACwyB,CAAA,CA7BgB,CAAS/6C,IAgC5B+6C,GAAOj+E,SAAqB,8KC/B5B,IAAMw+E,GACE,OADFA,GAEG,QAFHA,GAGG,gBAHHA,GAII,iBAJJA,GAKI,SALJA,GAMK,OANLA,GAOI,WAPJA,GAQK,eAILC,GACe,SAACz/E,GACdA,EAAG0/E,kBACL1/E,EAAG0/E,oBACM1/E,EAAG2/E,yBACZ3/E,EAAG2/E,yBAEP,EAPIF,GAQY,WACVl8E,SAASq8E,eACXr8E,SAASq8E,iBACAr8E,SAA+B,sBACxCA,SAA+B,sBAEnC,EAGWs8E,GAAK,SAAA53C,IAAA1nC,EAAAA,EAAAA,GAAAs/E,EAAA53C,GAAA,IAAAznC,GAAAC,EAAAA,EAAAA,GAAAo/E,GAAA,SAAAA,IAAA,IAAAxjF,GAAAvB,EAAAA,EAAAA,GAAA,KAAA+kF,GAAA,QAAAnkE,EAAA5f,UAAA1C,OAAAuiB,EAAA,IAAA9Y,MAAA6Y,GAAAzD,EAAA,EAAAA,EAAAyD,EAAAzD,IAAA0D,EAAA1D,GAAAnc,UAAAmc,GAqFb,OArFa5b,EAAAmE,EAAAxH,KAAAoL,MAAA5D,EAAA,OAAAvD,OAAA0e,KAAAf,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,SAAAf,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAqDXe,EAAK2F,OAAK,IACbq9C,IAAK,GACLygC,OAAQN,GACRO,OAAQP,GACRQ,QAASR,GACTS,QAAST,GACTU,UAAW,QACXC,YAAa,QACbC,iBAAkB,IAClBC,cAAc,EACdC,gBAAgB,EAChBC,YAAa,EACbC,KAAM,WACJnkF,EAAKokF,YACP,EACAC,KAAM,WACJrkF,EAAKskF,kBACP,EACAC,MAAO,WACLvkF,EAAKwkF,gBACP,EACAC,OAAQ,WACNzkF,EAAK0kF,aACP,EACAC,YAAa,SAACr+E,GAEZ,IAAI/G,EAAMyrC,WAAW1kC,EAAE0yE,cAAczsE,EAAErO,OACvC8B,EAAK4kF,UAAUrlF,EACjB,EACAslF,gBAAiB,SAACv+E,GAChB,IAAIw+E,EAAe9kF,EAAK42C,SAASgP,wBACjC5lD,EAAK+kF,OAAOjB,YAAc9jF,EAAK+kF,OAAOC,UAAY1+E,EAAE2+E,QAAUH,EAAah2C,MAC7E,KAAC9uC,CAAA,CA4IF,OA5IEX,EAAAA,EAAAA,GAAAmkF,EAAA,EAAAnnF,IAAA,aAAA6B,MApFH,WACMS,KAAKomF,OAAOG,QAAUvmF,KAAKomF,OAAOI,MACpCxmF,KAAKomF,OAAOK,OAEZzmF,KAAKomF,OAAOM,OAEhB,GAAC,CAAAhpF,IAAA,mBAAA6B,MAED,YACOgJ,SAASo+E,mBAAqBp+E,SAAkC,2BAAOvI,KAC1EykF,KAEAA,GAAwBzkF,KAE5B,GAAC,CAAAtC,IAAA,iBAAA6B,MAED,WACMS,KAAK4N,EAAEq3E,UAAYT,IACrBxkF,KAAK4N,EAAEq3E,QAAUT,GACjBxkF,KAAKomF,OAAOQ,WAAW,GAAGj4E,KAAO,UACjCvJ,OAAOkX,aAAaE,QAAQqoE,EAAM3xE,GAAK,YAAa,OAEpDlT,KAAK4N,EAAEq3E,QAAUT,GACjBxkF,KAAKomF,OAAOQ,WAAW,GAAGj4E,KAAO,SACjCvJ,OAAOkX,aAAaC,WAAWsoE,EAAM3xE,GAAK,aAE9C,GAAC,CAAAxV,IAAA,cAAA6B,MAED,WACMS,KAAK4N,EAAEo3E,UAAYR,IACrBxkF,KAAK4N,EAAEo3E,QAAUR,GACjBxkF,KAAK4N,EAAE03E,gBAAiB,EACxBtlF,KAAKomF,OAAOS,OAAQ,IAEpB7mF,KAAK4N,EAAEo3E,QAAUR,GACjBxkF,KAAK4N,EAAE03E,gBAAiB,EACxBtlF,KAAKomF,OAAOS,OAAQ,EAExB,GAAC,CAAAnpF,IAAA,YAAA6B,MAED,SAAUqB,GACRwE,OAAOkX,aAAaE,QAAQqoE,EAAM3xE,GAAK,UAAWtS,GAClD,IAAIkmF,EAASlmF,EAAMA,EAAM,IAAM,EAC/BZ,KAAKomF,OAAOU,OAASA,CACvB,GAEA,CAAAppF,IAAA,WAAA4E,IACA,WACE,OAAOtC,KAAKsJ,IAAI2uC,QAClB,GAAC,CAAAv6C,IAAA,UAAA6B,MA0CD,SAAQyM,GACN,OAAOA,EAAM/K,SAAS,KAAO+K,EAAQ,wBAAH/J,OAA2B+J,EAAK,IACpE,GAEA,CAAAtO,IAAA,cAAA6B,MAIA,SAAYyW,GACV,IAAI05B,EAAQ,GACZ,IAAK,IAAIjmC,KAAQuM,EAAM,CACrB,IAAIpV,EAAe,QAAT6I,EAAiBzJ,KAAK+mF,QAAQ/wE,EAAKvM,IAASuM,EAAKvM,GAC3DimC,EAAM3nC,KAAK,GAAD9F,OAAIwH,EAAI,MAAAxH,OAAKrB,EAAG,KAC5B,CACA,OAAO8uC,EAAM9lC,KAAK,IACpB,GAEA,CAAAlM,IAAA,WAAA6B,MAIA,SAASytB,GAEP,IAAI84C,EAAO,IAAIrsB,KAA2B,IAAtB31C,KAAK4oB,MAAMM,IAC/B,MAAO,CAAC84C,EAAKkhB,aAAclhB,EAAKmhB,cAC7Bv9E,KAAI,SAAClC,GACJ,OAAOA,EAAI,GAAK,IAAMA,EAAIA,CAC5B,IACCoC,KAAK,IACV,GAEA,CAAAlM,IAAA,cAAA6B,MACA,YACEb,EAAAA,EAAAA,GAAIsB,KAAKomF,OAAOQ,YAAYtlF,SAAQ,SAAC4lF,GACnCA,EAAMv4E,KAAO,QACf,IACIvJ,OAAOkX,aAAa6qE,QAAQtC,EAAM3xE,GAAK,cACzClT,KAAK6lF,gBAET,GAEA,CAAAnoF,IAAA,kBAAA6B,MACA,WAAkB,IAAAiC,EAAA,KACZ4lF,EAAS,CAAC,WAAY,OAAQ,UAClC1oF,EAAAA,EAAAA,GAAIsB,KAAKwJ,YAAYlI,SAAQ,SAACmI,GACxB29E,EAAOnmF,SAASwI,EAAK7K,OACvB4C,EAAK4kF,OAAO37E,aAAahB,EAAK7K,KAAM6K,EAAKlK,MAE7C,GACF,GAAC,CAAA7B,IAAA,eAAA6B,MAED,WAAe,IAAAmG,EAAA,KACbuY,GAAAgtB,EAAAA,EAAAA,GAAA45C,EAAA/mF,WAAA,qBAAAE,KAAA,MAKAgC,KAAKomF,OAASpmF,KAAKsJ,IAAIq6D,MAEvB3jE,KAAKqnF,kBAELrnF,KAAKomF,OAAOltE,iBAAiB,QAAQ,WACnCxT,EAAKkI,EAAEk3E,OAASN,GAChB9+E,EAAK+E,aAAa,WAAY,GAChC,IAEAzK,KAAKomF,OAAOltE,iBAAiB,SAAS,WACpCxT,EAAKkI,EAAEk3E,OAASN,GAChB9+E,EAAKuC,gBAAgB,WACvB,IAEAjI,KAAKkZ,iBAAiB,oBAAoB,SAACvR,GACzC3F,QAAQgG,IAAIL,GACRY,SAASo+E,oBAAsBjhF,EACjCA,EAAKkI,EAAEm3E,OAASP,GAEhB9+E,EAAKkI,EAAEm3E,OAASP,EAEpB,IAEAxkF,KAAKmG,IAAI,OAAO,SAACk+C,GACf,GAAKA,EAAL,CAGA,IAAI3tC,EAAMhR,EAAKqhF,QAAQ1iC,GACvB3+C,EAAK0gF,OAAO/hC,IAAM3tC,CAFlB,CAGF,IAEA1W,KAAKmG,IAAI,QAAO,eAAAuV,GAAAC,EAAAA,EAAAA,GAAAC,EAAAA,MAAE,SAAAC,EAAOyrE,GAAQ,IAAAtxE,EAAAy7C,EAAA,OAAA71C,EAAAA,MAAA,SAAAE,GAAA,cAAAA,EAAA3P,KAAA2P,EAAA1P,MAAA,UAC1Bk7E,EAAU,CAAFxrE,EAAA1P,KAAA,eAAA0P,EAAA8b,OAAA,wBAAA9b,EAAA1P,KAAA,EAGWhH,OAAOyyB,MAAMnyB,EAAKqhF,QAAQO,IAAU,cAAAxrE,EAAA1P,KAAA,EAAA0P,EAAAG,KAAEguD,OAAI,QAA9Dj0D,EAAI8F,EAAAG,MAECsrE,SACP7hF,EAAK0gF,OAAOmB,OAAS7hF,EAAKqhF,QAAQ/wE,EAAKuxE,SAGrC91B,EAAO,GACP,OAAJz7C,QAAI,IAAJA,GAAAA,EAAMwxE,QAAQlmF,SAAQ,SAACmmF,GACrBh2B,GAAkB,WAAVxvD,OAAsByD,EAAKgiF,YAAYD,GAAQ,MACzD,IAEIzxE,EAAK2xE,SACP3xE,EAAK2xE,OAAOrmF,SAAQ,SAACsmF,GACnBn2B,GAAkB,UAAVxvD,OAAqByD,EAAKgiF,YAAYE,GAAU,MAC1D,IACAliF,EAAKkI,EAAEy3E,cAAe,GAGxB3/E,EAAK0gF,OAAOrgF,WAAa0rD,EAEzB/rD,EAAKmiF,cACL7lF,QAAQgG,IAAIgO,GAAM,yBAAA8F,EAAAI,OAAA,GAAAL,EAAA,KACnB,gBAAAM,GAAA,OAAAT,EAAAtS,MAAA,KAAAtI,UAAA,EA1Be,IA4BhBd,KAAKomF,OAAOltE,iBAAiB,kBAAkB,SAACvR,GAC9CjC,EAAKkI,EAAEu3E,YAAcz/E,EAAKoiF,SAASpiF,EAAK0gF,OAAOjB,aAC/Cz/E,EAAKkI,EAAEs3E,UAAYx/E,EAAKoiF,SAASpiF,EAAK0gF,OAAOC,SAC/C,IAEArmF,KAAKomF,OAAOltE,iBAAiB,cAAc,SAACvR,GAC1C,IAAIogF,EAAOjkF,KAAK4oB,MAAahnB,EAAK0gF,OAAOjB,YAAcz/E,EAAK0gF,OAAOC,SAA7C,KACtB3gF,EAAKkI,EAAEw3E,iBAAmB2C,EAAO,IACjCriF,EAAKkI,EAAEu3E,YAAcz/E,EAAKoiF,SAASpiF,EAAK0gF,OAAOjB,YACjD,IAEA,IAAI2B,EAAS1hF,OAAOkX,aAAa6qE,QAAQtC,EAAM3xE,GAAK,WACpD,GAAI4zE,EAAQ,CACV,IAAIkB,EAAM37C,WAAWy6C,GACrB9mF,KAAKimF,UAAU+B,GACfhoF,KAAK4N,EAAE23E,YAAcyC,CACvB,CACF,KAACnD,CAAA,CAjOe,CAAS37C,IAoO3B27C,GAAM7+E,SAAqB,ggCAmC3B6+E,GAAM9gC,eAAe,CACnB4f,MAAO,QACPtf,IAAK,QCvSA,IAAM4jC,GAAS,SAAAh7C,IAAA1nC,EAAAA,EAAAA,GAAA0iF,EAAAh7C,GAAA,IAAAznC,GAAAC,EAAAA,EAAAA,GAAAwiF,GAAA,SAAAA,IAAA,OAAAnoF,EAAAA,EAAAA,GAAA,KAAAmoF,GAAAziF,EAAA4D,MAAA,KAAAtI,UAAA,CAWnB,OAXmBJ,EAAAA,EAAAA,GAAAunF,EAAA,EAAAvqF,IAAA,eAAA6B,MACpB,WAAe,IAAA8B,EAAA,KACb4c,GAAAgtB,EAAAA,EAAAA,GAAAg9C,EAAAnqF,WAAA,qBAAAE,KAAA,MAEAgC,KAAK8gC,eACH,mBAEA,SAACvhC,GACC8B,EAAKquD,gBAAgB,WAAYnwD,EACnC,GAEJ,KAAC0oF,CAAA,CAXmB,CAAS/+C,KAqB9BtpB,EAAAA,EAAAA,GArBYqoE,GAAS,WAaQ,8MCf9B,ICIaC,GAAa,SAAAj7C,IAAA1nC,EAAAA,EAAAA,GAAA2iF,EAAAj7C,GAAA,IAAAznC,GAAAC,EAAAA,EAAAA,GAAAyiF,GAAA,SAAAA,IAAA,IAAA7mF,GAAAvB,EAAAA,EAAAA,GAAA,KAAAooF,GAAA,QAAAxnE,EAAA5f,UAAA1C,OAAAuiB,EAAA,IAAA9Y,MAAA6Y,GAAAzD,EAAA,EAAAA,EAAAyD,EAAAzD,IAAA0D,EAAA1D,GAAAnc,UAAAmc,GAGR,OAHQ5b,EAAAmE,EAAAxH,KAAAoL,MAAA5D,EAAA,OAAAvD,OAAA0e,KAAAf,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,kBACP,IAAIue,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,QACbk9B,IAAgBjxB,EAAAA,EAAAA,GAAAjM,MAAMue,EAAAA,EAAAA,IAAAtS,EAAAA,EAAAA,GAAAjM,GAAA,YAClB,MAAIA,CAAA,CAIf,OAJeX,EAAAA,EAAAA,GAAAwnF,EAAA,OAAAxqF,IAAA,WAAA4E,IAMhB,WACE,OAAOtC,KAAKmoF,SACd,EAAC5lF,IAND,SAAoBhD,GAClBS,KAAKmoF,UDVT,uusCCUsC5oF,EAAmB,eACvD,KAAC2oF,CAAA,CAPuB,CAASh/C,ICAtBk/C,GAAmB,SAAAC,IAAA9iF,EAAAA,EAAAA,GAAA6iF,EAAAC,GAAA,IAAA7iF,GAAAC,EAAAA,EAAAA,GAAA2iF,GAAA,SAAAA,IAAA,OAAAtoF,EAAAA,EAAAA,GAAA,KAAAsoF,GAAA5iF,EAAA4D,MAAA,KAAAtI,UAAA,CAgB7B,OAhB6BJ,EAAAA,EAAAA,GAAA0nF,EAAA,EAAA1qF,IAAA,eAAA6B,MAC9B,WAAe,IAAA8B,EAAA,KACb4c,GAAAgtB,EAAAA,EAAAA,GAAAm9C,EAAAtqF,WAAA,qBAAAE,KAAA,MAEAgC,KAAKmG,IACH,gBACA,SAAC2nC,GACKzsC,EAAKinF,mBAAqBx6C,GAC5BzsC,EAAKmzB,KAAKsZ,EAAcvvB,EAAUQ,WAAaR,EAAUS,iBAAaje,EAAW,CAAEmf,UAAU,IAI/F7e,EAAKinF,iBAAmBx6C,CAC1B,IACA,EAEJ,KAACs6C,CAAA,CAhB6B,CAASF,IAmBzCE,GAAoBpiF,SAAqB,irBCpBlC,IAAMuiF,GAAmB,SAAAF,IAAA9iF,EAAAA,EAAAA,GAAAgjF,EAAAF,GAAA,IAAA7iF,GAAAC,EAAAA,EAAAA,GAAA8iF,GAAA,SAAAA,IAAA,OAAAzoF,EAAAA,EAAAA,GAAA,KAAAyoF,GAAA/iF,EAAA4D,MAAA,KAAAtI,UAAA,CA+B7B,OA/B6BJ,EAAAA,EAAAA,GAAA6nF,EAAA,EAAA7qF,IAAA,eAAA6B,MAC9B,WAAe,IAAA8B,EAAA,KACb4c,GAAAgtB,EAAAA,EAAAA,GAAAs9C,EAAAzqF,WAAA,qBAAAE,KAAA,MAGA,IAAMwqF,EAASxoF,KAAKsJ,IAAIk/E,OACxBxoF,KAAKmG,IAAI,oBAAoB,SAACvF,GACvBA,IACHS,EAAKuM,EAAE,oBAAsB46E,EAAOtlB,cAAgBl2B,GAAc6B,WAAWC,WAEjF,IAEA9uC,KAAKmG,IAAI,eAAe,SAAC+3C,IACf,OAAJA,QAAI,IAAJA,OAAI,EAAJA,EAAM9/C,QAAS,EACjBiD,EAAKuM,EAAE,oBAAsBo/B,GAAc6B,WAAWI,YAEtD5tC,EAAKuM,EAAE,oBAAsB46E,EAAOtlB,cAAgBl2B,GAAc6B,WAAWC,UAEjF,IAEA9uC,KAAK8gC,eAAe,cAAc,SAAC2G,GACd,UAAfA,IACFpmC,EAAK8/B,IAAIsG,WAAa,QAE1B,IAEAznC,KAAK8gC,eAAe,iBAAiB,SAACqG,IACd,IAAlBA,IACF9lC,EAAK8/B,IAAIgG,eAAgB,EAE7B,GACF,KAACohD,CAAA,CA/B6B,CAASL,IAkCzCK,GAAoBviF,SAAqB,iMCjClC,IAAMyiF,GAAkB,SAAAJ,IAAA9iF,EAAAA,EAAAA,GAAAkjF,EAAAJ,GAAA,IAAA7iF,GAAAC,EAAAA,EAAAA,GAAAgjF,GAC7B,SAAAA,IAAc,IAAApnF,EAaV,OAbUvB,EAAAA,EAAAA,GAAA,KAAA2oF,IACZpnF,EAAAmE,EAAAxH,KAAA,OAEKgJ,OAAK1G,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACLe,EAAK2F,OAAK,IACb0hF,aAAa,EACb9nE,OAAQ,WACFvf,EAAKsnF,iBACPtnF,EAAKuM,EAAE,kBACEvM,EAAKunF,gBACdvnF,EAAKuM,EAAE,oBAAsBo/B,GAAc6B,WAAWI,YAE1D,IACA5tC,CACJ,CAkCC,OAlCAX,EAAAA,EAAAA,GAAA+nF,EAAA,EAAA/qF,IAAA,mBAAA4E,IAED,WACE,IAAMoW,EAAU1Y,KAAK4N,EAAE,YACvB,OAAO8K,EAAQta,OAAS,GAAKsa,EAAQA,EAAQta,OAAS,KAAO4uC,GAAc6B,WAAWC,UACxF,GAAC,CAAApxC,IAAA,gBAAA4E,IAED,WACE,OAAOtC,KAAKmhC,IAAI0G,eAAiB7nC,KAAK4N,EAAE,eAAexP,OAAS,CAClE,GAAC,CAAAV,IAAA,eAAA6B,MAED,WAAe,IAAAiC,EAAA,KACbyc,GAAAgtB,EAAAA,EAAAA,GAAAw9C,EAAA3qF,WAAA,qBAAAE,KAAA,MAGA,IAAMwqF,EAASxoF,KAAKsJ,IAAIk/E,OACxBxoF,KAAKmG,IAAI,oBAAoB,SAACvF,GACvBA,IACHY,EAAKoM,EAAE,oBAAsB46E,EAAOtlB,cAAgBl2B,GAAc6B,WAAWC,WAEjF,IAEA9uC,KAAKmG,IAAI,eAAe,SAAC+3C,IAEjB,OAAJA,QAAI,IAAJA,OAAI,EAAJA,EAAM9/C,QAAS,GACfoD,EAAKoM,EAAE,uBAAyB46E,EAAOtlB,cAAgBl2B,GAAc6B,WAAWC,cAEhFttC,EAAKoM,EAAE,oBAAsBo/B,GAAc6B,WAAWI,YAE1D,IAEAjvC,KAAKmG,IAAI,YAAY,WACnB3E,EAAKoM,EAAe,YAAIpM,EAAKmnF,kBAAoBnnF,EAAKonF,aACxD,GACF,KAACH,CAAA,CAjD4B,CAASP,IAoDxCO,GAAmBziF,SAAqB,knBCrDjC,IAAM6iF,GAAgB,SAAAC,IAAAvjF,EAAAA,EAAAA,GAAAsjF,EAAAC,GAAA,IAAAtjF,GAAAC,EAAAA,EAAAA,GAAAojF,GAAA,SAAAA,IAAA,OAAA/oF,EAAAA,EAAAA,GAAA,KAAA+oF,GAAArjF,EAAA4D,MAAA,KAAAtI,UAAA,CAkB1B,OAlB0BJ,EAAAA,EAAAA,GAAAmoF,EAAA,EAAAnrF,IAAA,eAAA6B,MAC3B,WACE0e,GAAAgtB,EAAAA,EAAAA,GAAA49C,EAAA/qF,WAAA,qBAAAE,KAAA,MAGAgC,KAAK+oF,eAAgB,EAErB/oF,KAAK4N,EAAE,YAAc5N,KAAKsJ,IAAI,YAC9BtJ,KAAK4N,EAAE,cAAgB5N,KAAKsJ,IAAI,cAChCtJ,KAAK4N,EAAE,mBAAqB5N,KAAKsJ,IAAI,oBAErCtJ,KAAK8pE,YACP,GAAC,CAAApsE,IAAA,aAAA6B,MAAA,eAAA8qE,GAAA1uD,EAAAA,EAAAA,GAAAC,EAAAA,MAED,SAAAC,IAAA,OAAAD,EAAAA,MAAA,SAAAE,GAAA,cAAAA,EAAA3P,KAAA2P,EAAA1P,MAAA,WACMpM,KAAK+oF,cAAe,CAAFjtE,EAAA1P,KAAA,eAAA0P,EAAA1P,KAAA,EAAA6R,GAAAgtB,EAAAA,EAAAA,GAAA49C,EAAA/qF,WAAA,mBAAAE,KAAA,8BAAA8d,EAAAI,OAAA,GAAAL,EAAA,UAGvB,yBAAAwuD,EAAAjhE,MAAA,KAAAtI,UAAA,EANA,MAMA+nF,CAAA,CAlB0B,CAAS/f,I,WCM/B,SAAekgB,GAAiB7sE,GAAA,OAAA8sE,GAAA7/E,MAAC,KAADtI,UAAA,CAwBtC,SAAAmoF,KAAA,OAAAA,IAAAttE,EAAAA,EAAAA,GAAAC,EAAAA,MAxBM,SAAAC,EAAiCnF,GAAG,IAAAwyE,EAAA9T,EAAAt0E,UAAA,OAAA8a,EAAAA,MAAA,SAAAE,GAAA,cAAAA,EAAA3P,KAAA2P,EAAA1P,MAAA,OAAkB,OAAhB88E,EAAQ9T,EAAAh3E,OAAA,QAAA2C,IAAAq0E,EAAA,IAAAA,EAAA,GAAQt5D,EAAA8b,OAAA,SACpD,IAAIjb,SAAQ,SAACC,EAASC,GAC3B,GAAwB,kBAAbtU,SAIX,GAAsB,kBAAXnD,QAAuBA,OAAoB,GACpDwX,EAAQxX,OAAoB,QAD9B,CAIA,IAAI+jF,EAAS5gF,SAAS+G,cAAc,UACpC65E,EAAOC,OAAQ,EACfD,EAAO9kC,IAAM3tC,EACbyyE,EAAO7tE,QAAU,WACfuB,GACF,EACAssE,EAAOp5E,OAAS,WAEd,IAAIs5E,EAASjkF,OAAoB,GACjC8jF,IAAY5qF,EAAAA,GAAAA,GAAe+qF,GAC3BzsE,EAAQysE,EACV,EACA9gF,SAASiL,KAAKvM,YAAYkiF,EAb1B,MANEvsE,EAAQ,KAoBZ,KAAE,wBAAAd,EAAAI,OAAA,GAAAL,EAAA,KACHotE,GAAA7/E,MAAA,KAAAtI,UAAA,C","sources":["../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../node_modules/@uploadcare/blocks/abstract/registerBlocks.js","../node_modules/@symbiotejs/symbiote/build/symbiote.js","../node_modules/@babel/runtime/helpers/esm/superPropBase.js","../node_modules/@babel/runtime/helpers/esm/get.js","../node_modules/@uploadcare/blocks/blocks/UploadCtxProvider/EventEmitter.js","../node_modules/@uploadcare/blocks/blocks/utils/debounce.js","../node_modules/@uploadcare/blocks/utils/WindowHeightTracker.js","../node_modules/@uploadcare/blocks/utils/getLocaleDirection.js","../node_modules/@uploadcare/blocks/utils/getPluralForm.js","../node_modules/@uploadcare/blocks/utils/template-utils.js","../node_modules/@uploadcare/blocks/utils/waitForAttribute.js","../node_modules/@uploadcare/upload-client/dist/esm/index.browser.mjs","../node_modules/@uploadcare/blocks/abstract/CTX.js","../node_modules/@uploadcare/blocks/locales/file-uploader/en.js","../node_modules/@uploadcare/blocks/abstract/localeRegistry.js","../node_modules/@uploadcare/blocks/abstract/LocaleManager.js","../node_modules/@uploadcare/blocks/abstract/l10nProcessor.js","../node_modules/@uploadcare/blocks/abstract/sharedConfigKey.js","../node_modules/@uploadcare/blocks/utils/cdn-utils.js","../node_modules/@uploadcare/blocks/utils/stringToArray.js","../node_modules/@uploadcare/blocks/blocks/CloudImageEditor/src/lib/transformationUtils.js","../node_modules/@uploadcare/blocks/blocks/CloudImageEditor/src/toolbar-constants.js","../node_modules/@uploadcare/blocks/blocks/utils/comma-separated.js","../node_modules/@uploadcare/blocks/blocks/Config/initialConfig.js","../node_modules/@uploadcare/blocks/abstract/Block.js","../node_modules/@uploadcare/blocks/abstract/ActivityBlock.js","../node_modules/@uploadcare/blocks/blocks/CloudImageEditor/src/cropper-constants.js","../node_modules/@uploadcare/blocks/blocks/CloudImageEditor/src/crop-utils.js","../node_modules/@uploadcare/blocks/blocks/CloudImageEditor/src/lib/parseCropPreset.js","../node_modules/@uploadcare/blocks/blocks/utils/UploadSource.js","../node_modules/@uploadcare/blocks/env.js","../node_modules/@uploadcare/blocks/blocks/utils/userAgent.js","../node_modules/@uploadcare/blocks/utils/buildOutputError.js","../node_modules/@uploadcare/blocks/utils/fileTypes.js","../node_modules/@uploadcare/blocks/utils/prettyBytes.js","../node_modules/@uploadcare/blocks/utils/warnOnce.js","../node_modules/@uploadcare/blocks/abstract/TypedData.js","../node_modules/@uploadcare/blocks/abstract/TypedCollection.js","../node_modules/@uploadcare/blocks/utils/memoize.js","../node_modules/@uploadcare/blocks/abstract/buildOutputCollectionState.js","../node_modules/@uploadcare/blocks/abstract/uploadEntrySchema.js","../node_modules/@uploadcare/blocks/utils/parseCdnUrl.js","../node_modules/@uploadcare/blocks/abstract/UploaderBlock.js","../node_modules/@uploadcare/blocks/utils/toKebabCase.js","../node_modules/@uploadcare/blocks/blocks/Config/normalizeConfigValue.js","../node_modules/@uploadcare/blocks/blocks/Config/Config.js","../node_modules/@uploadcare/blocks/blocks/Icon/Icon.js","../node_modules/@uploadcare/blocks/utils/uniqueArray.js","../node_modules/@uploadcare/blocks/blocks/Img/props-map.js","../node_modules/@uploadcare/blocks/blocks/Img/configurations.js","../node_modules/@uploadcare/blocks/blocks/Img/ImgConfig.js","../node_modules/@uploadcare/blocks/blocks/Img/ImgBase.js","../node_modules/@uploadcare/blocks/blocks/Img/utils/parseObjectToString.js","../node_modules/@uploadcare/blocks/blocks/Img/Img.js","../node_modules/@uploadcare/blocks/blocks/SimpleBtn/SimpleBtn.js","../node_modules/@uploadcare/blocks/blocks/StartFrom/StartFrom.js","../node_modules/@uploadcare/blocks/blocks/DropArea/getDropItems.js","../node_modules/@uploadcare/blocks/blocks/DropArea/addDropzone.js","../node_modules/@uploadcare/blocks/blocks/DropArea/DropArea.js","../node_modules/@uploadcare/blocks/blocks/SourceBtn/SourceBtn.js","../node_modules/@uploadcare/blocks/blocks/SourceList/SourceList.js","../node_modules/@uploadcare/image-shrink/dist/esm/index.browser.mjs","../node_modules/@uploadcare/blocks/blocks/svg-backgrounds/svg-backgrounds.js","../node_modules/@uploadcare/blocks/blocks/utils/resizeImage.js","../node_modules/@uploadcare/blocks/utils/parseShrink.js","../node_modules/@uploadcare/blocks/blocks/FileItem/FileItem.js","../node_modules/@uploadcare/blocks/blocks/Modal/Modal.js","../node_modules/@uploadcare/blocks/blocks/utils/throttle.js","../node_modules/@uploadcare/blocks/blocks/UploadList/UploadList.js","../node_modules/@uploadcare/blocks/blocks/UrlSource/UrlSource.js","../node_modules/@uploadcare/blocks/blocks/utils/abilities.js","../node_modules/@uploadcare/blocks/blocks/CameraSource/CameraSource.js","../node_modules/@uploadcare/blocks/blocks/UploadCtxProvider/UploadCtxProvider.js","../node_modules/@uploadcare/blocks/blocks/ConfirmationDialog/ConfirmationDialog.js","../node_modules/@uploadcare/blocks/blocks/ProgressBarCommon/ProgressBarCommon.js","../node_modules/@uploadcare/blocks/blocks/ProgressBar/ProgressBar.js","../node_modules/@uploadcare/blocks/utils/transparentPixelSrc.js","../node_modules/@uploadcare/blocks/blocks/FilePreview/FilePreview.js","../node_modules/@uploadcare/blocks/blocks/CloudImageEditor/src/lib/classNames.js","../node_modules/@uploadcare/blocks/blocks/CloudImageEditor/src/lib/parseTabs.js","../node_modules/@uploadcare/blocks/blocks/CloudImageEditor/src/svg-sprite.js","../node_modules/@uploadcare/blocks/blocks/CloudImageEditor/src/template.js","../node_modules/@uploadcare/blocks/blocks/CloudImageEditor/src/CloudImageEditorBlock.js","../node_modules/@uploadcare/blocks/blocks/CloudImageEditor/src/state.js","../node_modules/@uploadcare/blocks/blocks/CloudImageEditor/src/CropFrame.js","../node_modules/@uploadcare/blocks/blocks/CloudImageEditor/src/EditorButtonControl.js","../node_modules/@uploadcare/blocks/blocks/CloudImageEditor/src/EditorCropButtonControl.js","../node_modules/@uploadcare/blocks/blocks/CloudImageEditor/src/EditorSlider.js","../node_modules/@uploadcare/blocks/blocks/CloudImageEditor/src/lib/preloadImage.js","../node_modules/@uploadcare/blocks/blocks/CloudImageEditor/src/EditorFilterControl.js","../node_modules/@uploadcare/blocks/blocks/CloudImageEditor/src/EditorOperationControl.js","../node_modules/@uploadcare/blocks/blocks/CloudImageEditor/src/util.js","../node_modules/@uploadcare/blocks/blocks/CloudImageEditor/src/EditorImageCropper.js","../node_modules/@uploadcare/blocks/blocks/CloudImageEditor/src/lib/pick.js","../node_modules/@uploadcare/blocks/blocks/CloudImageEditor/src/lib/linspace.js","../node_modules/@uploadcare/blocks/blocks/CloudImageEditor/src/EditorImageFader.js","../node_modules/@uploadcare/blocks/blocks/CloudImageEditor/src/EditorScroller.js","../node_modules/@uploadcare/blocks/blocks/CloudImageEditor/src/EditorToolbar.js","../node_modules/@uploadcare/blocks/blocks/CloudImageEditor/src/elements/button/LrBtnUi.js","../node_modules/@uploadcare/blocks/blocks/CloudImageEditor/src/elements/line-loader/LineLoaderUi.js","../node_modules/@uploadcare/blocks/blocks/CloudImageEditor/src/elements/presence-toggle/PresenceToggle.js","../node_modules/@uploadcare/blocks/blocks/CloudImageEditor/src/elements/slider/SliderUi.js","../node_modules/@uploadcare/blocks/blocks/CloudImageEditorActivity/CloudImageEditorActivity.js","../node_modules/@uploadcare/blocks/utils/wildcardRegexp.js","../node_modules/@uploadcare/blocks/blocks/ExternalSource/buildStyles.js","../node_modules/@uploadcare/blocks/blocks/ExternalSource/messages.js","../node_modules/@uploadcare/blocks/blocks/ExternalSource/ExternalSource.js","../node_modules/@uploadcare/blocks/blocks/ExternalSource/query-string.js","../node_modules/@uploadcare/blocks/blocks/Tabs/Tabs.js","../node_modules/@uploadcare/blocks/blocks/FormInput/FormInput.js","../node_modules/@uploadcare/blocks/blocks/ActivityHeader/ActivityHeader.js","../node_modules/@uploadcare/blocks/blocks/Select/Select.js","../node_modules/@uploadcare/blocks/blocks/Video/Video.js","../node_modules/@uploadcare/blocks/blocks/Copyright/Copyright.js","../node_modules/@uploadcare/blocks/blocks/themes/lr-basic/svg-sprite.js","../node_modules/@uploadcare/blocks/abstract/SolutionBlock.js","../node_modules/@uploadcare/blocks/solutions/file-uploader/regular/FileUploaderRegular.js","../node_modules/@uploadcare/blocks/solutions/file-uploader/minimal/FileUploaderMinimal.js","../node_modules/@uploadcare/blocks/solutions/file-uploader/inline/FileUploaderInline.js","../node_modules/@uploadcare/blocks/solutions/cloud-image-editor/CloudImageEditor.js","../node_modules/@uploadcare/blocks/abstract/connectBlocksFrom.js"],"sourcesContent":["import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose.js\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  for (var key in source) {\n    if (Object.prototype.hasOwnProperty.call(source, key)) {\n      if (excluded.indexOf(key) >= 0) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}","/** @param {Object<string, any>} blockExports */\nexport function registerBlocks(blockExports) {\n  for (let blockName in blockExports) {\n    let tagName = [...blockName].reduce((name, char) => {\n      if (char.toUpperCase() === char) {\n        char = '-' + char.toLowerCase();\n      }\n      return (name += char);\n    }, '');\n    if (tagName.startsWith('-')) {\n      tagName = tagName.replace('-', '');\n    }\n    if (!tagName.startsWith('lr-')) {\n      tagName = 'lr-' + tagName;\n    }\n    if (blockExports[blockName].reg) {\n      blockExports[blockName].reg(tagName);\n    }\n  }\n}\n","var __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\n\n// core/Data.js\nfunction cloneObj(obj) {\n  let clone = (o) => {\n    var _a;\n    for (let prop in o) {\n      if (((_a = o[prop]) == null ? void 0 : _a.constructor) === Object) {\n        o[prop] = clone(o[prop]);\n      }\n    }\n    return { ...o };\n  };\n  return clone(obj);\n}\nvar Data = class {\n  constructor(schema) {\n    if (schema.constructor === Object) {\n      this.store = cloneObj(schema);\n    } else {\n      this._storeIsProxy = true;\n      this.store = schema;\n    }\n    this.callbackMap = Object.create(null);\n  }\n  static warn(actionName, prop) {\n    console.warn(`Symbiote Data: cannot ${actionName}. Prop name: ` + prop);\n  }\n  read(prop) {\n    if (!this._storeIsProxy && !this.store.hasOwnProperty(prop)) {\n      Data.warn(\"read\", prop);\n      return null;\n    }\n    return this.store[prop];\n  }\n  has(prop) {\n    return this._storeIsProxy ? this.store[prop] !== void 0 : this.store.hasOwnProperty(prop);\n  }\n  add(prop, val, rewrite = false) {\n    if (!rewrite && Object.keys(this.store).includes(prop)) {\n      return;\n    }\n    this.store[prop] = val;\n    this.notify(prop);\n  }\n  pub(prop, val) {\n    if (!this._storeIsProxy && !this.store.hasOwnProperty(prop)) {\n      Data.warn(\"publish\", prop);\n      return;\n    }\n    this.store[prop] = val;\n    this.notify(prop);\n  }\n  multiPub(updObj) {\n    for (let prop in updObj) {\n      this.pub(prop, updObj[prop]);\n    }\n  }\n  notify(prop) {\n    if (this.callbackMap[prop]) {\n      this.callbackMap[prop].forEach((callback) => {\n        callback(this.store[prop]);\n      });\n    }\n  }\n  sub(prop, callback, init = true) {\n    if (!this._storeIsProxy && !this.store.hasOwnProperty(prop)) {\n      Data.warn(\"subscribe\", prop);\n      return null;\n    }\n    if (!this.callbackMap[prop]) {\n      this.callbackMap[prop] = /* @__PURE__ */ new Set();\n    }\n    this.callbackMap[prop].add(callback);\n    if (init) {\n      callback(this.store[prop]);\n    }\n    return {\n      remove: () => {\n        this.callbackMap[prop].delete(callback);\n        if (!this.callbackMap[prop].size) {\n          delete this.callbackMap[prop];\n        }\n      },\n      callback\n    };\n  }\n  static registerCtx(schema, uid = Symbol()) {\n    let data = Data.globalStore.get(uid);\n    if (data) {\n      console.warn('State: context UID \"' + uid + '\" already in use');\n    } else {\n      data = new Data(schema);\n      Data.globalStore.set(uid, data);\n    }\n    return data;\n  }\n  static deleteCtx(uid) {\n    Data.globalStore.delete(uid);\n  }\n  static getCtx(uid, notify = true) {\n    return Data.globalStore.get(uid) || (notify && console.warn('State: wrong context UID - \"' + uid + '\"'), null);\n  }\n};\nData.globalStore = /* @__PURE__ */ new Map();\n\n// core/dictionary.js\nvar DICT = Object.freeze({\n  BIND_ATTR: \"set\",\n  ATTR_BIND_PRFX: \"@\",\n  EXT_DATA_CTX_PRFX: \"*\",\n  NAMED_DATA_CTX_SPLTR: \"/\",\n  CTX_NAME_ATTR: \"ctx-name\",\n  CTX_OWNER_ATTR: \"ctx-owner\",\n  CSS_CTX_PROP: \"--ctx-name\",\n  EL_REF_ATTR: \"ref\",\n  AUTO_TAG_PRFX: \"sym\",\n  REPEAT_ATTR: \"repeat\",\n  REPEAT_ITEM_TAG_ATTR: \"repeat-item-tag\",\n  SET_LATER_KEY: \"__toSetLater__\",\n  USE_TPL: \"use-template\",\n  ROOT_STYLE_ATTR_NAME: \"sym-component\"\n});\n\n// utils/UID.js\nvar CHARS = \"1234567890QWERTYUIOPASDFGHJKLZXCVBNMqwertyuiopasdfghjklzxcvbnm\";\nvar CHLENGTH = CHARS.length - 1;\nvar UID = class {\n  static generate(pattern = \"XXXXXXXXX-XXX\") {\n    let uid = \"\";\n    for (let i = 0; i < pattern.length; i++) {\n      uid += pattern[i] === \"-\" ? pattern[i] : CHARS.charAt(Math.random() * CHLENGTH);\n    }\n    return uid;\n  }\n};\n\n// utils/setNestedProp.js\nfunction setNestedProp(parent, path, value) {\n  let success = true;\n  let lastStep;\n  let propPath = path.split(\".\");\n  propPath.forEach((step, idx) => {\n    if (idx < propPath.length - 1) {\n      parent = parent[step];\n    } else {\n      lastStep = step;\n    }\n  });\n  if (parent) {\n    parent[lastStep] = value;\n  } else {\n    success = false;\n  }\n  return success;\n}\n\n// utils/kebabToCamel.js\nfunction kebabToCamel(string) {\n  return string.split(\"-\").map((p, i) => {\n    return p && i ? p[0].toUpperCase() + p.slice(1) : p;\n  }).join(\"\").split(\"_\").map((p, i) => {\n    return p && i ? p.toUpperCase() : p;\n  }).join(\"\");\n}\n\n// core/repeatProcessor.js\nfunction repeatProcessor(fr, fnCtx) {\n  [...fr.querySelectorAll(`[${DICT.REPEAT_ATTR}]`)].forEach((el) => {\n    let itemTag = el.getAttribute(DICT.REPEAT_ITEM_TAG_ATTR);\n    let itemClass;\n    if (itemTag) {\n      itemClass = window.customElements.get(itemTag);\n    }\n    if (!itemClass) {\n      itemClass = class extends fnCtx.BaseComponent {\n        constructor() {\n          super();\n          if (!itemTag) {\n            this.style.display = \"contents\";\n          }\n        }\n      };\n      let itemTpl = el.innerHTML;\n      itemClass.template = itemTpl;\n      itemClass.reg(itemTag);\n    }\n    while (el.firstChild) {\n      el.firstChild.remove();\n    }\n    let repeatDataKey = el.getAttribute(DICT.REPEAT_ATTR);\n    fnCtx.sub(repeatDataKey, (data) => {\n      if (!data) {\n        while (el.firstChild) {\n          el.firstChild.remove();\n        }\n        return;\n      }\n      let currentList = [...el.children];\n      let fragment;\n      let fillItems = (items) => {\n        items.forEach((item, idx) => {\n          if (currentList[idx]) {\n            if (currentList[idx].set$) {\n              setTimeout(() => {\n                currentList[idx].set$(item);\n              });\n            } else {\n              for (let k in item) {\n                currentList[idx][k] = item[k];\n              }\n            }\n          } else {\n            if (!fragment) {\n              fragment = new DocumentFragment();\n            }\n            let repeatItem = new itemClass();\n            Object.assign(repeatItem.init$, item);\n            fragment.appendChild(repeatItem);\n          }\n        });\n        fragment && el.appendChild(fragment);\n        let oversize = currentList.slice(items.length, currentList.length);\n        for (let exItm of oversize) {\n          exItm.remove();\n        }\n      };\n      if (data.constructor === Array) {\n        fillItems(data);\n      } else if (data.constructor === Object) {\n        let items = [];\n        for (let itemKey in data) {\n          let init = data[itemKey];\n          Object.defineProperty(init, \"_KEY_\", {\n            value: itemKey,\n            enumerable: true\n          });\n          items.push(init);\n        }\n        fillItems(items);\n      } else {\n        console.warn(\"Symbiote repeat data type error:\");\n        console.log(data);\n      }\n    });\n    el.removeAttribute(DICT.REPEAT_ATTR);\n    el.removeAttribute(DICT.REPEAT_ITEM_TAG_ATTR);\n  });\n}\n\n// core/tpl-processors.js\nvar DEFAULT_SLOT_KEY = \"__default__\";\nfunction slotProcessor(fr, fnCtx) {\n  if (fnCtx.shadowRoot) {\n    return;\n  }\n  let slots = [...fr.querySelectorAll(\"slot\")];\n  if (!slots.length) {\n    return;\n  }\n  let slotMap = {};\n  slots.forEach((slot) => {\n    let slotName = slot.getAttribute(\"name\") || DEFAULT_SLOT_KEY;\n    slotMap[slotName] = {\n      slot,\n      fr: document.createDocumentFragment()\n    };\n  });\n  fnCtx.initChildren.forEach((child) => {\n    var _a;\n    let slotName = DEFAULT_SLOT_KEY;\n    if (child instanceof Element && child.hasAttribute(\"slot\")) {\n      slotName = child.getAttribute(\"slot\");\n      child.removeAttribute(\"slot\");\n    }\n    (_a = slotMap[slotName]) == null ? void 0 : _a.fr.appendChild(child);\n  });\n  Object.values(slotMap).forEach((mapObj) => {\n    if (mapObj.fr.childNodes.length) {\n      mapObj.slot.parentNode.replaceChild(mapObj.fr, mapObj.slot);\n    } else if (mapObj.slot.childNodes.length) {\n      let slotFr = document.createDocumentFragment();\n      slotFr.append(...mapObj.slot.childNodes);\n      mapObj.slot.parentNode.replaceChild(slotFr, mapObj.slot);\n    } else {\n      mapObj.slot.remove();\n    }\n  });\n}\nfunction refProcessor(fr, fnCtx) {\n  [...fr.querySelectorAll(`[${DICT.EL_REF_ATTR}]`)].forEach((el) => {\n    let refName = el.getAttribute(DICT.EL_REF_ATTR);\n    fnCtx.ref[refName] = el;\n    el.removeAttribute(DICT.EL_REF_ATTR);\n  });\n}\nfunction domSetProcessor(fr, fnCtx) {\n  [...fr.querySelectorAll(`[${DICT.BIND_ATTR}]`)].forEach((el) => {\n    let subStr = el.getAttribute(DICT.BIND_ATTR);\n    let keyValArr = subStr.split(\";\");\n    [...el.attributes].forEach((attr) => {\n      if (attr.name.startsWith(\"-\") && attr.value) {\n        let key = kebabToCamel(attr.name.replace(\"-\", \"\"));\n        keyValArr.push(key + \":\" + attr.value);\n        el.removeAttribute(attr.name);\n      }\n    });\n    keyValArr.forEach((keyValStr) => {\n      if (!keyValStr) {\n        return;\n      }\n      let kv = keyValStr.split(\":\").map((str) => str.trim());\n      let prop = kv[0];\n      let isAttr;\n      if (prop.indexOf(DICT.ATTR_BIND_PRFX) === 0) {\n        isAttr = true;\n        prop = prop.replace(DICT.ATTR_BIND_PRFX, \"\");\n      }\n      let valKeysArr = kv[1].split(\",\").map((valKey) => {\n        return valKey.trim();\n      });\n      for (let valKey of valKeysArr) {\n        let castType;\n        if (valKey.startsWith(\"!!\")) {\n          castType = \"double\";\n          valKey = valKey.replace(\"!!\", \"\");\n        } else if (valKey.startsWith(\"!\")) {\n          castType = \"single\";\n          valKey = valKey.replace(\"!\", \"\");\n        }\n        fnCtx.sub(valKey, (val) => {\n          if (castType === \"double\") {\n            val = !!val;\n          } else if (castType === \"single\") {\n            val = !val;\n          }\n          if (isAttr) {\n            if ((val == null ? void 0 : val.constructor) === Boolean) {\n              val ? el.setAttribute(prop, \"\") : el.removeAttribute(prop);\n            } else {\n              el.setAttribute(prop, val);\n            }\n          } else {\n            if (!setNestedProp(el, prop, val)) {\n              if (!el[DICT.SET_LATER_KEY]) {\n                el[DICT.SET_LATER_KEY] = Object.create(null);\n              }\n              el[DICT.SET_LATER_KEY][prop] = val;\n            }\n          }\n        });\n      }\n    });\n    el.removeAttribute(DICT.BIND_ATTR);\n  });\n}\nvar OPEN_TOKEN = \"{{\";\nvar CLOSE_TOKEN = \"}}\";\nvar SKIP_ATTR = \"skip-text\";\nfunction getTextNodesWithTokens(el) {\n  let node;\n  let result = [];\n  let walk = document.createTreeWalker(el, NodeFilter.SHOW_TEXT, {\n    acceptNode: (txt) => {\n      var _a;\n      return !((_a = txt.parentElement) == null ? void 0 : _a.hasAttribute(SKIP_ATTR)) && txt.textContent.includes(OPEN_TOKEN) && txt.textContent.includes(CLOSE_TOKEN) && 1;\n    }\n  });\n  while (node = walk.nextNode()) {\n    result.push(node);\n  }\n  return result;\n}\nvar txtNodesProcessor = function(fr, fnCtx) {\n  let txtNodes = getTextNodesWithTokens(fr);\n  txtNodes.forEach((txtNode) => {\n    let tokenNodes = [];\n    let offset;\n    while (txtNode.textContent.includes(CLOSE_TOKEN)) {\n      if (txtNode.textContent.startsWith(OPEN_TOKEN)) {\n        offset = txtNode.textContent.indexOf(CLOSE_TOKEN) + CLOSE_TOKEN.length;\n        txtNode.splitText(offset);\n        tokenNodes.push(txtNode);\n      } else {\n        offset = txtNode.textContent.indexOf(OPEN_TOKEN);\n        txtNode.splitText(offset);\n      }\n      txtNode = txtNode.nextSibling;\n    }\n    tokenNodes.forEach((tNode) => {\n      let prop = tNode.textContent.replace(OPEN_TOKEN, \"\").replace(CLOSE_TOKEN, \"\");\n      tNode.textContent = \"\";\n      fnCtx.sub(prop, (val) => {\n        tNode.textContent = val;\n      });\n    });\n  });\n};\nvar tpl_processors_default = [repeatProcessor, slotProcessor, refProcessor, domSetProcessor, txtNodesProcessor];\n\n// utils/parseCssPropertyValue.js\nvar SINGLE_QUOTE = \"'\";\nvar DOUBLE_QUOTE = '\"';\nvar ESCAPED_PATTERN = /\\\\([0-9a-fA-F]{1,6} ?)/g;\nfunction hasLeadingTrailingQuotes(str) {\n  return (str[0] === DOUBLE_QUOTE || str[0] === SINGLE_QUOTE) && (str[str.length - 1] === DOUBLE_QUOTE || str[str.length - 1] === SINGLE_QUOTE);\n}\nfunction trimQuotes(str) {\n  if (str[0] === DOUBLE_QUOTE || str[0] === SINGLE_QUOTE) {\n    str = str.slice(1);\n  }\n  if (str[str.length - 1] === DOUBLE_QUOTE || str[str.length - 1] === SINGLE_QUOTE) {\n    str = str.slice(0, -1);\n  }\n  return str;\n}\nfunction escapeQuotes(str) {\n  let result = \"\";\n  let prev = \"\";\n  for (var i = 0; i < str.length; i++) {\n    const next = str[i + 1];\n    if (str[i] === \"\\\\\" && next === '\"') {\n      result += '\\\\\"';\n      i++;\n    } else if (str[i] === '\"' && prev !== \"\\\\\") {\n      result += '\\\\\"';\n    } else {\n      result += str[i];\n    }\n    prev = str[i];\n  }\n  return result;\n}\nfunction parseCssPropertyValue(input) {\n  let output = input;\n  if (hasLeadingTrailingQuotes(input)) {\n    output = trimQuotes(output);\n    output = output.replace(ESCAPED_PATTERN, (match, p1) => {\n      return String.fromCodePoint(parseInt(p1.trim(), 16));\n    });\n    output = output.replaceAll(\"\\\\\\n\", \"\\\\n\");\n    output = escapeQuotes(output);\n    output = DOUBLE_QUOTE + output + DOUBLE_QUOTE;\n  }\n  try {\n    return JSON.parse(output);\n  } catch (err) {\n    throw new Error(`Failed to parse CSS property value: ${output}. Original input: ${input}`);\n  }\n}\n\n// core/BaseComponent.js\nvar autoTagsCount = 0;\nvar styleMutationObserver = null;\nvar styleMutationObserverCbList = null;\nvar _BaseComponent = class extends HTMLElement {\n  constructor() {\n    super();\n    __publicField(this, \"updateCssData\", () => {\n      var _a;\n      this.dropCssDataCache();\n      (_a = this.__boundCssProps) == null ? void 0 : _a.forEach((ctxProp) => {\n        let val = this.getCssData(this.__extractCssName(ctxProp), true);\n        val !== null && this.$[ctxProp] !== val && (this.$[ctxProp] = val);\n      });\n    });\n    this.init$ = Object.create(null);\n    this.cssInit$ = Object.create(null);\n    this.tplProcessors = /* @__PURE__ */ new Set();\n    this.ref = Object.create(null);\n    this.allSubs = /* @__PURE__ */ new Set();\n    this.pauseRender = false;\n    this.renderShadow = false;\n    this.readyToDestroy = true;\n    this.processInnerHtml = false;\n    this.allowCustomTemplate = false;\n    this.ctxOwner = false;\n  }\n  get BaseComponent() {\n    return _BaseComponent;\n  }\n  initCallback() {\n  }\n  __initCallback() {\n    var _a;\n    if (this.__initialized) {\n      return;\n    }\n    this.__initialized = true;\n    (_a = this.initCallback) == null ? void 0 : _a.call(this);\n  }\n  render(template, shadow = this.renderShadow) {\n    let fr;\n    if ((shadow || this.constructor[\"__shadowStylesUrl\"]) && !this.shadowRoot) {\n      this.attachShadow({\n        mode: \"open\"\n      });\n    }\n    if (this.allowCustomTemplate) {\n      let customTplSelector = this.getAttribute(DICT.USE_TPL);\n      if (customTplSelector) {\n        let root = this.getRootNode();\n        let customTpl = (root == null ? void 0 : root.querySelector(customTplSelector)) || document.querySelector(customTplSelector);\n        if (customTpl) {\n          template = customTpl.content.cloneNode(true);\n        } else {\n          console.warn(`Symbiote template \"${customTplSelector}\" is not found...`);\n        }\n      }\n    }\n    if (this.processInnerHtml) {\n      for (let fn of this.tplProcessors) {\n        fn(this, this);\n      }\n    }\n    if (template || this.constructor[\"template\"]) {\n      if (this.constructor[\"template\"] && !this.constructor[\"__tpl\"]) {\n        this.constructor[\"__tpl\"] = document.createElement(\"template\");\n        this.constructor[\"__tpl\"].innerHTML = this.constructor[\"template\"];\n      }\n      if ((template == null ? void 0 : template.constructor) === DocumentFragment) {\n        fr = template;\n      } else if ((template == null ? void 0 : template.constructor) === String) {\n        let tpl = document.createElement(\"template\");\n        tpl.innerHTML = template;\n        fr = tpl.content.cloneNode(true);\n      } else if (this.constructor[\"__tpl\"]) {\n        fr = this.constructor[\"__tpl\"].content.cloneNode(true);\n      }\n      for (let fn of this.tplProcessors) {\n        fn(fr, this);\n      }\n    }\n    let addFr = () => {\n      fr && (shadow && this.shadowRoot.appendChild(fr) || this.appendChild(fr));\n      this.__initCallback();\n    };\n    if (this.constructor[\"__shadowStylesUrl\"]) {\n      shadow = true;\n      let styleLink = document.createElement(\"link\");\n      styleLink.rel = \"stylesheet\";\n      styleLink.href = this.constructor[\"__shadowStylesUrl\"];\n      styleLink.onload = addFr;\n      this.shadowRoot.prepend(styleLink);\n    } else {\n      addFr();\n    }\n  }\n  addTemplateProcessor(processorFn) {\n    this.tplProcessors.add(processorFn);\n  }\n  get autoCtxName() {\n    if (!this.__autoCtxName) {\n      this.__autoCtxName = UID.generate();\n      this.style.setProperty(DICT.CSS_CTX_PROP, `'${this.__autoCtxName}'`);\n    }\n    return this.__autoCtxName;\n  }\n  get cssCtxName() {\n    return this.getCssData(DICT.CSS_CTX_PROP, true);\n  }\n  get ctxName() {\n    var _a;\n    let ctxName = ((_a = this.getAttribute(DICT.CTX_NAME_ATTR)) == null ? void 0 : _a.trim()) || this.cssCtxName || this.__cachedCtxName || this.autoCtxName;\n    this.__cachedCtxName = ctxName;\n    return ctxName;\n  }\n  get localCtx() {\n    if (!this.__localCtx) {\n      this.__localCtx = Data.registerCtx({}, this);\n    }\n    return this.__localCtx;\n  }\n  get nodeCtx() {\n    return Data.getCtx(this.ctxName, false) || Data.registerCtx({}, this.ctxName);\n  }\n  static __parseProp(prop, fnCtx) {\n    let ctx;\n    let name;\n    if (prop.startsWith(DICT.EXT_DATA_CTX_PRFX)) {\n      ctx = fnCtx.nodeCtx;\n      name = prop.replace(DICT.EXT_DATA_CTX_PRFX, \"\");\n    } else if (prop.includes(DICT.NAMED_DATA_CTX_SPLTR)) {\n      let pArr = prop.split(DICT.NAMED_DATA_CTX_SPLTR);\n      ctx = Data.getCtx(pArr[0]);\n      name = pArr[1];\n    } else {\n      ctx = fnCtx.localCtx;\n      name = prop;\n    }\n    return {\n      ctx,\n      name\n    };\n  }\n  sub(prop, handler, init = true) {\n    let subCb = (val) => {\n      if (!this.isConnected) {\n        return;\n      }\n      handler(val);\n    };\n    let parsed = _BaseComponent.__parseProp(prop, this);\n    if (!parsed.ctx.has(parsed.name)) {\n      window.setTimeout(() => {\n        this.allSubs.add(parsed.ctx.sub(parsed.name, subCb, init));\n      });\n    } else {\n      this.allSubs.add(parsed.ctx.sub(parsed.name, subCb, init));\n    }\n  }\n  notify(prop) {\n    let parsed = _BaseComponent.__parseProp(prop, this);\n    parsed.ctx.notify(parsed.name);\n  }\n  has(prop) {\n    let parsed = _BaseComponent.__parseProp(prop, this);\n    return parsed.ctx.has(parsed.name);\n  }\n  add(prop, val, rewrite = false) {\n    let parsed = _BaseComponent.__parseProp(prop, this);\n    parsed.ctx.add(parsed.name, val, rewrite);\n  }\n  add$(obj, rewrite = false) {\n    for (let prop in obj) {\n      this.add(prop, obj[prop], rewrite);\n    }\n  }\n  get $() {\n    if (!this.__stateProxy) {\n      let o = Object.create(null);\n      this.__stateProxy = new Proxy(o, {\n        set: (obj, prop, val) => {\n          let parsed = _BaseComponent.__parseProp(prop, this);\n          parsed.ctx.pub(parsed.name, val);\n          return true;\n        },\n        get: (obj, prop) => {\n          let parsed = _BaseComponent.__parseProp(prop, this);\n          return parsed.ctx.read(parsed.name);\n        }\n      });\n    }\n    return this.__stateProxy;\n  }\n  set$(kvObj, forcePrimitives = false) {\n    for (let key in kvObj) {\n      let val = kvObj[key];\n      let primArr = [String, Number, Boolean];\n      if (forcePrimitives || !primArr.includes(val == null ? void 0 : val.constructor)) {\n        this.$[key] = val;\n      } else {\n        this.$[key] !== val && (this.$[key] = val);\n      }\n    }\n  }\n  get __ctxOwner() {\n    return this.ctxOwner || this.hasAttribute(DICT.CTX_OWNER_ATTR) && this.getAttribute(DICT.CTX_OWNER_ATTR) !== \"false\";\n  }\n  __initDataCtx() {\n    let attrDesc = this.constructor[\"__attrDesc\"];\n    if (attrDesc) {\n      for (let prop of Object.values(attrDesc)) {\n        if (!Object.keys(this.init$).includes(prop)) {\n          this.init$[prop] = \"\";\n        }\n      }\n    }\n    for (let prop in this.init$) {\n      if (prop.startsWith(DICT.EXT_DATA_CTX_PRFX)) {\n        this.nodeCtx.add(prop.replace(DICT.EXT_DATA_CTX_PRFX, \"\"), this.init$[prop], this.__ctxOwner);\n      } else if (prop.includes(DICT.NAMED_DATA_CTX_SPLTR)) {\n        let propArr = prop.split(DICT.NAMED_DATA_CTX_SPLTR);\n        let ctxName = propArr[0].trim();\n        let propName = propArr[1].trim();\n        if (ctxName && propName) {\n          let namedCtx = Data.getCtx(ctxName, false);\n          if (!namedCtx) {\n            namedCtx = Data.registerCtx({}, ctxName);\n          }\n          namedCtx.add(propName, this.init$[prop]);\n        }\n      } else {\n        this.localCtx.add(prop, this.init$[prop]);\n      }\n    }\n    for (let cssProp in this.cssInit$) {\n      this.bindCssData(cssProp, this.cssInit$[cssProp]);\n    }\n    this.__dataCtxInitialized = true;\n  }\n  connectedCallback() {\n    var _a;\n    if (!this.isConnected) {\n      return;\n    }\n    if (this.__disconnectTimeout) {\n      window.clearTimeout(this.__disconnectTimeout);\n    }\n    if (!this.connectedOnce) {\n      let ctxNameAttrVal = (_a = this.getAttribute(DICT.CTX_NAME_ATTR)) == null ? void 0 : _a.trim();\n      if (ctxNameAttrVal) {\n        this.style.setProperty(DICT.CSS_CTX_PROP, `'${ctxNameAttrVal}'`);\n      }\n      this.__initDataCtx();\n      if (this[DICT.SET_LATER_KEY]) {\n        for (let prop in this[DICT.SET_LATER_KEY]) {\n          setNestedProp(this, prop, this[DICT.SET_LATER_KEY][prop]);\n        }\n        delete this[DICT.SET_LATER_KEY];\n      }\n      this.initChildren = [...this.childNodes];\n      for (let proc of tpl_processors_default) {\n        this.addTemplateProcessor(proc);\n      }\n      if (this.pauseRender) {\n        this.__initCallback();\n      } else {\n        if (this.constructor[\"__rootStylesLink\"]) {\n          let root = this.getRootNode();\n          if (!root) {\n            return;\n          }\n          let hasLink = root == null ? void 0 : root.querySelector(`link[${DICT.ROOT_STYLE_ATTR_NAME}=\"${this.constructor.is}\"]`);\n          if (hasLink) {\n            this.render();\n            return;\n          }\n          let rootLink = this.constructor[\"__rootStylesLink\"].cloneNode(true);\n          rootLink.setAttribute(DICT.ROOT_STYLE_ATTR_NAME, this.constructor[\"is\"]);\n          rootLink.onload = () => {\n            this.render();\n          };\n          root.nodeType === Node.DOCUMENT_NODE ? root.head.appendChild(rootLink) : root.prepend(rootLink);\n        } else {\n          this.render();\n        }\n      }\n    }\n    this.connectedOnce = true;\n  }\n  destroyCallback() {\n  }\n  disconnectedCallback() {\n    if (!this.connectedOnce) {\n      return;\n    }\n    this.dropCssDataCache();\n    if (!this.readyToDestroy) {\n      return;\n    }\n    if (this.__disconnectTimeout) {\n      window.clearTimeout(this.__disconnectTimeout);\n    }\n    this.__disconnectTimeout = window.setTimeout(() => {\n      this.destroyCallback();\n      for (let sub of this.allSubs) {\n        sub.remove();\n        this.allSubs.delete(sub);\n      }\n      for (let proc of this.tplProcessors) {\n        this.tplProcessors.delete(proc);\n      }\n      styleMutationObserverCbList == null ? void 0 : styleMutationObserverCbList.delete(this.updateCssData);\n      if (!(styleMutationObserverCbList == null ? void 0 : styleMutationObserverCbList.size)) {\n        styleMutationObserver == null ? void 0 : styleMutationObserver.disconnect();\n        styleMutationObserver = null;\n        styleMutationObserverCbList = null;\n      }\n    }, 100);\n  }\n  static reg(tagName, isAlias = false) {\n    if (!tagName) {\n      autoTagsCount++;\n      tagName = `${DICT.AUTO_TAG_PRFX}-${autoTagsCount}`;\n    }\n    this.__tag = tagName;\n    let registeredClass = window.customElements.get(tagName);\n    if (registeredClass) {\n      if (!isAlias && registeredClass !== this) {\n        console.warn([\n          `Element with tag name \"${tagName}\" already registered.`,\n          `You're trying to override it with another class \"${this.name}\".`,\n          `This is most likely a mistake.`,\n          `New element will not be registered.`\n        ].join(\"\\n\"));\n      }\n      return;\n    }\n    window.customElements.define(tagName, isAlias ? class extends this {\n    } : this);\n  }\n  static get is() {\n    if (!this.__tag) {\n      this.reg();\n    }\n    return this.__tag;\n  }\n  static bindAttributes(desc) {\n    this.observedAttributes = Object.keys(desc);\n    this.__attrDesc = desc;\n  }\n  attributeChangedCallback(name, oldVal, newVal) {\n    var _a;\n    if (oldVal === newVal) {\n      return;\n    }\n    let $prop = (_a = this.constructor[\"__attrDesc\"]) == null ? void 0 : _a[name];\n    if ($prop) {\n      if (this.__dataCtxInitialized) {\n        this.$[$prop] = newVal;\n      } else {\n        this.init$[$prop] = newVal;\n      }\n    } else {\n      this[name] = newVal;\n    }\n  }\n  getCssData(propName, silentCheck = false) {\n    if (!this.__cssDataCache) {\n      this.__cssDataCache = Object.create(null);\n    }\n    if (!Object.keys(this.__cssDataCache).includes(propName)) {\n      if (!this.__computedStyle) {\n        this.__computedStyle = window.getComputedStyle(this);\n      }\n      let val = this.__computedStyle.getPropertyValue(propName).trim();\n      try {\n        this.__cssDataCache[propName] = parseCssPropertyValue(val);\n      } catch (e) {\n        !silentCheck && console.warn(`CSS Data error: ${propName}`);\n        this.__cssDataCache[propName] = null;\n      }\n    }\n    return this.__cssDataCache[propName];\n  }\n  __extractCssName(ctxPropName) {\n    return ctxPropName.split(\"--\").map((part, idx) => {\n      return idx === 0 ? \"\" : part;\n    }).join(\"--\");\n  }\n  __initStyleAttrObserver() {\n    if (!styleMutationObserverCbList) {\n      styleMutationObserverCbList = /* @__PURE__ */ new Set();\n    }\n    styleMutationObserverCbList.add(this.updateCssData);\n    if (!styleMutationObserver) {\n      styleMutationObserver = new MutationObserver((records) => {\n        records[0].type === \"attributes\" && styleMutationObserverCbList.forEach((cb) => {\n          cb();\n        });\n      });\n      styleMutationObserver.observe(document, {\n        childList: true,\n        subtree: true,\n        attributes: true,\n        attributeFilter: [\"style\"]\n      });\n    }\n  }\n  bindCssData(propName, initValue = \"\") {\n    if (!this.__boundCssProps) {\n      this.__boundCssProps = /* @__PURE__ */ new Set();\n    }\n    this.__boundCssProps.add(propName);\n    let val = this.getCssData(this.__extractCssName(propName), true);\n    val === null && (val = initValue);\n    this.add(propName, val);\n    this.__initStyleAttrObserver();\n  }\n  dropCssDataCache() {\n    this.__cssDataCache = null;\n    this.__computedStyle = null;\n  }\n  defineAccessor(propName, handler, isAsync) {\n    let localPropName = \"__\" + propName;\n    this[localPropName] = this[propName];\n    Object.defineProperty(this, propName, {\n      set: (val) => {\n        this[localPropName] = val;\n        if (isAsync) {\n          window.setTimeout(() => {\n            handler == null ? void 0 : handler(val);\n          });\n        } else {\n          handler == null ? void 0 : handler(val);\n        }\n      },\n      get: () => {\n        return this[localPropName];\n      }\n    });\n    this[propName] = this[localPropName];\n  }\n  static set shadowStyles(cssTxt) {\n    let styleBlob = new Blob([cssTxt], {\n      type: \"text/css\"\n    });\n    this.__shadowStylesUrl = URL.createObjectURL(styleBlob);\n  }\n  static set rootStyles(cssTxt) {\n    if (!this.__rootStylesLink) {\n      let styleBlob = new Blob([cssTxt], {\n        type: \"text/css\"\n      });\n      let url = URL.createObjectURL(styleBlob);\n      let link = document.createElement(\"link\");\n      link.href = url;\n      link.rel = \"stylesheet\";\n      this.__rootStylesLink = link;\n    }\n  }\n};\nvar BaseComponent = _BaseComponent;\n__publicField(BaseComponent, \"template\");\n\n// core/AppRouter.js\nvar AppRouter = class {\n  static _print(msg) {\n    console.warn(msg);\n  }\n  static setDefaultTitle(title) {\n    this.defaultTitle = title;\n  }\n  static setRoutingMap(map) {\n    Object.assign(this.appMap, map);\n    for (let route in this.appMap) {\n      if (!this.defaultRoute && this.appMap[route].default === true) {\n        this.defaultRoute = route;\n      } else if (!this.errorRoute && this.appMap[route].error === true) {\n        this.errorRoute = route;\n      }\n    }\n  }\n  static set routingEventName(name) {\n    this.__routingEventName = name;\n  }\n  static get routingEventName() {\n    return this.__routingEventName || \"sym-on-route\";\n  }\n  static readAddressBar() {\n    let result = {\n      route: null,\n      options: {}\n    };\n    let paramsArr = window.location.search.split(this.separator);\n    paramsArr.forEach((part) => {\n      if (part.includes(\"?\")) {\n        result.route = part.replace(\"?\", \"\");\n      } else if (part.includes(\"=\")) {\n        let pair = part.split(\"=\");\n        result.options[pair[0]] = decodeURI(pair[1]);\n      } else {\n        result.options[part] = true;\n      }\n    });\n    return result;\n  }\n  static notify() {\n    let routeBase = this.readAddressBar();\n    let routeScheme = this.appMap[routeBase.route];\n    if (routeScheme && routeScheme.title) {\n      document.title = routeScheme.title;\n    }\n    if (routeBase.route === null && this.defaultRoute) {\n      this.applyRoute(this.defaultRoute);\n      return;\n    } else if (!routeScheme && this.errorRoute) {\n      this.applyRoute(this.errorRoute);\n      return;\n    } else if (!routeScheme && this.defaultRoute) {\n      this.applyRoute(this.defaultRoute);\n      return;\n    } else if (!routeScheme) {\n      this._print(`Route \"${routeBase.route}\" not found...`);\n      return;\n    }\n    let event = new CustomEvent(AppRouter.routingEventName, {\n      detail: {\n        route: routeBase.route,\n        options: Object.assign(routeScheme || {}, routeBase.options)\n      }\n    });\n    window.dispatchEvent(event);\n  }\n  static reflect(route, options = {}) {\n    let routeScheme = this.appMap[route];\n    if (!routeScheme) {\n      this._print(\"Wrong route: \" + route);\n      return;\n    }\n    let routeStr = \"?\" + route;\n    for (let prop in options) {\n      if (options[prop] === true) {\n        routeStr += this.separator + prop;\n      } else {\n        routeStr += this.separator + prop + `=${options[prop]}`;\n      }\n    }\n    let title = routeScheme.title || this.defaultTitle || \"\";\n    window.history.pushState(null, title, routeStr);\n    document.title = title;\n  }\n  static applyRoute(route, options = {}) {\n    this.reflect(route, options);\n    this.notify();\n  }\n  static setSeparator(char) {\n    this._separator = char;\n  }\n  static get separator() {\n    return this._separator || \"&\";\n  }\n  static createRouterData(ctxName, routingMap) {\n    this.setRoutingMap(routingMap);\n    let routeData = Data.registerCtx({\n      route: null,\n      options: null,\n      title: null\n    }, ctxName);\n    window.addEventListener(this.routingEventName, (e) => {\n      var _a;\n      routeData.multiPub({\n        route: e.detail.route,\n        options: e.detail.options,\n        title: ((_a = e.detail.options) == null ? void 0 : _a.title) || this.defaultTitle || \"\"\n      });\n    });\n    AppRouter.notify();\n    this.initPopstateListener();\n    return routeData;\n  }\n  static initPopstateListener() {\n    if (this.__onPopstate) {\n      return;\n    }\n    this.__onPopstate = () => {\n      this.notify();\n    };\n    window.addEventListener(\"popstate\", this.__onPopstate);\n  }\n  static removePopstateListener() {\n    window.removeEventListener(\"popstate\", this.__onPopstate);\n    this.__onPopstate = null;\n  }\n};\nAppRouter.appMap = Object.create(null);\n\n// utils/dom-helpers.js\nfunction applyStyles(el, styleMap) {\n  for (let prop in styleMap) {\n    if (prop.includes(\"-\")) {\n      el.style.setProperty(prop, styleMap[prop]);\n    } else {\n      el.style[prop] = styleMap[prop];\n    }\n  }\n}\nfunction applyAttributes(el, attrMap) {\n  for (let attrName in attrMap) {\n    if (attrMap[attrName].constructor === Boolean) {\n      if (attrMap[attrName]) {\n        el.setAttribute(attrName, \"\");\n      } else {\n        el.removeAttribute(attrName);\n      }\n    } else {\n      el.setAttribute(attrName, attrMap[attrName]);\n    }\n  }\n}\nfunction create(desc = { tag: \"div\" }) {\n  let el = document.createElement(desc.tag);\n  if (desc.attributes) {\n    applyAttributes(el, desc.attributes);\n  }\n  if (desc.styles) {\n    applyStyles(el, desc.styles);\n  }\n  if (desc.properties) {\n    for (let prop in desc.properties) {\n      el[prop] = desc.properties[prop];\n    }\n  }\n  if (desc.processors) {\n    desc.processors.forEach((fn) => {\n      fn(el);\n    });\n  }\n  if (desc.children) {\n    desc.children.forEach((desc2) => {\n      let child = create(desc2);\n      el.appendChild(child);\n    });\n  }\n  return el;\n}\n\n// utils/IDB.js\nvar READY_EVENT_NAME = \"idb-store-ready\";\nvar DEFAULT_DB_NAME = `symbiote-db`;\nvar UPD_EVENT_PREFIX = `symbiote-idb-update_`;\nvar DbInstance = class {\n  _notifyWhenReady(event = null) {\n    window.dispatchEvent(new CustomEvent(READY_EVENT_NAME, {\n      detail: {\n        dbName: this.name,\n        storeName: this.storeName,\n        event\n      }\n    }));\n  }\n  get _updEventName() {\n    return UPD_EVENT_PREFIX + this.name;\n  }\n  _getUpdateEvent(key) {\n    return new CustomEvent(this._updEventName, {\n      detail: {\n        key: this.name,\n        newValue: key\n      }\n    });\n  }\n  _notifySubscribers(key) {\n    window.localStorage.removeItem(this.name);\n    window.localStorage.setItem(this.name, key);\n    window.dispatchEvent(this._getUpdateEvent(key));\n  }\n  constructor(dbName, storeName) {\n    this.name = dbName;\n    this.storeName = storeName;\n    this.version = 1;\n    this.request = window.indexedDB.open(this.name, this.version);\n    this.request.onupgradeneeded = (e) => {\n      this.db = e.target[\"result\"];\n      this.objStore = this.db.createObjectStore(storeName, {\n        keyPath: \"_key\"\n      });\n      this.objStore.transaction.oncomplete = (ev) => {\n        this._notifyWhenReady(ev);\n      };\n    };\n    this.request.onsuccess = (e) => {\n      this.db = e.target.result;\n      this._notifyWhenReady(e);\n    };\n    this.request.onerror = (e) => {\n      console.error(e);\n    };\n    this._subscriptionsMap = {};\n    this._updateHandler = (e) => {\n      if (e.key === this.name && this._subscriptionsMap[e.newValue]) {\n        let set = this._subscriptionsMap[e.newValue];\n        set.forEach(async (callback) => {\n          callback(await this.read(e.newValue));\n        });\n      }\n    };\n    this._localUpdateHandler = (e) => {\n      this._updateHandler(e.detail);\n    };\n    window.addEventListener(\"storage\", this._updateHandler);\n    window.addEventListener(this._updEventName, this._localUpdateHandler);\n  }\n  read(key) {\n    let tx = this.db.transaction(this.storeName, \"readwrite\");\n    let request = tx.objectStore(this.storeName).get(key);\n    return new Promise((resolve, reject) => {\n      request.onsuccess = (e) => {\n        var _a;\n        if ((_a = e.target.result) == null ? void 0 : _a._value) {\n          resolve(e.target.result._value);\n        } else {\n          resolve(null);\n          console.warn(`IDB: cannot read \"${key}\"`);\n        }\n      };\n      request.onerror = (e) => {\n        reject(e);\n      };\n    });\n  }\n  write(key, value, silent = false) {\n    let data = {\n      _key: key,\n      _value: value\n    };\n    let tx = this.db.transaction(this.storeName, \"readwrite\");\n    let request = tx.objectStore(this.storeName).put(data);\n    return new Promise((resolve, reject) => {\n      request.onsuccess = (e) => {\n        if (!silent) {\n          this._notifySubscribers(key);\n        }\n        resolve(e.target.result);\n      };\n      request.onerror = (e) => {\n        reject(e);\n      };\n    });\n  }\n  delete(key, silent = false) {\n    let tx = this.db.transaction(this.storeName, \"readwrite\");\n    let request = tx.objectStore(this.storeName).delete(key);\n    return new Promise((resolve, reject) => {\n      request.onsuccess = (e) => {\n        if (!silent) {\n          this._notifySubscribers(key);\n        }\n        resolve(e);\n      };\n      request.onerror = (e) => {\n        reject(e);\n      };\n    });\n  }\n  getAll() {\n    let tx = this.db.transaction(this.storeName, \"readwrite\");\n    let request = tx.objectStore(this.storeName).getAll();\n    return new Promise((resolve, reject) => {\n      request.onsuccess = (e) => {\n        let all = e.target.result;\n        resolve(all.map((obj) => {\n          return obj._value;\n        }));\n      };\n      request.onerror = (e) => {\n        reject(e);\n      };\n    });\n  }\n  subscribe(key, callback) {\n    if (!this._subscriptionsMap[key]) {\n      this._subscriptionsMap[key] = /* @__PURE__ */ new Set();\n    }\n    let set = this._subscriptionsMap[key];\n    set.add(callback);\n    return {\n      remove: () => {\n        set.delete(callback);\n        if (!set.size) {\n          delete this._subscriptionsMap[key];\n        }\n      }\n    };\n  }\n  stop() {\n    window.removeEventListener(\"storage\", this._updateHandler);\n    this._subscriptionsMap = null;\n    IDB.clear(this.name);\n  }\n};\nvar IDB = class {\n  static get readyEventName() {\n    return READY_EVENT_NAME;\n  }\n  static open(dbName = DEFAULT_DB_NAME, storeName = \"store\") {\n    let key = dbName + \"/\" + storeName;\n    if (!this._reg[key]) {\n      this._reg[key] = new DbInstance(dbName, storeName);\n    }\n    return this._reg[key];\n  }\n  static clear(dbName) {\n    window.indexedDB.deleteDatabase(dbName);\n    for (let key in this._reg) {\n      if (key.split(\"/\")[0] === dbName) {\n        delete this._reg[key];\n      }\n    }\n  }\n};\n__publicField(IDB, \"_reg\", Object.create(null));\nexport {\n  AppRouter,\n  BaseComponent,\n  Data,\n  IDB,\n  UID,\n  applyAttributes,\n  applyStyles,\n  create,\n  kebabToCamel,\n  setNestedProp\n};\n","import getPrototypeOf from \"./getPrototypeOf.js\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n  return object;\n}","import superPropBase from \"./superPropBase.js\";\nexport default function _get() {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get.bind();\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n      if (desc.get) {\n        return desc.get.call(arguments.length < 3 ? target : receiver);\n      }\n      return desc.value;\n    };\n  }\n  return _get.apply(this, arguments);\n}","//  @ts-check\n\nconst DEFAULT_DEBOUNCE_TIMEOUT = 20;\n\nexport const EventType = Object.freeze({\n  FILE_ADDED: 'file-added',\n  FILE_REMOVED: 'file-removed',\n  FILE_UPLOAD_START: 'file-upload-start',\n  FILE_UPLOAD_PROGRESS: 'file-upload-progress',\n  FILE_UPLOAD_SUCCESS: 'file-upload-success',\n  FILE_UPLOAD_FAILED: 'file-upload-failed',\n  FILE_URL_CHANGED: 'file-url-changed',\n\n  MODAL_OPEN: 'modal-open',\n  MODAL_CLOSE: 'modal-close',\n  DONE_CLICK: 'done-click',\n  UPLOAD_CLICK: 'upload-click',\n  ACTIVITY_CHANGE: 'activity-change',\n\n  COMMON_UPLOAD_START: 'common-upload-start',\n  COMMON_UPLOAD_PROGRESS: 'common-upload-progress',\n  COMMON_UPLOAD_SUCCESS: 'common-upload-success',\n  COMMON_UPLOAD_FAILED: 'common-upload-failed',\n\n  CHANGE: 'change',\n  GROUP_CREATED: 'group-created',\n});\n\n/**\n * @typedef {{\n *   [EventType.FILE_ADDED]: import('../../index.js').OutputFileEntry<'idle'>;\n *   [EventType.FILE_REMOVED]: import('../../index.js').OutputFileEntry<'removed'>;\n *   [EventType.FILE_UPLOAD_START]: import('../../index.js').OutputFileEntry<'uploading'>;\n *   [EventType.FILE_UPLOAD_PROGRESS]: import('../../index.js').OutputFileEntry<'uploading'>;\n *   [EventType.FILE_UPLOAD_SUCCESS]: import('../../index.js').OutputFileEntry<'success'>;\n *   [EventType.FILE_UPLOAD_FAILED]: import('../../index.js').OutputFileEntry<'failed'>;\n *   [EventType.FILE_URL_CHANGED]: import('../../index.js').OutputFileEntry<'success'>;\n *   [EventType.MODAL_OPEN]: void;\n *   [EventType.MODAL_CLOSE]: void;\n *   [EventType.ACTIVITY_CHANGE]: {\n *     activity: import('../../abstract/ActivityBlock.js').ActivityType;\n *   };\n *   [EventType.UPLOAD_CLICK]: void;\n *   [EventType.DONE_CLICK]: import('../../index.js').OutputCollectionState;\n *   [EventType.COMMON_UPLOAD_START]: import('../../index.js').OutputCollectionState<'uploading'>;\n *   [EventType.COMMON_UPLOAD_PROGRESS]: import('../../index.js').OutputCollectionState<'uploading'>;\n *   [EventType.COMMON_UPLOAD_SUCCESS]: import('../../index.js').OutputCollectionState<'success'>;\n *   [EventType.COMMON_UPLOAD_FAILED]: import('../../index.js').OutputCollectionState<'failed'>;\n *   [EventType.CHANGE]: import('../../index.js').OutputCollectionState;\n *   [EventType.GROUP_CREATED]: import('../../index.js').OutputCollectionState<'success', 'has-group'>;\n * }} EventPayload\n */\n\nexport class EventEmitter {\n  /**\n   * @private\n   * @type {Map<string, number>}\n   */\n  _timeoutStore = new Map();\n\n  /**\n   * @private\n   * @type {Set<import('../../abstract/Block.js').Block>}\n   */\n  _targets = new Set();\n\n  /**\n   * @private\n   * @type {((...args: unknown[]) => void) | null}\n   */\n  _debugPrint = null;\n\n  /** @param {(...args: unknown[]) => void} debugPrint */\n  constructor(debugPrint) {\n    this._debugPrint = debugPrint;\n  }\n\n  /** @param {import('../../abstract/Block.js').Block} target */\n  bindTarget(target) {\n    this._targets.add(target);\n  }\n\n  /** @param {import('../../abstract/Block.js').Block} target */\n  unbindTarget(target) {\n    this._targets.delete(target);\n  }\n\n  /**\n   * @private\n   * @template {(typeof EventType)[keyof typeof EventType]} T\n   * @param {T} type\n   * @param {unknown} [payload]\n   */\n  _dispatch(type, payload) {\n    for (const target of this._targets) {\n      target.dispatchEvent(\n        new CustomEvent(type, {\n          detail: payload,\n        }),\n      );\n    }\n\n    this._debugPrint?.(() => {\n      const copyPayload = !!payload && typeof payload === 'object' ? { ...payload } : payload;\n      return [`event \"${type}\"`, copyPayload];\n    });\n  }\n\n  /**\n   * @template {(typeof EventType)[keyof typeof EventType]} T\n   * @template {boolean | number | undefined} TDebounce\n   * @param {T} type\n   * @param {TDebounce extends false | undefined ? unknown : () => unknown} [payload]\n   * @param {{ debounce?: TDebounce }} [options]\n   */\n  emit(type, payload, { debounce } = {}) {\n    if (typeof debounce !== 'number' && !debounce) {\n      this._dispatch(type, typeof payload === 'function' ? payload() : payload);\n      return;\n    }\n\n    if (this._timeoutStore.has(type)) {\n      window.clearTimeout(this._timeoutStore.get(type));\n    }\n    const timeout = typeof debounce === 'number' ? debounce : DEFAULT_DEBOUNCE_TIMEOUT;\n    const timeoutId = window.setTimeout(() => {\n      this._dispatch(type, typeof payload === 'function' ? payload() : payload);\n      this._timeoutStore.delete(type);\n    }, timeout);\n    this._timeoutStore.set(type, timeoutId);\n  }\n}\n","// @ts-check\n\n/**\n * @template {{ (...args: any[]): any }} T\n * @param {T} callback\n * @param {number} wait\n * @returns {T & { cancel: () => void }} }\n */\nexport function debounce(callback, wait) {\n  /** @type {NodeJS.Timeout} */\n  let timer;\n  const debounced =\n    /** @param {...any} args */\n    (...args) => {\n      clearTimeout(timer);\n      timer = setTimeout(() => callback(...args), wait);\n    };\n  debounced.cancel = () => {\n    clearTimeout(timer);\n  };\n  return /** @type {T & { cancel: () => void }} } */ (debounced);\n}\n","// @ts-check\nimport { debounce } from '../blocks/utils/debounce.js';\n\nconst WINDOW_HEIGHT_TRACKER_PROPERTY = '--uploadcare-blocks-window-height';\n\nexport class WindowHeightTracker {\n  /**\n   * @private\n   * @type {Set<unknown>}\n   */\n  static clientsRegistry = new Set();\n\n  /** @private */\n  static flush = debounce(() => {\n    document.documentElement.style.setProperty(WINDOW_HEIGHT_TRACKER_PROPERTY, `${window.innerHeight}px`);\n  }, 100);\n\n  /**\n   * @param {unknown} client\n   * @public\n   */\n  static registerClient(client) {\n    if (this.clientsRegistry.size === 0) {\n      this.attachTracker();\n    }\n    this.clientsRegistry.add(client);\n  }\n\n  /**\n   * @param {unknown} client\n   * @public\n   */\n  static unregisterClient(client) {\n    this.clientsRegistry.delete(client);\n    if (this.clientsRegistry.size === 0) {\n      this.detachTracker();\n    }\n  }\n\n  /** @private */\n  static attachTracker() {\n    window.addEventListener('resize', this.flush, { passive: true, capture: true });\n    this.flush();\n  }\n\n  /** @private */\n  static detachTracker() {\n    window.removeEventListener('resize', this.flush, { capture: true });\n    document.documentElement.style.removeProperty(WINDOW_HEIGHT_TRACKER_PROPERTY);\n  }\n}\n","// @ts-check\n/** @param {string} localeId */\nexport const getLocaleDirection = (localeId) => {\n  /**\n   * @type {typeof Intl.Locale & {\n   *   textInfo?: { direction: string };\n   *   getTextInfo?: () => { direction: string };\n   * }}\n   */\n  const locale = /** @type {any} */ (new Intl.Locale(localeId));\n  let direction = 'ltr';\n  if (typeof locale.getTextInfo === 'function' && locale.getTextInfo().direction) {\n    direction = locale.getTextInfo().direction;\n  } else if ('textInfo' in locale && locale.textInfo?.direction) {\n    direction = locale.textInfo.direction;\n  }\n  return direction;\n};\n","// @ts-check\n\n/** @typedef {Intl.LDMLPluralRule} PluralForm */\n\n/**\n * @param {string} locale\n * @param {number} count\n * @returns {PluralForm}\n */\nexport const getPluralForm = (locale, count) => {\n  const pluralForm = new Intl.PluralRules(locale).select(count);\n  return pluralForm;\n};\n","/** @typedef {{ [key: String]: String | Number | Boolean | InputData }} InputData */\n\nconst DEFAULT_TRANSFORMER = (value) => value;\nconst OPEN_TOKEN = '{{';\nconst CLOSE_TOKEN = '}}';\nconst PLURAL_PREFIX = 'plural:';\n\n/**\n * @typedef {Object} Options\n * @property {String} [openToken='{{'] Default is `'{{'`\n * @property {String} [closeToken='}}'] Default is `'}}'`\n * @property {(value: String) => String} [transform=DEFAULT_TRANSFORMER] Default is `DEFAULT_TRANSFORMER`\n */\n\n/**\n * @param {String} template\n * @param {InputData} [data={}] Default is `{}`\n * @param {Options} [options={}] Default is `{}`\n * @returns {String}\n */\nexport function applyTemplateData(template, data, options = {}) {\n  let { openToken = OPEN_TOKEN, closeToken = CLOSE_TOKEN, transform = DEFAULT_TRANSFORMER } = options;\n\n  for (let key in data) {\n    let value = data[key]?.toString();\n    template = template.replaceAll(openToken + key + closeToken, typeof value === 'string' ? transform(value) : value);\n  }\n  return template;\n}\n\n/**\n * @param {String} template\n * @returns {{ variable: string; pluralKey: string; countVariable: string }[]}\n */\nexport function getPluralObjects(template) {\n  const pluralObjects = [];\n  let open = template.indexOf(OPEN_TOKEN);\n  while (open !== -1) {\n    const close = template.indexOf(CLOSE_TOKEN, open);\n    const variable = template.substring(open + 2, close);\n    if (variable.startsWith(PLURAL_PREFIX)) {\n      const keyValue = template.substring(open + 2, close).replace(PLURAL_PREFIX, '');\n      const key = keyValue.substring(0, keyValue.indexOf('('));\n      const count = keyValue.substring(keyValue.indexOf('(') + 1, keyValue.indexOf(')'));\n      pluralObjects.push({ variable, pluralKey: key, countVariable: count });\n    }\n    open = template.indexOf(OPEN_TOKEN, close);\n  }\n  return pluralObjects;\n}\n","// @ts-check\n\n/**\n * @param {{\n *   element: HTMLElement;\n *   attribute: string;\n *   onSuccess: (value: string) => void;\n *   onTimeout: () => void;\n *   timeout?: number;\n * }} options\n */\nexport const waitForAttribute = ({ element, attribute, onSuccess, onTimeout, timeout = 300 }) => {\n  const currentAttrValue = element.getAttribute(attribute);\n  if (currentAttrValue !== null) {\n    onSuccess(currentAttrValue);\n    return;\n  }\n\n  const observer = new MutationObserver((mutations) => {\n    const mutation = mutations[mutations.length - 1];\n    handleMutation(mutation);\n  });\n\n  observer.observe(element, {\n    attributes: true,\n    attributeFilter: [attribute],\n  });\n\n  const timeoutId = setTimeout(() => {\n    observer.disconnect();\n    onTimeout();\n  }, timeout);\n\n  /** @param {MutationRecord} mutation */\n  const handleMutation = (mutation) => {\n    const attrValue = element.getAttribute(attribute);\n    if (mutation.type === 'attributes' && mutation.attributeName === attribute && attrValue !== null) {\n      clearTimeout(timeoutId);\n      observer.disconnect();\n      onSuccess(attrValue);\n    }\n  };\n};\n","function isObject(o) {\n    return Object.prototype.toString.call(o) === '[object Object]';\n}\n\nconst SEPARATOR = /\\W|_/g;\nfunction camelizeString(text) {\n    return text\n        .split(SEPARATOR)\n        .map((word, index) => word.charAt(0)[index > 0 ? 'toUpperCase' : 'toLowerCase']() +\n        word.slice(1))\n        .join('');\n}\nfunction camelizeArrayItems(array, { ignoreKeys } = { ignoreKeys: [] }) {\n    if (!Array.isArray(array)) {\n        return array;\n    }\n    return array.map((item) => camelizeKeys(item, { ignoreKeys }));\n}\nfunction camelizeKeys(source, { ignoreKeys } = { ignoreKeys: [] }) {\n    if (Array.isArray(source)) {\n        return camelizeArrayItems(source, { ignoreKeys });\n    }\n    if (!isObject(source)) {\n        return source;\n    }\n    const result = {};\n    for (const key of Object.keys(source)) {\n        let value = source[key];\n        if (ignoreKeys.includes(key)) {\n            result[key] = value;\n            continue;\n        }\n        if (isObject(value)) {\n            value = camelizeKeys(value, { ignoreKeys });\n        }\n        else if (Array.isArray(value)) {\n            value = camelizeArrayItems(value, { ignoreKeys });\n        }\n        result[camelizeString(key)] = value;\n    }\n    return result;\n}\n\n/**\n * SetTimeout as Promise.\n *\n * @param {number} ms Timeout in milliseconds.\n */\nconst delay = (ms) => new Promise((resolve) => setTimeout(resolve, ms));\n\nfunction getUserAgent$1({ libraryName, libraryVersion, userAgent, publicKey = '', integration = '' }) {\n    const languageName = 'JavaScript';\n    if (typeof userAgent === 'string') {\n        return userAgent;\n    }\n    if (typeof userAgent === 'function') {\n        return userAgent({\n            publicKey,\n            libraryName,\n            libraryVersion,\n            languageName,\n            integration\n        });\n    }\n    const mainInfo = [libraryName, libraryVersion, publicKey]\n        .filter(Boolean)\n        .join('/');\n    const additionInfo = [languageName, integration].filter(Boolean).join('; ');\n    return `${mainInfo} (${additionInfo})`;\n}\n\nconst defaultOptions = {\n    factor: 2,\n    time: 100\n};\nfunction retrier(fn, options = defaultOptions) {\n    let attempts = 0;\n    function runAttempt(fn) {\n        const defaultDelayTime = Math.round(options.time * options.factor ** attempts);\n        const retry = (ms) => delay(ms ?? defaultDelayTime).then(() => {\n            attempts += 1;\n            return runAttempt(fn);\n        });\n        return fn({\n            attempt: attempts,\n            retry\n        });\n    }\n    return runAttempt(fn);\n}\n\nclass UploadcareError extends Error {\n}\n\nclass NetworkError extends UploadcareError {\n    originalProgressEvent;\n    constructor(progressEvent) {\n        super();\n        this.name = 'NetworkError';\n        this.message = 'Network error';\n        Object.setPrototypeOf(this, NetworkError.prototype);\n        this.originalProgressEvent = progressEvent;\n    }\n}\n\nconst onCancel = (signal, callback) => {\n    if (signal) {\n        if (signal.aborted) {\n            Promise.resolve().then(callback);\n        }\n        else {\n            signal.addEventListener('abort', () => callback(), { once: true });\n        }\n    }\n};\n\nclass CancelError extends UploadcareError {\n    isCancel = true;\n    constructor(message = 'Request canceled') {\n        super(message);\n        this.name = 'CancelError';\n        Object.setPrototypeOf(this, CancelError.prototype);\n    }\n}\n\nconst DEFAULT_INTERVAL = 500;\nconst poll = ({ check, interval = DEFAULT_INTERVAL, timeout, signal }) => new Promise((resolve, reject) => {\n    let tickTimeoutId;\n    let timeoutId;\n    onCancel(signal, () => {\n        tickTimeoutId && clearTimeout(tickTimeoutId);\n        reject(new CancelError('Poll cancelled'));\n    });\n    if (timeout) {\n        timeoutId = setTimeout(() => {\n            tickTimeoutId && clearTimeout(tickTimeoutId);\n            reject(new CancelError('Timed out'));\n        }, timeout);\n    }\n    const tick = () => {\n        try {\n            Promise.resolve(check(signal))\n                .then((result) => {\n                if (result) {\n                    timeoutId && clearTimeout(timeoutId);\n                    resolve(result);\n                }\n                else {\n                    tickTimeoutId = setTimeout(tick, interval);\n                }\n            })\n                .catch((error) => {\n                timeoutId && clearTimeout(timeoutId);\n                reject(error);\n            });\n        }\n        catch (error) {\n            timeoutId && clearTimeout(timeoutId);\n            reject(error);\n        }\n    };\n    tickTimeoutId = setTimeout(tick, 0);\n});\n\n/*\n  Settings for future support:\n  parallelDirectUploads: 10,\n */\nconst defaultSettings = {\n    baseCDN: 'https://ucarecdn.com',\n    baseURL: 'https://upload.uploadcare.com',\n    maxContentLength: 50 * 1024 * 1024, // 50 MB\n    retryThrottledRequestMaxTimes: 1,\n    retryNetworkErrorMaxTimes: 3,\n    multipartMinFileSize: 25 * 1024 * 1024, // 25 MB\n    multipartChunkSize: 5 * 1024 * 1024, // 5 MB\n    multipartMinLastPartSize: 1024 * 1024, // 1MB\n    maxConcurrentRequests: 4,\n    pollingTimeoutMilliseconds: 10000,\n    pusherKey: '79ae88bd931ea68464d9'\n};\nconst defaultContentType = 'application/octet-stream';\nconst defaultFilename = 'original';\n\nconst request = ({ method, url, data, headers = {}, signal, onProgress }) => new Promise((resolve, reject) => {\n    const xhr = new XMLHttpRequest();\n    const requestMethod = method?.toUpperCase() || 'GET';\n    let aborted = false;\n    /**\n     * Force synchronous flag to be off Some chrome versions gets\n     * `InvalidAccessError` error when we set `responseType` See\n     * https://xhr.spec.whatwg.org/#synchronous-flag and\n     * https://bugs.chromium.org/p/chromium/issues/detail?id=1346628\n     */\n    xhr.open(requestMethod, url, true);\n    if (headers) {\n        Object.entries(headers).forEach((entry) => {\n            const [key, value] = entry;\n            typeof value !== 'undefined' &&\n                !Array.isArray(value) &&\n                xhr.setRequestHeader(key, value);\n        });\n    }\n    xhr.responseType = 'text';\n    onCancel(signal, () => {\n        aborted = true;\n        xhr.abort();\n        reject(new CancelError());\n    });\n    xhr.onload = () => {\n        if (xhr.status != 200) {\n            // analyze HTTP status of the response\n            reject(new Error(`Error ${xhr.status}: ${xhr.statusText}`)); // e.g. 404: Not Found\n        }\n        else {\n            const request = {\n                method: requestMethod,\n                url,\n                data,\n                headers: headers || undefined,\n                signal,\n                onProgress\n            };\n            // Convert the header string into an array\n            // of individual headers\n            const headersArray = xhr\n                .getAllResponseHeaders()\n                .trim()\n                .split(/[\\r\\n]+/);\n            // Create a map of header names to values\n            const responseHeaders = {};\n            headersArray.forEach(function (line) {\n                const parts = line.split(': ');\n                const header = parts.shift();\n                const value = parts.join(': ');\n                if (header && typeof header !== 'undefined') {\n                    responseHeaders[header] = value;\n                }\n            });\n            const responseData = xhr.response;\n            const responseStatus = xhr.status;\n            resolve({\n                request,\n                data: responseData,\n                headers: responseHeaders,\n                status: responseStatus\n            });\n        }\n    };\n    xhr.onerror = (progressEvent) => {\n        if (aborted)\n            return;\n        // only triggers if the request couldn't be made at all\n        reject(new NetworkError(progressEvent));\n    };\n    if (onProgress && typeof onProgress === 'function') {\n        xhr.upload.onprogress = (event) => {\n            if (event.lengthComputable) {\n                onProgress({\n                    isComputable: true,\n                    value: event.loaded / event.total\n                });\n            }\n            else {\n                onProgress({ isComputable: false });\n            }\n        };\n    }\n    if (data) {\n        xhr.send(data);\n    }\n    else {\n        xhr.send();\n    }\n});\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nfunction identity(obj, ..._args) {\n    return obj;\n}\n\nconst getFileOptions = ({ name }) => name ? [name] : [];\nconst transformFile = identity;\nvar getFormData = () => new FormData();\n\nconst isBuffer = (data) => false;\n\nconst isBlob = (data) => {\n    return typeof Blob !== 'undefined' && data instanceof Blob;\n};\nconst isFile = (data) => {\n    return typeof File !== 'undefined' && data instanceof File;\n};\nconst isReactNativeAsset = (data) => {\n    return (!!data &&\n        typeof data === 'object' &&\n        !Array.isArray(data) &&\n        'uri' in data &&\n        typeof data.uri === 'string');\n};\nconst isFileData = (data) => {\n    return (isBlob(data) || isFile(data) || isBuffer() || isReactNativeAsset(data));\n};\n\nconst isSimpleValue = (value) => {\n    return (typeof value === 'string' ||\n        typeof value === 'number' ||\n        typeof value === 'undefined');\n};\nconst isObjectValue = (value) => {\n    return !!value && typeof value === 'object' && !Array.isArray(value);\n};\nconst isFileValue = (value) => !!value &&\n    typeof value === 'object' &&\n    'data' in value &&\n    isFileData(value.data);\nfunction collectParams(params, inputKey, inputValue) {\n    if (Array.isArray(inputValue)) {\n        for (const value of inputValue) {\n            collectParams(params, `${inputKey}[]`, value);\n        }\n    }\n    else if (isFileValue(inputValue)) {\n        const { name, contentType } = inputValue;\n        const file = transformFile(inputValue.data, name, contentType ?? defaultContentType);\n        const options = getFileOptions({ name, contentType });\n        params.push([inputKey, file, ...options]);\n    }\n    else if (isObjectValue(inputValue)) {\n        for (const [key, value] of Object.entries(inputValue)) {\n            if (typeof value !== 'undefined') {\n                params.push([`${inputKey}[${key}]`, String(value)]);\n            }\n        }\n    }\n    else if (isSimpleValue(inputValue) && inputValue) {\n        params.push([inputKey, inputValue.toString()]);\n    }\n}\nfunction getFormDataParams(options) {\n    const params = [];\n    for (const [key, value] of Object.entries(options)) {\n        collectParams(params, key, value);\n    }\n    return params;\n}\nfunction buildFormData(options) {\n    const formData = getFormData();\n    const paramsList = getFormDataParams(options);\n    for (const params of paramsList) {\n        const [key, value, ...rest] = params;\n        // node form-data has another signature for append\n        formData.append(key, value, ...rest);\n    }\n    return formData;\n}\n\nclass UploadError extends UploadcareError {\n    code;\n    request;\n    response;\n    headers;\n    constructor(message, code, request, response, headers) {\n        super();\n        this.name = 'UploadError';\n        this.message = message;\n        this.code = code;\n        this.request = request;\n        this.response = response;\n        this.headers = headers;\n        Object.setPrototypeOf(this, UploadError.prototype);\n    }\n}\n\nconst buildSearchParams = (query) => {\n    const searchParams = new URLSearchParams();\n    for (const [key, value] of Object.entries(query)) {\n        if (value && typeof value === 'object' && !Array.isArray(value)) {\n            Object.entries(value)\n                .filter((entry) => entry[1] ?? false)\n                .forEach((entry) => searchParams.set(`${key}[${entry[0]}]`, String(entry[1])));\n        }\n        else if (Array.isArray(value)) {\n            value.forEach((val) => {\n                searchParams.append(`${key}[]`, val);\n            });\n        }\n        else if (typeof value === 'string' && value) {\n            searchParams.set(key, value);\n        }\n        else if (typeof value === 'number') {\n            searchParams.set(key, value.toString());\n        }\n    }\n    return searchParams.toString();\n};\nconst getUrl = (base, path, query) => {\n    const url = new URL(base);\n    url.pathname = (url.pathname + path).replace('//', '/');\n    if (query) {\n        url.search = buildSearchParams(query);\n    }\n    return url.toString();\n};\n\nvar version = '6.14.1';\n\nconst LIBRARY_NAME = 'UploadcareUploadClient';\nconst LIBRARY_VERSION = version;\nfunction getUserAgent(options) {\n    return getUserAgent$1({\n        libraryName: LIBRARY_NAME,\n        libraryVersion: LIBRARY_VERSION,\n        ...options\n    });\n}\n\nconst REQUEST_WAS_THROTTLED_CODE = 'RequestThrottledError';\nconst DEFAULT_RETRY_AFTER_TIMEOUT = 15000;\nconst DEFAULT_NETWORK_ERROR_TIMEOUT = 1000;\nfunction getTimeoutFromThrottledRequest(error) {\n    const { headers } = error || {};\n    if (!headers || typeof headers['retry-after'] !== 'string') {\n        return DEFAULT_RETRY_AFTER_TIMEOUT;\n    }\n    const seconds = parseInt(headers['retry-after'], 10);\n    if (!Number.isFinite(seconds)) {\n        return DEFAULT_RETRY_AFTER_TIMEOUT;\n    }\n    return seconds * 1000;\n}\nfunction retryIfFailed(fn, options) {\n    const { retryThrottledRequestMaxTimes, retryNetworkErrorMaxTimes } = options;\n    return retrier(({ attempt, retry }) => fn().catch((error) => {\n        if ('response' in error &&\n            error?.code === REQUEST_WAS_THROTTLED_CODE &&\n            attempt < retryThrottledRequestMaxTimes) {\n            return retry(getTimeoutFromThrottledRequest(error));\n        }\n        if (error instanceof NetworkError &&\n            attempt < retryNetworkErrorMaxTimes) {\n            return retry((attempt + 1) * DEFAULT_NETWORK_ERROR_TIMEOUT);\n        }\n        throw error;\n    }));\n}\n\nconst getContentType = (file) => {\n    let contentType = '';\n    if (isBlob(file) || isFile(file) || isReactNativeAsset(file)) {\n        contentType = file.type;\n    }\n    return contentType || defaultContentType;\n};\n\nconst getFileName = (file) => {\n    let filename = '';\n    if (isFile(file) && file.name) {\n        filename = file.name;\n    }\n    else if (isBlob(file) || isBuffer()) {\n        filename = '';\n    }\n    else if (isReactNativeAsset(file) && file.name) {\n        filename = file.name;\n    }\n    return filename || defaultFilename;\n};\n\nfunction getStoreValue(store) {\n    if (typeof store === 'undefined' || store === 'auto') {\n        return 'auto';\n    }\n    return store ? '1' : '0';\n}\n\n/**\n * Performs file uploading request to Uploadcare Upload API. Can be canceled and\n * has progress.\n */\nfunction base(file, { publicKey, fileName, contentType, baseURL = defaultSettings.baseURL, secureSignature, secureExpire, store, signal, onProgress, source = 'local', integration, userAgent, retryThrottledRequestMaxTimes = defaultSettings.retryThrottledRequestMaxTimes, retryNetworkErrorMaxTimes = defaultSettings.retryNetworkErrorMaxTimes, metadata }) {\n    return retryIfFailed(() => request({\n        method: 'POST',\n        url: getUrl(baseURL, '/base/', {\n            jsonerrors: 1\n        }),\n        headers: {\n            'X-UC-User-Agent': getUserAgent({ publicKey, integration, userAgent })\n        },\n        data: buildFormData({\n            file: {\n                data: file,\n                name: fileName || getFileName(file),\n                contentType: contentType || getContentType(file)\n            },\n            UPLOADCARE_PUB_KEY: publicKey,\n            UPLOADCARE_STORE: getStoreValue(store),\n            signature: secureSignature,\n            expire: secureExpire,\n            source: source,\n            metadata\n        }),\n        signal,\n        onProgress\n    }).then(({ data, headers, request }) => {\n        const response = camelizeKeys(JSON.parse(data));\n        if ('error' in response) {\n            throw new UploadError(response.error.content, response.error.errorCode, request, response, headers);\n        }\n        else {\n            return response;\n        }\n    }), { retryNetworkErrorMaxTimes, retryThrottledRequestMaxTimes });\n}\n\nvar TypeEnum;\n(function (TypeEnum) {\n    TypeEnum[\"Token\"] = \"token\";\n    TypeEnum[\"FileInfo\"] = \"file_info\";\n})(TypeEnum || (TypeEnum = {}));\n/** Uploading files from URL. */\nfunction fromUrl(sourceUrl, { publicKey, baseURL = defaultSettings.baseURL, store, fileName, checkForUrlDuplicates, saveUrlForRecurrentUploads, secureSignature, secureExpire, source = 'url', signal, integration, userAgent, retryThrottledRequestMaxTimes = defaultSettings.retryThrottledRequestMaxTimes, retryNetworkErrorMaxTimes = defaultSettings.retryNetworkErrorMaxTimes, metadata }) {\n    return retryIfFailed(() => request({\n        method: 'POST',\n        headers: {\n            'X-UC-User-Agent': getUserAgent({ publicKey, integration, userAgent })\n        },\n        url: getUrl(baseURL, '/from_url/', {\n            jsonerrors: 1,\n            pub_key: publicKey,\n            source_url: sourceUrl,\n            store: getStoreValue(store),\n            filename: fileName,\n            check_URL_duplicates: checkForUrlDuplicates ? 1 : undefined,\n            save_URL_duplicates: saveUrlForRecurrentUploads ? 1 : undefined,\n            signature: secureSignature,\n            expire: secureExpire,\n            source: source,\n            metadata\n        }),\n        signal\n    }).then(({ data, headers, request }) => {\n        const response = camelizeKeys(JSON.parse(data));\n        if ('error' in response) {\n            throw new UploadError(response.error.content, response.error.errorCode, request, response, headers);\n        }\n        else {\n            return response;\n        }\n    }), { retryNetworkErrorMaxTimes, retryThrottledRequestMaxTimes });\n}\n\nvar Status;\n(function (Status) {\n    Status[\"Unknown\"] = \"unknown\";\n    Status[\"Waiting\"] = \"waiting\";\n    Status[\"Progress\"] = \"progress\";\n    Status[\"Error\"] = \"error\";\n    Status[\"Success\"] = \"success\";\n})(Status || (Status = {}));\nconst isErrorResponse = (response) => {\n    return 'status' in response && response.status === Status.Error;\n};\n/** Checking upload status and working with file tokens. */\nfunction fromUrlStatus(token, { publicKey, baseURL = defaultSettings.baseURL, signal, integration, userAgent, retryThrottledRequestMaxTimes = defaultSettings.retryThrottledRequestMaxTimes, retryNetworkErrorMaxTimes = defaultSettings.retryNetworkErrorMaxTimes } = {}) {\n    return retryIfFailed(() => request({\n        method: 'GET',\n        headers: publicKey\n            ? {\n                'X-UC-User-Agent': getUserAgent({\n                    publicKey,\n                    integration,\n                    userAgent\n                })\n            }\n            : undefined,\n        url: getUrl(baseURL, '/from_url/status/', {\n            jsonerrors: 1,\n            token\n        }),\n        signal\n    }).then(({ data, headers, request }) => {\n        const response = camelizeKeys(JSON.parse(data));\n        if ('error' in response && !isErrorResponse(response)) {\n            throw new UploadError(response.error.content, response.error.errorCode, request, response, headers);\n        }\n        else {\n            return response;\n        }\n    }), { retryNetworkErrorMaxTimes, retryThrottledRequestMaxTimes });\n}\n\n/** Create files group. */\nfunction group(uuids, { publicKey, baseURL = defaultSettings.baseURL, jsonpCallback, secureSignature, secureExpire, signal, source, integration, userAgent, retryThrottledRequestMaxTimes = defaultSettings.retryThrottledRequestMaxTimes, retryNetworkErrorMaxTimes = defaultSettings.retryNetworkErrorMaxTimes }) {\n    return retryIfFailed(() => request({\n        method: 'POST',\n        headers: {\n            'X-UC-User-Agent': getUserAgent({ publicKey, integration, userAgent })\n        },\n        url: getUrl(baseURL, '/group/', {\n            jsonerrors: 1\n        }),\n        data: buildFormData({\n            files: uuids,\n            callback: jsonpCallback,\n            pub_key: publicKey,\n            signature: secureSignature,\n            expire: secureExpire,\n            source\n        }),\n        signal\n    }).then(({ data, headers, request }) => {\n        const response = camelizeKeys(JSON.parse(data));\n        if ('error' in response) {\n            throw new UploadError(response.error.content, response.error.errorCode, request, response, headers);\n        }\n        else {\n            return response;\n        }\n    }), { retryNetworkErrorMaxTimes, retryThrottledRequestMaxTimes });\n}\n\n/** Get info about group. */\nfunction groupInfo(id, { publicKey, baseURL = defaultSettings.baseURL, signal, source, integration, userAgent, retryThrottledRequestMaxTimes = defaultSettings.retryThrottledRequestMaxTimes, retryNetworkErrorMaxTimes = defaultSettings.retryNetworkErrorMaxTimes }) {\n    return retryIfFailed(() => request({\n        method: 'GET',\n        headers: {\n            'X-UC-User-Agent': getUserAgent({ publicKey, integration, userAgent })\n        },\n        url: getUrl(baseURL, '/group/info/', {\n            jsonerrors: 1,\n            pub_key: publicKey,\n            group_id: id,\n            source\n        }),\n        signal\n    }).then(({ data, headers, request }) => {\n        const response = camelizeKeys(JSON.parse(data));\n        if ('error' in response) {\n            throw new UploadError(response.error.content, response.error.errorCode, request, response, headers);\n        }\n        else {\n            return response;\n        }\n    }), { retryThrottledRequestMaxTimes, retryNetworkErrorMaxTimes });\n}\n\n/** Returns a JSON dictionary holding file info. */\nfunction info(uuid, { publicKey, baseURL = defaultSettings.baseURL, signal, source, integration, userAgent, retryThrottledRequestMaxTimes = defaultSettings.retryThrottledRequestMaxTimes, retryNetworkErrorMaxTimes = defaultSettings.retryNetworkErrorMaxTimes }) {\n    return retryIfFailed(() => request({\n        method: 'GET',\n        headers: {\n            'X-UC-User-Agent': getUserAgent({ publicKey, integration, userAgent })\n        },\n        url: getUrl(baseURL, '/info/', {\n            jsonerrors: 1,\n            pub_key: publicKey,\n            file_id: uuid,\n            source\n        }),\n        signal\n    }).then(({ data, headers, request }) => {\n        const response = camelizeKeys(JSON.parse(data));\n        if ('error' in response) {\n            throw new UploadError(response.error.content, response.error.errorCode, request, response, headers);\n        }\n        else {\n            return response;\n        }\n    }), { retryThrottledRequestMaxTimes, retryNetworkErrorMaxTimes });\n}\n\n/** Start multipart uploading. */\nfunction multipartStart(size, { publicKey, contentType, fileName, multipartChunkSize = defaultSettings.multipartChunkSize, baseURL = '', secureSignature, secureExpire, store, signal, source = 'local', integration, userAgent, retryThrottledRequestMaxTimes = defaultSettings.retryThrottledRequestMaxTimes, retryNetworkErrorMaxTimes = defaultSettings.retryNetworkErrorMaxTimes, metadata }) {\n    return retryIfFailed(() => request({\n        method: 'POST',\n        url: getUrl(baseURL, '/multipart/start/', { jsonerrors: 1 }),\n        headers: {\n            'X-UC-User-Agent': getUserAgent({ publicKey, integration, userAgent })\n        },\n        data: buildFormData({\n            filename: fileName || defaultFilename,\n            size: size,\n            content_type: contentType || defaultContentType,\n            part_size: multipartChunkSize,\n            UPLOADCARE_STORE: getStoreValue(store),\n            UPLOADCARE_PUB_KEY: publicKey,\n            signature: secureSignature,\n            expire: secureExpire,\n            source: source,\n            metadata\n        }),\n        signal\n    }).then(({ data, headers, request }) => {\n        const response = camelizeKeys(JSON.parse(data));\n        if ('error' in response) {\n            throw new UploadError(response.error.content, response.error.errorCode, request, response, headers);\n        }\n        else {\n            // convert to array\n            response.parts = Object.keys(response.parts).map((key) => response.parts[Number(key)]);\n            return response;\n        }\n    }), { retryThrottledRequestMaxTimes, retryNetworkErrorMaxTimes });\n}\n\n/** Complete multipart uploading. */\nfunction multipartUpload(part, url, { contentType, signal, onProgress, retryThrottledRequestMaxTimes = defaultSettings.retryThrottledRequestMaxTimes, retryNetworkErrorMaxTimes = defaultSettings.retryNetworkErrorMaxTimes }) {\n    return retryIfFailed(() => request({\n        method: 'PUT',\n        url,\n        data: part,\n        // Upload request can't be non-computable because we always know exact size\n        onProgress: onProgress,\n        signal,\n        headers: {\n            'Content-Type': contentType || defaultContentType\n        }\n    })\n        .then((result) => {\n        // hack for node \\_()_/\n        if (onProgress)\n            onProgress({\n                isComputable: true,\n                value: 1\n            });\n        return result;\n    })\n        .then(({ status }) => ({ code: status })), {\n        retryThrottledRequestMaxTimes,\n        retryNetworkErrorMaxTimes\n    });\n}\n\n/** Complete multipart uploading. */\nfunction multipartComplete(uuid, { publicKey, baseURL = defaultSettings.baseURL, source = 'local', signal, integration, userAgent, retryThrottledRequestMaxTimes = defaultSettings.retryThrottledRequestMaxTimes, retryNetworkErrorMaxTimes = defaultSettings.retryNetworkErrorMaxTimes }) {\n    return retryIfFailed(() => request({\n        method: 'POST',\n        url: getUrl(baseURL, '/multipart/complete/', { jsonerrors: 1 }),\n        headers: {\n            'X-UC-User-Agent': getUserAgent({ publicKey, integration, userAgent })\n        },\n        data: buildFormData({\n            uuid: uuid,\n            UPLOADCARE_PUB_KEY: publicKey,\n            source: source\n        }),\n        signal\n    }).then(({ data, headers, request }) => {\n        const response = camelizeKeys(JSON.parse(data));\n        if ('error' in response) {\n            throw new UploadError(response.error.content, response.error.errorCode, request, response, headers);\n        }\n        else {\n            return response;\n        }\n    }), { retryThrottledRequestMaxTimes, retryNetworkErrorMaxTimes });\n}\n\nfunction isReadyPoll(uuid, { publicKey, baseURL, source, integration, userAgent, retryThrottledRequestMaxTimes, retryNetworkErrorMaxTimes, signal, onProgress }) {\n    return poll({\n        check: (signal) => info(uuid, {\n            publicKey,\n            baseURL,\n            signal,\n            source,\n            integration,\n            userAgent,\n            retryThrottledRequestMaxTimes,\n            retryNetworkErrorMaxTimes\n        }).then((response) => {\n            if (response.isReady) {\n                return response;\n            }\n            onProgress && onProgress({ isComputable: true, value: 1 });\n            return false;\n        }),\n        signal\n    });\n}\n\nfunction isGroupFileInfo(fileInfo) {\n    return 'defaultEffects' in fileInfo;\n}\nclass UploadcareFile {\n    uuid;\n    name = null;\n    size = null;\n    isStored = null;\n    isImage = null;\n    mimeType = null;\n    cdnUrl = null;\n    s3Url = null;\n    originalFilename = null;\n    imageInfo = null;\n    videoInfo = null;\n    contentInfo = null;\n    metadata = null;\n    s3Bucket = null;\n    defaultEffects = null;\n    constructor(fileInfo, { baseCDN = defaultSettings.baseCDN, fileName } = {}) {\n        const { uuid, s3Bucket } = fileInfo;\n        const cdnUrl = getUrl(baseCDN, `${uuid}/`);\n        const s3Url = s3Bucket\n            ? getUrl(`https://${s3Bucket}.s3.amazonaws.com/`, `${uuid}/${fileInfo.filename}`)\n            : null;\n        this.uuid = uuid;\n        this.name = fileName || fileInfo.filename;\n        this.size = fileInfo.size;\n        this.isStored = fileInfo.isStored;\n        this.isImage = fileInfo.isImage;\n        this.mimeType = fileInfo.mimeType;\n        this.cdnUrl = cdnUrl;\n        this.originalFilename = fileInfo.originalFilename;\n        this.imageInfo = fileInfo.imageInfo;\n        this.videoInfo = fileInfo.videoInfo;\n        this.contentInfo = fileInfo.contentInfo;\n        this.metadata = fileInfo.metadata || null;\n        this.s3Bucket = s3Bucket || null;\n        this.s3Url = s3Url;\n        if (isGroupFileInfo(fileInfo)) {\n            this.defaultEffects = fileInfo.defaultEffects;\n        }\n    }\n}\n\nconst uploadDirect = (file, { publicKey, fileName, baseURL, secureSignature, secureExpire, store, contentType, signal, onProgress, source, integration, userAgent, retryThrottledRequestMaxTimes, retryNetworkErrorMaxTimes, baseCDN, metadata }) => {\n    return base(file, {\n        publicKey,\n        fileName,\n        contentType,\n        baseURL,\n        secureSignature,\n        secureExpire,\n        store,\n        signal,\n        onProgress,\n        source,\n        integration,\n        userAgent,\n        retryThrottledRequestMaxTimes,\n        retryNetworkErrorMaxTimes,\n        metadata\n    })\n        .then(({ file }) => {\n        return isReadyPoll(file, {\n            publicKey,\n            baseURL,\n            source,\n            integration,\n            userAgent,\n            retryThrottledRequestMaxTimes,\n            retryNetworkErrorMaxTimes,\n            onProgress,\n            signal\n        });\n    })\n        .then((fileInfo) => new UploadcareFile(fileInfo, { baseCDN }));\n};\n\nconst uploadFromUploaded = (uuid, { publicKey, fileName, baseURL, signal, onProgress, source, integration, userAgent, retryThrottledRequestMaxTimes, retryNetworkErrorMaxTimes, baseCDN }) => {\n    return info(uuid, {\n        publicKey,\n        baseURL,\n        signal,\n        source,\n        integration,\n        userAgent,\n        retryThrottledRequestMaxTimes,\n        retryNetworkErrorMaxTimes\n    })\n        .then((fileInfo) => new UploadcareFile(fileInfo, { baseCDN, fileName }))\n        .then((result) => {\n        // hack for node \\_()_/\n        if (onProgress)\n            onProgress({\n                isComputable: true,\n                value: 1\n            });\n        return result;\n    });\n};\n\nconst race = (fns, { signal } = {}) => {\n    let lastError = null;\n    let winnerIndex = null;\n    const controllers = fns.map(() => new AbortController());\n    const createStopRaceCallback = (i) => () => {\n        winnerIndex = i;\n        controllers.forEach((controller, index) => index !== i && controller.abort());\n    };\n    onCancel(signal, () => {\n        controllers.forEach((controller) => controller.abort());\n    });\n    return Promise.all(fns.map((fn, i) => {\n        const stopRace = createStopRaceCallback(i);\n        return Promise.resolve()\n            .then(() => fn({ stopRace, signal: controllers[i].signal }))\n            .then((result) => {\n            stopRace();\n            return result;\n        })\n            .catch((error) => {\n            lastError = error;\n            return null;\n        });\n    })).then((results) => {\n        if (winnerIndex === null) {\n            throw lastError;\n        }\n        else {\n            return results[winnerIndex];\n        }\n    });\n};\n\nvar WebSocket = window.WebSocket;\n\nclass Events {\n    events = Object.create({});\n    emit(event, data) {\n        this.events[event]?.forEach((fn) => fn(data));\n    }\n    on(event, callback) {\n        this.events[event] = this.events[event] || [];\n        this.events[event].push(callback);\n    }\n    off(event, callback) {\n        if (callback) {\n            this.events[event] = this.events[event].filter((fn) => fn !== callback);\n        }\n        else {\n            this.events[event] = [];\n        }\n    }\n}\n\nconst response = (type, data) => {\n    if (type === 'success') {\n        return { status: Status.Success, ...data };\n    }\n    if (type === 'progress') {\n        return { status: Status.Progress, ...data };\n    }\n    return { status: Status.Error, ...data };\n};\nclass Pusher {\n    key;\n    disconnectTime;\n    ws = undefined;\n    queue = [];\n    isConnected = false;\n    subscribers = 0;\n    emmitter = new Events();\n    disconnectTimeoutId = null;\n    constructor(pusherKey, disconnectTime = 30000) {\n        this.key = pusherKey;\n        this.disconnectTime = disconnectTime;\n    }\n    connect() {\n        this.disconnectTimeoutId && clearTimeout(this.disconnectTimeoutId);\n        if (!this.isConnected && !this.ws) {\n            const pusherUrl = `wss://ws.pusherapp.com/app/${this.key}?protocol=5&client=js&version=1.12.2`;\n            this.ws = new WebSocket(pusherUrl);\n            this.ws.addEventListener('error', (error) => {\n                this.emmitter.emit('error', new Error(error.message));\n            });\n            this.emmitter.on('connected', () => {\n                this.isConnected = true;\n                this.queue.forEach((message) => this.send(message.event, message.data));\n                this.queue = [];\n            });\n            this.ws.addEventListener('message', (e) => {\n                const data = JSON.parse(e.data.toString());\n                switch (data.event) {\n                    case 'pusher:connection_established': {\n                        this.emmitter.emit('connected', undefined);\n                        break;\n                    }\n                    case 'pusher:ping': {\n                        this.send('pusher:pong', {});\n                        break;\n                    }\n                    case 'progress':\n                    case 'success':\n                    case 'fail': {\n                        this.emmitter.emit(data.channel, response(data.event, JSON.parse(data.data)));\n                    }\n                }\n            });\n        }\n    }\n    disconnect() {\n        const actualDisconect = () => {\n            this.ws?.close();\n            this.ws = undefined;\n            this.isConnected = false;\n        };\n        if (this.disconnectTime) {\n            this.disconnectTimeoutId = setTimeout(() => {\n                actualDisconect();\n            }, this.disconnectTime);\n        }\n        else {\n            actualDisconect();\n        }\n    }\n    send(event, data) {\n        const str = JSON.stringify({ event, data });\n        this.ws?.send(str);\n    }\n    subscribe(token, handler) {\n        this.subscribers += 1;\n        this.connect();\n        const channel = `task-status-${token}`;\n        const message = {\n            event: 'pusher:subscribe',\n            data: { channel }\n        };\n        this.emmitter.on(channel, handler);\n        if (this.isConnected) {\n            this.send(message.event, message.data);\n        }\n        else {\n            this.queue.push(message);\n        }\n    }\n    unsubscribe(token) {\n        this.subscribers -= 1;\n        const channel = `task-status-${token}`;\n        const message = {\n            event: 'pusher:unsubscribe',\n            data: { channel }\n        };\n        this.emmitter.off(channel);\n        if (this.isConnected) {\n            this.send(message.event, message.data);\n        }\n        else {\n            this.queue = this.queue.filter((msg) => msg.data.channel !== channel);\n        }\n        if (this.subscribers === 0) {\n            this.disconnect();\n        }\n    }\n    onError(callback) {\n        this.emmitter.on('error', callback);\n        return () => this.emmitter.off('error', callback);\n    }\n}\nlet pusher = null;\nconst getPusher = (key) => {\n    if (!pusher) {\n        // no timeout for nodeJS and 30000 ms for browser\n        const disconectTimeout = typeof window === 'undefined' ? 0 : 30000;\n        pusher = new Pusher(key, disconectTimeout);\n    }\n    return pusher;\n};\nconst preconnect = (key) => {\n    getPusher(key).connect();\n};\n\nfunction pollStrategy({ token, publicKey, baseURL, integration, userAgent, retryThrottledRequestMaxTimes, retryNetworkErrorMaxTimes, onProgress, signal }) {\n    return poll({\n        check: (signal) => fromUrlStatus(token, {\n            publicKey,\n            baseURL,\n            integration,\n            userAgent,\n            retryThrottledRequestMaxTimes,\n            retryNetworkErrorMaxTimes,\n            signal\n        }).then((response) => {\n            switch (response.status) {\n                case Status.Error: {\n                    return new UploadError(response.error, response.errorCode);\n                }\n                case Status.Waiting: {\n                    return false;\n                }\n                case Status.Unknown: {\n                    return new UploadError(`Token \"${token}\" was not found.`);\n                }\n                case Status.Progress: {\n                    if (onProgress) {\n                        if (response.total === 'unknown') {\n                            onProgress({ isComputable: false });\n                        }\n                        else {\n                            onProgress({\n                                isComputable: true,\n                                value: response.done / response.total\n                            });\n                        }\n                    }\n                    return false;\n                }\n                case Status.Success: {\n                    if (onProgress)\n                        onProgress({\n                            isComputable: true,\n                            value: response.done / response.total\n                        });\n                    return response;\n                }\n                default: {\n                    throw new Error('Unknown status');\n                }\n            }\n        }),\n        signal\n    });\n}\nconst pushStrategy = ({ token, pusherKey, signal, onProgress }) => new Promise((resolve, reject) => {\n    const pusher = getPusher(pusherKey);\n    const unsubErrorHandler = pusher.onError(reject);\n    const destroy = () => {\n        unsubErrorHandler();\n        pusher.unsubscribe(token);\n    };\n    onCancel(signal, () => {\n        destroy();\n        reject(new CancelError('pusher cancelled'));\n    });\n    pusher.subscribe(token, (result) => {\n        switch (result.status) {\n            case Status.Progress: {\n                if (onProgress) {\n                    if (result.total === 'unknown') {\n                        onProgress({ isComputable: false });\n                    }\n                    else {\n                        onProgress({\n                            isComputable: true,\n                            value: result.done / result.total\n                        });\n                    }\n                }\n                break;\n            }\n            case Status.Success: {\n                destroy();\n                if (onProgress)\n                    onProgress({\n                        isComputable: true,\n                        value: result.done / result.total\n                    });\n                resolve(result);\n                break;\n            }\n            case Status.Error: {\n                destroy();\n                reject(new UploadError(result.msg, result.error_code));\n            }\n        }\n    });\n});\nconst uploadFromUrl = (sourceUrl, { publicKey, fileName, baseURL, baseCDN, checkForUrlDuplicates, saveUrlForRecurrentUploads, secureSignature, secureExpire, store, signal, onProgress, source, integration, userAgent, retryThrottledRequestMaxTimes, pusherKey = defaultSettings.pusherKey, metadata }) => Promise.resolve(preconnect(pusherKey))\n    .then(() => fromUrl(sourceUrl, {\n    publicKey,\n    fileName,\n    baseURL,\n    checkForUrlDuplicates,\n    saveUrlForRecurrentUploads,\n    secureSignature,\n    secureExpire,\n    store,\n    signal,\n    source,\n    integration,\n    userAgent,\n    retryThrottledRequestMaxTimes,\n    metadata\n}))\n    .catch((error) => {\n    const pusher = getPusher(pusherKey);\n    pusher?.disconnect();\n    return Promise.reject(error);\n})\n    .then((urlResponse) => {\n    if (urlResponse.type === TypeEnum.FileInfo) {\n        return urlResponse;\n    }\n    else {\n        return race([\n            ({ signal }) => pollStrategy({\n                token: urlResponse.token,\n                publicKey,\n                baseURL,\n                integration,\n                userAgent,\n                retryThrottledRequestMaxTimes,\n                onProgress,\n                signal\n            }),\n            ({ signal }) => pushStrategy({\n                token: urlResponse.token,\n                pusherKey,\n                signal,\n                onProgress\n            })\n        ], { signal });\n    }\n})\n    .then((result) => {\n    if (result instanceof UploadError)\n        throw result;\n    return result;\n})\n    .then((result) => isReadyPoll(result.uuid, {\n    publicKey,\n    baseURL,\n    integration,\n    userAgent,\n    retryThrottledRequestMaxTimes,\n    onProgress,\n    signal\n}))\n    .then((fileInfo) => new UploadcareFile(fileInfo, { baseCDN }));\n\nconst memo = new WeakMap();\nconst getBlobFromReactNativeAsset = async (asset) => {\n    if (memo.has(asset)) {\n        return memo.get(asset);\n    }\n    const blob = await fetch(asset.uri).then((res) => res.blob());\n    memo.set(asset, blob);\n    return blob;\n};\n\nconst getFileSize = async (file) => {\n    if (isFile(file) || isBlob(file)) {\n        return file.size;\n    }\n    if (isReactNativeAsset(file)) {\n        const blob = await getBlobFromReactNativeAsset(file);\n        return blob.size;\n    }\n    throw new Error(`Unknown file type. Cannot determine file size.`);\n};\n\n/** Check if FileData is multipart data. */\nconst isMultipart = (fileSize, multipartMinFileSize = defaultSettings.multipartMinFileSize) => {\n    return fileSize >= multipartMinFileSize;\n};\n\n/** Uuid type guard. */\nconst isUuid = (data) => {\n    const UUID_REGEX = '[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}';\n    const regExp = new RegExp(UUID_REGEX);\n    return !isFileData(data) && regExp.test(data);\n};\n/**\n * Url type guard.\n *\n * @param {SupportedFileInput | Url | Uuid} data\n */\nconst isUrl = (data) => {\n    const URL_REGEX = '^(?:\\\\w+:)?\\\\/\\\\/([^\\\\s\\\\.]+\\\\.\\\\S{2}|localhost[\\\\:?\\\\d]*)\\\\S*$';\n    const regExp = new RegExp(URL_REGEX);\n    return !isFileData(data) && regExp.test(data);\n};\n\nconst runWithConcurrency = (concurrency, tasks) => {\n    return new Promise((resolve, reject) => {\n        const results = [];\n        let rejected = false;\n        let settled = tasks.length;\n        const forRun = [...tasks];\n        const run = () => {\n            const index = tasks.length - forRun.length;\n            const next = forRun.shift();\n            if (next) {\n                next()\n                    .then((result) => {\n                    if (rejected)\n                        return;\n                    results[index] = result;\n                    settled -= 1;\n                    if (settled) {\n                        run();\n                    }\n                    else {\n                        resolve(results);\n                    }\n                })\n                    .catch((error) => {\n                    rejected = true;\n                    reject(error);\n                });\n            }\n        };\n        for (let i = 0; i < concurrency; i++) {\n            run();\n        }\n    });\n};\n\nconst sliceChunk = (file, index, fileSize, chunkSize) => {\n    const start = chunkSize * index;\n    const end = Math.min(start + chunkSize, fileSize);\n    return file.slice(start, end);\n};\n\nconst prepareChunks = async (file, fileSize, chunkSize) => {\n    return (index) => sliceChunk(file, index, fileSize, chunkSize);\n};\n\nconst uploadPart = (chunk, url, { publicKey, contentType, onProgress, signal, integration, retryThrottledRequestMaxTimes, retryNetworkErrorMaxTimes }) => multipartUpload(chunk, url, {\n    publicKey,\n    contentType,\n    onProgress,\n    signal,\n    integration,\n    retryThrottledRequestMaxTimes,\n    retryNetworkErrorMaxTimes\n});\nconst uploadMultipart = async (file, { publicKey, fileName, fileSize, baseURL, secureSignature, secureExpire, store, signal, onProgress, source, integration, userAgent, retryThrottledRequestMaxTimes, retryNetworkErrorMaxTimes, contentType, multipartChunkSize = defaultSettings.multipartChunkSize, maxConcurrentRequests = defaultSettings.maxConcurrentRequests, baseCDN, metadata }) => {\n    const size = fileSize ?? (await getFileSize(file));\n    let progressValues;\n    const createProgressHandler = (totalChunks, chunkIdx) => {\n        if (!onProgress)\n            return;\n        if (!progressValues) {\n            progressValues = Array(totalChunks).fill(0);\n        }\n        const sum = (values) => values.reduce((sum, next) => sum + next, 0);\n        return (info) => {\n            if (!info.isComputable) {\n                return;\n            }\n            progressValues[chunkIdx] = info.value;\n            onProgress({\n                isComputable: true,\n                value: sum(progressValues) / totalChunks\n            });\n        };\n    };\n    contentType ||= getContentType(file);\n    return multipartStart(size, {\n        publicKey,\n        contentType,\n        fileName: fileName || getFileName(file),\n        baseURL,\n        secureSignature,\n        secureExpire,\n        store,\n        signal,\n        source,\n        integration,\n        userAgent,\n        retryThrottledRequestMaxTimes,\n        retryNetworkErrorMaxTimes,\n        metadata\n    })\n        .then(async ({ uuid, parts }) => {\n        const getChunk = await prepareChunks(file, size, multipartChunkSize);\n        return Promise.all([\n            uuid,\n            runWithConcurrency(maxConcurrentRequests, parts.map((url, index) => () => uploadPart(getChunk(index), url, {\n                publicKey,\n                contentType,\n                onProgress: createProgressHandler(parts.length, index),\n                signal,\n                integration,\n                retryThrottledRequestMaxTimes,\n                retryNetworkErrorMaxTimes\n            })))\n        ]);\n    })\n        .then(([uuid]) => multipartComplete(uuid, {\n        publicKey,\n        baseURL,\n        source,\n        integration,\n        userAgent,\n        retryThrottledRequestMaxTimes,\n        retryNetworkErrorMaxTimes\n    }))\n        .then((fileInfo) => {\n        if (fileInfo.isReady) {\n            return fileInfo;\n        }\n        else {\n            return isReadyPoll(fileInfo.uuid, {\n                publicKey,\n                baseURL,\n                source,\n                integration,\n                userAgent,\n                retryThrottledRequestMaxTimes,\n                retryNetworkErrorMaxTimes,\n                onProgress,\n                signal\n            });\n        }\n    })\n        .then((fileInfo) => new UploadcareFile(fileInfo, { baseCDN }));\n};\n\n/** Uploads file from provided data. */\nasync function uploadFile(data, { publicKey, fileName, baseURL = defaultSettings.baseURL, secureSignature, secureExpire, store, signal, onProgress, source, integration, userAgent, retryThrottledRequestMaxTimes, retryNetworkErrorMaxTimes, contentType, multipartMinFileSize, multipartChunkSize, maxConcurrentRequests, baseCDN = defaultSettings.baseCDN, checkForUrlDuplicates, saveUrlForRecurrentUploads, pusherKey, metadata }) {\n    if (isFileData(data)) {\n        const fileSize = await getFileSize(data);\n        if (isMultipart(fileSize, multipartMinFileSize)) {\n            return uploadMultipart(data, {\n                publicKey,\n                contentType,\n                multipartChunkSize,\n                fileSize,\n                fileName,\n                baseURL,\n                secureSignature,\n                secureExpire,\n                store,\n                signal,\n                onProgress,\n                source,\n                integration,\n                userAgent,\n                maxConcurrentRequests,\n                retryThrottledRequestMaxTimes,\n                retryNetworkErrorMaxTimes,\n                baseCDN,\n                metadata\n            });\n        }\n        return uploadDirect(data, {\n            publicKey,\n            fileName,\n            contentType,\n            baseURL,\n            secureSignature,\n            secureExpire,\n            store,\n            signal,\n            onProgress,\n            source,\n            integration,\n            userAgent,\n            retryThrottledRequestMaxTimes,\n            retryNetworkErrorMaxTimes,\n            baseCDN,\n            metadata\n        });\n    }\n    if (isUrl(data)) {\n        return uploadFromUrl(data, {\n            publicKey,\n            fileName,\n            baseURL,\n            baseCDN,\n            checkForUrlDuplicates,\n            saveUrlForRecurrentUploads,\n            secureSignature,\n            secureExpire,\n            store,\n            signal,\n            onProgress,\n            source,\n            integration,\n            userAgent,\n            retryThrottledRequestMaxTimes,\n            retryNetworkErrorMaxTimes,\n            pusherKey,\n            metadata\n        });\n    }\n    if (isUuid(data)) {\n        return uploadFromUploaded(data, {\n            publicKey,\n            fileName,\n            baseURL,\n            signal,\n            onProgress,\n            source,\n            integration,\n            userAgent,\n            retryThrottledRequestMaxTimes,\n            retryNetworkErrorMaxTimes,\n            baseCDN\n        });\n    }\n    throw new TypeError(`File uploading from \"${data}\" is not supported`);\n}\n\nclass UploadcareGroup {\n    uuid;\n    filesCount;\n    totalSize;\n    isStored;\n    isImage;\n    cdnUrl;\n    files;\n    createdAt;\n    storedAt = null;\n    constructor(groupInfo, { baseCDN = defaultSettings.baseCDN } = {}) {\n        this.uuid = groupInfo.id;\n        this.filesCount = groupInfo.filesCount;\n        const groupFiles = groupInfo.files.filter(Boolean);\n        this.totalSize = Object.values(groupFiles).reduce((acc, file) => acc + file.size, 0);\n        this.isStored = !!groupInfo.datetimeStored;\n        this.isImage = !!Object.values(groupFiles).filter((file) => file.isImage)\n            .length;\n        this.cdnUrl = groupInfo.cdnUrl;\n        this.files = groupFiles.map((fileInfo) => new UploadcareFile(fileInfo, { baseCDN }));\n        this.createdAt = groupInfo.datetimeCreated;\n        this.storedAt = groupInfo.datetimeStored;\n    }\n}\n\n/** FileData type guard. */\nconst isFileDataArray = (data) => {\n    for (const item of data) {\n        if (!isFileData(item)) {\n            return false;\n        }\n    }\n    return true;\n};\n/** Uuid type guard. */\nconst isUuidArray = (data) => {\n    for (const item of data) {\n        if (!isUuid(item)) {\n            return false;\n        }\n    }\n    return true;\n};\n/** Url type guard. */\nconst isUrlArray = (data) => {\n    for (const item of data) {\n        if (!isUrl(item)) {\n            return false;\n        }\n    }\n    return true;\n};\n\nfunction uploadFileGroup(data, { publicKey, fileName, baseURL = defaultSettings.baseURL, secureSignature, secureExpire, store, signal, onProgress, source, integration, userAgent, retryThrottledRequestMaxTimes, retryNetworkErrorMaxTimes, contentType, multipartChunkSize = defaultSettings.multipartChunkSize, baseCDN = defaultSettings.baseCDN, checkForUrlDuplicates, saveUrlForRecurrentUploads, jsonpCallback }) {\n    if (!isFileDataArray(data) && !isUrlArray(data) && !isUuidArray(data)) {\n        throw new TypeError(`Group uploading from \"${data}\" is not supported`);\n    }\n    let progressValues;\n    let isStillComputable = true;\n    const filesCount = data.length;\n    const createProgressHandler = (size, index) => {\n        if (!onProgress)\n            return;\n        if (!progressValues) {\n            progressValues = Array(size).fill(0);\n        }\n        const normalize = (values) => values.reduce((sum, next) => sum + next) / size;\n        return (info) => {\n            if (!info.isComputable || !isStillComputable) {\n                isStillComputable = false;\n                onProgress({ isComputable: false });\n                return;\n            }\n            progressValues[index] = info.value;\n            onProgress({ isComputable: true, value: normalize(progressValues) });\n        };\n    };\n    return Promise.all(data.map((file, index) => {\n        if (isFileData(file) || isUrl(file)) {\n            return uploadFile(file, {\n                publicKey,\n                fileName,\n                baseURL,\n                secureSignature,\n                secureExpire,\n                store,\n                signal,\n                onProgress: createProgressHandler(filesCount, index),\n                source,\n                integration,\n                userAgent,\n                retryThrottledRequestMaxTimes,\n                retryNetworkErrorMaxTimes,\n                contentType,\n                multipartChunkSize,\n                baseCDN,\n                checkForUrlDuplicates,\n                saveUrlForRecurrentUploads\n            }).then((fileInfo) => fileInfo.uuid);\n        }\n        else {\n            // Do not request file info by uuid before creating group because this isn't necessary\n            return file;\n        }\n    })).then((uuids) => {\n        return group(uuids, {\n            publicKey,\n            baseURL,\n            jsonpCallback,\n            secureSignature,\n            secureExpire,\n            signal,\n            source,\n            integration,\n            userAgent,\n            retryThrottledRequestMaxTimes,\n            retryNetworkErrorMaxTimes\n        })\n            .then((groupInfo) => new UploadcareGroup(groupInfo, { baseCDN }))\n            .then((group) => {\n            onProgress && onProgress({ isComputable: true, value: 1 });\n            return group;\n        });\n    });\n}\n\n/** Populate options with settings. */\nconst populateOptionsWithSettings = (options, settings) => ({\n    ...settings,\n    ...options\n});\nclass UploadClient {\n    settings;\n    constructor(settings) {\n        this.settings = Object.assign({}, defaultSettings, settings);\n    }\n    updateSettings(newSettings) {\n        this.settings = Object.assign(this.settings, newSettings);\n    }\n    getSettings() {\n        return this.settings;\n    }\n    base(file, options = {}) {\n        const settings = this.getSettings();\n        return base(file, populateOptionsWithSettings(options, settings));\n    }\n    info(uuid, options = {}) {\n        const settings = this.getSettings();\n        return info(uuid, populateOptionsWithSettings(options, settings));\n    }\n    fromUrl(sourceUrl, options = {}) {\n        const settings = this.getSettings();\n        return fromUrl(sourceUrl, populateOptionsWithSettings(options, settings));\n    }\n    fromUrlStatus(token, options = {}) {\n        const settings = this.getSettings();\n        return fromUrlStatus(token, populateOptionsWithSettings(options, settings));\n    }\n    group(uuids, options = {}) {\n        const settings = this.getSettings();\n        return group(uuids, populateOptionsWithSettings(options, settings));\n    }\n    groupInfo(id, options = {}) {\n        const settings = this.getSettings();\n        return groupInfo(id, populateOptionsWithSettings(options, settings));\n    }\n    multipartStart(size, options = {}) {\n        const settings = this.getSettings();\n        return multipartStart(size, populateOptionsWithSettings(options, settings));\n    }\n    multipartUpload(part, url, options = {}) {\n        const settings = this.getSettings();\n        return multipartUpload(part, url, populateOptionsWithSettings(options, settings));\n    }\n    multipartComplete(uuid, options = {}) {\n        const settings = this.getSettings();\n        return multipartComplete(uuid, populateOptionsWithSettings(options, settings));\n    }\n    uploadFile(data, options = {}) {\n        const settings = this.getSettings();\n        return uploadFile(data, populateOptionsWithSettings(options, settings));\n    }\n    uploadFileGroup(data, options = {}) {\n        const settings = this.getSettings();\n        return uploadFileGroup(data, populateOptionsWithSettings(options, settings));\n    }\n    isReadyPoll(uuid, options = {}) {\n        const settings = this.getSettings();\n        return isReadyPoll(uuid, populateOptionsWithSettings(options, settings));\n    }\n}\n\nclass Queue {\n    _concurrency = 1;\n    _pending = [];\n    _running = 0;\n    _resolvers = new Map();\n    _rejectors = new Map();\n    constructor(concurrency) {\n        this._concurrency = concurrency;\n    }\n    _run() {\n        const tasksLeft = this._concurrency - this._running;\n        for (let i = 0; i < tasksLeft; i++) {\n            const task = this._pending.shift();\n            if (!task) {\n                return;\n            }\n            const resolver = this._resolvers.get(task);\n            const rejector = this._rejectors.get(task);\n            if (!resolver || !rejector)\n                throw new Error('Unexpected behavior: resolver or rejector is undefined');\n            this._running += 1;\n            task()\n                .finally(() => {\n                this._resolvers.delete(task);\n                this._rejectors.delete(task);\n                this._running -= 1;\n                this._run();\n            })\n                .then((value) => resolver(value))\n                .catch((error) => rejector(error));\n        }\n    }\n    add(task) {\n        return new Promise((resolve, reject) => {\n            this._resolvers.set(task, resolve);\n            this._rejectors.set(task, reject);\n            this._pending.push(task);\n            this._run();\n        });\n    }\n    get pending() {\n        return this._pending.length;\n    }\n    get running() {\n        return this._running;\n    }\n    set concurrency(value) {\n        this._concurrency = value;\n        this._run();\n    }\n    get concurrency() {\n        return this._concurrency;\n    }\n}\n\n/* Low-Level API */\n/** @deprecated Please use NetworkError instead. */\nconst UploadcareNetworkError = NetworkError;\n/** @deprecated Please use UploadError instead. */\nconst UploadClientError = UploadError;\n\nexport { CancelError, NetworkError, Queue, UploadClient, UploadClientError, UploadError, UploadcareError, UploadcareFile, UploadcareGroup, UploadcareNetworkError, base, fromUrl, fromUrlStatus, getUserAgent$1 as getUserAgent, group, groupInfo, info, isReadyPoll, multipartComplete, multipartStart, multipartUpload, uploadDirect, uploadFile, uploadFileGroup, uploadFromUploaded, uploadFromUrl, uploadMultipart };\n","// @ts-check\nimport { Queue } from '@uploadcare/upload-client';\n\nexport const blockCtx = () => ({});\n\n/** @param {import('./Block').Block} fnCtx */\nexport const activityBlockCtx = (fnCtx) => ({\n  ...blockCtx(),\n  '*currentActivity': '',\n  '*currentActivityParams': {},\n  '*history': [],\n  '*historyBack': null,\n  '*closeModal': () => {\n    fnCtx.set$({\n      '*modalActive': false,\n      '*currentActivity': '',\n    });\n  },\n});\n\n/** @param {import('./Block').Block} fnCtx */\nexport const uploaderBlockCtx = (fnCtx) => ({\n  ...activityBlockCtx(fnCtx),\n  '*commonProgress': 0,\n  '*uploadList': [],\n  '*focusedEntry': null,\n  '*uploadMetadata': null,\n  '*uploadQueue': new Queue(1),\n  '*uploadCollection': null,\n  /** @type {ReturnType<import('../utils/buildOutputError.js').buildCollectionFileError>[]} */\n  '*collectionErrors': [],\n  /** @type {import('../types').OutputCollectionState | null} */\n  '*collectionState': null,\n  /** @type {import('@uploadcare/upload-client').UploadcareGroup | null} */\n  '*groupInfo': null,\n  /** @type {Set<string>} */\n  '*uploadTrigger': new Set(),\n});\n","export default {\n  'locale-id': 'en',\n  'social-source-lang': 'en',\n  'upload-file': 'Upload file',\n  'upload-files': 'Upload files',\n  'choose-file': 'Choose file',\n  'choose-files': 'Choose files',\n  'drop-files-here': 'Drop files here',\n  'select-file-source': 'Select file source',\n  selected: 'Selected',\n  upload: 'Upload',\n  'add-more': 'Add more',\n  cancel: 'Cancel',\n  'start-from-cancel': 'Cancel',\n  clear: 'Clear',\n  'camera-shot': 'Shot',\n  'upload-url': 'Import',\n  'upload-url-placeholder': 'Paste link here',\n  'edit-image': 'Edit image',\n  'edit-detail': 'Details',\n  back: 'Back',\n  done: 'Done',\n  ok: 'Ok',\n  'remove-from-list': 'Remove',\n  no: 'No',\n  yes: 'Yes',\n  'confirm-your-action': 'Confirm your action',\n  'are-you-sure': 'Are you sure?',\n  'selected-count': 'Selected:',\n  'upload-error': 'Upload error',\n  'validation-error': 'Validation error',\n  'no-files': 'No files selected',\n  browse: 'Browse',\n  'not-uploaded-yet': 'Not uploaded yet...',\n  file__one: 'file',\n  file__other: 'files',\n  error__one: 'error',\n  error__other: 'errors',\n  'header-uploading': 'Uploading {{count}} {{plural:file(count)}}',\n  'header-failed': '{{count}} {{plural:error(count)}}',\n  'header-succeed': '{{count}} {{plural:file(count)}} uploaded',\n  'header-total': '{{count}} {{plural:file(count)}} selected',\n  'src-type-local': 'From device',\n  'src-type-from-url': 'From link',\n  'src-type-camera': 'Camera',\n  'src-type-draw': 'Draw',\n  'src-type-facebook': 'Facebook',\n  'src-type-dropbox': 'Dropbox',\n  'src-type-gdrive': 'Google Drive',\n  'src-type-gphotos': 'Google Photos',\n  'src-type-instagram': 'Instagram',\n  'src-type-flickr': 'Flickr',\n  'src-type-vk': 'VK',\n  'src-type-evernote': 'Evernote',\n  'src-type-box': 'Box',\n  'src-type-onedrive': 'Onedrive',\n  'src-type-huddle': 'Huddle',\n  'src-type-other': 'Other',\n  'caption-from-url': 'Import from link',\n  'caption-camera': 'Camera',\n  'caption-draw': 'Draw',\n  'caption-edit-file': 'Edit file',\n  'file-no-name': 'No name...',\n  'toggle-fullscreen': 'Toggle fullscreen',\n  'toggle-guides': 'Toggle guides',\n  rotate: 'Rotate',\n  'flip-vertical': 'Flip vertical',\n  'flip-horizontal': 'Flip horizontal',\n  apply: 'Apply',\n  brightness: 'Brightness',\n  contrast: 'Contrast',\n  saturation: 'Saturation',\n  exposure: 'Exposure',\n  gamma: 'Gamma',\n  vibrance: 'Vibrance',\n  warmth: 'Warmth',\n  enhance: 'Enhance',\n  original: 'Original',\n  resize: 'Resize image',\n  crop: 'Crop',\n  'select-color': 'Select color',\n  text: 'Text',\n  draw: 'Draw',\n  'cancel-edit': 'Cancel edit',\n  'tab-view': 'Preview',\n  'tab-details': 'Details',\n  'file-name': 'Name',\n  'file-size': 'Size',\n  'cdn-url': 'CDN URL',\n  'file-size-unknown': 'Unknown',\n  'camera-permissions-denied': 'Camera access denied',\n  'camera-permissions-prompt': 'Please allow access to the camera',\n  'camera-permissions-request': 'Request access',\n  'files-count-limit-error-title': 'Files count limit overflow',\n  'files-count-limit-error-too-few':\n    'Youve chosen {{total}} {{plural:file(total)}}. At least {{min}} {{plural:file(min)}} required.',\n  'files-count-limit-error-too-many': 'Youve chosen too many files. {{max}} {{plural:file(max)}} is maximum.',\n  'files-max-size-limit-error': 'File is too big. Max file size is {{maxFileSize}}.',\n  'has-validation-errors': 'File validation error ocurred. Please, check your files before upload.',\n  'images-only-accepted': 'Only image files are accepted.',\n  'file-type-not-allowed': 'Uploading of these file types is not allowed.',\n  'some-files-were-not-uploaded': 'Some files were not uploaded.',\n};\n","// @ts-check\n\nimport { default as en } from '../locales/file-uploader/en.js';\n\n/** @type {Map<string, LocaleDefinition>} */\nconst localeRegistry = new Map();\n/** @type {Map<string, LocaleDefinitionResolver>} */\nconst localeResolvers = new Map();\n\n/** @typedef {Record<string, string>} LocaleDefinition */\n/** @typedef {() => Promise<LocaleDefinition>} LocaleDefinitionResolver */\n\n/**\n * @param {string} localeName\n * @param {LocaleDefinition} definition\n */\nconst defineLocaleSync = (localeName, definition) => {\n  if (localeRegistry.has(localeName)) {\n    console.log(`Locale ${localeName} is already defined. Overwriting...`);\n  }\n\n  localeRegistry.set(localeName, { ...en, ...definition });\n};\n\n/**\n * @param {string} localeName\n * @param {LocaleDefinitionResolver} definitionResolver\n */\nconst defineLocaleAsync = (localeName, definitionResolver) => {\n  localeResolvers.set(localeName, definitionResolver);\n};\n\n/**\n * @param {string} localeName\n * @param {LocaleDefinition | LocaleDefinitionResolver} definitionOrResolver\n */\nexport const defineLocale = (localeName, definitionOrResolver) => {\n  if (typeof definitionOrResolver === 'function') {\n    defineLocaleAsync(localeName, definitionOrResolver);\n  } else {\n    defineLocaleSync(localeName, definitionOrResolver);\n  }\n};\n\n/**\n * @param {string} localeName\n * @returns {Promise<LocaleDefinition>}\n */\nexport const resolveLocaleDefinition = async (localeName) => {\n  if (!localeRegistry.has(localeName)) {\n    if (!localeResolvers.has(localeName)) {\n      throw new Error(`Locale ${localeName} is not defined`);\n    }\n\n    const definitionResolver = /** @type {LocaleDefinitionResolver} */ (localeResolvers.get(localeName));\n    const definition = await definitionResolver();\n    defineLocaleSync(localeName, definition);\n  }\n\n  return /** @type {LocaleDefinition} */ (localeRegistry.get(localeName));\n};\n\ndefineLocale('en', en);\n","// @ts-check\nimport { debounce } from '../blocks/utils/debounce.js';\nimport { resolveLocaleDefinition } from './localeRegistry.js';\nimport { default as en } from '../locales/file-uploader/en.js';\n\n/** @param {string} key */\nexport const localeStateKey = (key) => `*l10n/${key}`;\nexport const DEFAULT_LOCALE = 'en';\n\nexport class LocaleManager {\n  /**\n   * @private\n   * @type {import('./Block.js').Block | null}\n   */\n  _blockInstance = null;\n\n  /** @private */\n  _localeName = '';\n\n  /**\n   * @private\n   * @type {Set<() => void>}\n   */\n  _callbacks = new Set();\n\n  /**\n   * @private\n   * @type {Map<import('./Block.js').Block, Map<string, () => void>>}\n   */\n  _boundBlocks = new Map();\n\n  /** @param {import('./Block.js').Block} blockInstance */\n  constructor(blockInstance) {\n    this._blockInstance = blockInstance;\n\n    for (let [key, value] of Object.entries(en)) {\n      this._blockInstance.add(localeStateKey(key), value, false);\n    }\n\n    setTimeout(() => {\n      blockInstance.subConfigValue('localeName', async (localeName) => {\n        if (!this._blockInstance || !localeName) {\n          return;\n        }\n        this._localeName = localeName;\n        const definition = await resolveLocaleDefinition(localeName);\n        if (localeName !== DEFAULT_LOCALE && this._localeName !== localeName) {\n          return;\n        }\n\n        const overrides = this._blockInstance.cfg.localeDefinitionOverride?.[localeName];\n        for (const [key, value] of Object.entries(definition)) {\n          const overriddenValue = overrides?.[key];\n          this._blockInstance.add(localeStateKey(key), overriddenValue ?? value, true);\n          for (const callback of this._callbacks) {\n            callback();\n          }\n        }\n      });\n\n      blockInstance.subConfigValue('localeDefinitionOverride', (localeDefinitionOverride) => {\n        if (!localeDefinitionOverride) {\n          return;\n        }\n        const definition = localeDefinitionOverride[this._localeName];\n        if (!definition) {\n          return;\n        }\n        for (const [key, value] of Object.entries(definition)) {\n          this._blockInstance?.add(localeStateKey(key), value, true);\n          for (const callback of this._callbacks) {\n            callback();\n          }\n        }\n      });\n    });\n  }\n\n  /**\n   * @param {() => void} callback\n   * @returns {() => void}\n   */\n  onLocaleChange(callback) {\n    const debouncedCb = debounce(callback, 0);\n    this._callbacks.add(debouncedCb);\n    return () => {\n      this._callbacks.delete(debouncedCb);\n    };\n  }\n\n  /**\n   * @param {import('./Block.js').Block} block\n   * @param {string} key\n   * @param {() => void} resolver\n   */\n  bindL10n(block, key, resolver) {\n    block.$[key] = resolver();\n\n    if (!this._boundBlocks.has(block)) {\n      this._boundBlocks.set(block, new Map());\n    }\n\n    this._boundBlocks.get(block)?.get(key)?.();\n\n    const destroyCallback = this.onLocaleChange(() => {\n      block.$[key] = resolver();\n    });\n\n    this._boundBlocks.get(block)?.set(key, destroyCallback);\n  }\n\n  /** @param {import('./Block.js').Block} block */\n  destroyL10nBindings(block) {\n    const callbacks = this._boundBlocks.get(block);\n    if (!callbacks) {\n      return;\n    }\n    for (const callback of callbacks.values()) {\n      callback();\n    }\n    this._boundBlocks.delete(block);\n  }\n\n  destroy() {\n    this._callbacks.clear();\n  }\n}\n","// @ts-check\n\nimport { localeStateKey } from './LocaleManager.js';\n\n/**\n * @template {import('./Block.js').Block} T\n * @param {DocumentFragment} fr\n * @param {T} fnCtx\n */\nexport function l10nProcessor(fr, fnCtx) {\n  [...fr.querySelectorAll('[l10n]')].forEach((el) => {\n    let key = el.getAttribute('l10n');\n    if (!key) {\n      return;\n    }\n    let elProp = 'textContent';\n    let useAttribute = false;\n    if (key.includes(':')) {\n      const arr = key.split(':');\n      elProp = arr[0];\n      key = arr[1];\n      if (elProp.startsWith('@')) {\n        elProp = elProp.slice(1);\n        useAttribute = true;\n      }\n    }\n\n    // Check if the key is present in the local context\n    const localCtxKey = key;\n    if (fnCtx.has(localCtxKey)) {\n      fnCtx.sub(localCtxKey, (mappedKey) => {\n        if (!mappedKey) {\n          return;\n        }\n        // Store the subscription in a temporary map to be able to unsubscribe later\n        if (!fnCtx.l10nProcessorSubs.has(localCtxKey)) {\n          fnCtx.l10nProcessorSubs.set(localCtxKey, new Set());\n        }\n        const keySubs = fnCtx.l10nProcessorSubs.get(localCtxKey);\n        keySubs?.forEach(\n          /** @param {{ remove: () => void }} sub */\n          (sub) => {\n            sub.remove();\n            keySubs.delete(sub);\n            fnCtx.allSubs.delete(sub);\n          },\n        );\n        // We don't need the leading * in the key because we use the key as a local context key relative to the global state\n        const nodeStateKey = localeStateKey(mappedKey).replace('*', '');\n        // If the key is not present in the node context, add it\n        if (!fnCtx.nodeCtx.has(nodeStateKey)) {\n          fnCtx.nodeCtx.add(nodeStateKey, mappedKey);\n        }\n        // Subscribe on the global l10n key change\n        const sub = fnCtx.nodeCtx.sub(nodeStateKey, () => {\n          el[/** @type {'textContent'} */ (elProp)] = fnCtx.l10n(mappedKey);\n        });\n        keySubs?.add(sub);\n        // Store the subscription in the global context to make able Symbiote to unsubscribe it on destroy\n        fnCtx.allSubs.add(sub);\n        el.removeAttribute('l10n');\n      });\n    }\n\n    // Otherwise, assume the key is in the global context\n    const stateKey = localeStateKey(key);\n    if (!fnCtx.has(stateKey)) {\n      fnCtx.add(stateKey, '');\n    }\n    fnCtx.sub(stateKey, () => {\n      key = /** @type {string} */ (key);\n      if (useAttribute) {\n        el.setAttribute(elProp, fnCtx.l10n(key));\n      } else {\n        el[/** @type {'textContent'} */ (elProp)] = fnCtx.l10n(key);\n      }\n    });\n    el.removeAttribute('l10n');\n  });\n}\n","// @ts-check\n\n/**\n * @template {keyof import('../types').ConfigType} T\n * @param {T} key\n * @returns {`*cfg/${T}`}\n */\nexport const sharedConfigKey = (key) => `*cfg/${key}`;\n","import { PACKAGE_NAME, PACKAGE_VERSION } from '../env.js';\n\n/**\n * Trim leading `-/`, `/` and trailing `/` from CDN operation\n *\n * @param {String | unknown} [operation]\n * @returns {String}\n */\nexport const normalizeCdnOperation = (operation) => {\n  if (typeof operation !== 'string' || !operation) {\n    return '';\n  }\n  let str = operation.trim();\n  if (str.startsWith('-/')) {\n    str = str.slice(2);\n  } else if (str.startsWith('/')) {\n    str = str.slice(1);\n  }\n\n  if (str.endsWith('/')) {\n    str = str.slice(0, str.length - 1);\n  }\n  return str;\n};\n\n/**\n * Join multiple CDN operations into one string without trailing or leading delimeters\n *\n * @param {...(String | unknown)} [operations]\n * @returns {String}\n */\nexport const joinCdnOperations = (...operations) => {\n  return operations\n    .filter((op) => typeof op === 'string' && op)\n    .map((op) => normalizeCdnOperation(/** @type {String} */ (op)))\n    .join('/-/');\n};\n\n/**\n * Create string with leading `-/` from passed CDN operations. Do the same as `joinCdnOperations` but adds leading `-/`\n * and trailing `/`\n *\n * @param {...(String | unknown)} [cdnOperations] -\n * @returns {String}\n */\nexport const createCdnUrlModifiers = (...cdnOperations) => {\n  let joined = joinCdnOperations(...cdnOperations);\n  return joined ? `-/${joined}/` : '';\n};\n\n/**\n * Extract filename or file URL\n *\n * @param {String} cdnUrl\n * @returns {String}\n */\nexport function extractFilename(cdnUrl) {\n  let url = new URL(cdnUrl);\n  let noOrigin = url.pathname + url.search + url.hash;\n  let urlFilenameIdx = noOrigin.lastIndexOf('http');\n  let plainFilenameIdx = noOrigin.lastIndexOf('/');\n  let filename = '';\n\n  if (urlFilenameIdx >= 0) {\n    filename = noOrigin.slice(urlFilenameIdx);\n  } else if (plainFilenameIdx >= 0) {\n    filename = noOrigin.slice(plainFilenameIdx + 1);\n  }\n\n  return filename;\n}\n\n/**\n * Extract UUID from CDN URL\n *\n * @param {string} cdnUrl\n * @returns {string}\n */\nexport function extractUuid(cdnUrl) {\n  let url = new URL(cdnUrl);\n  let { pathname } = url;\n  const slashIndex = pathname.indexOf('/');\n  const secondSlashIndex = pathname.indexOf('/', slashIndex + 1);\n  return pathname.substring(slashIndex + 1, secondSlashIndex);\n}\n\n/**\n * Extract UUID from CDN URL\n *\n * @param {string} cdnUrl\n * @returns {string[]}\n */\nexport function extractOperations(cdnUrl) {\n  let withoutFilename = trimFilename(cdnUrl);\n  let url = new URL(withoutFilename);\n  let operationsMarker = url.pathname.indexOf('/-/');\n  if (operationsMarker === -1) {\n    return [];\n  }\n  let operationsStr = url.pathname.substring(operationsMarker);\n\n  return operationsStr\n    .split('/-/')\n    .filter(Boolean)\n    .map((operation) => normalizeCdnOperation(operation));\n}\n\n/**\n * Trim filename or file URL\n *\n * @param {String} cdnUrl\n * @returns {String}\n */\nexport function trimFilename(cdnUrl) {\n  let url = new URL(cdnUrl);\n  let filename = extractFilename(cdnUrl);\n  let filenamePathPart = isFileUrl(filename) ? splitFileUrl(filename).pathname : filename;\n\n  url.pathname = url.pathname.replace(filenamePathPart, '');\n  url.search = '';\n  url.hash = '';\n  return url.toString();\n}\n\n/**\n * Detect if filename is actually file URL\n *\n * @param {String} filename\n * @returns {Boolean}\n */\nexport function isFileUrl(filename) {\n  return filename.startsWith('http');\n}\n\n/**\n * Split file URL into the path and search parts\n *\n * @param {String} fileUrl\n * @returns {{ pathname: String; search: String; hash: String }}\n */\nexport function splitFileUrl(fileUrl) {\n  let url = new URL(fileUrl);\n  return {\n    pathname: url.origin + url.pathname || '',\n    search: url.search || '',\n    hash: url.hash || '',\n  };\n}\n\n/**\n * Create a final CDN URL with CDN modifiers and filename\n *\n * @param {String} baseCdnUrl - Base URL to CDN or Proxy, CDN modifiers and filename accepted\n * @param {String} [cdnModifiers] - CDN modifiers to apply, will be appended to `baseCdnUrl` ones\n * @param {String} [filename] - Filename for CDN or file URL for Proxy, will override one from `baseCdnUrl`\n * @returns {String}\n */\n\n// TODO eadidenko replace arg to pass the object parameter\nexport const createCdnUrl = (baseCdnUrl, cdnModifiers, filename) => {\n  let url = new URL(trimFilename(baseCdnUrl));\n  filename = filename || extractFilename(baseCdnUrl);\n  // TODO: fix double slash pathname bug (--cfg-cdn-cname: 'https://ucarecdn.com/' - trailing slash case)\n  if (url.pathname.startsWith('//')) {\n    url.pathname = url.pathname.replace('//', '/');\n  }\n  if (isFileUrl(filename)) {\n    let splitted = splitFileUrl(filename);\n    url.pathname = url.pathname + (cdnModifiers || '') + (splitted.pathname || '');\n    url.search = splitted.search;\n    url.hash = splitted.hash;\n  } else {\n    url.pathname = url.pathname + (cdnModifiers || '') + (filename || '');\n  }\n  return url.toString();\n};\n\n/**\n * Create URL for an original file on CDN\n *\n * @param {String} cdnUrl - URL to get base domain from, any pathname will be stripped\n * @param {String} uuid\n * @returns {String}\n */\nexport const createOriginalUrl = (cdnUrl, uuid) => {\n  let url = new URL(cdnUrl);\n  url.pathname = uuid + '/';\n  return url.toString();\n};\n","/**\n * @param {string} str\n * @returns {string[]}\n */\nexport const stringToArray = (str, delimiter = ',') => {\n  return str\n    .trim()\n    .split(delimiter)\n    .map((part) => part.trim())\n    .filter((part) => part.length > 0);\n};\n","// @ts-check\nimport { joinCdnOperations } from '../../../../utils/cdn-utils.js';\nimport { stringToArray } from '../../../../utils/stringToArray.js';\n\n/** @type {Record<keyof import('../types').Transformations, unknown>} */\nexport const OPERATIONS_DEFAULTS = Object.freeze({\n  brightness: 0,\n  exposure: 0,\n  gamma: 100,\n  contrast: 0,\n  saturation: 0,\n  vibrance: 0,\n  warmth: 0,\n  enhance: 0,\n  filter: 0,\n  rotate: 0,\n  mirror: false,\n  flip: false,\n  crop: undefined,\n});\n\n/** @type {readonly (keyof import('../types').Transformations)[]} */\nconst SUPPORTED_OPERATIONS_ORDERED = /** @type {const} */ ([\n  'enhance',\n  'brightness',\n  'exposure',\n  'gamma',\n  'contrast',\n  'saturation',\n  'vibrance',\n  'warmth',\n  'filter',\n  'mirror',\n  'flip',\n  'rotate',\n  'crop',\n]);\n\n/**\n * @template {keyof import('../types').Transformations} T\n * @param {T} operation\n * @param {import('../types').Transformations[T]} options\n */\nfunction transformationToStr(operation, options) {\n  if (typeof options === 'number') {\n    const value = options;\n    return OPERATIONS_DEFAULTS[operation] !== value ? `${operation}/${value}` : '';\n  }\n\n  if (typeof options === 'boolean') {\n    const value = options;\n    return OPERATIONS_DEFAULTS[operation] !== value ? `${operation}` : '';\n  }\n\n  if (operation === 'filter' && options) {\n    const { name, amount } = /** @type {NonNullable<import('../types').Transformations['filter']>} */ (options);\n    if (OPERATIONS_DEFAULTS.filter === amount) {\n      return '';\n    }\n    return `${operation}/${name}/${amount}`;\n  }\n\n  if (operation === 'crop' && options) {\n    let { dimensions, coords } = /** @type {NonNullable<import('../types').Transformations['crop']>} */ (options);\n    return `${operation}/${dimensions.join('x')}/${coords.join(',')}`;\n  }\n\n  return '';\n}\n\n/**\n * @param {import('../types').Transformations} transformations\n * @returns {string}\n */\nexport function transformationsToOperations(transformations) {\n  return joinCdnOperations(\n    ...SUPPORTED_OPERATIONS_ORDERED.filter(\n      (operation) => typeof transformations[operation] !== 'undefined' && transformations[operation] !== null,\n    )\n      .map((operation) => {\n        let options = transformations[operation];\n        return transformationToStr(operation, options);\n      })\n      .filter((str) => !!str),\n  );\n}\n\nexport const COMMON_OPERATIONS = joinCdnOperations('format/auto', 'progressive/yes');\n\n/** @param {[unknown]} arg */\nconst asNumber = ([value]) => (typeof value !== 'undefined' ? Number(value) : undefined);\nconst asBoolean = () => true;\n/** @param {[string, unknown]} arg */\nconst asFilter = ([name, amount]) => ({\n  name,\n  amount: typeof amount !== 'undefined' ? Number(amount) : 100,\n});\n\n/**\n * Docs: https://uploadcare.com/docs/transformations/image/resize-crop/#operation-crop We don't support percentages and\n * alignment presets, Because it's unclear how to handle them in the Editor UI TODO: add support for percentages and\n * alignment presets\n *\n * @param {[string, string]} arg\n */\nconst asCrop = ([dimensions, alignment]) => {\n  if (!/\\d+x\\d+/.test(dimensions) || !/\\d+,\\d+/.test(alignment)) {\n    throw new Error('Crop by aspect ratio, percentage or alignment shortcuts is not supported.');\n  }\n\n  return /** @type {{ dimensions: [number, number]; coords: [number, number] }} */ ({\n    dimensions: stringToArray(dimensions, 'x').map(Number),\n    coords: stringToArray(alignment).map(Number),\n  });\n};\n\n/**\n * @type {{\n *   [K in keyof Required<import('../types').Transformations>]: (args: any) => import('../types').Transformations[K];\n * }}\n */\nconst OPERATION_PROCESSORS = Object.freeze({\n  enhance: asNumber,\n  brightness: asNumber,\n  exposure: asNumber,\n  gamma: asNumber,\n  contrast: asNumber,\n  saturation: asNumber,\n  vibrance: asNumber,\n  warmth: asNumber,\n  filter: asFilter,\n  mirror: asBoolean,\n  flip: asBoolean,\n  rotate: asNumber,\n  crop: asCrop,\n});\n\n/**\n * @param {string[]} operations\n * @returns {import('../types.js').Transformations}\n */\nexport function operationsToTransformations(operations) {\n  /** @type {Record<string, unknown>} */\n  const transformations = {};\n  for (const operation of operations) {\n    const [name, ...args] = operation.split('/');\n    if (!SUPPORTED_OPERATIONS_ORDERED.includes(name)) {\n      continue;\n    }\n    const operationName = /** @type {(typeof SUPPORTED_OPERATIONS_ORDERED)[number]} */ (name);\n    const processor = OPERATION_PROCESSORS[operationName];\n    try {\n      const value = processor(args);\n      transformations[operationName] = value;\n    } catch (err) {\n      console.warn(\n        [\n          `Failed to parse URL operation \"${operation}\". It will be ignored.`,\n          err instanceof Error ? `Error message: \"${err.message}\"` : err,\n          'If you need this functionality, please feel free to open an issue at https://github.com/uploadcare/blocks/issues/new',\n        ].join('\\n'),\n      );\n    }\n  }\n\n  return /** @type {import('../types.js').Transformations} */ (transformations);\n}\n","// @ts-check\nimport { OPERATIONS_DEFAULTS } from './lib/transformationUtils.js';\n\nexport const TabId = Object.freeze({\n  CROP: 'crop',\n  TUNING: 'tuning',\n  FILTERS: 'filters',\n});\nexport const ALL_TABS = [TabId.CROP, TabId.TUNING, TabId.FILTERS];\n\nexport const ALL_COLOR_OPERATIONS = [\n  'brightness',\n  'exposure',\n  'gamma',\n  'contrast',\n  'saturation',\n  'vibrance',\n  'warmth',\n  'enhance',\n];\n\nexport const ALL_FILTERS = [\n  'adaris',\n  'briaril',\n  'calarel',\n  'carris',\n  'cynarel',\n  'cyren',\n  'elmet',\n  'elonni',\n  'enzana',\n  'erydark',\n  'fenralan',\n  'ferand',\n  'galen',\n  'gavin',\n  'gethriel',\n  'iorill',\n  'iothari',\n  'iselva',\n  'jadis',\n  'lavra',\n  'misiara',\n  'namala',\n  'nerion',\n  'nethari',\n  'pamaya',\n  'sarnar',\n  'sedis',\n  'sewen',\n  'sorahel',\n  'sorlen',\n  'tarian',\n  'thellassan',\n  'varriel',\n  'varven',\n  'vevera',\n  'virkas',\n  'yedis',\n  'yllara',\n  'zatvel',\n  'zevcen',\n];\n\nexport const ALL_CROP_OPERATIONS = ['rotate', 'mirror', 'flip'];\n\n/** KeypointsNumber is the number of keypoints loaded from each side of zero, not total number */\nexport const COLOR_OPERATIONS_CONFIG = Object.freeze({\n  brightness: {\n    zero: OPERATIONS_DEFAULTS.brightness,\n    range: [-100, 100],\n    keypointsNumber: 2,\n  },\n  exposure: {\n    zero: OPERATIONS_DEFAULTS.exposure,\n    range: [-500, 500],\n    keypointsNumber: 2,\n  },\n  gamma: {\n    zero: OPERATIONS_DEFAULTS.gamma,\n    range: [0, 1000],\n    keypointsNumber: 2,\n  },\n  contrast: {\n    zero: OPERATIONS_DEFAULTS.contrast,\n    range: [-100, 500],\n    keypointsNumber: 2,\n  },\n  saturation: {\n    zero: OPERATIONS_DEFAULTS.saturation,\n    range: [-100, 500],\n    keypointsNumber: 1,\n  },\n  vibrance: {\n    zero: OPERATIONS_DEFAULTS.vibrance,\n    range: [-100, 500],\n    keypointsNumber: 1,\n  },\n  warmth: {\n    zero: OPERATIONS_DEFAULTS.warmth,\n    range: [-100, 100],\n    keypointsNumber: 1,\n  },\n  enhance: {\n    zero: OPERATIONS_DEFAULTS.enhance,\n    range: [0, 100],\n    keypointsNumber: 1,\n  },\n  filter: {\n    zero: OPERATIONS_DEFAULTS.filter,\n    range: [0, 100],\n    keypointsNumber: 1,\n  },\n});\n","// @ts-check\n\n/** @param {string} value */\nexport const deserealizeCsv = (value) => {\n  if (!value) {\n    return [];\n  }\n\n  return value.split(',').map((item) => item.trim());\n};\n\n/** @param {unknown[]} value */\nexport const serializeCsv = (value) => {\n  if (!value) {\n    return '';\n  }\n\n  return value.join(',');\n};\n","// @ts-check\n\nimport { ALL_TABS } from '../CloudImageEditor/src/toolbar-constants.js';\nimport { serializeCsv } from '../utils/comma-separated.js';\n\nexport const DEFAULT_CDN_CNAME = 'https://ucarecdn.com';\nexport const DEFAULT_BASE_URL = 'https://upload.uploadcare.com';\nexport const DEFAULT_SOCIAL_BASE_URL = 'https://social.uploadcare.com';\n\n/** @type {import('../../types/exported').ConfigType} */\nexport const initialConfig = {\n  pubkey: '',\n  multiple: true,\n  multipleMin: 0,\n  multipleMax: Number.MAX_SAFE_INTEGER,\n\n  confirmUpload: false,\n  imgOnly: false,\n  accept: '',\n  externalSourcesPreferredTypes: '',\n  store: 'auto',\n  cameraMirror: false,\n  cameraCapture: '',\n  sourceList: 'local, url, camera, dropbox, gdrive',\n  cloudImageEditorTabs: serializeCsv(ALL_TABS),\n  maxLocalFileSizeBytes: 0,\n  thumbSize: 76,\n  showEmptyList: false,\n  useLocalImageEditor: false,\n  useCloudImageEditor: true,\n  removeCopyright: false,\n  cropPreset: '',\n  imageShrink: '',\n\n  modalScrollLock: true,\n  modalBackdropStrokes: false,\n\n  sourceListWrap: true,\n\n  remoteTabSessionKey: '',\n  cdnCname: DEFAULT_CDN_CNAME,\n  baseUrl: DEFAULT_BASE_URL,\n  socialBaseUrl: DEFAULT_SOCIAL_BASE_URL,\n  secureSignature: '',\n  secureExpire: '',\n  secureDeliveryProxy: '',\n  retryThrottledRequestMaxTimes: 1,\n  multipartMinFileSize: 26214400,\n  multipartChunkSize: 5242880,\n  maxConcurrentRequests: 10,\n  multipartMaxConcurrentRequests: 4,\n  multipartMaxAttempts: 3,\n  checkForUrlDuplicates: false,\n  saveUrlForRecurrentUploads: false,\n\n  groupOutput: false,\n  userAgentIntegration: '',\n  debug: false,\n\n  metadata: null,\n  localeName: 'en',\n  localeDefinitionOverride: null,\n  iconHrefResolver: null,\n};\n","// @ts-check\nimport { BaseComponent, Data } from '@symbiotejs/symbiote';\nimport { EventEmitter } from '../blocks/UploadCtxProvider/EventEmitter.js';\nimport { WindowHeightTracker } from '../utils/WindowHeightTracker.js';\nimport { getLocaleDirection } from '../utils/getLocaleDirection.js';\nimport { getPluralForm } from '../utils/getPluralForm.js';\nimport { applyTemplateData, getPluralObjects } from '../utils/template-utils.js';\nimport { waitForAttribute } from '../utils/waitForAttribute.js';\nimport { blockCtx } from './CTX.js';\nimport { LocaleManager, localeStateKey } from './LocaleManager.js';\nimport { l10nProcessor } from './l10nProcessor.js';\nimport { sharedConfigKey } from './sharedConfigKey.js';\nimport { initialConfig } from '../blocks/Config/initialConfig.js';\n\nconst TAG_PREFIX = 'lr-';\n\n// @ts-ignore TODO: fix this\nexport class Block extends BaseComponent {\n  /** @type {string | null} */\n  static StateConsumerScope = null;\n  static className = '';\n  requireCtxName = false;\n  allowCustomTemplate = true;\n  /** @type {import('./ActivityBlock.js').ActivityType} */\n  activityType = null;\n\n  init$ = blockCtx();\n\n  /**\n   * @param {String} str\n   * @param {{ [key: string]: string | number }} variables\n   * @returns {String}\n   */\n  l10n(str, variables = {}) {\n    if (!str) {\n      return '';\n    }\n    let template = this.$[localeStateKey(str)] || str;\n    let pluralObjects = getPluralObjects(template);\n    for (let pluralObject of pluralObjects) {\n      variables[pluralObject.variable] = this.pluralize(\n        pluralObject.pluralKey,\n        Number(variables[pluralObject.countVariable]),\n      );\n    }\n    let result = applyTemplateData(template, variables);\n    return result;\n  }\n\n  /**\n   * @param {string} key\n   * @param {number} count\n   * @returns {string}\n   */\n  pluralize(key, count) {\n    const locale = this.l10n('locale-id') || 'en';\n    const pluralForm = getPluralForm(locale, count);\n    return this.l10n(`${key}__${pluralForm}`);\n  }\n\n  /**\n   * @param {string} key\n   * @param {() => void} resolver\n   */\n  bindL10n(key, resolver) {\n    this.localeManager?.bindL10n(this, key, resolver);\n  }\n\n  constructor() {\n    super();\n    /** @type {Map<string, Set<{ remove: () => void }>>} */\n    this.l10nProcessorSubs = new Map();\n    // @ts-ignore TODO: fix this\n    this.addTemplateProcessor(l10nProcessor);\n  }\n\n  /**\n   * @param {Parameters<import('../blocks/UploadCtxProvider/EventEmitter.js').EventEmitter['emit']>[0]} type\n   * @param {Parameters<import('../blocks/UploadCtxProvider/EventEmitter.js').EventEmitter['emit']>[1]} [payload]\n   * @param {Parameters<import('../blocks/UploadCtxProvider/EventEmitter.js').EventEmitter['emit']>[2]} [options]\n   */\n  emit(type, payload, options) {\n    /** @type {import('../blocks/UploadCtxProvider/EventEmitter.js').EventEmitter} */\n    const eventEmitter = this.has('*eventEmitter') && this.$['*eventEmitter'];\n    if (!eventEmitter) {\n      return;\n    }\n    eventEmitter.emit(type, payload, options);\n  }\n\n  /**\n   * @param {(block: Block) => boolean} callback\n   * @returns {Boolean}\n   */\n  hasBlockInCtx(callback) {\n    // @ts-ignore TODO: fix this\n    /** @type {Set} */\n    let blocksRegistry = this.$['*blocksRegistry'];\n    for (let block of blocksRegistry) {\n      if (callback(block)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * @param {String} prop\n   * @param {any} newVal\n   */\n  setOrAddState(prop, newVal) {\n    this.add$(\n      {\n        [prop]: newVal,\n      },\n      true,\n    );\n  }\n\n  /** @param {import('./ActivityBlock.js').ActivityType} activityType */\n  setActivity(activityType) {\n    if (this.hasBlockInCtx((b) => b.activityType === activityType)) {\n      this.$['*currentActivity'] = activityType;\n      return;\n    }\n    console.warn(`Activity type \"${activityType}\" not found in the context`);\n  }\n\n  connectedCallback() {\n    const className = /** @type {typeof Block} */ (this.constructor).className;\n    if (className) {\n      this.classList.toggle(`${TAG_PREFIX}${className}`, true);\n    }\n\n    if (this.hasAttribute('retpl')) {\n      // @ts-ignore TODO: fix this\n      this.constructor['template'] = null;\n      this.processInnerHtml = true;\n    }\n    if (this.requireCtxName) {\n      waitForAttribute({\n        element: this,\n        attribute: 'ctx-name',\n        onSuccess: () => {\n          // async wait for ctx-name attribute to be set, needed for Angular because it sets attributes after mount\n          // TODO: should be moved to the symbiote core\n          super.connectedCallback();\n        },\n        onTimeout: () => {\n          console.error('Attribute `ctx-name` is required and it is not set.');\n        },\n      });\n    } else {\n      super.connectedCallback();\n    }\n\n    WindowHeightTracker.registerClient(this);\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    WindowHeightTracker.unregisterClient(this);\n  }\n\n  initCallback() {\n    if (!this.has('*blocksRegistry')) {\n      this.add('*blocksRegistry', new Set());\n    }\n\n    let blocksRegistry = this.$['*blocksRegistry'];\n    blocksRegistry.add(this);\n\n    if (!this.has('*eventEmitter')) {\n      this.add('*eventEmitter', new EventEmitter(this.debugPrint.bind(this)));\n    }\n    if (!this.has('*localeManager')) {\n      this.add('*localeManager', new LocaleManager(this));\n    }\n\n    this.sub(localeStateKey('locale-id'), (localeId) => {\n      this.style.direction = getLocaleDirection(localeId);\n    });\n  }\n\n  /** @returns {LocaleManager | null} */\n  get localeManager() {\n    return this.has('*localeManager') ? this.$['*localeManager'] : null;\n  }\n\n  destroyCallback() {\n    /** @type {Set<Block>} */\n    let blocksRegistry = this.$['*blocksRegistry'];\n    blocksRegistry.delete(this);\n\n    this.localeManager?.destroyL10nBindings(this);\n    this.l10nProcessorSubs = new Map();\n\n    // Destroy local context\n    // TODO: this should be done inside symbiote\n    Data.deleteCtx(this);\n\n    if (blocksRegistry.size === 0) {\n      setTimeout(() => {\n        // Destroy global context after all blocks are destroyed and all callbacks are run\n        this.destroyCtxCallback();\n      }, 0);\n    }\n  }\n\n  /**\n   * Called when the last block is removed from the context. Note that inheritors must run their callback before that.\n   *\n   * @protected\n   */\n  destroyCtxCallback() {\n    Data.deleteCtx(this.ctxName);\n\n    this.localeManager?.destroy();\n  }\n\n  /**\n   * @param {Number} bytes\n   * @param {Number} [decimals]\n   */\n  fileSizeFmt(bytes, decimals = 2) {\n    let units = ['B', 'KB', 'MB', 'GB', 'TB'];\n    /**\n     * @param {String} str\n     * @returns {String}\n     */\n    if (bytes === 0) {\n      return `0 ${units[0]}`;\n    }\n    let k = 1024;\n    let dm = decimals < 0 ? 0 : decimals;\n    let i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / k ** i).toFixed(dm)) + ' ' + units[i];\n  }\n\n  /**\n   * @param {String} url\n   * @returns {String}\n   */\n  proxyUrl(url) {\n    let previewProxy = this.cfg.secureDeliveryProxy;\n    if (!previewProxy) {\n      return url;\n    }\n    return applyTemplateData(\n      previewProxy,\n      { previewUrl: url },\n      { transform: (value) => window.encodeURIComponent(value) },\n    );\n  }\n\n  /** @returns {import('../types').ConfigType} } */\n  get cfg() {\n    if (!this.__cfgProxy) {\n      let o = Object.create(null);\n      /** @private */\n      this.__cfgProxy = new Proxy(o, {\n        set: (obj, key, value) => {\n          if (typeof key !== 'string') {\n            return false;\n          }\n          const sharedKey = sharedConfigKey(/** @type {keyof import('../types').ConfigType} */ (key));\n          if (!this.has(sharedKey)) {\n            this.add(sharedKey, initialConfig[/** @type {keyof import('../types').ConfigType} */ (key)]);\n          }\n          this.$[sharedKey] = value;\n          return true;\n        },\n        /**\n         * @param {never} obj\n         * @param {keyof import('../types').ConfigType} key\n         */\n        get: (obj, key) => {\n          const sharedKey = sharedConfigKey(key);\n          if (!this.has(sharedKey)) {\n            this.add(sharedKey, initialConfig[key]);\n          }\n          return this.$[sharedConfigKey(key)];\n        },\n      });\n    }\n    return this.__cfgProxy;\n  }\n\n  /**\n   * @template {keyof import('../types').ConfigType} T\n   * @param {T} key\n   * @param {(value: import('../types').ConfigType[T]) => void} callback\n   */\n  subConfigValue(key, callback) {\n    const sharedKey = sharedConfigKey(key);\n    if (!this.has(sharedKey)) {\n      this.add(sharedKey, initialConfig[key]);\n    }\n    this.sub(sharedKey, callback);\n  }\n\n  /** @param {unknown[]} args */\n  debugPrint(...args) {\n    if (!this.cfg.debug) {\n      return;\n    }\n    let consoleArgs = args;\n    if (typeof args?.[0] === 'function') {\n      const resolver = args[0];\n      consoleArgs = resolver();\n    }\n    console.log(`[${this.ctxName}]`, ...consoleArgs);\n  }\n\n  /** @param {String} [name] */\n  static reg(name) {\n    if (!name) {\n      super.reg();\n      return;\n    }\n    super.reg(name.startsWith(TAG_PREFIX) ? name : TAG_PREFIX + name);\n  }\n}\n\nexport { BaseComponent };\n","// @ts-check\nimport { debounce } from '../blocks/utils/debounce.js';\nimport { EventType } from '../blocks/UploadCtxProvider/EventEmitter.js';\nimport { Block } from './Block.js';\nimport { activityBlockCtx } from './CTX.js';\n\nconst ACTIVE_ATTR = 'active';\nconst ACTIVE_PROP = '___ACTIVITY_IS_ACTIVE___';\n\nexport class ActivityBlock extends Block {\n  historyTracked = false;\n  init$ = activityBlockCtx(this);\n\n  _debouncedHistoryFlush = debounce(this._historyFlush.bind(this), 10);\n\n  /** @private */\n  _deactivate() {\n    let actDesc = ActivityBlock._activityCallbacks.get(this);\n    this[ACTIVE_PROP] = false;\n    this.removeAttribute(ACTIVE_ATTR);\n    actDesc?.deactivateCallback?.();\n  }\n\n  /** @private */\n  _activate() {\n    let actDesc = ActivityBlock._activityCallbacks.get(this);\n    this.$['*historyBack'] = this.historyBack.bind(this);\n    /** @private */\n    this[ACTIVE_PROP] = true;\n    this.setAttribute(ACTIVE_ATTR, '');\n    actDesc?.activateCallback?.();\n\n    this._debouncedHistoryFlush();\n\n    this.emit(EventType.ACTIVITY_CHANGE, {\n      activity: this.activityType,\n    });\n  }\n\n  initCallback() {\n    super.initCallback();\n    if (this.hasAttribute('current-activity')) {\n      this.sub('*currentActivity', (/** @type {String} */ val) => {\n        this.setAttribute('current-activity', val);\n      });\n    }\n\n    // TODO: rename activityType to activityId\n    if (this.activityType) {\n      if (!this.hasAttribute('activity')) {\n        this.setAttribute('activity', this.activityType);\n      }\n      this.sub('*currentActivity', (/** @type {String} */ val) => {\n        if (this.activityType !== val && this[ACTIVE_PROP]) {\n          this._deactivate();\n        } else if (this.activityType === val && !this[ACTIVE_PROP]) {\n          this._activate();\n        }\n\n        if (!val) {\n          this.$['*history'] = [];\n        }\n      });\n\n      if (this.has('*modalActive')) {\n        this.sub('*modalActive', (modalActive) => {\n          if (!modalActive && this.activityType === this.$['*currentActivity']) {\n            this.$['*currentActivity'] = null;\n          }\n        });\n      }\n    }\n  }\n\n  /** @private */\n  _historyFlush() {\n    let history = this.$['*history'];\n    if (history) {\n      if (history.length > 10) {\n        history = history.slice(history.length - 11, history.length - 1);\n      }\n      if (this.historyTracked && history[history.length - 1] !== this.activityType) {\n        history.push(this.activityType);\n      }\n      this.$['*history'] = history;\n    }\n  }\n\n  /** @private */\n  _isActivityRegistered() {\n    return this.activityType && ActivityBlock._activityCallbacks.has(this);\n  }\n\n  /**\n   * @private\n   * @type {Map<\n   *   ActivityBlock,\n   *   { activateCallback: (() => void) | undefined; deactivateCallback: (() => void) | undefined }\n   * >}\n   */\n  static _activityCallbacks = new Map();\n\n  get isActivityActive() {\n    return this[ACTIVE_PROP];\n  }\n\n  get couldOpenActivity() {\n    return true;\n  }\n\n  /**\n   * TODO: remove name argument\n   *\n   * @param {String} name\n   * @param {Object} [options]\n   * @param {() => void} [options.onActivate]\n   * @param {() => void} [options.onDeactivate]\n   */\n  registerActivity(name, options = {}) {\n    const { onActivate, onDeactivate } = options;\n    ActivityBlock._activityCallbacks.set(this, {\n      activateCallback: onActivate,\n      deactivateCallback: onDeactivate,\n    });\n  }\n\n  unregisterActivity() {\n    if (this.isActivityActive) {\n      this._deactivate();\n    }\n    ActivityBlock._activityCallbacks.delete(this);\n  }\n\n  destroyCallback() {\n    super.destroyCallback();\n    this._isActivityRegistered() && this.unregisterActivity();\n\n    /** @type {string | null} */\n    const currentActivity = this.$['*currentActivity'];\n\n    /** @type {Set<import('./Block').Block>} */\n    let blocksRegistry = this.$['*blocksRegistry'];\n    const hasCurrentActivityInCtx = !![...blocksRegistry].find(\n      (block) => block instanceof ActivityBlock && block.activityType === currentActivity,\n    );\n\n    if (!hasCurrentActivityInCtx) {\n      this.$['*currentActivity'] = null;\n    }\n  }\n\n  get activityKey() {\n    return this.ctxName + this.activityType;\n  }\n\n  get activityParams() {\n    return this.$['*currentActivityParams'];\n  }\n\n  /** @type {String} */\n  get initActivity() {\n    return this.getCssData('--cfg-init-activity');\n  }\n\n  /** @type {String} */\n  get doneActivity() {\n    return this.getCssData('--cfg-done-activity');\n  }\n\n  historyBack() {\n    /** @type {String[]} */\n    let history = this.$['*history'];\n    if (history) {\n      let nextActivity = history.pop();\n      while (nextActivity === this.activityType) {\n        nextActivity = history.pop();\n      }\n      let couldOpenActivity = !!nextActivity;\n      if (nextActivity) {\n        /** @type {Set<ActivityBlock>} */\n        let blocksRegistry = this.$['*blocksRegistry'];\n        const nextActivityBlock = [...blocksRegistry].find((block) => block.activityType === nextActivity);\n        couldOpenActivity = nextActivityBlock?.couldOpenActivity ?? false;\n      }\n      nextActivity = couldOpenActivity ? nextActivity : undefined;\n      this.$['*currentActivity'] = nextActivity;\n      this.$['*history'] = history;\n      if (!nextActivity) {\n        this.setOrAddState('*modalActive', false);\n      }\n    }\n  }\n}\n\nActivityBlock.activities = Object.freeze({\n  START_FROM: 'start-from',\n  CAMERA: 'camera',\n  DRAW: 'draw',\n  UPLOAD_LIST: 'upload-list',\n  URL: 'url',\n  CONFIRMATION: 'confirmation',\n  CLOUD_IMG_EDIT: 'cloud-image-edit',\n  EXTERNAL: 'external',\n  DETAILS: 'details',\n});\n\n/** @typedef {(typeof ActivityBlock)['activities'][keyof (typeof ActivityBlock)['activities']] | null} ActivityType */\n","export const CROP_PADDING = 20;\nexport const THUMB_CORNER_SIZE = 24;\nexport const THUMB_SIDE_SIZE = 34;\nexport const THUMB_STROKE_WIDTH = 3;\nexport const THUMB_OFFSET = THUMB_STROKE_WIDTH / 2;\n\nexport const GUIDE_STROKE_WIDTH = 1;\nexport const GUIDE_THIRD = 100 / 3;\nexport const MIN_CROP_SIZE = 1;\nexport const MAX_INTERACTION_SIZE = 24;\nexport const MIN_INTERACTION_SIZE = 6;\n","// @ts-check\nimport { MIN_CROP_SIZE, THUMB_CORNER_SIZE, THUMB_OFFSET, THUMB_SIDE_SIZE } from './cropper-constants.js';\n\n/**\n * @param {SVGElement} node\n * @param {{ [key: String]: String | Number }} attrs\n */\nexport function setSvgNodeAttrs(node, attrs) {\n  for (let p in attrs) node.setAttributeNS(null, p, attrs[p].toString());\n}\n\n/**\n * @param {String} name\n * @param {{ [key: String]: String | Number }} attrs\n * @returns {SVGElement}\n */\nexport function createSvgNode(name, attrs = {}) {\n  let node = document.createElementNS('http://www.w3.org/2000/svg', name);\n  setSvgNodeAttrs(node, attrs);\n  return node;\n}\n\n/**\n * @param {import('./types.js').Rectangle} rect\n * @param {import('./types.js').Direction} direction\n * @param {number} sizeMultiplier\n */\nexport function cornerPath(rect, direction, sizeMultiplier) {\n  let { x, y, width, height } = rect;\n\n  let wMul = direction.includes('w') ? 0 : 1;\n  let hMul = direction.includes('n') ? 0 : 1;\n  let xSide = [-1, 1][wMul];\n  let ySide = [-1, 1][hMul];\n\n  let p1 = [\n    x + wMul * width + THUMB_OFFSET * xSide,\n    y + hMul * height + THUMB_OFFSET * ySide - THUMB_CORNER_SIZE * sizeMultiplier * ySide,\n  ];\n  let p2 = [x + wMul * width + THUMB_OFFSET * xSide, y + hMul * height + THUMB_OFFSET * ySide];\n  let p3 = [\n    x + wMul * width - THUMB_CORNER_SIZE * sizeMultiplier * xSide + THUMB_OFFSET * xSide,\n    y + hMul * height + THUMB_OFFSET * ySide,\n  ];\n\n  let path = `M ${p1[0]} ${p1[1]} L ${p2[0]} ${p2[1]} L ${p3[0]} ${p3[1]}`;\n  let center = p2;\n\n  return {\n    d: path,\n    center,\n  };\n}\n\n/**\n * @param {import('./types.js').Rectangle} rect\n * @param {Extract<import('./types.js').Direction, 'n' | 's' | 'w' | 'e'>} direction\n * @param {number} sizeMultiplier\n */\nexport function sidePath(rect, direction, sizeMultiplier) {\n  let { x, y, width, height } = rect;\n\n  let wMul = ['n', 's'].includes(direction)\n    ? 0.5\n    : { w: 0, e: 1 }[/** @type {Extract<import('./types.js').Direction, 'w' | 'e'>} */ (direction)];\n  let hMul = ['w', 'e'].includes(direction)\n    ? 0.5\n    : { n: 0, s: 1 }[/** @type {Extract<import('./types.js').Direction, 'n' | 's'>} */ (direction)];\n  let xSide = [-1, 1][wMul];\n  let ySide = [-1, 1][hMul];\n\n  let p1, p2;\n  if (['n', 's'].includes(direction)) {\n    p1 = [x + wMul * width - (THUMB_SIDE_SIZE * sizeMultiplier) / 2, y + hMul * height + THUMB_OFFSET * ySide];\n    p2 = [x + wMul * width + (THUMB_SIDE_SIZE * sizeMultiplier) / 2, y + hMul * height + THUMB_OFFSET * ySide];\n  } else {\n    p1 = [x + wMul * width + THUMB_OFFSET * xSide, y + hMul * height - (THUMB_SIDE_SIZE * sizeMultiplier) / 2];\n    p2 = [x + wMul * width + THUMB_OFFSET * xSide, y + hMul * height + (THUMB_SIDE_SIZE * sizeMultiplier) / 2];\n  }\n  let path = `M ${p1[0]} ${p1[1]} L ${p2[0]} ${p2[1]}`;\n  let center = [p2[0] - (p2[0] - p1[0]) / 2, p2[1] - (p2[1] - p1[1]) / 2];\n\n  return { d: path, center };\n}\n\n/** @param {import('./types.js').Direction} direction */\nexport function thumbCursor(direction) {\n  if (direction === '') {\n    return 'move';\n  }\n  if (['e', 'w'].includes(direction)) {\n    return 'ew-resize';\n  }\n  if (['n', 's'].includes(direction)) {\n    return 'ns-resize';\n  }\n  if (['nw', 'se'].includes(direction)) {\n    return 'nwse-resize';\n  }\n  return 'nesw-resize';\n}\n\n/**\n * @param {{\n *   rect: import('./types.js').Rectangle;\n *   delta: [Number, Number];\n *   imageBox: import('./types.js').Rectangle;\n * }} options\n */\nexport function moveRect({ rect, delta: [dx, dy], imageBox }) {\n  return constraintRect(\n    {\n      ...rect,\n      x: rect.x + dx,\n      y: rect.y + dy,\n    },\n    imageBox,\n  );\n}\n\n/**\n * @param {import('./types.js').Rectangle} rect1\n * @param {import('./types.js').Rectangle} rect2\n */\nexport function constraintRect(rect1, rect2) {\n  let { x } = rect1;\n  let { y } = rect1;\n  if (rect1.x < rect2.x) {\n    x = rect2.x;\n  } else if (rect1.x + rect1.width > rect2.x + rect2.width) {\n    x = rect2.x + rect2.width - rect1.width;\n  }\n  if (rect1.y < rect2.y) {\n    y = rect2.y;\n  } else if (rect1.y + rect1.height > rect2.y + rect2.height) {\n    y = rect2.y + rect2.height - rect1.height;\n  }\n\n  return {\n    ...rect1,\n    x,\n    y,\n  };\n}\n\n/**\n * @param {{\n *   rect: import('./types.js').Rectangle;\n *   delta: [Number, Number];\n *   aspectRatio?: number;\n *   imageBox: import('./types.js').Rectangle;\n * }} options\n */\nfunction resizeNorth({ rect, delta, aspectRatio, imageBox }) {\n  const [, dy] = delta;\n  let { y, width, height } = rect;\n\n  y += dy;\n  height -= dy;\n  if (aspectRatio) {\n    width = height * aspectRatio;\n  }\n  let x = rect.x + rect.width / 2 - width / 2;\n  if (y <= imageBox.y) {\n    y = imageBox.y;\n    height = rect.y + rect.height - y;\n    if (aspectRatio) {\n      width = height * aspectRatio;\n      x = rect.x + rect.width / 2 - width / 2;\n    }\n  }\n  if (x <= imageBox.x) {\n    x = imageBox.x;\n    y = rect.y + rect.height - height;\n  }\n  if (x + width >= imageBox.x + imageBox.width) {\n    x = Math.max(imageBox.x, imageBox.x + imageBox.width - width);\n    width = imageBox.x + imageBox.width - x;\n    if (aspectRatio) {\n      height = width / aspectRatio;\n    }\n    y = rect.y + rect.height - height;\n  }\n  if (height < MIN_CROP_SIZE) {\n    height = MIN_CROP_SIZE;\n    if (aspectRatio) {\n      width = height * aspectRatio;\n      x = rect.x + rect.width / 2 - width / 2;\n    }\n    y = rect.y + rect.height - height;\n  }\n  if (width < MIN_CROP_SIZE) {\n    width = MIN_CROP_SIZE;\n    if (aspectRatio) {\n      height = width / aspectRatio;\n      x = rect.x + rect.width / 2 - width / 2;\n    }\n    y = rect.y + rect.height - height;\n  }\n\n  return { x, y, width, height };\n}\n\n/**\n * @param {{\n *   rect: import('./types.js').Rectangle;\n *   delta: [Number, Number];\n *   aspectRatio?: number;\n *   imageBox: import('./types.js').Rectangle;\n * }} options\n */\nfunction resizeWest({ rect, delta, aspectRatio, imageBox }) {\n  const [dx] = delta;\n  let { x, width, height } = rect;\n\n  x += dx;\n  width -= dx;\n  if (aspectRatio) {\n    height = width / aspectRatio;\n  }\n  let y = rect.y + rect.height / 2 - height / 2;\n  if (x <= imageBox.x) {\n    x = imageBox.x;\n    width = rect.x + rect.width - x;\n    if (aspectRatio) {\n      height = width / aspectRatio;\n      y = rect.y + rect.height / 2 - height / 2;\n    }\n  }\n  if (y <= imageBox.y) {\n    y = imageBox.y;\n    x = rect.x + rect.width - width;\n  }\n  if (y + height >= imageBox.y + imageBox.height) {\n    y = Math.max(imageBox.y, imageBox.y + imageBox.height - height);\n    height = imageBox.y + imageBox.height - y;\n    if (aspectRatio) {\n      width = height * aspectRatio;\n    }\n    x = rect.x + rect.width - width;\n  }\n  if (height < MIN_CROP_SIZE) {\n    height = MIN_CROP_SIZE;\n    if (aspectRatio) {\n      width = height * aspectRatio;\n    }\n    y = rect.y + rect.height / 2 - height / 2;\n    x = rect.x + rect.width - width;\n  }\n  if (width < MIN_CROP_SIZE) {\n    width = MIN_CROP_SIZE;\n    if (aspectRatio) {\n      height = width / aspectRatio;\n    }\n    y = rect.y + rect.height / 2 - height / 2;\n    x = rect.x + rect.width - width;\n  }\n\n  return { x, y, width, height };\n}\n\n/**\n * @param {{\n *   rect: import('./types.js').Rectangle;\n *   delta: [Number, Number];\n *   aspectRatio?: number;\n *   imageBox: import('./types.js').Rectangle;\n * }} options\n */\nfunction resizeSouth({ rect, delta, aspectRatio, imageBox }) {\n  const [, dy] = delta;\n  let { y, width, height } = rect;\n\n  height += dy;\n  if (aspectRatio) {\n    width = height * aspectRatio;\n  }\n  let x = rect.x + rect.width / 2 - width / 2;\n  if (y + height >= imageBox.y + imageBox.height) {\n    height = imageBox.y + imageBox.height - y;\n    if (aspectRatio) {\n      width = height * aspectRatio;\n    }\n    x = rect.x + rect.width / 2 - width / 2;\n  }\n  if (x <= imageBox.x) {\n    x = imageBox.x;\n    y = rect.y;\n  }\n  if (x + width >= imageBox.x + imageBox.width) {\n    x = Math.max(imageBox.x, imageBox.x + imageBox.width - width);\n    width = imageBox.x + imageBox.width - x;\n    if (aspectRatio) {\n      height = width / aspectRatio;\n    }\n    y = rect.y;\n  }\n  if (height < MIN_CROP_SIZE) {\n    height = MIN_CROP_SIZE;\n    if (aspectRatio) {\n      width = height * aspectRatio;\n    }\n    x = rect.x + rect.width / 2 - width / 2;\n  }\n  if (width < MIN_CROP_SIZE) {\n    width = MIN_CROP_SIZE;\n    if (aspectRatio) {\n      height = width / aspectRatio;\n    }\n    x = rect.x + rect.width / 2 - width / 2;\n  }\n\n  return { x, y, width, height };\n}\n\n/**\n * @param {{\n *   rect: import('./types.js').Rectangle;\n *   delta: [Number, Number];\n *   aspectRatio?: number;\n *   imageBox: import('./types.js').Rectangle;\n * }} options\n */\nfunction resizeEast({ rect, delta, aspectRatio, imageBox }) {\n  const [dx] = delta;\n  let { x, width, height } = rect;\n\n  width += dx;\n  if (aspectRatio) {\n    height = width / aspectRatio;\n  }\n  let y = rect.y + rect.height / 2 - height / 2;\n  if (x + width >= imageBox.x + imageBox.width) {\n    width = imageBox.x + imageBox.width - x;\n    if (aspectRatio) {\n      height = width / aspectRatio;\n    }\n    y = rect.y + rect.height / 2 - height / 2;\n  }\n  if (y <= imageBox.y) {\n    y = imageBox.y;\n    x = rect.x;\n  }\n  if (y + height >= imageBox.y + imageBox.height) {\n    y = Math.max(imageBox.y, imageBox.y + imageBox.height - height);\n    height = imageBox.y + imageBox.height - y;\n    if (aspectRatio) {\n      width = height * aspectRatio;\n    }\n    x = rect.x;\n  }\n  if (height < MIN_CROP_SIZE) {\n    height = MIN_CROP_SIZE;\n    if (aspectRatio) {\n      width = height * aspectRatio;\n    }\n    y = rect.y + rect.height / 2 - height / 2;\n  }\n  if (width < MIN_CROP_SIZE) {\n    width = MIN_CROP_SIZE;\n    if (aspectRatio) {\n      height = width / aspectRatio;\n    }\n    y = rect.y + rect.height / 2 - height / 2;\n  }\n\n  return { x, y, width, height };\n}\n\n/**\n * @param {{\n *   rect: import('./types.js').Rectangle;\n *   delta: [Number, Number];\n *   aspectRatio?: number;\n *   imageBox: import('./types.js').Rectangle;\n * }} options\n */\nfunction resizeNorthWest({ rect, delta, aspectRatio, imageBox }) {\n  let [dx, dy] = delta;\n  let { x, y, width, height } = rect;\n\n  if (x + dx < imageBox.x) {\n    dx = imageBox.x - x;\n  }\n  if (y + dy < imageBox.y) {\n    dy = imageBox.y - y;\n  }\n  x += dx;\n  width -= dx;\n  y += dy;\n  height -= dy;\n  if (aspectRatio && Math.abs(width / height) > aspectRatio) {\n    dy = width / aspectRatio - height;\n    height += dy;\n    y -= dy;\n    if (y <= imageBox.y) {\n      height = height - (imageBox.y - y);\n      width = height * aspectRatio;\n      x = rect.x + rect.width - width;\n      y = imageBox.y;\n    }\n  } else if (aspectRatio) {\n    dx = height * aspectRatio - width;\n    width = width + dx;\n    x -= dx;\n    if (x <= imageBox.x) {\n      width = width - (imageBox.x - x);\n      height = width / aspectRatio;\n      x = imageBox.x;\n      y = rect.y + rect.height - height;\n    }\n  }\n  if (height < MIN_CROP_SIZE) {\n    height = MIN_CROP_SIZE;\n    if (aspectRatio) {\n      width = height * aspectRatio;\n    }\n    x = rect.x + rect.width - width;\n    y = rect.y + rect.height - height;\n  }\n  if (width < MIN_CROP_SIZE) {\n    width = MIN_CROP_SIZE;\n    if (aspectRatio) {\n      height = width / aspectRatio;\n    }\n    x = rect.x + rect.width - width;\n    y = rect.y + rect.height - height;\n  }\n\n  return { x, y, width, height };\n}\n\n/**\n * @param {{\n *   rect: import('./types.js').Rectangle;\n *   delta: [Number, Number];\n *   aspectRatio?: number;\n *   imageBox: import('./types.js').Rectangle;\n * }} options\n */\nfunction resizeNorthEast({ rect, delta, aspectRatio, imageBox }) {\n  let [dx, dy] = delta;\n  let { x, y, width, height } = rect;\n\n  if (x + width + dx > imageBox.x + imageBox.width) {\n    dx = imageBox.x + imageBox.width - x - width;\n  }\n  if (y + dy < imageBox.y) {\n    dy = imageBox.y - y;\n  }\n  width += dx;\n  y += dy;\n  height -= dy;\n  if (aspectRatio && Math.abs(width / height) > aspectRatio) {\n    dy = width / aspectRatio - height;\n    height += dy;\n    y -= dy;\n    if (y <= imageBox.y) {\n      height = height - (imageBox.y - y);\n      width = height * aspectRatio;\n      x = rect.x;\n      y = imageBox.y;\n    }\n  } else if (aspectRatio) {\n    dx = height * aspectRatio - width;\n    width += dx;\n    if (x + width >= imageBox.x + imageBox.width) {\n      width = imageBox.x + imageBox.width - x;\n      height = width / aspectRatio;\n      x = imageBox.x + imageBox.width - width;\n      y = rect.y + rect.height - height;\n    }\n  }\n  if (height < MIN_CROP_SIZE) {\n    height = MIN_CROP_SIZE;\n    if (aspectRatio) {\n      width = height * aspectRatio;\n    }\n    y = rect.y + rect.height - height;\n  }\n  if (width < MIN_CROP_SIZE) {\n    width = MIN_CROP_SIZE;\n    if (aspectRatio) {\n      height = width / aspectRatio;\n    }\n    y = rect.y + rect.height - height;\n  }\n\n  return { x, y, width, height };\n}\n\n/**\n * @param {{\n *   rect: import('./types.js').Rectangle;\n *   delta: [Number, Number];\n *   aspectRatio?: number;\n *   imageBox: import('./types.js').Rectangle;\n * }} options\n */\nfunction resizeSouthWest({ rect, delta, aspectRatio, imageBox }) {\n  let [dx, dy] = delta;\n  let { x, y, width, height } = rect;\n\n  if (x + dx < imageBox.x) {\n    dx = imageBox.x - x;\n  }\n  if (y + height + dy > imageBox.y + imageBox.height) {\n    dy = imageBox.y + imageBox.height - y - height;\n  }\n  x += dx;\n  width -= dx;\n  height += dy;\n  if (aspectRatio && Math.abs(width / height) > aspectRatio) {\n    dy = width / aspectRatio - height;\n    height += dy;\n    if (y + height >= imageBox.y + imageBox.height) {\n      height = imageBox.y + imageBox.height - y;\n      width = height * aspectRatio;\n      x = rect.x + rect.width - width;\n      y = imageBox.y + imageBox.height - height;\n    }\n  } else if (aspectRatio) {\n    dx = height * aspectRatio - width;\n    width += dx;\n    x -= dx;\n    if (x <= imageBox.x) {\n      width = width - (imageBox.x - x);\n      height = width / aspectRatio;\n      x = imageBox.x;\n      y = rect.y;\n    }\n  }\n  if (height < MIN_CROP_SIZE) {\n    height = MIN_CROP_SIZE;\n    if (aspectRatio) {\n      width = height * aspectRatio;\n    }\n    x = rect.x + rect.width - width;\n  }\n  if (width < MIN_CROP_SIZE) {\n    width = MIN_CROP_SIZE;\n    if (aspectRatio) {\n      height = width / aspectRatio;\n    }\n    x = rect.x + rect.width - width;\n  }\n\n  return { x, y, width, height };\n}\n\n/**\n * @param {{\n *   rect: import('./types.js').Rectangle;\n *   delta: [Number, Number];\n *   aspectRatio?: number;\n *   imageBox: import('./types.js').Rectangle;\n * }} options\n */\nfunction resizeSouthEast({ rect, delta, aspectRatio, imageBox }) {\n  let [dx, dy] = delta;\n  let { x, y, width, height } = rect;\n\n  if (x + width + dx > imageBox.x + imageBox.width) {\n    dx = imageBox.x + imageBox.width - x - width;\n  }\n  if (y + height + dy > imageBox.y + imageBox.height) {\n    dy = imageBox.y + imageBox.height - y - height;\n  }\n  width += dx;\n  height += dy;\n  if (aspectRatio && Math.abs(width / height) > aspectRatio) {\n    dy = width / aspectRatio - height;\n    height += dy;\n    if (y + height >= imageBox.y + imageBox.height) {\n      height = imageBox.y + imageBox.height - y;\n      width = height * aspectRatio;\n      x = rect.x;\n      y = imageBox.y + imageBox.height - height;\n    }\n  } else if (aspectRatio) {\n    dx = height * aspectRatio - width;\n    width += dx;\n    if (x + width >= imageBox.x + imageBox.width) {\n      width = imageBox.x + imageBox.width - x;\n      height = width / aspectRatio;\n      x = imageBox.x + imageBox.width - width;\n      y = rect.y;\n    }\n  }\n  if (height < MIN_CROP_SIZE) {\n    height = MIN_CROP_SIZE;\n    if (aspectRatio) {\n      width = height * aspectRatio;\n    }\n  }\n  if (width < MIN_CROP_SIZE) {\n    width = MIN_CROP_SIZE;\n    if (aspectRatio) {\n      height = width / aspectRatio;\n    }\n  }\n\n  return { x, y, width, height };\n}\n\n/**\n * @param {{\n *   rect: import('./types.js').Rectangle;\n *   delta: [Number, Number];\n *   direction: import('./types.js').Direction;\n *   aspectRatio?: number;\n *   imageBox: import('./types.js').Rectangle;\n * }} options\n */\nexport function resizeRect({ direction, ...rest }) {\n  switch (direction) {\n    case 'n':\n      return resizeNorth(rest);\n    case 'w':\n      return resizeWest(rest);\n    case 's':\n      return resizeSouth(rest);\n    case 'e':\n      return resizeEast(rest);\n    case 'nw':\n      return resizeNorthWest(rest);\n    case 'ne':\n      return resizeNorthEast(rest);\n    case 'sw':\n      return resizeSouthWest(rest);\n    case 'se':\n      return resizeSouthEast(rest);\n    default:\n      return rest.rect;\n  }\n}\n\n/**\n * @param {import('./types.js').Rectangle} rect\n * @param {[Number, Number]} point\n */\nexport function rectContainsPoint(rect, [x, y]) {\n  return rect.x <= x && x <= rect.x + rect.width && rect.y <= y && y <= rect.y + rect.height;\n}\n\n/**\n * @param {import('./types.js').Rectangle} rect1\n * @param {import('./types.js').Rectangle} rect2\n */\nexport function isRectInsideRect(rect1, rect2) {\n  return (\n    rect1.x >= rect2.x &&\n    rect1.y >= rect2.y &&\n    rect1.x + rect1.width <= rect2.x + rect2.width &&\n    rect1.y + rect1.height <= rect2.y + rect2.height\n  );\n}\n\n/**\n * @param {import('./types.js').Rectangle} rect\n * @param {number} aspectRatio\n */\nexport function isRectMatchesAspectRatio(rect, aspectRatio) {\n  const THRESHOLD = 0.1;\n  return Math.abs(rect.width / rect.height - aspectRatio) < THRESHOLD;\n}\n\n/**\n * @param {import('./types.js').ImageSize} imageSize\n * @param {Number} angle\n * @returns {import('./types.js').ImageSize}\n */\nexport function rotateSize({ width, height }, angle) {\n  let swap = (angle / 90) % 2 !== 0;\n  return { width: swap ? height : width, height: swap ? width : height };\n}\n\n/**\n * @param {number} width\n * @param {number} height\n * @param {number} aspectRatio\n */\nexport function calculateMaxCenteredCropFrame(width, height, aspectRatio) {\n  const imageAspectRatio = width / height;\n  let cropWidth, cropHeight;\n\n  if (imageAspectRatio > aspectRatio) {\n    cropWidth = Math.round(height * aspectRatio);\n    cropHeight = height;\n  } else {\n    cropWidth = width;\n    cropHeight = Math.round(width / aspectRatio);\n  }\n\n  const cropX = Math.round((width - cropWidth) / 2);\n  const cropY = Math.round((height - cropHeight) / 2);\n\n  if (cropX + cropWidth > width) {\n    cropWidth = width - cropX;\n  }\n  if (cropY + cropHeight > height) {\n    cropHeight = height - cropY;\n  }\n\n  return { x: cropX, y: cropY, width: cropWidth, height: cropHeight };\n}\n\n/**\n * @param {import('./types.js').Rectangle} rect\n * @returns {import('./types.js').Rectangle}\n */\nexport function roundRect(rect) {\n  return {\n    x: Math.round(rect.x),\n    y: Math.round(rect.y),\n    width: Math.round(rect.width),\n    height: Math.round(rect.height),\n  };\n}\n\n/**\n * @param {Number} value\n * @param {Number} min\n * @param {Number} max\n * @returns {Number}\n */\nexport function clamp(value, min, max) {\n  return Math.min(Math.max(value, min), max);\n}\n","// @ts-check\n\n/** @param {import('../../../../types/exported.d.ts').ConfigType['cropPreset']} cropPreset */\nexport const parseCropPreset = (cropPreset) => {\n  if (!cropPreset) return [];\n  const [w, h] = cropPreset.split(':').map(Number);\n  if (!Number.isFinite(w) || !Number.isFinite(h)) {\n    console.error(`Invalid crop preset: ${cropPreset}`);\n    return;\n  }\n  /** @type {import('../types.js').CropAspectRatio} */\n  const aspectRatio = { type: 'aspect-ratio', width: w, height: h };\n  return [aspectRatio];\n};\n","export const UploadSource = Object.freeze({\n  LOCAL: 'local',\n  DROP_AREA: 'drop-area',\n  URL_TAB: 'url-tab',\n  CAMERA: 'camera',\n  EXTERNAL: 'external',\n  API: 'js-api',\n});\n","/** Do not edit this file manually. It's generated during build process. */\nexport const PACKAGE_NAME = 'blocks';\nexport const PACKAGE_VERSION = '0.40.0';\n","import { getUserAgent } from '@uploadcare/upload-client';\nimport { PACKAGE_VERSION, PACKAGE_NAME } from '../../env.js';\n\n/**\n * @param {import('@uploadcare/upload-client').CustomUserAgentOptions} options\n * @returns {ReturnType<import('@uploadcare/upload-client').CustomUserAgentFn>}\n */\nexport function customUserAgent(options) {\n  return getUserAgent({\n    ...options,\n    libraryName: PACKAGE_NAME,\n    libraryVersion: PACKAGE_VERSION,\n  });\n}\n","/**\n * @template T\n * @param {import('../types').OutputError<T>} options\n */\nconst buildOutputError = ({ type, message, ...payload }) => ({\n  type,\n  message,\n  ...payload,\n});\n\n/** @type {typeof buildOutputError<import('../types').OutputFileErrorType>} */\nexport const buildOutputFileError = buildOutputError;\n\n/** @type {typeof buildOutputError<import('../types').OutputCollectionErrorType>} */\nexport const buildCollectionFileError = buildOutputError;\n","// @ts-check\nimport { stringToArray } from './stringToArray.js';\n\nexport const IMAGE_ACCEPT_LIST = [\n  'image/*',\n  'image/heif',\n  'image/heif-sequence',\n  'image/heic',\n  'image/heic-sequence',\n  'image/avif',\n  'image/avif-sequence',\n  '.heif',\n  '.heifs',\n  '.heic',\n  '.heics',\n  '.avif',\n  '.avifs',\n];\n\n/**\n * @param {string[]} [fileTypes]\n * @returns {string[]}\n */\nexport const mergeFileTypes = (fileTypes) => {\n  if (!fileTypes) {\n    return [];\n  }\n  return fileTypes\n    .filter((item) => typeof item === 'string')\n    .map((str) => stringToArray(str))\n    .flat();\n};\n\n/**\n * @param {String} mimeType\n * @param {String[]} allowedFileTypes\n * @returns {Boolean}\n */\nexport const matchMimeType = (mimeType, allowedFileTypes) => {\n  return allowedFileTypes.some((type) => {\n    if (type.endsWith('*')) {\n      type = type.replace('*', '');\n      return mimeType.startsWith(type);\n    }\n\n    return mimeType === type;\n  });\n};\n\n/**\n * @param {String} fileName\n * @param {String[]} allowedFileTypes\n * @returns {Boolean}\n */\nexport const matchExtension = (fileName, allowedFileTypes) => {\n  return allowedFileTypes.some((type) => {\n    if (!type.startsWith('.')) {\n      return false;\n    }\n\n    return fileName.toLowerCase().endsWith(type.toLowerCase());\n  });\n};\n\n/**\n * @param {File | Blob} file\n * @returns {Boolean}\n */\nexport const fileIsImage = (file) => {\n  let type = file?.type;\n  if (!type) {\n    return false;\n  }\n  return matchMimeType(type, IMAGE_ACCEPT_LIST);\n};\n\n/**\n * Checks if the given data is a Blob.\n *\n * @param {unknown} data - The data to check.\n * @returns {boolean} - True if the data is a Blob, false otherwise.\n */\nexport const isBlob = (data) => {\n  return typeof Blob !== 'undefined' && data instanceof Blob;\n};\n\n/**\n * Checks if the given data is a File.\n *\n * @param {unknown} data - The data to check.\n * @returns {boolean} - True if the data is a File, false otherwise.\n */\nexport const isFile = (data) => {\n  return typeof File !== 'undefined' && data instanceof File;\n};\n","// @ts-check\nimport { getPluralForm } from './getPluralForm.js';\n\nconst BASE = 1000;\n\nexport const ByteUnitEnum = Object.freeze({\n  AUTO: 'auto',\n  BYTE: 'byte',\n  KB: 'kb',\n  MB: 'mb',\n  GB: 'gb',\n  TB: 'tb',\n  PB: 'pb',\n});\n\n/**\n * Round a specified number to decimal with two places. Round to larger value, because basically we use it for usage and\n * we charge customers for 1 GB even he consumed 1 byte. Feature limits are usually specified in exact MB/GB/TB, so they\n * will not be rounded.\n *\n * @param {number} number\n * @returns {number}\n */\nconst round = (number) => Math.ceil(number * 100) / 100;\n\n/**\n * @param {number} bytes\n * @param {(typeof ByteUnitEnum)[keyof typeof ByteUnitEnum]} unit\n * @returns {string}\n */\nexport const prettyBytes = (bytes, unit = ByteUnitEnum.AUTO) => {\n  const isAutoMode = unit === ByteUnitEnum.AUTO;\n\n  if (unit === ByteUnitEnum.BYTE || (isAutoMode && bytes < BASE ** 1)) {\n    // TODO: handle blocks locale\n    const pluralForm = /** @type {Extract<import('./getPluralForm').PluralForm, 'one' | 'other'>} */ (\n      getPluralForm('en-US', bytes)\n    );\n    const pluralized = {\n      one: 'byte',\n      other: 'bytes',\n    }[pluralForm];\n\n    return `${bytes} ${pluralized}`;\n  }\n\n  if (unit === ByteUnitEnum.KB || (isAutoMode && bytes < BASE ** 2)) {\n    return `${round(bytes / BASE ** 1)} KB`;\n  }\n\n  if (unit === ByteUnitEnum.MB || (isAutoMode && bytes < BASE ** 3)) {\n    return `${round(bytes / BASE ** 2)} MB`;\n  }\n\n  if (unit === ByteUnitEnum.GB || (isAutoMode && bytes < BASE ** 4)) {\n    return `${round(bytes / BASE ** 3)} GB`;\n  }\n\n  if (unit === ByteUnitEnum.TB || (isAutoMode && bytes < BASE ** 5)) {\n    return `${round(bytes / BASE ** 4)} TB`;\n  }\n\n  return `${round(bytes / BASE ** 5)} PB`;\n};\n","const warnings = new Set();\n\n/** @param {string} message */\nexport function warnOnce(message) {\n  if (warnings.has(message)) {\n    return;\n  }\n\n  warnings.add(message);\n  console.warn(message);\n}\n","import { Data, UID } from '@symbiotejs/symbiote';\n\nconst MSG_NAME = '[Typed State] Wrong property name: ';\nconst MSG_TYPE = '[Typed State] Wrong property type: ';\n\nexport class TypedData {\n  /**\n   * @param {Object<string, { type: any; value: any; nullable?: Boolean }>} typedSchema\n   * @param {String} [ctxName]\n   */\n  constructor(typedSchema, ctxName) {\n    /** @private */\n    this.__typedSchema = typedSchema;\n    /** @private */\n    this.__ctxId = ctxName || UID.generate();\n    /** @private */\n    this.__schema = Object.keys(typedSchema).reduce((acc, key) => {\n      acc[key] = typedSchema[key].value;\n      return acc;\n    }, {});\n    /**\n     * @private\n     * @type {Data}\n     */\n    this.__data = Data.registerCtx(this.__schema, this.__ctxId);\n  }\n\n  /** @returns {String} */\n  get uid() {\n    return this.__ctxId;\n  }\n\n  /**\n   * @param {String} prop\n   * @param {any} value\n   */\n  setValue(prop, value) {\n    if (!this.__typedSchema.hasOwnProperty(prop)) {\n      console.warn(MSG_NAME + prop);\n      return;\n    }\n    let pDesc = this.__typedSchema[prop];\n    if (value?.constructor === pDesc.type || value instanceof pDesc.type || (pDesc.nullable && value === null)) {\n      this.__data.pub(prop, value);\n      return;\n    }\n    console.warn(MSG_TYPE + prop);\n  }\n\n  /** @param {Object<string, any>} updObj */\n  setMultipleValues(updObj) {\n    for (let prop in updObj) {\n      this.setValue(prop, updObj[prop]);\n    }\n  }\n\n  /** @param {String} prop */\n  getValue(prop) {\n    if (!this.__typedSchema.hasOwnProperty(prop)) {\n      console.warn(MSG_NAME + prop);\n      return undefined;\n    }\n    return this.__data.read(prop);\n  }\n\n  /**\n   * @param {String} prop\n   * @param {(newVal: any) => void} handler\n   */\n  subscribe(prop, handler) {\n    return this.__data.sub(prop, handler);\n  }\n\n  remove() {\n    Data.deleteCtx(this.__ctxId);\n  }\n}\n","import { Data, UID } from '@symbiotejs/symbiote';\nimport { TypedData } from './TypedData.js';\n\nexport class TypedCollection {\n  /**\n   * @param {Object} options\n   * @param {Object<string, { type: any; value: any }>} options.typedSchema\n   * @param {String[]} [options.watchList]\n   * @param {(list: string[], added: Set<any>, removed: Set<any>) => void} [options.handler]\n   * @param {String} [options.ctxName]\n   */\n  constructor(options) {\n    /**\n     * @private\n     * @type {Object<string, { type: any; value: any }>}\n     */\n    this.__typedSchema = options.typedSchema;\n    /**\n     * @private\n     * @type {String}\n     */\n    this.__ctxId = options.ctxName || UID.generate();\n    /**\n     * @private\n     * @type {Data}\n     */\n    this.__data = Data.registerCtx({}, this.__ctxId);\n    /**\n     * @private\n     * @type {string[]}\n     */\n    this.__watchList = options.watchList || [];\n    /**\n     * @private\n     * @type {Object<string, any>}\n     */\n    this.__subsMap = Object.create(null);\n    /**\n     * @private\n     * @type {Set<Function>}\n     */\n    this.__propertyObservers = new Set();\n    /**\n     * @private\n     * @type {Set<(list: string[], added: Set<any>, removed: Set<any>) => void>}\n     */\n    this.__collectionObservers = new Set();\n    /**\n     * @private\n     * @type {Set<string>}\n     */\n    this.__items = new Set();\n    /**\n     * @private\n     * @type {Set<any>}\n     */\n    this.__removed = new Set();\n    /**\n     * @private\n     * @type {Set<any>}\n     */\n    this.__added = new Set();\n\n    let changeMap = Object.create(null);\n\n    /**\n     * @private\n     * @param {String} propName\n     * @param {String} ctxId\n     */\n    this.__notifyObservers = (propName, ctxId) => {\n      if (this.__observeTimeout) {\n        window.clearTimeout(this.__observeTimeout);\n      }\n      if (!changeMap[propName]) {\n        changeMap[propName] = new Set();\n      }\n      changeMap[propName].add(ctxId);\n      /** @private */\n      this.__observeTimeout = window.setTimeout(() => {\n        if (Object.keys(changeMap).length === 0) {\n          return;\n        }\n        this.__propertyObservers.forEach((handler) => {\n          handler({ ...changeMap });\n        });\n        changeMap = Object.create(null);\n      });\n    };\n  }\n\n  notify() {\n    if (this.__notifyTimeout) {\n      window.clearTimeout(this.__notifyTimeout);\n    }\n    /** @private */\n    this.__notifyTimeout = window.setTimeout(() => {\n      let added = new Set(this.__added);\n      let removed = new Set(this.__removed);\n      this.__added.clear();\n      this.__removed.clear();\n      for (const handler of this.__collectionObservers) {\n        handler?.([...this.__items], added, removed);\n      }\n    });\n  }\n\n  /** @param {(list: string[], added: Set<any>, removed: Set<any>) => void} handler */\n  observeCollection(handler) {\n    this.__collectionObservers.add(handler);\n\n    if (this.__items.size > 0) {\n      this.notify();\n    }\n\n    return () => {\n      this.unobserveCollection(handler);\n    };\n  }\n\n  /** @param {Function} handler */\n  unobserveCollection(handler) {\n    this.__collectionObservers?.delete(handler);\n  }\n\n  /**\n   * @param {Object<string, any>} init\n   * @returns {string}\n   */\n  add(init) {\n    let item = new TypedData(this.__typedSchema);\n    for (let prop in init) {\n      item.setValue(prop, init[prop]);\n    }\n    this.__items.add(item.uid);\n    this.notify();\n\n    this.__data.add(item.uid, item);\n    this.__added.add(item);\n    this.__watchList.forEach((propName) => {\n      if (!this.__subsMap[item.uid]) {\n        this.__subsMap[item.uid] = [];\n      }\n      this.__subsMap[item.uid].push(\n        item.subscribe(propName, () => {\n          this.__notifyObservers(propName, item.uid);\n        }),\n      );\n    });\n    return item.uid;\n  }\n\n  /**\n   * @param {String} id\n   * @returns {TypedData}\n   */\n  read(id) {\n    return this.__data.read(id);\n  }\n\n  /**\n   * @param {String} id\n   * @param {String} propName\n   * @returns {any}\n   */\n  readProp(id, propName) {\n    let item = this.read(id);\n    return item.getValue(propName);\n  }\n\n  /**\n   * @template T\n   * @param {String} id\n   * @param {String} propName\n   * @param {T} value\n   */\n  publishProp(id, propName, value) {\n    let item = this.read(id);\n    item.setValue(propName, value);\n  }\n\n  /** @param {String} id */\n  remove(id) {\n    this.__removed.add(this.__data.read(id));\n    this.__items.delete(id);\n    this.notify();\n    this.__data.pub(id, null);\n    delete this.__subsMap[id];\n  }\n\n  clearAll() {\n    this.__items.forEach((id) => {\n      this.remove(id);\n    });\n  }\n\n  /** @param {Function} handler */\n  observeProperties(handler) {\n    this.__propertyObservers.add(handler);\n\n    return () => {\n      this.unobserveProperties(handler);\n    };\n  }\n\n  /** @param {Function} handler */\n  unobserveProperties(handler) {\n    this.__propertyObservers?.delete(handler);\n  }\n\n  /**\n   * @param {(item: TypedData) => Boolean} checkFn\n   * @returns {String[]}\n   */\n  findItems(checkFn) {\n    let result = [];\n    this.__items.forEach((id) => {\n      let item = this.read(id);\n      if (checkFn(item)) {\n        result.push(id);\n      }\n    });\n    return result;\n  }\n\n  items() {\n    return [...this.__items];\n  }\n\n  get size() {\n    return this.__items.size;\n  }\n\n  destroy() {\n    Data.deleteCtx(this.__ctxId);\n    this.__propertyObservers = null;\n    this.__collectionObservers = null;\n    for (let id in this.__subsMap) {\n      this.__subsMap[id].forEach((sub) => {\n        sub.remove();\n      });\n      delete this.__subsMap[id];\n    }\n  }\n}\n","// @ts-check\n\n/**\n * @template {any[]} TArgs\n * @template {any} TReturn\n * @template {(...args: TArgs) => TReturn} T\n * @param {T} fn\n * @returns {T}\n */\nexport const memoize = (fn) => {\n  const cache = new Map();\n  return /** @type {T} */ (\n    (...args) => {\n      const key = JSON.stringify(args);\n      if (cache.has(key)) {\n        return cache.get(key);\n      }\n      const result = fn(...args);\n      cache.set(key, result);\n      return result;\n    }\n  );\n};\n","// @ts-check\n\nimport { memoize } from '../utils/memoize.js';\nimport { warnOnce } from '../utils/warnOnce.js';\n\n/** @param {string} warning */\nfunction createAsyncAssertWrapper(warning) {\n  let isAsync = false;\n  setTimeout(() => {\n    isAsync = true;\n  }, 0);\n\n  /**\n   * @template {any[]} TArgs\n   * @template {any} TReturn\n   * @template {(...args: TArgs) => TReturn} T\n   * @param {T} fn\n   * @returns {T}\n   */\n  const withAssert = (fn) => {\n    return /** @type {T} */ (\n      (...args) => {\n        if (isAsync) {\n          warnOnce(warning);\n        }\n        return fn(...args);\n      }\n    );\n  };\n\n  return withAssert;\n}\n\n/**\n * @template {import('../index.js').OutputCollectionStatus} TCollectionStatus\n * @template {import('../index.js').GroupFlag} [TGroupFlag='maybe-has-group'] Default is `'maybe-has-group'`\n * @param {import('./UploaderBlock.js').UploaderBlock} uploaderBlock\n * @returns {import('../index.js').OutputCollectionState<TCollectionStatus, TGroupFlag>}\n */\nexport function buildOutputCollectionState(uploaderBlock) {\n  const getters = {\n    /** @returns {number} */\n    progress: () => {\n      return uploaderBlock.$['*commonProgress'];\n    },\n    /** @returns {ReturnType<import('../utils/buildOutputError.js').buildCollectionFileError>[]} */\n    errors: () => {\n      return uploaderBlock.$['*collectionErrors'];\n    },\n\n    /** @returns {import('@uploadcare/upload-client').UploadcareGroup | null} */\n    group: () => {\n      return uploaderBlock.$['*groupInfo'];\n    },\n\n    totalCount: () => {\n      return uploaderBlock.uploadCollection.size;\n    },\n\n    failedCount: () => {\n      return state.failedEntries.length;\n    },\n\n    successCount: () => {\n      return state.successEntries.length;\n    },\n\n    uploadingCount: () => {\n      return state.uploadingEntries.length;\n    },\n\n    status: () => {\n      const status = state.isFailed ? 'failed' : state.isUploading ? 'uploading' : state.isSuccess ? 'success' : 'idle';\n      return /** @type {TCollectionStatus} */ (status);\n    },\n\n    isSuccess: () => {\n      return state.errors.length === 0 && state.successEntries.length === state.allEntries.length;\n    },\n\n    isUploading: () => {\n      return state.allEntries.some((entry) => entry.status === 'uploading');\n    },\n\n    isFailed: () => {\n      return state.errors.length > 0 || state.failedEntries.length > 0;\n    },\n\n    allEntries: () => {\n      return uploaderBlock.getOutputData();\n    },\n\n    successEntries: () => {\n      return state.allEntries.filter((entry) => entry.status === 'success');\n    },\n\n    failedEntries: () => {\n      return state.allEntries.filter((entry) => entry.status === 'failed');\n    },\n\n    uploadingEntries: () => {\n      return state.allEntries.filter((entry) => entry.status === 'uploading');\n    },\n\n    idleEntries: () => {\n      return state.allEntries.filter((entry) => entry.status === 'idle');\n    },\n  };\n\n  const state = /** @type {import('../index.js').OutputCollectionState<TCollectionStatus, TGroupFlag>} */ (\n    /** @type {unknown} */ ({})\n  );\n  const withAssert = createAsyncAssertWrapper(\n    \"You're trying to access the OutputCollectionState asynchronously. \" +\n      'In this case, the data you retrieve will be newer than it was when the ' +\n      'OutputCollectionState was created or when the event was dispatched. If you want ' +\n      'to retain the state at a specific moment in time, you should use the spread operator ' +\n      'like this: `{...outputCollectionState}` or `{...e.detail}`',\n  );\n\n  for (const [key, value] of Object.entries(getters)) {\n    const name = /** @type {keyof typeof getters} */ (key);\n    const getter = /** @type {(typeof getters)[name]} */ (value);\n    const wrapped = memoize(withAssert(getter));\n    Object.defineProperty(state, name, {\n      get: wrapped,\n      enumerable: true,\n    });\n  }\n\n  return state;\n}\n","// @ts-check\nimport { UploadcareFile } from '@uploadcare/upload-client';\n\n/**\n * @typedef {Object} UploadEntry\n * @property {File} file\n * @property {String} externalUrl\n * @property {String} fileName\n * @property {number} fileSize\n * @property {number} lastModified\n * @property {number} uploadProgress\n * @property {String} uuid\n * @property {Boolean} isImage\n * @property {String} mimeType\n * @property {String} ctxName\n * @property {String} cdnUrl\n * @property {String} cdnUrlModifiers\n * @property {UploadcareFile} fileInfo\n * @property {Boolean} isUploading\n * @property {String} thumbUrl\n * @property {Boolean} silent\n * @property {({\n *   type: import('..').OutputFileErrorType | import('..').OutputCollectionErrorType;\n *   message: string;\n * } & Record<string, unknown>)[]} errors\n * @property {Error | null} uploadError\n * @property {string | null} fullPath\n * @property {import('@uploadcare/upload-client').Metadata | null} metadata\n * @property {boolean} isRemoved\n */\n\n/**\n * @template {keyof UploadEntry} K\n * @type {Record<K, { type: Function; value: any; nullable?: Boolean }>}\n */\nexport const uploadEntrySchema = Object.freeze({\n  file: {\n    type: File,\n    value: null,\n  },\n  externalUrl: {\n    type: String,\n    value: null,\n  },\n  fileName: {\n    type: String,\n    value: null,\n    nullable: true,\n  },\n  fileSize: {\n    type: Number,\n    value: null,\n    nullable: true,\n  },\n  lastModified: {\n    type: Number,\n    value: Date.now(),\n  },\n  uploadProgress: {\n    type: Number,\n    value: 0,\n  },\n  uuid: {\n    type: String,\n    value: null,\n  },\n  isImage: {\n    type: Boolean,\n    value: false,\n  },\n  mimeType: {\n    type: String,\n    value: null,\n    nullable: true,\n  },\n  ctxName: {\n    type: String,\n    value: null,\n  },\n  cdnUrl: {\n    type: String,\n    value: null,\n  },\n  cdnUrlModifiers: {\n    type: String,\n    value: null,\n  },\n  fileInfo: {\n    type: UploadcareFile,\n    value: null,\n  },\n  isUploading: {\n    type: Boolean,\n    value: false,\n  },\n  abortController: {\n    type: AbortController,\n    value: null,\n    nullable: true,\n  },\n  thumbUrl: {\n    type: String,\n    value: null,\n    nullable: true,\n  },\n  silent: {\n    type: Boolean,\n    value: false,\n  },\n  source: {\n    type: String,\n    value: false,\n    nullable: true,\n  },\n  fullPath: {\n    type: String,\n    value: null,\n    nullable: true,\n  },\n  metadata: {\n    type: Object,\n    value: null,\n    nullable: true,\n  },\n  errors: {\n    type: Array,\n    value: [],\n  },\n  uploadError: {\n    type: Error,\n    value: null,\n    nullable: true,\n  },\n  isRemoved: {\n    type: Boolean,\n    value: false,\n  },\n});\n","const uuidRegex = /[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}/i;\nconst cdnUrlRegex = new RegExp(`^/?(${uuidRegex.source})(?:/(-/(?:[^/]+/)+)?([^/]*))?$`, 'i');\n\n/** @param {{ url: string; cdnBase: string }} options */\nexport const parseCdnUrl = ({ url, cdnBase }) => {\n  const cdnBaseUrlObj = new URL(cdnBase);\n  const urlObj = new URL(url);\n\n  if (cdnBaseUrlObj.host !== urlObj.host) {\n    return null;\n  }\n\n  const [, uuid, cdnUrlModifiers, filename] = cdnUrlRegex.exec(urlObj.pathname);\n\n  return {\n    uuid,\n    cdnUrlModifiers: cdnUrlModifiers || '',\n    filename: filename || null,\n  };\n};\n","// @ts-check\nimport { ActivityBlock } from './ActivityBlock.js';\n\nimport { Data } from '@symbiotejs/symbiote';\nimport { NetworkError, UploadError, uploadFileGroup } from '@uploadcare/upload-client';\nimport { calculateMaxCenteredCropFrame } from '../blocks/CloudImageEditor/src/crop-utils.js';\nimport { parseCropPreset } from '../blocks/CloudImageEditor/src/lib/parseCropPreset.js';\nimport { EventType } from '../blocks/UploadCtxProvider/EventEmitter.js';\nimport { UploadSource } from '../blocks/utils/UploadSource.js';\nimport { serializeCsv } from '../blocks/utils/comma-separated.js';\nimport { debounce } from '../blocks/utils/debounce.js';\nimport { customUserAgent } from '../blocks/utils/userAgent.js';\nimport { buildCollectionFileError, buildOutputFileError } from '../utils/buildOutputError.js';\nimport { createCdnUrl, createCdnUrlModifiers } from '../utils/cdn-utils.js';\nimport { IMAGE_ACCEPT_LIST, fileIsImage, matchExtension, matchMimeType, mergeFileTypes } from '../utils/fileTypes.js';\nimport { prettyBytes } from '../utils/prettyBytes.js';\nimport { stringToArray } from '../utils/stringToArray.js';\nimport { warnOnce } from '../utils/warnOnce.js';\nimport { uploaderBlockCtx } from './CTX.js';\nimport { TypedCollection } from './TypedCollection.js';\nimport { buildOutputCollectionState } from './buildOutputCollectionState.js';\nimport { uploadEntrySchema } from './uploadEntrySchema.js';\nimport { parseCdnUrl } from '../utils/parseCdnUrl.js';\nexport class UploaderBlock extends ActivityBlock {\n  couldBeCtxOwner = false;\n  isCtxOwner = false;\n\n  init$ = uploaderBlockCtx(this);\n\n  /** @private */\n  __initialUploadMetadata = null;\n\n  /**\n   * @private\n   * @type {((\n   *   outputEntry: import('../types').OutputFileEntry,\n   *   internalEntry?: import('./TypedData.js').TypedData,\n   * ) => undefined | ReturnType<typeof import('../utils/buildOutputError.js').buildOutputFileError>)[]}\n   */\n  _fileValidators = [\n    this._validateIsImage.bind(this),\n    this._validateFileType.bind(this),\n    this._validateMaxSizeLimit.bind(this),\n    this._validateUploadError.bind(this),\n  ];\n\n  /**\n   * @private\n   * @type {((\n   *   collection: TypedCollection,\n   * ) =>\n   *   | undefined\n   *   | ReturnType<typeof import('../utils/buildOutputError.js').buildCollectionFileError>\n   *   | ReturnType<typeof import('../utils/buildOutputError.js').buildCollectionFileError>[])[]}\n   */\n  _collectionValidators = [\n    (collection) => {\n      const total = collection.size;\n      const multipleMin = this.cfg.multiple ? this.cfg.multipleMin : 0;\n      const multipleMax = this.cfg.multiple ? this.cfg.multipleMax : 1;\n      if (multipleMin && total < multipleMin) {\n        const message = this.l10n('files-count-limit-error-too-few', {\n          min: multipleMin,\n          max: multipleMax,\n          total,\n        });\n        return buildCollectionFileError({\n          type: 'TOO_FEW_FILES',\n          message,\n          total,\n          min: multipleMin,\n          max: multipleMax,\n        });\n      }\n\n      if (multipleMax && total > multipleMax) {\n        const message = this.l10n('files-count-limit-error-too-many', {\n          min: multipleMin,\n          max: multipleMax,\n          total,\n        });\n        return buildCollectionFileError({\n          type: 'TOO_MANY_FILES',\n          message,\n          total,\n          min: multipleMin,\n          max: multipleMax,\n        });\n      }\n    },\n    (collection) => {\n      if (collection.items().some((id) => collection.readProp(id, 'errors').length > 0)) {\n        return buildCollectionFileError({\n          type: 'SOME_FILES_HAS_ERRORS',\n          message: this.l10n('some-files-were-not-uploaded'),\n        });\n      }\n    },\n  ];\n\n  /**\n   * This is Public JS API method. Could be called before block initialization, so we need to delay state interactions\n   * until block init.\n   *\n   * TODO: If we add more public methods, it is better to use the single queue instead of tons of private fields per\n   * each method. See https://github.com/uploadcare/blocks/pull/162/\n   *\n   * @deprecated Use `metadata` instance property on `lr-config` block instead.\n   * @param {import('@uploadcare/upload-client').Metadata} metadata\n   * @public\n   */\n  setUploadMetadata(metadata) {\n    warnOnce(\n      'setUploadMetadata is deprecated. Use `metadata` instance property on `lr-config` block instead. See migration guide: https://uploadcare.com/docs/file-uploader/migration-to-0.25.0/',\n    );\n    if (!this.connectedOnce) {\n      // @ts-ignore TODO: fix this\n      this.__initialUploadMetadata = metadata;\n    } else {\n      this.$['*uploadMetadata'] = metadata;\n    }\n  }\n\n  get hasCtxOwner() {\n    return this.hasBlockInCtx((block) => {\n      if (block instanceof UploaderBlock) {\n        return block.isCtxOwner && block.isConnected && block !== this;\n      }\n      return false;\n    });\n  }\n\n  initCallback() {\n    super.initCallback();\n\n    if (!this.$['*uploadCollection']) {\n      let uploadCollection = new TypedCollection({\n        typedSchema: uploadEntrySchema,\n        watchList: ['uploadProgress', 'uploadError', 'fileInfo', 'errors', 'cdnUrl', 'isUploading'],\n      });\n      this.$['*uploadCollection'] = uploadCollection;\n    }\n\n    if (!this.hasCtxOwner && this.couldBeCtxOwner) {\n      this.initCtxOwner();\n    }\n  }\n\n  destroyCtxCallback() {\n    this._unobserveCollectionProperties?.();\n    this._unobserveCollection?.();\n    this.uploadCollection.destroy();\n    this.$['*uploadCollection'] = null;\n\n    super.destroyCtxCallback();\n  }\n\n  initCtxOwner() {\n    this.isCtxOwner = true;\n\n    /** @private */\n    this._unobserveCollection = this.uploadCollection.observeCollection(this._handleCollectionUpdate);\n\n    /** @private */\n    this._unobserveCollectionProperties = this.uploadCollection.observeProperties(\n      this._handleCollectionPropertiesUpdate,\n    );\n\n    const runAllValidators = () => {\n      this._runFileValidators();\n      this._runCollectionValidators();\n    };\n\n    this.subConfigValue('maxLocalFileSizeBytes', runAllValidators);\n    this.subConfigValue('multipleMin', runAllValidators);\n    this.subConfigValue('multipleMax', runAllValidators);\n    this.subConfigValue('multiple', runAllValidators);\n    this.subConfigValue('imgOnly', runAllValidators);\n    this.subConfigValue('accept', runAllValidators);\n    this.subConfigValue('maxConcurrentRequests', (value) => {\n      this.$['*uploadQueue'].concurrency = Number(value) || 1;\n    });\n\n    if (this.__initialUploadMetadata) {\n      this.$['*uploadMetadata'] = this.__initialUploadMetadata;\n    }\n  }\n\n  // TODO: Probably we should not allow user to override `source` property\n\n  /**\n   * @param {string} url\n   * @param {{ silent?: boolean; fileName?: string; source?: string }} [options]\n   * @returns {import('../types').OutputFileEntry<'idle'>}\n   */\n  addFileFromUrl(url, { silent, fileName, source } = {}) {\n    const internalId = this.uploadCollection.add({\n      externalUrl: url,\n      fileName: fileName ?? null,\n      silent: silent ?? false,\n      source: source ?? UploadSource.API,\n    });\n    return this.getOutputItem(internalId);\n  }\n\n  /**\n   * @param {string} uuid\n   * @param {{ silent?: boolean; fileName?: string; source?: string }} [options]\n   * @returns {import('../types').OutputFileEntry<'idle'>}\n   */\n  addFileFromUuid(uuid, { silent, fileName, source } = {}) {\n    const internalId = this.uploadCollection.add({\n      uuid,\n      fileName: fileName ?? null,\n      silent: silent ?? false,\n      source: source ?? UploadSource.API,\n    });\n    return this.getOutputItem(internalId);\n  }\n\n  /**\n   * @param {string} cdnUrl\n   * @param {{ silent?: boolean; fileName?: string; source?: string }} [options]\n   * @returns {import('../types').OutputFileEntry<'idle'>}\n   */\n  addFileFromCdnUrl(cdnUrl, { silent, fileName, source } = {}) {\n    const parsedCdnUrl = parseCdnUrl({ url: cdnUrl, cdnBase: this.cfg.cdnCname });\n    if (!parsedCdnUrl) {\n      throw new Error('Invalid CDN URL');\n    }\n    const internalId = this.uploadCollection.add({\n      uuid: parsedCdnUrl.uuid,\n      cdnUrl,\n      cdnUrlModifiers: parsedCdnUrl.cdnUrlModifiers,\n      fileName: fileName ?? parsedCdnUrl.filename ?? null,\n      silent: silent ?? false,\n      source: source ?? UploadSource.API,\n    });\n    return this.getOutputItem(internalId);\n  }\n\n  /**\n   * @param {File} file\n   * @param {{ silent?: boolean; fileName?: string; source?: string; fullPath?: string }} [options]\n   * @returns {import('../types').OutputFileEntry<'idle'>}\n   */\n  addFileFromObject(file, { silent, fileName, source, fullPath } = {}) {\n    const internalId = this.uploadCollection.add({\n      file,\n      isImage: fileIsImage(file),\n      mimeType: file.type,\n      fileName: fileName ?? file.name,\n      fileSize: file.size,\n      silent: silent ?? false,\n      source: source ?? UploadSource.API,\n      fullPath: fullPath ?? null,\n    });\n    return this.getOutputItem(internalId);\n  }\n\n  /**\n   * @deprecated Will be removed in the near future. Please use `addFileFromObject`, `addFileFromUrl` or\n   *   `addFileFromUuid` instead.\n   * @param {File[]} files\n   * @returns {import('../types').OutputFileEntry<'idle'>[]}\n   */\n  addFiles(files) {\n    console.warn(\n      '`addFiles` method is deprecated. Please use `addFileFromObject`, `addFileFromUrl` or `addFileFromUuid` instead.',\n    );\n    return files.map((/** @type {File} */ file) => {\n      const internalId = this.uploadCollection.add({\n        file,\n        isImage: fileIsImage(file),\n        mimeType: file.type,\n        fileName: file.name,\n        fileSize: file.size,\n      });\n      return this.getOutputItem(internalId);\n    });\n  }\n\n  /** @param {string} internalId */\n  removeFileByInternalId(internalId) {\n    if (!this.uploadCollection.read(internalId)) {\n      throw new Error(`File with internalId ${internalId} not found`);\n    }\n    this.uploadCollection.remove(internalId);\n  }\n\n  removeAllFiles() {\n    this.uploadCollection.clearAll();\n  }\n\n  uploadAll = () => {\n    const itemsToUpload = this.uploadCollection.items().filter((id) => {\n      const entry = this.uploadCollection.read(id);\n      return !entry.getValue('isRemoved') && !entry.getValue('isUploading') && !entry.getValue('fileInfo');\n    });\n\n    if (itemsToUpload.length === 0) {\n      return;\n    }\n\n    this.$['*uploadTrigger'] = new Set(itemsToUpload);\n    this.emit(\n      EventType.COMMON_UPLOAD_START,\n      /** @type {import('../types').OutputCollectionState<'uploading'>} */ (this.getOutputCollectionState()),\n    );\n  };\n\n  /** @param {{ captureCamera?: boolean }} options */\n  openSystemDialog(options = {}) {\n    let accept = serializeCsv(mergeFileTypes([this.cfg.accept ?? '', ...(this.cfg.imgOnly ? IMAGE_ACCEPT_LIST : [])]));\n\n    if (this.cfg.accept && !!this.cfg.imgOnly) {\n      console.warn(\n        'There could be a mistake.\\n' +\n          'Both `accept` and `imgOnly` parameters are set.\\n' +\n          'The value of `accept` will be concatenated with the internal image mime types list.',\n      );\n    }\n    this.fileInput = document.createElement('input');\n    this.fileInput.type = 'file';\n    this.fileInput.multiple = this.cfg.multiple;\n    if (options.captureCamera) {\n      this.fileInput.capture = this.cfg.cameraCapture;\n      this.fileInput.accept = 'image/*';\n    } else {\n      this.fileInput.accept = accept;\n    }\n    this.fileInput.dispatchEvent(new MouseEvent('click'));\n    this.fileInput.onchange = () => {\n      // @ts-ignore TODO: fix this\n      [...this.fileInput['files']].forEach((file) =>\n        this.addFileFromObject(file, { source: options.captureCamera ? UploadSource.CAMERA : UploadSource.LOCAL }),\n      );\n      // To call uploadTrigger UploadList should draw file items first:\n      this.$['*currentActivity'] = ActivityBlock.activities.UPLOAD_LIST;\n      this.setOrAddState('*modalActive', true);\n      // @ts-ignore TODO: fix this\n      this.fileInput['value'] = '';\n      this.fileInput = null;\n    };\n  }\n\n  /** @type {string[]} */\n  get sourceList() {\n    /** @type {string[]} */\n    let list = [];\n    if (this.cfg.sourceList) {\n      list = stringToArray(this.cfg.sourceList);\n    }\n    // @ts-ignore TODO: fix this\n    return list;\n  }\n\n  /** @param {Boolean} [force] */\n  initFlow(force = false) {\n    if (this.uploadCollection.size > 0 && !force) {\n      this.set$({\n        '*currentActivity': ActivityBlock.activities.UPLOAD_LIST,\n      });\n      this.setOrAddState('*modalActive', true);\n    } else {\n      if (this.sourceList?.length === 1) {\n        const srcKey = this.sourceList[0];\n\n        // TODO: We should refactor those handlers\n        if (srcKey === 'local') {\n          this.$['*currentActivity'] = ActivityBlock.activities.UPLOAD_LIST;\n          this?.['openSystemDialog']();\n          return;\n        }\n\n        /** @type {Set<import('./Block').Block>} */\n        const blocksRegistry = this.$['*blocksRegistry'];\n        /**\n         * @param {import('./Block').Block} block\n         * @returns {block is import('../blocks/SourceBtn/SourceBtn.js').SourceBtn}\n         */\n        const isSourceBtn = (block) => 'type' in block && block.type === srcKey;\n        const sourceBtnBlock = [...blocksRegistry].find(isSourceBtn);\n        // TODO: This is weird that we have this logic inside UI component, we should consider to move it somewhere else\n        sourceBtnBlock?.activate();\n        if (this.$['*currentActivity']) {\n          this.setOrAddState('*modalActive', true);\n        }\n      } else {\n        // Multiple sources case:\n        this.set$({\n          '*currentActivity': ActivityBlock.activities.START_FROM,\n        });\n        this.setOrAddState('*modalActive', true);\n      }\n    }\n  }\n\n  doneFlow() {\n    this.set$({\n      '*currentActivity': this.doneActivity,\n      '*history': this.doneActivity ? [this.doneActivity] : [],\n    });\n    if (!this.$['*currentActivity']) {\n      this.setOrAddState('*modalActive', false);\n    }\n  }\n\n  /** @returns {TypedCollection} */\n  get uploadCollection() {\n    return this.$['*uploadCollection'];\n  }\n\n  /**\n   * @private\n   * @param {import('../types').OutputFileEntry} outputEntry\n   */\n  _validateFileType(outputEntry) {\n    const imagesOnly = this.cfg.imgOnly;\n    const accept = this.cfg.accept;\n    const allowedFileTypes = mergeFileTypes([...(imagesOnly ? IMAGE_ACCEPT_LIST : []), accept]);\n    if (!allowedFileTypes.length) return;\n\n    const mimeType = outputEntry.mimeType;\n    const fileName = outputEntry.name;\n\n    if (!mimeType || !fileName) {\n      // Skip client validation if mime type or file name are not available for some reasons\n      return;\n    }\n\n    const mimeOk = matchMimeType(mimeType, allowedFileTypes);\n    const extOk = matchExtension(fileName, allowedFileTypes);\n\n    if (!mimeOk && !extOk) {\n      // Assume file type is not allowed if both mime and ext checks fail\n      return buildOutputFileError({\n        type: 'FORBIDDEN_FILE_TYPE',\n        message: this.l10n('file-type-not-allowed'),\n        entry: outputEntry,\n      });\n    }\n  }\n\n  /**\n   * @private\n   * @param {import('../types').OutputFileEntry} outputEntry\n   */\n  _validateMaxSizeLimit(outputEntry) {\n    const maxFileSize = this.cfg.maxLocalFileSizeBytes;\n    const fileSize = outputEntry.size;\n    if (maxFileSize && fileSize && fileSize > maxFileSize) {\n      return buildOutputFileError({\n        type: 'FILE_SIZE_EXCEEDED',\n        message: this.l10n('files-max-size-limit-error', { maxFileSize: prettyBytes(maxFileSize) }),\n        entry: outputEntry,\n      });\n    }\n  }\n\n  /**\n   * @private\n   * @param {import('../types').OutputFileEntry} outputEntry\n   * @param {import('./TypedData.js').TypedData} [internalEntry]\n   */\n  _validateUploadError(outputEntry, internalEntry) {\n    /** @type {unknown} */\n    const cause = internalEntry?.getValue('uploadError');\n    if (!cause) {\n      return;\n    }\n\n    if (cause instanceof UploadError) {\n      return buildOutputFileError({\n        type: 'UPLOAD_ERROR',\n        message: cause.message,\n        entry: outputEntry,\n        error: cause,\n      });\n    } else if (cause instanceof NetworkError) {\n      return buildOutputFileError({\n        type: 'NETWORK_ERROR',\n        message: cause.message,\n        entry: outputEntry,\n        error: cause,\n      });\n    } else {\n      const error = cause instanceof Error ? cause : new Error('Unknown error', { cause });\n      return buildOutputFileError({\n        type: 'UNKNOWN_ERROR',\n        message: error.message,\n        entry: outputEntry,\n        error,\n      });\n    }\n  }\n\n  /**\n   * @private\n   * @param {import('../types').OutputFileEntry} outputEntry\n   */\n  _validateIsImage(outputEntry) {\n    const imagesOnly = this.cfg.imgOnly;\n    const isImage = outputEntry.isImage;\n    if (!imagesOnly || isImage) {\n      return;\n    }\n    if (!outputEntry.fileInfo && outputEntry.externalUrl) {\n      // skip validation for not uploaded files with external url, cause we don't know if they're images or not\n      return;\n    }\n    if (!outputEntry.fileInfo && !outputEntry.mimeType) {\n      // skip validation for not uploaded files without mime-type, cause we don't know if they're images or not\n      return;\n    }\n    return buildOutputFileError({\n      type: 'NOT_AN_IMAGE',\n      message: this.l10n('images-only-accepted'),\n      entry: outputEntry,\n    });\n  }\n\n  /**\n   * @private\n   * @param {import('./TypedData.js').TypedData} entry\n   */\n  _runFileValidatorsForEntry(entry) {\n    const outputEntry = this.getOutputItem(entry.uid);\n    const errors = [];\n\n    for (const validator of this._fileValidators) {\n      const error = validator(outputEntry, entry);\n      if (error) {\n        errors.push(error);\n      }\n    }\n    entry.setValue('errors', errors);\n  }\n\n  /**\n   * @private\n   * @param {string[]} [entryIds]\n   */\n  _runFileValidators(entryIds) {\n    const ids = entryIds ?? this.uploadCollection.items();\n    for (const id of ids) {\n      const entry = this.uploadCollection.read(id);\n      entry && this._runFileValidatorsForEntry(entry);\n    }\n  }\n\n  /** @private */\n  _runCollectionValidators() {\n    const collection = this.uploadCollection;\n    const errors = [];\n\n    for (const validator of this._collectionValidators) {\n      const errorOrErrors = validator(collection);\n      if (!errorOrErrors) {\n        continue;\n      }\n      if (Array.isArray(errorOrErrors)) {\n        errors.push(...errorOrErrors);\n      } else {\n        errors.push(errorOrErrors);\n      }\n    }\n\n    this.$['*collectionErrors'] = errors;\n\n    if (errors.length > 0) {\n      this.emit(\n        EventType.COMMON_UPLOAD_FAILED,\n        () => /** @type {import('../types').OutputCollectionState<'failed'>} */ (this.getOutputCollectionState()),\n        { debounce: true },\n      );\n    }\n  }\n\n  /**\n   * @private\n   * @param {import('../types').OutputCollectionState} collectionState\n   */\n  async _createGroup(collectionState) {\n    const uploadClientOptions = this.getUploadClientOptions();\n    const uuidList = collectionState.allEntries.map((entry) => {\n      return entry.uuid + (entry.cdnUrlModifiers ? `/${entry.cdnUrlModifiers}` : '');\n    });\n    const abortController = new AbortController();\n    const resp = await uploadFileGroup(uuidList, { ...uploadClientOptions, signal: abortController.signal });\n    if (this.$['*collectionState'] !== collectionState) {\n      abortController.abort();\n      return;\n    }\n    this.$['*groupInfo'] = resp;\n    const collectionStateWithGroup = /** @type {import('../types').OutputCollectionState<'success', 'has-group'>} */ (\n      this.getOutputCollectionState()\n    );\n    this.emit(EventType.GROUP_CREATED, collectionStateWithGroup);\n    this.emit(EventType.CHANGE, () => this.getOutputCollectionState(), { debounce: true });\n    this.$['*collectionState'] = collectionStateWithGroup;\n  }\n\n  /** @private */\n  _flushOutputItems = debounce(async () => {\n    const data = this.getOutputData();\n    if (data.length !== this.uploadCollection.size) {\n      return;\n    }\n    const collectionState = this.getOutputCollectionState();\n    this.$['*collectionState'] = collectionState;\n    this.emit(EventType.CHANGE, () => this.getOutputCollectionState(), { debounce: true });\n\n    if (this.cfg.groupOutput && collectionState.totalCount > 0 && collectionState.status === 'success') {\n      this._createGroup(collectionState);\n    }\n  }, 300);\n\n  /**\n   * @private\n   * @type {Parameters<import('./TypedCollection.js').TypedCollection['observeCollection']>[0]}\n   * @param {Set<import('./TypedData.js').TypedData>} removed\n   */\n  _handleCollectionUpdate = (entries, added, removed) => {\n    if (added.size || removed.size) {\n      this.$['*groupInfo'] = null;\n    }\n    this._runFileValidators();\n    this._runCollectionValidators();\n\n    for (const entry of added) {\n      if (!entry.getValue('silent')) {\n        this.emit(EventType.FILE_ADDED, this.getOutputItem(entry.uid));\n      }\n    }\n\n    for (const entry of removed) {\n      /** @type {Set<string>} */ (this.$['*uploadTrigger']).delete(entry.uid);\n\n      entry.getValue('abortController')?.abort();\n      entry.setMultipleValues({\n        isRemoved: true,\n        abortController: null,\n        isUploading: false,\n        uploadProgress: 0,\n      });\n      URL.revokeObjectURL(entry?.getValue('thumbUrl'));\n      this.emit(EventType.FILE_REMOVED, this.getOutputItem(entry.uid));\n    }\n\n    this.$['*uploadList'] = entries.map((uid) => {\n      return { uid };\n    });\n\n    this._flushCommonUploadProgress();\n    this._flushOutputItems();\n  };\n\n  /**\n   * @private\n   * @param {Record<keyof import('./uploadEntrySchema.js').UploadEntry, Set<string>>} changeMap\n   */\n  _handleCollectionPropertiesUpdate = (changeMap) => {\n    this._flushOutputItems();\n\n    const uploadCollection = this.uploadCollection;\n    const entriesToRunValidation = [\n      ...new Set(\n        Object.entries(changeMap)\n          .filter(([key]) => ['uploadError', 'fileInfo'].includes(key))\n          .map(([, ids]) => [...ids])\n          .flat(),\n      ),\n    ];\n\n    entriesToRunValidation.length > 0 &&\n      setTimeout(() => {\n        // We can't modify entry properties in the same tick, so we need to wait a bit\n        this._runFileValidators(entriesToRunValidation);\n      });\n\n    if (changeMap.uploadProgress) {\n      for (const entryId of changeMap.uploadProgress) {\n        const { isUploading, silent } = Data.getCtx(entryId).store;\n        if (isUploading && !silent) {\n          this.emit(EventType.FILE_UPLOAD_PROGRESS, this.getOutputItem(entryId));\n        }\n      }\n\n      this._flushCommonUploadProgress();\n    }\n    if (changeMap.isUploading) {\n      for (const entryId of changeMap.isUploading) {\n        const { isUploading, silent } = Data.getCtx(entryId).store;\n        if (isUploading && !silent) {\n          this.emit(EventType.FILE_UPLOAD_START, this.getOutputItem(entryId));\n        }\n      }\n    }\n    if (changeMap.fileInfo) {\n      for (const entryId of changeMap.fileInfo) {\n        const { fileInfo, silent } = Data.getCtx(entryId).store;\n        if (fileInfo && !silent) {\n          this.emit(EventType.FILE_UPLOAD_SUCCESS, this.getOutputItem(entryId));\n        }\n      }\n      if (this.cfg.cropPreset) {\n        this.setInitialCrop();\n      }\n      let loadedItems = uploadCollection.findItems((entry) => {\n        return !!entry.getValue('fileInfo');\n      });\n      let errorItems = uploadCollection.findItems((entry) => {\n        return entry.getValue('errors').length > 0;\n      });\n      if (errorItems.length === 0 && uploadCollection.size === loadedItems.length) {\n        this.emit(\n          EventType.COMMON_UPLOAD_SUCCESS,\n          /** @type {import('../types').OutputCollectionState<'success'>} */ (this.getOutputCollectionState()),\n        );\n      }\n    }\n    if (changeMap.errors) {\n      for (const entryId of changeMap.errors) {\n        const { errors } = Data.getCtx(entryId).store;\n        if (errors.length > 0) {\n          this.emit(EventType.FILE_UPLOAD_FAILED, this.getOutputItem(entryId));\n          this.emit(\n            EventType.COMMON_UPLOAD_FAILED,\n            () => /** @type {import('../types').OutputCollectionState<'failed'>} */ (this.getOutputCollectionState()),\n            { debounce: true },\n          );\n        }\n      }\n    }\n    if (changeMap.cdnUrl) {\n      const uids = [...changeMap.cdnUrl].filter((uid) => {\n        return !!this.uploadCollection.read(uid)?.getValue('cdnUrl');\n      });\n      uids.forEach((uid) => {\n        this.emit(EventType.FILE_URL_CHANGED, this.getOutputItem(uid));\n      });\n\n      this.$['*groupInfo'] = null;\n    }\n  };\n\n  /** @private */\n  _flushCommonUploadProgress = () => {\n    let commonProgress = 0;\n    /** @type {Set<string>} */\n    const uploadTrigger = this.$['*uploadTrigger'];\n    const items = [...uploadTrigger].filter((id) => !!this.uploadCollection.read(id));\n    items.forEach((id) => {\n      const uploadProgress = this.uploadCollection.readProp(id, 'uploadProgress');\n      commonProgress += uploadProgress;\n    });\n    const progress = items.length ? Math.round(commonProgress / items.length) : 0;\n\n    if (this.$['*commonProgress'] === progress) {\n      return;\n    }\n\n    this.$['*commonProgress'] = progress;\n    this.emit(\n      EventType.COMMON_UPLOAD_PROGRESS,\n      /** @type {import('../types').OutputCollectionState<'uploading'>} */ (this.getOutputCollectionState()),\n    );\n  };\n\n  /** @private */\n  setInitialCrop() {\n    const cropPreset = parseCropPreset(this.cfg.cropPreset);\n    if (cropPreset) {\n      const [aspectRatioPreset] = cropPreset;\n\n      const entries = this.uploadCollection\n        .findItems(\n          (entry) =>\n            entry.getValue('fileInfo') &&\n            entry.getValue('isImage') &&\n            !entry.getValue('cdnUrlModifiers')?.includes('/crop/'),\n        )\n        .map((id) => this.uploadCollection.read(id));\n\n      for (const entry of entries) {\n        const fileInfo = entry.getValue('fileInfo');\n        const { width, height } = fileInfo.imageInfo;\n        const expectedAspectRatio = aspectRatioPreset.width / aspectRatioPreset.height;\n        const crop = calculateMaxCenteredCropFrame(width, height, expectedAspectRatio);\n        const cdnUrlModifiers = createCdnUrlModifiers(\n          `crop/${crop.width}x${crop.height}/${crop.x},${crop.y}`,\n          'preview',\n        );\n        entry.setMultipleValues({\n          cdnUrlModifiers,\n          cdnUrl: createCdnUrl(entry.getValue('cdnUrl'), cdnUrlModifiers),\n        });\n        if (\n          this.uploadCollection.size === 1 &&\n          this.cfg.useCloudImageEditor &&\n          this.hasBlockInCtx((block) => block.activityType === ActivityBlock.activities.CLOUD_IMG_EDIT)\n        ) {\n          this.$['*focusedEntry'] = entry;\n          this.$['*currentActivity'] = ActivityBlock.activities.CLOUD_IMG_EDIT;\n        }\n      }\n    }\n  }\n\n  /**\n   * @param {string} entryId\n   * @protected\n   */\n  async getMetadataFor(entryId) {\n    const configValue = this.cfg.metadata ?? /** @type {import('../types').Metadata} */ (this.$['*uploadMetadata']);\n    if (typeof configValue === 'function') {\n      const outputFileEntry = this.getOutputItem(entryId);\n      const metadata = await configValue(outputFileEntry);\n      return metadata;\n    }\n    return configValue;\n  }\n\n  /** @returns {import('@uploadcare/upload-client').FileFromOptions} */\n  getUploadClientOptions() {\n    let options = {\n      store: this.cfg.store,\n      publicKey: this.cfg.pubkey,\n      baseCDN: this.cfg.cdnCname,\n      baseURL: this.cfg.baseUrl,\n      userAgent: customUserAgent,\n      integration: this.cfg.userAgentIntegration,\n      secureSignature: this.cfg.secureSignature,\n      secureExpire: this.cfg.secureExpire,\n      retryThrottledRequestMaxTimes: this.cfg.retryThrottledRequestMaxTimes,\n      multipartMinFileSize: this.cfg.multipartMinFileSize,\n      multipartChunkSize: this.cfg.multipartChunkSize,\n      maxConcurrentRequests: this.cfg.multipartMaxConcurrentRequests,\n      multipartMaxAttempts: this.cfg.multipartMaxAttempts,\n      checkForUrlDuplicates: !!this.cfg.checkForUrlDuplicates,\n      saveUrlForRecurrentUploads: !!this.cfg.saveUrlForRecurrentUploads,\n    };\n\n    return options;\n  }\n\n  /**\n   * @template {import('../types').OutputFileStatus} TStatus\n   * @param {string} entryId\n   * @returns {import('../types/exported.js').OutputFileEntry<TStatus>}\n   */\n  getOutputItem(entryId) {\n    const uploadEntryData = /** @type {import('./uploadEntrySchema.js').UploadEntry} */ (Data.getCtx(entryId).store);\n\n    /** @type {import('@uploadcare/upload-client').UploadcareFile?} */\n    const fileInfo = uploadEntryData.fileInfo;\n\n    /** @type {import('../types').OutputFileEntry['status']} */\n    let status = uploadEntryData.isRemoved\n      ? 'removed'\n      : uploadEntryData.errors.length > 0\n        ? 'failed'\n        : !!uploadEntryData.fileInfo\n          ? 'success'\n          : uploadEntryData.isUploading\n            ? 'uploading'\n            : 'idle';\n\n    /** @type {unknown} */\n    const outputItem = {\n      uuid: fileInfo?.uuid ?? uploadEntryData.uuid ?? null,\n      internalId: entryId,\n      name: fileInfo?.originalFilename ?? uploadEntryData.fileName,\n      size: fileInfo?.size ?? uploadEntryData.fileSize,\n      isImage: fileInfo?.isImage ?? uploadEntryData.isImage,\n      mimeType: fileInfo?.mimeType ?? uploadEntryData.mimeType,\n      file: uploadEntryData.file,\n      externalUrl: uploadEntryData.externalUrl,\n      cdnUrlModifiers: uploadEntryData.cdnUrlModifiers,\n      cdnUrl: uploadEntryData.cdnUrl ?? fileInfo?.cdnUrl ?? null,\n      fullPath: uploadEntryData.fullPath,\n      uploadProgress: uploadEntryData.uploadProgress,\n      fileInfo: fileInfo ?? null,\n      metadata: uploadEntryData.metadata ?? fileInfo?.metadata ?? null,\n      isSuccess: status === 'success',\n      isUploading: status === 'uploading',\n      isFailed: status === 'failed',\n      isRemoved: status === 'removed',\n      errors: /** @type {import('../types/exported.js').OutputFileEntry['errors']} */ (uploadEntryData.errors),\n      status,\n    };\n\n    return /** @type {import('../types/exported.js').OutputFileEntry<TStatus>} */ (outputItem);\n  }\n\n  /**\n   * @param {(item: import('./TypedData.js').TypedData) => Boolean} [checkFn]\n   * @returns {import('../types/exported.js').OutputFileEntry[]}\n   */\n  getOutputData(checkFn) {\n    const entriesIds = checkFn ? this.uploadCollection.findItems(checkFn) : this.uploadCollection.items();\n    const data = entriesIds.map((itemId) => this.getOutputItem(itemId));\n    return data;\n  }\n\n  /** @template {import('../types').OutputCollectionStatus} TStatus */\n  getOutputCollectionState() {\n    return /** @type {ReturnType<typeof buildOutputCollectionState<TStatus>>} */ (buildOutputCollectionState(this));\n  }\n}\n\n/** @enum {String} */\nUploaderBlock.extSrcList = Object.freeze({\n  FACEBOOK: 'facebook',\n  DROPBOX: 'dropbox',\n  GDRIVE: 'gdrive',\n  GPHOTOS: 'gphotos',\n  INSTAGRAM: 'instagram',\n  FLICKR: 'flickr',\n  VK: 'vk',\n  EVERNOTE: 'evernote',\n  BOX: 'box',\n  ONEDRIVE: 'onedrive',\n  HUDDLE: 'huddle',\n});\n\n/** @enum {String} */\nUploaderBlock.sourceTypes = Object.freeze({\n  LOCAL: 'local',\n  URL: 'url',\n  CAMERA: 'camera',\n  DRAW: 'draw',\n  ...UploaderBlock.extSrcList,\n});\n","/**\n * @template {string} T\n * @typedef {T extends `${infer Head} ${infer Tail}` ? `${Lowercase<Head>}-${KebabCase<Tail>}` : Lowercase<T>} KebabCase\n */\n\n/**\n * @template {string} T\n * @param {T} str\n * @returns {KebabCase<T>}\n */\nexport const toKebabCase = (str) =>\n  str\n    .match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g)\n    ?.map((x) => x.toLowerCase())\n    .join('-');\n","// @ts-check\n\nimport { initialConfig } from './initialConfig.js';\n\n/** @param {unknown} value */\nconst asString = (value) => String(value);\n/** @param {unknown} value */\nconst asNumber = (value) => {\n  const number = Number(value);\n  if (Number.isNaN(number)) {\n    throw new Error(`Invalid number: \"${value}\"`);\n  }\n  return number;\n};\n/** @param {unknown} value */\nexport const asBoolean = (value) => {\n  if (typeof value === 'undefined' || value === null) return false;\n  if (typeof value === 'boolean') return value;\n  // for attr like multiple=\"true\" (react will pass it as string)\n  if (value === 'true') return true;\n  // for attr flags like multiple=\"\" (some other libs will pass it as empty string)\n  if (value === '') return true;\n  // for attr like multiple=\"false\" (react will pass it as string)\n  if (value === 'false') return false;\n  throw new Error(`Invalid boolean: \"${value}\"`);\n};\n/**\n * @template {Function} T\n * @param {unknown} value\n * @returns {T}\n */\nexport const asFunction = (value) => {\n  if (typeof value === 'function') {\n    return /** @type {T} */ (value);\n  }\n\n  throw new Error('Invalid function value. Must be a function.');\n};\n/** @param {unknown} value */\nconst asStore = (value) => (value === 'auto' ? value : asBoolean(value));\n\n/** @param {unknown} value */\nconst asCameraCapture = (value) => {\n  const strValue = asString(value);\n  if (strValue !== 'user' && strValue !== 'environment' && strValue !== '') {\n    throw new Error(`Invalid \"cameraCapture\" value: \"${strValue}\"`);\n  }\n  return strValue;\n};\n\n/** @param {unknown} value */\nconst asMetadata = (value) => {\n  if (typeof value === 'object' && !Array.isArray(value)) {\n    return /** @type {import('../../types').Metadata} */ (value);\n  }\n  if (typeof value === 'function') {\n    return /** @type {import('../../types').MetadataCallback} */ (value);\n  }\n\n  throw new Error('Invalid metadata value. Must be an object or function.');\n};\n\n/** @param {unknown} value */\nconst asLocaleDefinitionOverride = (value) => {\n  if (typeof value === 'object') {\n    return /** @type {import('../../types').LocaleDefinitionOverride} */ (value);\n  }\n\n  throw new Error('Invalid localeDefinitionOverride value. Must be an object.');\n};\n\n/**\n * @type {{\n *   [Key in keyof import('../../types').ConfigType]: (\n *     value: unknown,\n *   ) => import('../../types').ConfigType[Key] | undefined;\n * }}\n */\nconst mapping = {\n  pubkey: asString,\n  multiple: asBoolean,\n  multipleMin: asNumber,\n  multipleMax: asNumber,\n\n  confirmUpload: asBoolean,\n  imgOnly: asBoolean,\n  accept: asString,\n  externalSourcesPreferredTypes: asString,\n  store: asStore,\n  cameraMirror: asBoolean,\n  cameraCapture: asCameraCapture,\n  sourceList: asString,\n  maxLocalFileSizeBytes: asNumber,\n  thumbSize: asNumber,\n  showEmptyList: asBoolean,\n  useLocalImageEditor: asBoolean,\n  useCloudImageEditor: asBoolean,\n  cloudImageEditorTabs: asString,\n  removeCopyright: asBoolean,\n  cropPreset: asString,\n  imageShrink: asString,\n\n  modalScrollLock: asBoolean,\n  modalBackdropStrokes: asBoolean,\n\n  sourceListWrap: asBoolean,\n\n  remoteTabSessionKey: asString,\n  cdnCname: asString,\n  baseUrl: asString,\n  socialBaseUrl: asString,\n  secureSignature: asString,\n  secureExpire: asString,\n  secureDeliveryProxy: asString,\n  retryThrottledRequestMaxTimes: asNumber,\n  multipartMinFileSize: asNumber,\n  multipartChunkSize: asNumber,\n  maxConcurrentRequests: asNumber,\n  multipartMaxConcurrentRequests: asNumber,\n  multipartMaxAttempts: asNumber,\n  checkForUrlDuplicates: asBoolean,\n  saveUrlForRecurrentUploads: asBoolean,\n\n  groupOutput: asBoolean,\n  userAgentIntegration: asString,\n  debug: asBoolean,\n\n  localeName: asString,\n\n  metadata: asMetadata,\n  localeDefinitionOverride: asLocaleDefinitionOverride,\n  iconHrefResolver: /** @type {typeof asFunction<import('../../types').IconHrefResolver>} */ (asFunction),\n};\n\n/**\n * @template {keyof import('../../types').ConfigType} T\n * @param {T} key\n * @param {unknown} value\n * @returns {import('../../types').ConfigType[T] | undefined}\n */\nexport const normalizeConfigValue = (key, value) => {\n  if (typeof value === 'undefined' || value === null) {\n    return undefined;\n  }\n\n  try {\n    return mapping[key](value);\n  } catch (reason) {\n    console.error(`Invalid value for config key \"${key}\".`, reason);\n    return initialConfig[key];\n  }\n};\n","// @ts-check\nimport { Block } from '../../abstract/Block.js';\nimport { initialConfig } from './initialConfig.js';\nimport { sharedConfigKey } from '../../abstract/sharedConfigKey.js';\nimport { toKebabCase } from '../../utils/toKebabCase.js';\nimport { normalizeConfigValue } from './normalizeConfigValue.js';\n\nconst allConfigKeys = /** @type {(keyof import('../../types').ConfigType)[]} */ ([\n  // \"debug\" option should go first to be able to print debug messages from the very beginning\n  ...new Set(['debug', ...Object.keys(initialConfig)]),\n]);\n\n/**\n * Config keys that can't be passed as attribute (because they are object or function)\n *\n * @type {(keyof import('../../types').ConfigComplexType)[]}\n */\nconst complexConfigKeys = ['metadata', 'localeDefinitionOverride', 'iconHrefResolver'];\n\n/** @type {(key: keyof import('../../types').ConfigType) => key is keyof import('../../types').ConfigComplexType} */\nconst isComplexKey = (key) => complexConfigKeys.includes(key);\n\n/** Config keys that can be passed as attribute */\nconst plainConfigKeys = /** @type {(keyof import('../../types').ConfigPlainType)[]} */ (\n  allConfigKeys.filter((key) => !isComplexKey(key))\n);\n\n/**\n * Mapping of attribute names to config keys Kebab-case and lowercase are supported. lowercase could be used by\n * frameworks like vue and react.\n */\nconst attrKeyMapping =\n  /** @type {Record<keyof import('../../types').ConfigAttributesType, keyof import('../../types').ConfigPlainType>} */ ({\n    ...Object.fromEntries(plainConfigKeys.map((key) => [toKebabCase(key), key])),\n    ...Object.fromEntries(plainConfigKeys.map((key) => [key.toLowerCase(), key])),\n  });\n\n/** Mapping of attribute names to state */\nconst attrStateMapping = /** @type {Record<keyof import('../../types').ConfigAttributesType, string>} */ ({\n  ...Object.fromEntries(plainConfigKeys.map((key) => [toKebabCase(key), sharedConfigKey(key)])),\n  ...Object.fromEntries(plainConfigKeys.map((key) => [key.toLowerCase(), sharedConfigKey(key)])),\n});\n\n/** @param {string} key */\nconst getLocalPropName = (key) => '__' + key;\n\nclass ConfigClass extends Block {\n  requireCtxName = true;\n\n  constructor() {\n    super();\n\n    /** @type {Block['init$'] & import('../../types').ConfigType} */\n    this.init$ = {\n      ...this.init$,\n      ...Object.fromEntries(\n        Object.entries(initialConfig).map(([key, value]) => [\n          sharedConfigKey(/** @type {keyof import('../../types').ConfigType} */ (key)),\n          value,\n        ]),\n      ),\n    };\n  }\n\n  /**\n   * @private\n   * @param {keyof import('../../types').ConfigType} key\n   * @param {unknown} value\n   */\n  _flushValueToAttribute(key, value) {\n    if (plainConfigKeys.includes(key)) {\n      // Flush the value to the DOM attributes\n      const attrs = [...new Set([toKebabCase(key), key.toLowerCase()])];\n      for (const attr of attrs) {\n        if (typeof value === 'undefined' || value === null) {\n          this.removeAttribute(attr);\n        } else if (this.getAttribute(attr) !== value.toString()) {\n          this.setAttribute(attr, value.toString());\n        }\n      }\n    }\n  }\n\n  /**\n   * @private\n   * @param {keyof import('../../types').ConfigType} key\n   * @param {unknown} value\n   */\n  _flushValueToState(key, value) {\n    if (this.$[sharedConfigKey(key)] !== value) {\n      if (typeof value === 'undefined' || value === null) {\n        this.$[sharedConfigKey(key)] = initialConfig[key];\n      } else {\n        this.$[sharedConfigKey(key)] = value;\n      }\n    }\n  }\n\n  /**\n   * @private\n   * @param {keyof import('../../types').ConfigType} key\n   * @param {unknown} value\n   */\n  _setValue(key, value) {\n    const anyThis = /** @type {typeof this & any} */ (this);\n\n    const normalizedValue = normalizeConfigValue(key, value);\n\n    const localPropName = getLocalPropName(key);\n    if (anyThis[localPropName] === normalizedValue) return;\n\n    this._assertSameValueDifferentReference(key, anyThis[localPropName], normalizedValue);\n\n    anyThis[localPropName] = normalizedValue;\n\n    // Flush the value to the state\n    this._flushValueToAttribute(key, normalizedValue);\n    this._flushValueToState(key, normalizedValue);\n\n    this.debugPrint(`[lr-config] \"${key}\"`, normalizedValue);\n  }\n\n  /**\n   * @private\n   * @param {keyof import('../../types').ConfigType} key\n   */\n  _getValue(key) {\n    const anyThis = /** @type {typeof this & any} */ (this);\n    const localPropName = getLocalPropName(key);\n    return anyThis[localPropName];\n  }\n\n  /**\n   * @param {string} key\n   * @param {unknown} previousValue\n   * @param {unknown} nextValue\n   */\n  _assertSameValueDifferentReference(key, previousValue, nextValue) {\n    if (this.cfg.debug) {\n      if (\n        nextValue !== previousValue &&\n        typeof nextValue === 'object' &&\n        typeof previousValue === 'object' &&\n        JSON.stringify(nextValue) === JSON.stringify(previousValue)\n      ) {\n        console.warn(\n          `[lr-config] Option \"${key}\" value is the same as the previous one but the reference is different`,\n        );\n        console.warn(\n          `[lr-config] You should avoid changing the reference of the object to prevent unnecessary calculations`,\n        );\n        console.warn(`[lr-config] \"${key}\" previous value:`, previousValue);\n        console.warn(`[lr-config] \"${key}\" new value:`, nextValue);\n      }\n    }\n  }\n\n  initCallback() {\n    super.initCallback();\n    const anyThis = /** @type {typeof this & any} */ (this);\n\n    // Subscribe to the state changes and update the local properties and attributes.\n    // Initial callback call is disabled to prevent the initial value to be set here.\n    // Initial value will be set below, skipping the default values.\n    for (const key of plainConfigKeys) {\n      this.sub(\n        sharedConfigKey(key),\n        (value) => {\n          this._setValue(key, value);\n        },\n        false,\n      );\n    }\n\n    for (const key of allConfigKeys) {\n      // Flush the initial value to the state.\n      // Initial value is taken from the DOM property if it was set before the element was initialized.\n      // If no DOM property was set, the initial value is taken from the initialConfig.\n      const initialValue = anyThis[key] ?? this.$[sharedConfigKey(key)];\n      if (initialValue !== initialConfig[key]) {\n        this._setValue(key, initialValue);\n      }\n\n      // Define DOM property setters and getters\n      // They will be used in the userland directly or by the frameworks\n      Object.defineProperty(this, key, {\n        /** @param {unknown} value */\n        set: (value) => {\n          this._setValue(key, value);\n        },\n        get: () => {\n          return this._getValue(key);\n        },\n      });\n    }\n  }\n\n  /**\n   * @param {keyof typeof attrStateMapping} name\n   * @param {string} oldVal\n   * @param {string} newVal\n   */\n  attributeChangedCallback(name, oldVal, newVal) {\n    if (oldVal === newVal) return;\n\n    const anyThis = /** @type {typeof this & any} */ (this);\n    const key = attrKeyMapping[name];\n    // attributeChangedCallback could be called before the initCallback\n    // so we set the DOM property instead of calling this._setValue.\n    // If the block was initialized, the value will be handled by the setter.\n    // If the block was not initialized, the value will be set to the DOM property\n    // and handled on initialization.\n    anyThis[key] = newVal;\n  }\n}\n\nConfigClass.bindAttributes(attrStateMapping);\n\n/**\n * Define empty DOM properties for all config keys on the Custom Element class prototype to make them checkable using\n * `key in element` syntax. This is required for the frameworks DOM property bindings to work.\n */\nfor (const key of allConfigKeys) {\n  /** @type {any} */ (ConfigClass.prototype)[key] = undefined;\n}\n\n/** @typedef {import('../../utils/mixinClass.js').MixinClass<typeof ConfigClass, import('../../types').ConfigType>} Config */\n\n// This is workaround for jsdoc that allows us to export extended class type along with the class itself\nexport const Config = /** @type {Config} */ (/** @type {unknown} */ (ConfigClass));\n","// @ts-check\nimport { Block } from '../../abstract/Block.js';\n\nexport class Icon extends Block {\n  constructor() {\n    super();\n\n    this.init$ = {\n      ...this.init$,\n      name: '',\n      href: '',\n      title: '',\n    };\n  }\n\n  initCallback() {\n    super.initCallback();\n    this.sub('name', (val) => {\n      if (!val) {\n        return;\n      }\n      let iconHref = `#uc-icon-${val}`;\n      this.subConfigValue('iconHrefResolver', (iconHrefResolver) => {\n        if (iconHrefResolver) {\n          const customIconHref = iconHrefResolver(val);\n          iconHref = customIconHref ?? iconHref;\n        }\n        this.$.href = iconHref;\n      });\n    });\n  }\n}\n\nIcon.template = /* HTML */ `\n  <svg ref=\"svg\" xmlns=\"http://www.w3.org/2000/svg\">\n    <title>{{title}}</title>\n    <use set=\"@href: href;\"></use>\n  </svg>\n`;\n\nIcon.bindAttributes({\n  name: 'name',\n  title: 'title',\n});\n","/**\n * @template T\n * @param {T[]} arr\n * @returns {T[]}\n */\nexport const uniqueArray = (arr) => {\n  return [...new Set(arr)];\n};\n","const DEFAULT_CDN_BASE = 'https://ucarecdn.com';\n\nexport const PROPS_MAP = Object.freeze({\n  'dev-mode': {},\n  pubkey: {},\n  uuid: {},\n  src: {},\n  // alt: {},\n  // 'placeholder-src': {}, // available via CSS\n  lazy: {\n    default: 1,\n  },\n  intersection: {},\n  breakpoints: {\n    // '200, 300, 400'\n  },\n  'cdn-cname': {\n    default: DEFAULT_CDN_BASE,\n  },\n  'proxy-cname': {},\n  'secure-delivery-proxy': {},\n  'hi-res-support': {\n    default: 1,\n  },\n  'ultra-res-support': {}, // ?\n  format: {},\n  'cdn-operations': {},\n  progressive: {},\n  quality: {},\n  'is-background-for': {},\n  'is-preview-blur': {\n    default: 1,\n  },\n});\n","export const CSS_PREF = '--lr-img-';\nexport const UNRESOLVED_ATTR = 'unresolved';\nexport const HI_RES_K = 2;\nexport const ULTRA_RES_K = 3;\nexport const DEV_MODE =\n  !window.location.host.trim() || window.location.host.includes(':') || window.location.hostname.includes('localhost');\n\nexport const MAX_WIDTH = 3000;\nexport const MAX_WIDTH_JPG = 5000;\n\nexport const ImgTypeEnum = Object.freeze({\n  PREVIEW: 'PREVIEW',\n  MAIN: 'MAIN',\n});\n","import { BaseComponent, Data } from '@symbiotejs/symbiote';\nimport { PROPS_MAP } from './props-map.js';\nimport { CSS_PREF } from './configurations.js';\nimport { PACKAGE_NAME, PACKAGE_VERSION } from '../../env.js';\n\nconst CSS_PROPS = Object.create(null);\nfor (let prop in PROPS_MAP) {\n  CSS_PROPS[CSS_PREF + prop] = PROPS_MAP[prop]?.default || '';\n}\n\nexport class ImgConfig extends BaseComponent {\n  cssInit$ = CSS_PROPS;\n\n  /**\n   * @param {String} key\n   * @returns {any}\n   */\n  $$(key) {\n    return this.$[CSS_PREF + key];\n  }\n\n  /** @param {Object<String, String | Number>} kvObj */\n  set$$(kvObj) {\n    for (let key in kvObj) {\n      this.$[CSS_PREF + key] = kvObj[key];\n    }\n  }\n\n  /**\n   * @param {String} key\n   * @param {(val: any) => void} kbFn\n   */\n  sub$$(key, kbFn) {\n    this.sub(CSS_PREF + key, (val) => {\n      // null comes from CSS context property\n      // empty string comes from attribute value\n      if (val === null || val === '') {\n        return;\n      }\n      kbFn(val);\n    });\n  }\n\n  analyticsParams() {\n    return `-/@clib/${PACKAGE_NAME}/${PACKAGE_VERSION}/lr-img/`;\n  }\n\n  initAttributes(el) {\n    [...this.attributes].forEach((attr) => {\n      if (!PROPS_MAP[attr.name]) {\n        el.setAttribute(attr.name, attr.value);\n      }\n    });\n  }\n\n  /**\n   * @param {HTMLElement} el\n   * @param {() => void} cbkFn\n   */\n  initIntersection(el, cbkFn) {\n    let opts = {\n      root: null,\n      rootMargin: '0px',\n    };\n    /** @private */\n    this._isnObserver = new IntersectionObserver((entries) => {\n      entries.forEach((ent) => {\n        if (ent.isIntersecting) {\n          cbkFn();\n          this._isnObserver.unobserve(el);\n        }\n      });\n    }, opts);\n    this._isnObserver.observe(el);\n    if (!this._observed) {\n      /** @private */\n      this._observed = new Set();\n    }\n    this._observed.add(el);\n  }\n\n  destroyCallback() {\n    super.destroyCallback();\n    if (this._isnObserver) {\n      this._observed.forEach((el) => {\n        this._isnObserver.unobserve(el);\n      });\n      this._isnObserver = null;\n    }\n    Data.deleteCtx(this);\n  }\n\n  static get observedAttributes() {\n    return Object.keys(PROPS_MAP);\n  }\n\n  attributeChangedCallback(name, oldVal, newVal) {\n    window.setTimeout(() => {\n      this.$[CSS_PREF + name] = newVal;\n    });\n  }\n}\n","import { applyTemplateData } from '../../utils/template-utils.js';\nimport { createCdnUrl, createCdnUrlModifiers, createOriginalUrl } from '../../utils/cdn-utils.js';\nimport { stringToArray } from '../../utils/stringToArray.js';\nimport { uniqueArray } from '../../utils/uniqueArray.js';\nimport { parseObjectToString } from './utils/parseObjectToString.js';\nimport { ImgConfig } from './ImgConfig.js';\nimport {\n  DEV_MODE,\n  HI_RES_K,\n  ULTRA_RES_K,\n  UNRESOLVED_ATTR,\n  MAX_WIDTH,\n  MAX_WIDTH_JPG,\n  ImgTypeEnum,\n} from './configurations.js';\n\nexport class ImgBase extends ImgConfig {\n  _img = new Image();\n  _imgPreview = new Image();\n\n  /**\n   * @private\n   * @param {String} src\n   */\n  _fmtAbs(src) {\n    let isRel = !src.includes('//');\n    if (isRel && !DEV_MODE) {\n      src = new URL(src, document.baseURI).href;\n    }\n    return src;\n  }\n\n  /**\n   * Validate size\n   *\n   * @param {String} [size]\n   * @returns {String | Number}\n   */\n  _validateSize(size) {\n    if (size?.trim() !== '') {\n      // Extract numeric part\n      let numericPart = size.match(/\\d+/)[0];\n\n      // Extract alphabetic part\n      let alphabeticPart = size.match(/[a-zA-Z]+/)[0];\n\n      const bp = parseInt(numericPart, 10);\n\n      if (Number(bp) > MAX_WIDTH_JPG && this.hasFormatJPG) {\n        return MAX_WIDTH_JPG + alphabeticPart;\n      } else if (Number(bp) > MAX_WIDTH && !this.hasFormatJPG) {\n        return MAX_WIDTH + alphabeticPart;\n      }\n    }\n\n    return size;\n  }\n\n  /**\n   * Image operations\n   *\n   * @param {String} [size]\n   * @param {String} [blur]\n   */\n  _getCdnModifiers(size, blur) {\n    const params = {\n      format: this.$$('format'),\n      quality: this.$$('quality'),\n      resize: this._validateSize(size),\n      blur,\n      'cdn-operations': this.$$('cdn-operations'),\n      analytics: this.analyticsParams(),\n    };\n\n    return createCdnUrlModifiers(...parseObjectToString(params));\n  }\n\n  /**\n   * @private\n   * @param {String} [size]\n   * @param {String} [blur]\n   * @returns {any}\n   */\n  _getUrlBase(size = '', blur = '') {\n    if (this.$$('src').startsWith('data:') || this.$$('src').startsWith('blob:')) {\n      return this.$$('src');\n    }\n\n    // Localhost + relative image path (DO NOTHING):\n    if (DEV_MODE && this.$$('src') && !this.$$('src').includes('//')) {\n      return this._proxyUrl(this.$$('src'));\n    }\n\n    let cdnModifiers = this._getCdnModifiers(size, blur);\n\n    if (this.$$('src').startsWith(this.$$('cdn-cname'))) {\n      return createCdnUrl(this.$$('src'), cdnModifiers);\n    }\n\n    // Alternative CDN name:\n    if (this.$$('cdn-cname') && this.$$('uuid')) {\n      return this._proxyUrl(\n        createCdnUrl(\n          //\n          createOriginalUrl(this.$$('cdn-cname'), this.$$('uuid')),\n          cdnModifiers\n        )\n      );\n    }\n\n    // UUID only:\n    if (this.$$('uuid')) {\n      return this._proxyUrl(\n        createCdnUrl(\n          //\n          createOriginalUrl(this.$$('cdn-cname'), this.$$('uuid')),\n          cdnModifiers\n        )\n      );\n    }\n\n    // Alternative proxy name:\n    if (this.$$('proxy-cname')) {\n      return this._proxyUrl(\n        createCdnUrl(\n          //\n          this.$$('proxy-cname'),\n          cdnModifiers,\n          this._fmtAbs(this.$$('src'))\n        )\n      );\n    }\n\n    // Project pubkey only:\n    if (this.$$('pubkey')) {\n      return this._proxyUrl(\n        createCdnUrl(\n          //\n          `https://${this.$$('pubkey')}.ucr.io/`,\n          cdnModifiers,\n          this._fmtAbs(this.$$('src'))\n        )\n      );\n    }\n  }\n\n  /**\n   * @private\n   * @param {String} url\n   * @returns {String}\n   */\n  _proxyUrl(url) {\n    let previewProxy = this.$$('secure-delivery-proxy');\n    if (!previewProxy) {\n      return url;\n    }\n    return applyTemplateData(\n      this.$$('secure-delivery-proxy'),\n      { previewUrl: url },\n      { transform: (value) => window.encodeURIComponent(value) }\n    );\n  }\n\n  /**\n   * @param {HTMLElement} el\n   * @param {Number} [k]\n   * @param {Boolean} [wOnly]\n   */\n  _getElSize(el, k = 1, wOnly = true) {\n    let rect = el.getBoundingClientRect();\n    let w = k * Math.round(rect.width);\n    let h = wOnly ? '' : k * Math.round(rect.height);\n\n    if (w || h) {\n      return `${w ? w : ''}x${h ? h : ''}`;\n    } else {\n      return null;\n    }\n  }\n\n  /** @param {HTMLImageElement} img */\n  _setupEventProxy(img) {\n    /** @param {Event} e */\n    let proxifyEvent = (e) => {\n      e.stopPropagation();\n      let event = new Event(e.type, e);\n      this.dispatchEvent(event);\n    };\n    let EVENTS = ['load', 'error'];\n    for (let event of EVENTS) {\n      img.addEventListener(event, proxifyEvent);\n    }\n  }\n\n  /** @type {HTMLImageElement} */\n  get img() {\n    if (!this.hasPreviewImage) {\n      this._setupConfigForImage({ elNode: this._img });\n      this.appendChild(this._img);\n    }\n    return this._img;\n  }\n\n  get currentImg() {\n    return this.hasPreviewImage\n      ? {\n          type: ImgTypeEnum.PREVIEW,\n          img: this._imgPreview,\n        }\n      : {\n          type: ImgTypeEnum.MAIN,\n          img: this.img,\n        };\n  }\n\n  get hasPreviewImage() {\n    return this.$$('is-preview-blur');\n  }\n\n  get bgSelector() {\n    return this.$$('is-background-for');\n  }\n\n  get breakpoints() {\n    if (this.$$('breakpoints')) {\n      const list = stringToArray(this.$$('breakpoints'));\n      return uniqueArray(list.map((bp) => parseInt(bp, 10)));\n    } else {\n      return null;\n    }\n  }\n\n  get hasFormatJPG() {\n    return this.$$('format').toLowerCase() === 'jpeg';\n  }\n\n  /** @param {HTMLElement} el */\n  renderBg(el) {\n    let imgSet = new Set();\n\n    imgSet.add(`url(\"${this._getUrlBase(this._getElSize(el))}\") 1x`);\n    if (this.$$('hi-res-support')) {\n      imgSet.add(`url(\"${this._getUrlBase(this._getElSize(el, HI_RES_K))}\") ${HI_RES_K}x`);\n    }\n\n    if (this.$$('ultra-res-support')) {\n      imgSet.add(`url(\"${this._getUrlBase(this._getElSize(el, ULTRA_RES_K))}\") ${ULTRA_RES_K}x`);\n    }\n\n    let iSet = `image-set(${[...imgSet].join(', ')})`;\n    el.style.setProperty('background-image', iSet);\n    el.style.setProperty('background-image', '-webkit-' + iSet);\n  }\n\n  getSrcset() {\n    let srcset = new Set();\n    if (this.breakpoints) {\n      this.breakpoints.forEach((bp) => {\n        srcset.add(this._getUrlBase(bp + 'x') + ` ${this._validateSize(bp + 'w')}`);\n        if (this.$$('hi-res-support')) {\n          srcset.add(this._getUrlBase(bp * HI_RES_K + 'x') + ` ${this._validateSize(bp * HI_RES_K + 'w')}`);\n        }\n        if (this.$$('ultra-res-support')) {\n          srcset.add(this._getUrlBase(bp * ULTRA_RES_K + 'x') + ` ${this._validateSize(bp * ULTRA_RES_K + 'w')}`);\n        }\n      });\n    } else {\n      srcset.add(this._getUrlBase(this._getElSize(this.currentImg.img)) + ' 1x');\n      if (this.$$('hi-res-support')) {\n        srcset.add(this._getUrlBase(this._getElSize(this.currentImg.img, 2)) + ' 2x');\n      }\n      if (this.$$('ultra-res-support')) {\n        srcset.add(this._getUrlBase(this._getElSize(this.currentImg.img, 3)) + ' 3x');\n      }\n    }\n    return [...srcset].join();\n  }\n\n  getSrc() {\n    return this._getUrlBase();\n  }\n\n  get srcUrlPreview() {\n    return this._getUrlBase('100x', '100');\n  }\n\n  renderBackground() {\n    [...document.querySelectorAll(this.bgSelector)].forEach((el) => {\n      if (this.$$('intersection')) {\n        this.initIntersection(el, () => {\n          this.renderBg(el);\n        });\n      } else {\n        this.renderBg(el);\n      }\n    });\n  }\n\n  _appendURL({ elNode, src, srcset }) {\n    if (src) {\n      elNode.src = src;\n    }\n\n    if (srcset) {\n      elNode.srcset = srcset;\n    }\n  }\n\n  _setupConfigForImage({ elNode }) {\n    this._setupEventProxy(elNode);\n    this.initAttributes(elNode);\n  }\n\n  loaderImage({ src, srcset, elNode }) {\n    return new Promise((resolve, reject) => {\n      this._setupConfigForImage({ elNode });\n\n      elNode.setAttribute(UNRESOLVED_ATTR, '');\n\n      elNode.addEventListener('load', () => {\n        elNode.removeAttribute(UNRESOLVED_ATTR);\n        resolve(elNode);\n      });\n\n      elNode.addEventListener('error', () => {\n        reject(false);\n      });\n\n      this._appendURL({\n        elNode,\n        src,\n        srcset,\n      });\n    });\n  }\n\n  async renderImage() {\n    if (this.$$('intersection')) {\n      if (this.hasPreviewImage) {\n        this._setupConfigForImage({ elNode: this._imgPreview });\n        this.appendChild(this._imgPreview);\n      }\n\n      this.initIntersection(this.currentImg.img, async () => {\n        if (this.hasPreviewImage) {\n          this._imgPreview.src = this.srcUrlPreview;\n        }\n\n        try {\n          await this.loaderImage({\n            src: this.getSrc(),\n            srcset: this.getSrcset(),\n            elNode: this._img,\n          });\n\n          if (this.hasPreviewImage) {\n            await this._imgPreview.remove();\n          }\n\n          this.appendChild(this._img);\n        } catch (e) {\n          if (this.hasPreviewImage) {\n            await this._imgPreview?.remove();\n          }\n          this.appendChild(this._img);\n        }\n      });\n\n      return;\n    }\n\n    try {\n      if (this.hasPreviewImage) {\n        await this.loaderImage({\n          src: this.srcUrlPreview,\n          elNode: this._imgPreview,\n        });\n\n        this.appendChild(this._imgPreview);\n      }\n\n      await this.loaderImage({\n        src: this.getSrc(),\n        srcset: this.getSrcset(),\n        elNode: this._img,\n      });\n\n      if (this.hasPreviewImage) {\n        await this._imgPreview?.remove();\n      }\n\n      this.appendChild(this._img);\n    } catch (e) {\n      if (this.hasPreviewImage) {\n        await this._imgPreview?.remove();\n      }\n      this.appendChild(this._img);\n    }\n  }\n\n  init() {\n    if (this.bgSelector) {\n      this.renderBackground();\n    } else {\n      this.renderImage();\n    }\n  }\n}\n","export const parseObjectToString = (params) =>\n  Object.entries(params)\n    .filter(([key, value]) => value !== undefined && value !== '')\n    .map(([key, value]) => {\n      if (key === 'cdn-operations') {\n        return value;\n      }\n      if (key === 'analytics') {\n        return value;\n      }\n\n      return `${key}/${value}`;\n    });\n","import { ImgBase } from './ImgBase.js';\n\nexport class Img extends ImgBase {\n  initCallback() {\n    super.initCallback();\n\n    this.sub$$('src', () => {\n      this.init();\n    });\n\n    this.sub$$('uuid', () => {\n      this.init();\n    });\n\n    this.sub$$('lazy', (val) => {\n      if (!this.$$('is-background-for') && !this.$$('is-preview-blur')) {\n        this.img.loading = val ? 'lazy' : 'eager';\n      }\n    });\n  }\n}\n","// @ts-check\nimport { UploaderBlock } from '../../abstract/UploaderBlock.js';\nimport { asBoolean } from '../Config/normalizeConfigValue.js';\n\nexport class SimpleBtn extends UploaderBlock {\n  couldBeCtxOwner = true;\n  constructor() {\n    super();\n\n    this.init$ = {\n      ...this.init$,\n      withDropZone: true,\n      onClick: () => {\n        this.initFlow();\n      },\n      'button-text': '',\n    };\n  }\n\n  initCallback() {\n    super.initCallback();\n\n    this.defineAccessor(\n      'dropzone',\n      /** @param {unknown} val */\n      (val) => {\n        if (typeof val === 'undefined') {\n          return;\n        }\n        this.$.withDropZone = asBoolean(val);\n      },\n    );\n    this.subConfigValue('multiple', (val) => {\n      this.$['button-text'] = val ? 'upload-files' : 'upload-file';\n    });\n  }\n}\n\nSimpleBtn.template = /* HTML */ `\n  <lr-drop-area set=\"@disabled: !withDropZone\">\n    <button type=\"button\" set=\"onclick: onClick\">\n      <lr-icon name=\"upload\"></lr-icon>\n      <span l10n=\"button-text\"></span>\n      <slot></slot>\n      <div class=\"visual-drop-area\" l10n=\"drop-files-here\"></div>\n    </button>\n  </lr-drop-area>\n`;\n\nSimpleBtn.bindAttributes({\n  // @ts-expect-error TODO: we need to update symbiote types\n  dropzone: null,\n});\n","import { ActivityBlock } from '../../abstract/ActivityBlock.js';\n\nexport class StartFrom extends ActivityBlock {\n  historyTracked = true;\n  /** @type {import('../../abstract/ActivityBlock.js').ActivityType} */\n  activityType = 'start-from';\n\n  initCallback() {\n    super.initCallback();\n    this.registerActivity(this.activityType);\n  }\n}\n\nStartFrom.template = /* HTML */ ` <div class=\"content\"><slot></slot></div> `;\n","// @ts-check\n\n/**\n * @typedef {{\n *       type: 'file';\n *       file: File;\n *       fullPath?: string;\n *     }\n *   | {\n *       type: 'url';\n *       url: string;\n *     }} DropItem\n */\n\n/**\n * @param {File} file\n * @returns {Promise<boolean>}\n */\nfunction checkIsDirectory(file) {\n  return new Promise((resolve) => {\n    if (typeof window.FileReader !== 'function') {\n      resolve(false);\n    }\n\n    try {\n      let reader = new FileReader();\n      reader.onerror = () => {\n        resolve(true);\n      };\n      /** @param {Event} e */\n      let onLoad = (e) => {\n        if (e.type !== 'loadend') {\n          reader.abort();\n        }\n        resolve(false);\n      };\n      reader.onloadend = onLoad;\n      reader.onprogress = onLoad;\n\n      reader.readAsDataURL(file);\n    } catch (err) {\n      resolve(false);\n    }\n  });\n}\n\n/**\n * @param {FileSystemEntry} webkitEntry\n * @param {string} dataTransferItemType\n * @returns {Promise<DropItem[] | null>}\n */\nfunction readEntryContentAsync(webkitEntry, dataTransferItemType) {\n  return new Promise((resolve) => {\n    let reading = 0;\n    /** @type {DropItem[]} */\n    const dropItems = [];\n\n    /** @param {FileSystemEntry} entry */\n    const readEntry = (entry) => {\n      if (!entry) {\n        console.warn('Unexpectedly received empty content entry', { scope: 'drag-and-drop' });\n        resolve(null);\n      }\n      if (entry.isFile) {\n        reading++;\n        /** @type {FileSystemFileEntry} */ (entry).file((file) => {\n          reading--;\n          // webkitGetAsEntry don't provide type for HEIC images at least, so we use type value from dataTransferItem\n          const clonedFile = new File([file], file.name, { type: file.type || dataTransferItemType });\n          dropItems.push({\n            type: 'file',\n            file: clonedFile,\n            fullPath: entry.fullPath,\n          });\n\n          if (reading === 0) {\n            resolve(dropItems);\n          }\n        });\n      } else if (entry.isDirectory) {\n        readReaderContent(/** @type {FileSystemDirectoryEntry} */ (entry).createReader());\n      }\n    };\n\n    /** @param {FileSystemDirectoryReader} reader */\n    let readReaderContent = (reader) => {\n      reading++;\n\n      reader.readEntries((entries) => {\n        reading--;\n        for (let entry of entries) {\n          readEntry(entry);\n        }\n\n        if (reading === 0) {\n          resolve(dropItems);\n        }\n      });\n    };\n\n    readEntry(webkitEntry);\n  });\n}\n\n/**\n * Note: dataTransfer will be destroyed outside of the call stack. So, do not try to process it asynchronous.\n *\n * @param {DataTransfer} dataTransfer\n * @returns {Promise<DropItem[]>}\n */\nexport function getDropItems(dataTransfer) {\n  /** @type {DropItem[]} */\n  const dropItems = [];\n  const promises = [];\n  for (let i = 0; i < dataTransfer.items.length; i++) {\n    let item = dataTransfer.items[i];\n    if (!item) {\n      continue;\n    }\n    if (item.kind === 'file') {\n      const itemType = item.type;\n      if (typeof item.webkitGetAsEntry === 'function' || typeof (/** @type {any} */ (item).getAsEntry) === 'function') {\n        let entry =\n          typeof item.webkitGetAsEntry === 'function'\n            ? item.webkitGetAsEntry()\n            : /** @type {any} */ (item).getAsEntry();\n        promises.push(\n          readEntryContentAsync(entry, itemType).then((items) => {\n            if (items) {\n              dropItems.push(...items);\n            }\n          }),\n        );\n        continue;\n      }\n\n      const file = item.getAsFile();\n      file &&\n        promises.push(\n          checkIsDirectory(file).then((isDirectory) => {\n            if (isDirectory) {\n              // we can't get directory files, so we'll skip it\n            } else {\n              dropItems.push({\n                type: 'file',\n                file,\n              });\n            }\n          }),\n        );\n    } else if (item.kind === 'string' && item.type.match('^text/uri-list')) {\n      promises.push(\n        new Promise((resolve) => {\n          item.getAsString((value) => {\n            dropItems.push({\n              type: 'url',\n              url: value,\n            });\n            resolve(undefined);\n          });\n        }),\n      );\n    }\n  }\n\n  return Promise.all(promises).then(() => dropItems);\n}\n","import { getDropItems } from './getDropItems.js';\n\n/** @enum {Number} */\nexport const DropzoneState = {\n  ACTIVE: 0,\n  INACTIVE: 1,\n  NEAR: 2,\n  OVER: 3,\n};\n\nlet RESET_EVENTS = ['focus'];\nlet NEAR_OFFSET = 100;\nlet nearnessRegistry = new Map();\n\n/**\n * @param {[x: number, y: number]} p\n * @param {{ x: number; y: number; width: number; height: number }} r\n * @returns {number}\n */\nfunction distance(p, r) {\n  let cx = Math.max(Math.min(p[0], r.x + r.width), r.x);\n  let cy = Math.max(Math.min(p[1], r.y + r.height), r.y);\n\n  return Math.sqrt((p[0] - cx) * (p[0] - cx) + (p[1] - cy) * (p[1] - cy));\n}\n\n/**\n * @param {Object} desc\n * @param {HTMLElement} desc.element\n * @param {Function} desc.onChange\n * @param {Function} desc.onItems\n * @param {() => Boolean} desc.shouldIgnore\n */\nexport function addDropzone(desc) {\n  let eventCounter = 0;\n\n  let body = document.body;\n  let switchHandlers = new Set();\n  let handleSwitch = (fn) => switchHandlers.add(fn);\n  let state = DropzoneState.INACTIVE;\n\n  let setState = (newState) => {\n    if (desc.shouldIgnore() && newState !== DropzoneState.INACTIVE) {\n      return;\n    }\n    if (state !== newState) {\n      switchHandlers.forEach((fn) => fn(newState));\n    }\n    state = newState;\n  };\n\n  let isDragging = () => eventCounter > 0;\n\n  handleSwitch((newState) => desc.onChange(newState));\n\n  let onResetEvent = () => {\n    eventCounter = 0;\n    setState(DropzoneState.INACTIVE);\n  };\n  let onDragEnter = () => {\n    eventCounter += 1;\n    if (state === DropzoneState.INACTIVE) {\n      setState(DropzoneState.ACTIVE);\n    }\n  };\n  let onDragLeave = () => {\n    eventCounter -= 1;\n    if (!isDragging()) {\n      setState(DropzoneState.INACTIVE);\n    }\n  };\n  let onDrop = (e) => {\n    e.preventDefault();\n    eventCounter = 0;\n    setState(DropzoneState.INACTIVE);\n  };\n\n  let onDragOver = (e) => {\n    if (desc.shouldIgnore()) {\n      return;\n    }\n\n    if (!isDragging()) {\n      eventCounter += 1;\n    }\n\n    /** @type {[Number, Number]} */\n    let dragPoint = [e.x, e.y];\n    let targetRect = desc.element.getBoundingClientRect();\n    let nearness = Math.floor(distance(dragPoint, targetRect));\n    let isNear = nearness < NEAR_OFFSET;\n    let isOver = e.composedPath().includes(desc.element);\n\n    nearnessRegistry.set(desc.element, nearness);\n    let isNearest = Math.min(...nearnessRegistry.values()) === nearness;\n\n    if (isOver && isNearest) {\n      e.preventDefault();\n      setState(DropzoneState.OVER);\n    } else if (isNear && isNearest) {\n      setState(DropzoneState.NEAR);\n    } else {\n      setState(DropzoneState.ACTIVE);\n    }\n  };\n\n  let onElementDrop = async (e) => {\n    if (desc.shouldIgnore()) {\n      return;\n    }\n    e.preventDefault();\n    let items = await getDropItems(e.dataTransfer);\n    desc.onItems(items);\n    setState(DropzoneState.INACTIVE);\n  };\n\n  body.addEventListener('drop', onDrop);\n  body.addEventListener('dragleave', onDragLeave);\n  body.addEventListener('dragenter', onDragEnter);\n  body.addEventListener('dragover', onDragOver);\n  desc.element.addEventListener('drop', onElementDrop);\n  RESET_EVENTS.forEach((eventName) => {\n    window.addEventListener(eventName, onResetEvent);\n  });\n\n  return () => {\n    nearnessRegistry.delete(desc.element);\n    body.removeEventListener('drop', onDrop);\n    body.removeEventListener('dragleave', onDragLeave);\n    body.removeEventListener('dragenter', onDragEnter);\n    body.removeEventListener('dragover', onDragOver);\n    desc.element.removeEventListener('drop', onElementDrop);\n    RESET_EVENTS.forEach((eventName) => {\n      window.removeEventListener(eventName, onResetEvent);\n    });\n  };\n}\n","// @ts-check\n\nimport { Data } from '@symbiotejs/symbiote';\nimport { ActivityBlock } from '../../abstract/ActivityBlock.js';\nimport { UploaderBlock } from '../../abstract/UploaderBlock.js';\nimport { stringToArray } from '../../utils/stringToArray.js';\nimport { asBoolean } from '../Config/normalizeConfigValue.js';\nimport { UploadSource } from '../utils/UploadSource.js';\nimport { DropzoneState, addDropzone } from './addDropzone.js';\n\nconst GLOBAL_CTX_NAME = 'lr-drop-area';\nconst REGISTRY_KEY = `${GLOBAL_CTX_NAME}/registry`;\n\nexport class DropArea extends UploaderBlock {\n  constructor() {\n    super();\n\n    this.init$ = {\n      ...this.init$,\n      state: DropzoneState.INACTIVE,\n      withIcon: false,\n      isClickable: false,\n      isFullscreen: false,\n      isEnabled: true,\n      isVisible: true,\n      text: '',\n      [REGISTRY_KEY]: null,\n    };\n  }\n\n  isActive() {\n    if (!this.$.isEnabled) {\n      return false;\n    }\n    const bounds = this.getBoundingClientRect();\n    const hasSize = bounds.width > 0 && bounds.height > 0;\n    const isInViewport =\n      bounds.top >= 0 &&\n      bounds.left >= 0 &&\n      bounds.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&\n      bounds.right <= (window.innerWidth || document.documentElement.clientWidth);\n\n    const style = window.getComputedStyle(this);\n    const visible = style.visibility !== 'hidden' && style.display !== 'none';\n\n    return hasSize && visible && isInViewport;\n  }\n\n  initCallback() {\n    super.initCallback();\n\n    this.bindL10n('text', () => this.l10n('drop-files-here'));\n\n    if (!this.$[REGISTRY_KEY]) {\n      this.$[REGISTRY_KEY] = new Set();\n    }\n    this.$[REGISTRY_KEY].add(this);\n\n    this.defineAccessor(\n      'disabled',\n      /** @param {unknown} value */ (value) => {\n        this.set$({ isEnabled: !asBoolean(value) });\n      },\n    );\n    this.defineAccessor(\n      'clickable',\n      /** @param {unknown} value */ (value) => {\n        this.set$({ isClickable: asBoolean(value) });\n      },\n    );\n    this.defineAccessor(\n      'with-icon',\n      /** @param {unknown} value */ (value) => {\n        this.set$({ withIcon: asBoolean(value) });\n      },\n    );\n    this.defineAccessor(\n      'fullscreen',\n      /** @param {unknown} value */ (value) => {\n        this.set$({ isFullscreen: asBoolean(value) });\n      },\n    );\n\n    this.defineAccessor(\n      'text',\n      /** @param {unknown} value */ (value) => {\n        if (typeof value === 'string') {\n          this.bindL10n('text', () => this.l10n(value) || value);\n        } else {\n          this.bindL10n('text', () => this.l10n('drop-files-here'));\n        }\n      },\n    );\n\n    /** @private */\n    this._destroyDropzone = addDropzone({\n      element: this,\n      shouldIgnore: () => this._shouldIgnore(),\n      /** @param {DropzoneState} state */\n      onChange: (state) => {\n        this.$.state = state;\n      },\n      /** @param {import('./getDropItems.js').DropItem[]} items */\n      onItems: (items) => {\n        if (!items.length) {\n          return;\n        }\n\n        items.forEach((/** @type {import('./getDropItems.js').DropItem} */ item) => {\n          if (item.type === 'url') {\n            this.addFileFromUrl(item.url, { source: UploadSource.DROP_AREA });\n          } else if (item.type === 'file') {\n            this.addFileFromObject(item.file, { source: UploadSource.DROP_AREA, fullPath: item.fullPath });\n          }\n        });\n        if (this.uploadCollection.size) {\n          this.set$({\n            '*currentActivity': ActivityBlock.activities.UPLOAD_LIST,\n          });\n          this.setOrAddState('*modalActive', true);\n        }\n      },\n    });\n\n    let contentWrapperEl = this.ref['content-wrapper'];\n    if (contentWrapperEl) {\n      this._destroyContentWrapperDropzone = addDropzone({\n        element: contentWrapperEl,\n        /** @param {DropzoneState} state */\n        onChange: (state) => {\n          const stateText = Object.entries(DropzoneState)\n            .find(([, value]) => value === state)?.[0]\n            .toLowerCase();\n          stateText && contentWrapperEl.setAttribute('drag-state', stateText);\n        },\n        onItems: () => {},\n        shouldIgnore: () => this._shouldIgnore(),\n      });\n    }\n\n    this.sub('state', (state) => {\n      const stateText = Object.entries(DropzoneState)\n        .find(([, value]) => value === state)?.[0]\n        .toLowerCase();\n      if (stateText) {\n        this.setAttribute('drag-state', stateText);\n      }\n    });\n\n    this.subConfigValue('sourceList', (value) => {\n      const list = stringToArray(value);\n      // Enable drop area if local files are allowed\n      this.$.isEnabled = list.includes(UploaderBlock.sourceTypes.LOCAL);\n      // Show drop area if it's enabled or default slot is overrided\n      this.$.isVisible = this.$.isEnabled || !this.querySelector('[data-default-slot]');\n    });\n\n    this.sub('isVisible', (value) => {\n      this.toggleAttribute('hidden', !value);\n    });\n\n    this.sub('isClickable', (value) => {\n      this.toggleAttribute('clickable', value);\n    });\n\n    if (this.$.isClickable) {\n      // @private\n      this._onAreaClicked = () => {\n        this.openSystemDialog();\n      };\n      this.addEventListener('click', this._onAreaClicked);\n    }\n  }\n\n  /**\n   * Ignore drop events if there are other visible drop areas on the page\n   *\n   * @private\n   * @returns {Boolean}\n   */\n  _shouldIgnore() {\n    if (!this.$.isEnabled) {\n      return true;\n    }\n    if (!this._couldHandleFiles()) {\n      return true;\n    }\n    if (!this.$.isFullscreen) {\n      return false;\n    }\n    const otherTargets = [...this.$[REGISTRY_KEY]].filter((el) => el !== this);\n    const activeTargets = otherTargets.filter((/** @type {typeof this} */ el) => {\n      return el.isActive();\n    });\n    return activeTargets.length > 0;\n  }\n\n  /** @private */\n  _couldHandleFiles() {\n    let isMultiple = this.cfg.multiple;\n    let multipleMax = this.cfg.multipleMax;\n    let currentFilesCount = this.uploadCollection.size;\n\n    if (isMultiple && multipleMax && currentFilesCount >= multipleMax) {\n      return false;\n    }\n\n    if (!isMultiple && currentFilesCount > 0) {\n      return false;\n    }\n\n    return true;\n  }\n\n  destroyCallback() {\n    super.destroyCallback();\n\n    /** @type {Set<DropArea>} */\n    const registry = this.$[REGISTRY_KEY];\n    if (registry) {\n      registry.delete(this);\n      if (registry.size === 0) {\n        Data.deleteCtx(GLOBAL_CTX_NAME);\n      }\n    }\n\n    this._destroyDropzone?.();\n    this._destroyContentWrapperDropzone?.();\n    if (this._onAreaClicked) {\n      this.removeEventListener('click', this._onAreaClicked);\n    }\n  }\n}\n\nDropArea.template = /* HTML */ `\n  <slot>\n    <div data-default-slot hidden></div>\n    <div ref=\"content-wrapper\" class=\"content-wrapper\" set=\"@hidden: !isVisible\">\n      <div class=\"icon-container\" set=\"@hidden: !withIcon\">\n        <lr-icon name=\"default\"></lr-icon>\n        <lr-icon name=\"arrow-down\"></lr-icon>\n      </div>\n      <span class=\"text\">{{text}}</span>\n    </div>\n  </slot>\n`;\n\nDropArea.bindAttributes({\n  // @ts-expect-error TODO: fix types inside symbiote\n  'with-icon': null,\n  // @ts-expect-error TODO: fix types inside symbiote\n  clickable: null,\n  // @ts-expect-error TODO: fix types inside symbiote\n  text: null,\n  // @ts-expect-error TODO: fix types inside symbiote\n  fullscreen: null,\n  // @ts-expect-error TODO: fix types inside symbiote\n  disabled: null,\n});\n","// @ts-check\nimport { UploaderBlock } from '../../abstract/UploaderBlock.js';\nimport { ActivityBlock } from '../../abstract/ActivityBlock.js';\n\nconst L10N_PREFIX = 'src-type-';\n\n/**\n * @typedef {{\n *   type: string;\n *   activity?: string;\n *   textKey?: string;\n *   icon?: string;\n *   activate?: () => boolean;\n *   activityParams?: Record<string, unknown>;\n * }} TConfig\n */\n\nexport class SourceBtn extends UploaderBlock {\n  couldBeCtxOwner = true;\n  /** @type {string | undefined} */\n  type = undefined;\n  /**\n   * @private\n   * @type {Record<string, TConfig>}\n   */\n  _registeredTypes = {};\n\n  constructor() {\n    super();\n\n    this.init$ = {\n      ...this.init$,\n      iconName: 'default',\n      'src-type': '',\n    };\n  }\n\n  initTypes() {\n    this.registerType({\n      type: UploaderBlock.sourceTypes.LOCAL,\n      activate: () => {\n        this.openSystemDialog();\n        return false;\n      },\n    });\n    this.registerType({\n      type: UploaderBlock.sourceTypes.URL,\n      activity: ActivityBlock.activities.URL,\n      textKey: 'from-url',\n    });\n    this.registerType({\n      type: UploaderBlock.sourceTypes.CAMERA,\n      activity: ActivityBlock.activities.CAMERA,\n      activate: () => {\n        const supportsCapture = 'capture' in document.createElement('input');\n        if (supportsCapture) {\n          this.openSystemDialog({ captureCamera: true });\n        }\n        return !supportsCapture;\n      },\n    });\n    this.registerType({\n      type: 'draw',\n      activity: ActivityBlock.activities.DRAW,\n      icon: 'edit-draw',\n    });\n\n    for (let externalSourceType of Object.values(UploaderBlock.extSrcList)) {\n      this.registerType({\n        type: externalSourceType,\n        activity: ActivityBlock.activities.EXTERNAL,\n        activityParams: {\n          externalSourceType: externalSourceType,\n        },\n      });\n    }\n  }\n\n  initCallback() {\n    super.initCallback();\n    this.initTypes();\n\n    this.setAttribute('role', 'button');\n    this.defineAccessor(\n      'type',\n      /** @param {string} val */\n      (val) => {\n        if (!val) {\n          return;\n        }\n        this.applyType(val);\n      },\n    );\n  }\n\n  /** @param {TConfig} typeConfig */\n  registerType(typeConfig) {\n    this._registeredTypes[typeConfig.type] = typeConfig;\n  }\n\n  /** @param {string} type */\n  getType(type) {\n    return this._registeredTypes[type];\n  }\n\n  activate() {\n    if (!this.type) {\n      return;\n    }\n    const configType = this._registeredTypes[this.type];\n    const { activity, activate, activityParams = {} } = configType;\n    const showActivity = activate ? activate() : !!activity;\n    showActivity &&\n      this.set$({\n        '*currentActivityParams': activityParams,\n        '*currentActivity': activity,\n      });\n  }\n\n  /** @param {string} type */\n  applyType(type) {\n    const configType = this._registeredTypes[type];\n    if (!configType) {\n      console.warn('Unsupported source type: ' + type);\n      return;\n    }\n    const { textKey = type, icon = type } = configType;\n\n    this.$['src-type'] = `${L10N_PREFIX}${textKey}`;\n    this.$.iconName = icon;\n    this.onclick = () => {\n      this.activate();\n    };\n  }\n}\nSourceBtn.template = /* HTML */ `\n  <lr-icon set=\"@name: iconName\"></lr-icon>\n  <div class=\"txt\" l10n=\"src-type\"></div>\n`;\nSourceBtn.bindAttributes({\n  // @ts-expect-error symbiote types bug\n  type: null,\n});\n","import { Block } from '../../abstract/Block.js';\nimport { stringToArray } from '../../utils/stringToArray.js';\n\nexport class SourceList extends Block {\n  initCallback() {\n    super.initCallback();\n    this.subConfigValue('sourceList', (/** @type {String} */ val) => {\n      let list = stringToArray(val);\n      let html = '';\n      list.forEach((srcName) => {\n        html += /* HTML */ `<lr-source-btn type=\"${srcName}\"></lr-source-btn>`;\n      });\n      if (this.cfg.sourceListWrap) {\n        this.innerHTML = html;\n      } else {\n        this.outerHTML = html;\n      }\n    });\n  }\n}\n","// TODO: unwrap promises\nconst readJpegChunks = () => {\n    const stack = [];\n    const promiseReadJpegChunks = (blob) => new Promise((resolve, reject) => {\n        let pos = 2;\n        const readToView = (blob, cb) => {\n            const reader = new FileReader();\n            reader.addEventListener('load', () => {\n                cb(new DataView(reader.result));\n            });\n            reader.addEventListener('error', (e) => {\n                reject(`Reader error: ${e}`);\n            });\n            reader.readAsArrayBuffer(blob);\n        };\n        const readNext = () => readToView(blob.slice(pos, pos + 128), (view) => {\n            let i, j, ref;\n            for (i = j = 0, ref = view.byteLength; ref >= 0 ? j < ref : j > ref; i = ref >= 0 ? ++j : --j) {\n                if (view.getUint8(i) === 0xff) {\n                    pos += i;\n                    break;\n                }\n            }\n            readNextChunk();\n        });\n        const readNextChunk = () => {\n            const startPos = pos;\n            return readToView(blob.slice(pos, (pos += 4)), (view) => {\n                if (view.byteLength !== 4 || view.getUint8(0) !== 0xff) {\n                    reject('Corrupted');\n                    return;\n                }\n                const marker = view.getUint8(1);\n                if (marker === 0xda) {\n                    resolve(true);\n                    return;\n                }\n                const length = view.getUint16(2) - 2;\n                return readToView(blob.slice(pos, (pos += length)), (view) => {\n                    if (view.byteLength !== length) {\n                        reject('Corrupted');\n                        return;\n                    }\n                    stack.push({ startPos, length, marker, view });\n                    readNext();\n                });\n            });\n        };\n        if (!(FileReader && DataView)) {\n            reject('Not Support');\n        }\n        readToView(blob.slice(0, 2), (view) => {\n            if (view.getUint16(0) !== 0xffd8) {\n                reject('Not jpeg');\n            }\n            readNext();\n        });\n    });\n    return {\n        stack,\n        promiseReadJpegChunks\n    };\n};\n\nconst getIccProfile = async (blob) => {\n    const iccProfile = [];\n    const { promiseReadJpegChunks, stack } = readJpegChunks();\n    await promiseReadJpegChunks(blob);\n    stack.forEach(({ marker, view }) => {\n        if (marker === 0xe2) {\n            if (\n            // check for \"ICC_PROFILE\\0\"\n            view.getUint32(0) === 0x4943435f &&\n                view.getUint32(4) === 0x50524f46 &&\n                view.getUint32(8) === 0x494c4500) {\n                iccProfile.push(view);\n            }\n        }\n    });\n    return iccProfile;\n};\n\nconst replaceJpegChunk = async (blob, marker, chunks) => {\n    {\n        const oldChunkPos = [];\n        const oldChunkLength = [];\n        const { promiseReadJpegChunks, stack } = readJpegChunks();\n        await promiseReadJpegChunks(blob);\n        stack.forEach((chunk) => {\n            if (chunk.marker === marker) {\n                oldChunkPos.push(chunk.startPos);\n                return oldChunkLength.push(chunk.length);\n            }\n        });\n        const newChunks = [blob.slice(0, 2)];\n        for (const chunk of chunks) {\n            const intro = new DataView(new ArrayBuffer(4));\n            intro.setUint16(0, 0xff00 + marker);\n            intro.setUint16(2, chunk.byteLength + 2);\n            newChunks.push(intro.buffer);\n            newChunks.push(chunk);\n        }\n        let pos = 2;\n        for (let i = 0; i < oldChunkPos.length; i++) {\n            if (oldChunkPos[i] > pos) {\n                newChunks.push(blob.slice(pos, oldChunkPos[i]));\n            }\n            pos = oldChunkPos[i] + oldChunkLength[i] + 4;\n        }\n        newChunks.push(blob.slice(pos, blob.size));\n        return new Blob(newChunks, {\n            type: blob.type\n        });\n    }\n};\n\nconst MARKER = 0xe2;\nconst replaceIccProfile = (blob, iccProfiles) => {\n    return replaceJpegChunk(blob, MARKER, iccProfiles.map((chunk) => chunk.buffer));\n};\n\nconst stripIccProfile = async (blob) => {\n    try {\n        return await replaceIccProfile(blob, []);\n    }\n    catch (e) {\n        throw new Error(`Failed to strip ICC profile: ${e}`);\n    }\n};\n\nconst canvasToBlob = (canvas, type, quality) => {\n    return new Promise((resolve, reject) => {\n        const callback = (blob) => {\n            if (!blob) {\n                reject('Failed to convert canvas to blob');\n                return;\n            }\n            resolve(blob);\n        };\n        canvas.toBlob(callback, type, quality);\n        canvas.width = canvas.height = 1;\n    });\n};\n\nconst createCanvas = () => {\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n    return {\n        canvas,\n        ctx\n    };\n};\n\nconst hasTransparency = (img) => {\n    const canvasSize = 50;\n    // Create a canvas element and get 2D rendering context\n    const { ctx, canvas } = createCanvas();\n    canvas.width = canvas.height = canvasSize;\n    // Draw the image onto the canvas\n    ctx.drawImage(img, 0, 0, canvasSize, canvasSize);\n    // Get the image data\n    const imageData = ctx.getImageData(0, 0, canvasSize, canvasSize).data;\n    // Reset the canvas dimensions\n    canvas.width = canvas.height = 1;\n    // Check for transparency in the alpha channel\n    for (let i = 3; i < imageData.length; i += 4) {\n        if (imageData[i] < 254) {\n            return true;\n        }\n    }\n    // No transparency found\n    return false;\n};\n\nconst getExif = async (blob) => {\n    let exif = null;\n    const { promiseReadJpegChunks, stack } = readJpegChunks();\n    await promiseReadJpegChunks(blob);\n    stack.forEach(({ marker, view }) => {\n        if (!exif && marker === 0xe1) {\n            if (view.byteLength >= 14) {\n                if (\n                // check for \"Exif\\0\"\n                view.getUint32(0) === 0x45786966 &&\n                    view.getUint16(4) === 0) {\n                    exif = view;\n                    return;\n                }\n            }\n        }\n    });\n    return exif;\n};\n\n// 2x1 pixel image 90CW rotated with orientation header\nconst base64ImageSrc = 'data:image/jpg;base64,' +\n    '/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEo' +\n    'AAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////' +\n    '////////////////////////////////////////////////////////wAALCAABAAIBASIA' +\n    '/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=';\nlet isApplied = undefined;\nconst isBrowserApplyExifOrientation = () => {\n    return new Promise((resolve) => {\n        if (isApplied !== undefined) {\n            resolve(isApplied);\n        }\n        else {\n            const image = new Image();\n            image.addEventListener('load', () => {\n                isApplied = image.naturalWidth < image.naturalHeight;\n                image.src = '//:0';\n                resolve(isApplied);\n            });\n            image.src = base64ImageSrc;\n        }\n    });\n};\n\nconst findExifOrientation = (exif, exifCallback) => {\n    let j, little, offset, ref;\n    if (!exif ||\n        exif.byteLength < 14 ||\n        exif.getUint32(0) !== 0x45786966 ||\n        exif.getUint16(4) !== 0) {\n        return;\n    }\n    if (exif.getUint16(6) === 0x4949) {\n        little = true;\n    }\n    else if (exif.getUint16(6) === 0x4d4d) {\n        little = false;\n    }\n    else {\n        return;\n    }\n    if (exif.getUint16(8, little) !== 0x002a) {\n        return;\n    }\n    offset = 8 + exif.getUint32(10, little);\n    const count = exif.getUint16(offset - 2, little);\n    for (j = 0, ref = count; ref >= 0 ? j < ref : j > ref; ref >= 0 ? ++j : --j) {\n        if (exif.byteLength < offset + 10) {\n            return;\n        }\n        if (exif.getUint16(offset, little) === 0x0112) {\n            exifCallback(offset + 8, little);\n        }\n        offset += 12;\n    }\n};\n\nconst setExifOrientation = (exif, orientation) => {\n    findExifOrientation(exif, (offset, littleEndian) => exif.setUint16(offset, orientation, littleEndian));\n};\nconst replaceExif = async (blob, exif, isExifApplied) => {\n    if (isExifApplied) {\n        setExifOrientation(exif, 1);\n    }\n    return replaceJpegChunk(blob, 0xe1, [exif.buffer]);\n};\n\nconst processImage = (image, src) => {\n    return new Promise((resolve, reject) => {\n        if (src) {\n            image.src = src;\n        }\n        if (image.complete) {\n            resolve(image);\n        }\n        else {\n            image.addEventListener('load', () => {\n                resolve(image);\n            });\n            image.addEventListener('error', () => {\n                reject(new Error('Failed to load image. Probably not an image.'));\n            });\n        }\n    });\n};\nconst imageLoader = (image) => {\n    return processImage(new Image(), image);\n};\n\nconst allowLayers = [\n    1, // L (black-white)\n    3 // RGB\n];\n\nconst markers = [\n    0xc0, // (\"SOF0\", \"Baseline DCT\", SOF)\n    0xc1, // (\"SOF1\", \"Extended Sequential DCT\", SOF)\n    0xc2, // (\"SOF2\", \"Progressive DCT\", SOF)\n    0xc3, // (\"SOF3\", \"Spatial lossless\", SOF)\n    0xc5, // (\"SOF5\", \"Differential sequential DCT\", SOF)\n    0xc6, // (\"SOF6\", \"Differential progressive DCT\", SOF)\n    0xc7, // (\"SOF7\", \"Differential spatial\", SOF)\n    0xc9, // (\"SOF9\", \"Extended sequential DCT (AC)\", SOF)\n    0xca, // (\"SOF10\", \"Progressive DCT (AC)\", SOF)\n    0xcb, // (\"SOF11\", \"Spatial lossless DCT (AC)\", SOF)\n    0xcd, // (\"SOF13\", \"Differential sequential DCT (AC)\", SOF)\n    0xce, // (\"SOF14\", \"Differential progressive DCT (AC)\", SOF)\n    0xcf // (\"SOF15\", \"Differential spatial (AC)\", SOF)\n];\n\nconst sizes = {\n    squareSide: [\n        // Safari (iOS < 9, ram >= 256)\n        // We are supported mobile safari < 9 since widget v2, by 5 Mpx limit\n        // so it's better to continue support despite the absence of this browser in the support table\n        Math.floor(Math.sqrt(5 * 1000 * 1000)),\n        // IE Mobile (Windows Phone 8.x)\n        // Safari (iOS >= 9)\n        4096,\n        // IE 9 (Win)\n        8192,\n        // Firefox 63 (Mac, Win)\n        11180,\n        // Chrome 68 (Android 6)\n        10836,\n        // Chrome 68 (Android 5)\n        11402,\n        // Chrome 68 (Android 7.1-9)\n        14188,\n        // Chrome 70 (Mac, Win)\n        // Chrome 68 (Android 4.4)\n        // Edge 17 (Win)\n        // Safari 7-12 (Mac)\n        16384\n    ],\n    dimension: [\n        // IE Mobile (Windows Phone 8.x)\n        4096,\n        // IE 9 (Win)\n        8192,\n        // Edge 17 (Win)\n        // IE11 (Win)\n        16384,\n        // Chrome 70 (Mac, Win)\n        // Chrome 68 (Android 4.4-9)\n        // Firefox 63 (Mac, Win)\n        32767,\n        // Chrome 83 (Mac, Win)\n        // Safari 7-12 (Mac)\n        // Safari (iOS 9-12)\n        // Actually Safari has a much bigger limits - 4194303 of width and 8388607 of height,\n        // but we will not use them\n        65535\n    ]\n};\n\nconst shouldSkipShrink = async (blob) => {\n    let skip = false;\n    const { promiseReadJpegChunks, stack } = readJpegChunks();\n    return await promiseReadJpegChunks(blob)\n        .then(() => {\n        stack.forEach(({ marker, view }) => {\n            if (!skip && markers.indexOf(marker) >= 0) {\n                const layer = view.getUint8(5);\n                if (allowLayers.indexOf(layer) < 0) {\n                    skip = true;\n                }\n            }\n        });\n        return skip;\n    })\n        .catch(() => skip);\n};\n\nconst memoize = (fn, serializer) => {\n    const cache = {};\n    return (...args) => {\n        const key = serializer(args, cache);\n        return key in cache ? cache[key] : (cache[key] = fn(...args));\n    };\n};\n/**\n * Memoization key serealizer, that prevents unnecessary canvas tests. No need\n * to make test if we know that:\n *\n * - Browser supports higher canvas size\n * - Browser doesn't support lower canvas size\n */\nconst memoKeySerializer = (args, cache) => {\n    const [w] = args;\n    const cachedWidths = Object.keys(cache)\n        .map((val) => parseInt(val, 10))\n        .sort((a, b) => a - b);\n    for (let i = 0; i < cachedWidths.length; i++) {\n        const cachedWidth = cachedWidths[i];\n        const isSupported = !!cache[cachedWidth];\n        // higher supported canvas size, return it\n        if (cachedWidth > w && isSupported) {\n            return cachedWidth;\n        }\n        // lower unsupported canvas size, return it\n        if (cachedWidth < w && !isSupported) {\n            return cachedWidth;\n        }\n    }\n    // use canvas width as the key,\n    // because we're doing dimension test by width - [dimension, 1]\n    return w;\n};\n\n// add constants\nconst TestPixel = {\n    R: 55,\n    G: 110,\n    B: 165,\n    A: 255\n};\nconst FILL_STYLE = `rgba(${TestPixel.R}, ${TestPixel.G}, ${TestPixel.B}, ${TestPixel.A / 255})`;\nconst canvasTest = (width, height) => {\n    try {\n        const fill = [width - 1, height - 1, 1, 1]; // x, y, width, height\n        const { canvas: cropCvs, ctx: cropCtx } = createCanvas();\n        cropCvs.width = 1;\n        cropCvs.height = 1;\n        const { canvas: testCvs, ctx: testCtx } = createCanvas();\n        testCvs.width = width;\n        testCvs.height = height;\n        if (testCtx) {\n            testCtx.fillStyle = FILL_STYLE;\n            testCtx.fillRect(...fill);\n            // Render the test pixel in the bottom-right corner of the\n            // test canvas in the top-left of the 1x1 crop canvas. This\n            // dramatically reducing the time for getImageData to complete.\n            cropCtx.drawImage(testCvs, width - 1, height - 1, 1, 1, 0, 0, 1, 1);\n        }\n        const imageData = cropCtx && cropCtx.getImageData(0, 0, 1, 1).data;\n        let isTestPass = false;\n        if (imageData) {\n            // On IE10, imageData have type CanvasPixelArray, not Uint8ClampedArray.\n            // CanvasPixelArray supports index access operations only.\n            // Array buffers can't be destructuredd and compared with JSON.stringify\n            isTestPass =\n                imageData[0] === TestPixel.R &&\n                    imageData[1] === TestPixel.G &&\n                    imageData[2] === TestPixel.B &&\n                    imageData[3] === TestPixel.A;\n        }\n        testCvs.width = testCvs.height = 1;\n        return isTestPass;\n    }\n    catch (e) {\n        console.error(`Failed to test for max canvas size of ${width}x${height}.`);\n        return false;\n    }\n};\n\nfunction wrapAsync(fn) {\n    return (...args) => {\n        return new Promise((resolve) => {\n            setTimeout(() => {\n                const result = fn(...args);\n                resolve(result);\n            }, 0);\n        });\n    };\n}\nconst squareTest = wrapAsync(memoize(canvasTest, memoKeySerializer));\nconst dimensionTest = wrapAsync(memoize(canvasTest, memoKeySerializer));\nconst testCanvasSize = async (w, h) => {\n    const testSquareSide = sizes.squareSide.find((side) => side * side >= w * h);\n    const testDimension = sizes.dimension.find((side) => side >= w && side >= h);\n    if (!testSquareSide || !testDimension) {\n        throw new Error('Not supported');\n    }\n    const [squareSupported, dimensionSupported] = await Promise.all([\n        squareTest(testSquareSide, testSquareSide),\n        dimensionTest(testDimension, 1)\n    ]);\n    if (squareSupported && dimensionSupported) {\n        return true;\n    }\n    else {\n        throw new Error('Not supported');\n    }\n};\n\nconst canvasResize = async (img, w, h) => {\n    try {\n        const { ctx, canvas } = createCanvas();\n        canvas.width = w;\n        canvas.height = h;\n        ctx.imageSmoothingQuality = 'high';\n        ctx.drawImage(img, 0, 0, w, h);\n        if (img instanceof HTMLImageElement) {\n            img.src = '//:0'; // free memory\n        }\n        if (img instanceof HTMLCanvasElement) {\n            img.width = img.height = 1; // free memory\n        }\n        return canvas;\n    }\n    catch (e) {\n        throw new Error('Canvas resize error', { cause: e });\n    }\n};\n\n/**\n * Native high-quality canvas resampling\n *\n * Browser support:\n * https://caniuse.com/mdn-api_canvasrenderingcontext2d_imagesmoothingenabled\n * Target dimensions expected to be supported by browser.\n */\nconst native = ({ img, targetW, targetH }) => canvasResize(img, targetW, targetH);\n\n/**\n * Goes from target to source by step, the last incomplete step is dropped.\n * Always returns at least one step - target. Source step is not included.\n * Sorted descending.\n *\n * Example with step = 0.71, source = 2000, target = 400 400 (target) <- 563 <-\n * 793 <- 1117 <- 1574 (dropped) <- [2000 (source)]\n */\nconst calcShrinkSteps = function ({ sourceW, targetW, targetH, step }) {\n    const steps = [];\n    let sW = targetW;\n    let sH = targetH;\n    // result should include at least one target step,\n    // even if abs(source - target) < step * source\n    // just to be sure nothing will break\n    // if the original resolution / target resolution condition changes\n    do {\n        steps.push([sW, sH]);\n        sW = Math.round(sW / step);\n        sH = Math.round(sH / step);\n    } while (sW < sourceW * step);\n    return steps.reverse();\n};\n/**\n * Fallback resampling algorithm\n *\n * Reduces dimensions by step until reaches target dimensions, this gives a\n * better output quality than one-step method\n *\n * Target dimensions expected to be supported by browser, unsupported steps will\n * be dropped.\n */\nconst fallback = ({ img, sourceW, targetW, targetH, step }) => {\n    const steps = calcShrinkSteps({ sourceW, targetW, targetH, step });\n    return steps.reduce((chain, [w, h]) => {\n        return chain.then((canvas) => {\n            return (testCanvasSize(w, h)\n                .then(() => canvasResize(canvas, w, h))\n                // Here we assume that at least one step will be supported and HTMLImageElement will be converted to HTMLCanvasElement\n                .catch(() => canvas));\n        });\n    }, Promise.resolve(img));\n};\n\nconst isIOS = () => {\n    if (/iPad|iPhone|iPod/.test(navigator.platform)) {\n        return true;\n    }\n    else {\n        return (navigator.maxTouchPoints &&\n            navigator.maxTouchPoints > 2 &&\n            /MacIntel/.test(navigator.platform));\n    }\n};\nconst isIpadOS = navigator.maxTouchPoints &&\n    navigator.maxTouchPoints > 2 &&\n    /MacIntel/.test(navigator.platform);\n\nconst STEP = 0.71; // should be > sqrt(0.5)\nconst shrinkImage = (img, settings) => {\n    // do not shrink image if original resolution / target resolution ratio falls behind 2.0\n    if (img.width * STEP * img.height * STEP < settings.size) {\n        throw new Error('Not required');\n    }\n    const sourceW = img.width;\n    const sourceH = img.height;\n    const ratio = sourceW / sourceH;\n    // target size shouldn't be greater than settings.size in any case\n    const targetW = Math.floor(Math.sqrt(settings.size * ratio));\n    const targetH = Math.floor(settings.size / Math.sqrt(settings.size * ratio));\n    // we test the last step because we can skip all intermediate steps\n    return testCanvasSize(targetW, targetH)\n        .then(() => {\n        const { ctx } = createCanvas();\n        const supportNative = 'imageSmoothingQuality' in ctx;\n        // native scaling on ios gives blurry results\n        // TODO: check if it's still true\n        const useNativeScaling = supportNative && !isIOS() && !isIpadOS;\n        return useNativeScaling\n            ? native({ img, targetW, targetH })\n            : fallback({ img, sourceW, targetW, targetH, step: STEP });\n    })\n        .catch(() => Promise.reject('Not supported'));\n};\n\nconst shrinkFile = async (inputBlob, settings) => {\n    try {\n        const shouldSkip = await shouldSkipShrink(inputBlob);\n        if (shouldSkip) {\n            throw new Error('Should skipped');\n        }\n        // Try to extract EXIF and ICC profile\n        const exifResults = await Promise.allSettled([\n            getExif(inputBlob),\n            isBrowserApplyExifOrientation(),\n            getIccProfile(inputBlob)\n        ]);\n        const isRejected = exifResults.some((result) => result.status === 'rejected');\n        // If any of the promises is rejected, this is not a JPEG image\n        const isJPEG = !isRejected;\n        const [exifResult, isExifOrientationAppliedResult, iccProfileResult] = exifResults;\n        // Load blob into the image\n        const inputBlobWithoutIcc = await stripIccProfile(inputBlob).catch(() => inputBlob);\n        const image = await imageLoader(URL.createObjectURL(inputBlobWithoutIcc));\n        URL.revokeObjectURL(image.src);\n        // Shrink the image\n        const canvas = await shrinkImage(image, settings);\n        let format = 'image/jpeg';\n        let quality = settings?.quality || 0.8;\n        if (!isJPEG && hasTransparency(canvas)) {\n            format = 'image/png';\n            quality = undefined;\n        }\n        // Convert canvas to blob\n        let newBlob = await canvasToBlob(canvas, format, quality);\n        // Set EXIF for the new blob\n        if (isJPEG && exifResult.status === 'fulfilled' && exifResult.value) {\n            const exif = exifResult.value;\n            const isExifOrientationApplied = isExifOrientationAppliedResult.status === 'fulfilled'\n                ? isExifOrientationAppliedResult.value\n                : false;\n            newBlob = await replaceExif(newBlob, exif, isExifOrientationApplied);\n            // TODO: should we continue shrink if failed to replace EXIF?\n            // .catch(() => newBlob)\n        }\n        // Set ICC profile for the new blob\n        if (isJPEG &&\n            iccProfileResult.status === 'fulfilled' &&\n            iccProfileResult.value.length > 0) {\n            newBlob = await replaceIccProfile(newBlob, iccProfileResult.value);\n            // TODO: should we continue shrink if failed to replace ICC?\n            // .catch(() => newBlob)\n        }\n        return newBlob;\n    }\n    catch (e) {\n        let message;\n        if (e instanceof Error) {\n            message = e.message;\n        }\n        if (typeof e === 'string') {\n            message = e;\n        }\n        throw new Error(`Failed to shrink image. ${message ? `Message: \"${message}\".` : ''}`, { cause: e });\n    }\n};\n\nexport { shrinkFile };\n","/**\n * @param {String} svg\n * @returns {String}\n */\nfunction createSvgBlobUrl(svg) {\n  let blob = new Blob([svg], {\n    type: 'image/svg+xml',\n  });\n  return URL.createObjectURL(blob);\n}\n\n/**\n * @param {String} [color1]\n * @param {String} [color2]\n * @returns {String}\n */\nexport function checkerboardCssBg(color1 = '#fff', color2 = 'rgba(0, 0, 0, .1)') {\n  return createSvgBlobUrl(/*svg*/ `<svg height=\"20\" width=\"20\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\">\n    <rect x=\"0\" y=\"0\" width=\"20\" height=\"20\" fill=\"${color1}\" />\n    <rect x=\"0\" y=\"0\" width=\"10\" height=\"10\" fill=\"${color2}\" />\n    <rect x=\"10\" y=\"10\" width=\"10\" height=\"10\" fill=\"${color2}\" />\n  </svg>`);\n}\n\n/**\n * @param {String} [color]\n * @returns {String}\n */\nexport function strokesCssBg(color = 'rgba(0, 0, 0, .1)') {\n  return createSvgBlobUrl(/*svg*/ `<svg height=\"10\" width=\"10\" viewBox=\"0 0 10 10\" xmlns=\"http://www.w3.org/2000/svg\">\n    <line x1=\"0\" y1=\"10\" x2=\"10\" y2=\"0\" stroke=\"${color}\" />\n  </svg>`);\n}\n\n/**\n * @param {String} [color]\n * @returns {String}\n */\nexport function fileCssBg(color = 'hsl(209, 21%, 65%)', width = 32, height = 32) {\n  return createSvgBlobUrl(/*svg*/ `\n  <svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 30 30\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path fill=\"currentColor\" fill-rule=\"evenodd\" fill=\"${color}\" d=\"M9.68848 8.70068C9.68848 8.42454 9.91233 8.20068 10.1885 8.20068H15.0885C15.2211 8.20068 15.3483 8.25336 15.442 8.34713L20.342 13.2471C20.4358 13.3409 20.4885 13.4681 20.4885 13.6007V21.3007C20.4885 21.5768 20.2646 21.8007 19.9885 21.8007H10.1885C9.91233 21.8007 9.68848 21.5768 9.68848 21.3007V8.70068ZM10.6885 9.20068V20.8007H19.4885V14.1007L15.0885 14.1007C14.8123 14.1007 14.5885 13.8768 14.5885 13.6007L14.5885 9.20068H10.6885ZM15.5885 9.90779L18.7814 13.1007L15.5885 13.1007L15.5885 9.90779Z\"/>\n  </svg>\n  `);\n}\n","/**\n * @param {File} imgFile\n * @param {Number} [size]\n */\nexport function generateThumb(imgFile, size = 40) {\n  if (imgFile.type === 'image/svg+xml') {\n    return URL.createObjectURL(imgFile);\n  }\n  let canvas = document.createElement('canvas');\n  let ctx = canvas.getContext('2d');\n  let img = new Image();\n  let promise = new Promise((resolve, reject) => {\n    img.onload = () => {\n      let ratio = img.height / img.width;\n      if (ratio > 1) {\n        canvas.width = size;\n        canvas.height = size * ratio;\n      } else {\n        canvas.height = size;\n        canvas.width = size / ratio;\n      }\n      ctx.fillStyle = 'rgb(240, 240, 240)';\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\n      ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n      canvas.toBlob((blob) => {\n        if (!blob) {\n          reject();\n          return;\n        }\n        let url = URL.createObjectURL(blob);\n        resolve(url);\n      });\n    };\n    img.onerror = (err) => {\n      reject(err);\n    };\n  });\n  img.src = URL.createObjectURL(imgFile);\n  return promise;\n}\n","/** TODO parseShrink move to package @uploadcare/image-shrink */\n\nconst MAX_SQUARE_SIDE = 16384;\n\nconst regExpShrink = /^([0-9]+)x([0-9]+)(?:\\s+(\\d{1,2}|100)%)?$/i;\n\n/**\n * @param value\n * @returns {{ size: number; quality: number | undefined }}\n */\nexport const parseShrink = (value) => {\n  const terms = regExpShrink.exec(value?.toLocaleLowerCase()) || [];\n\n  if (!terms.length) {\n    return false;\n  }\n\n  const sizeShrink = terms[1] * terms[2];\n  const maxSize = MAX_SQUARE_SIDE * MAX_SQUARE_SIDE;\n\n  if (sizeShrink > maxSize) {\n    console.warn(\n      `Shrinked size can not be larger than ${Math.floor(maxSize / 1000 / 1000)}MP. ` +\n        `You have set ${terms[1]}x${terms[2]} (` +\n        `${Math.ceil(sizeShrink / 1000 / 100) / 10}MP).`,\n    );\n    return false;\n  }\n\n  return {\n    quality: terms[3] ? terms[3] / 100 : undefined,\n    size: sizeShrink,\n  };\n};\n","// @ts-check\nimport { CancelError, uploadFile } from '@uploadcare/upload-client';\nimport { shrinkFile } from '@uploadcare/image-shrink';\nimport { ActivityBlock } from '../../abstract/ActivityBlock.js';\nimport { UploaderBlock } from '../../abstract/UploaderBlock.js';\nimport { createCdnUrl, createCdnUrlModifiers, createOriginalUrl } from '../../utils/cdn-utils.js';\nimport { fileCssBg } from '../svg-backgrounds/svg-backgrounds.js';\nimport { debounce } from '../utils/debounce.js';\nimport { generateThumb } from '../utils/resizeImage.js';\nimport { parseShrink } from '../../utils/parseShrink.js';\n\nconst FileItemState = Object.freeze({\n  FINISHED: Symbol(0),\n  FAILED: Symbol(1),\n  UPLOADING: Symbol(2),\n  IDLE: Symbol(3),\n});\n\nexport class FileItem extends UploaderBlock {\n  couldBeCtxOwner = true;\n  pauseRender = true;\n\n  /** @private */\n  _entrySubs = new Set();\n  /**\n   * @private\n   * @type {any} TODO: Add types for upload entry\n   */\n  _entry = null;\n  /** @private */\n  _isIntersecting = false;\n  /** @private */\n  _debouncedGenerateThumb = debounce(this._generateThumbnail.bind(this), 100);\n  /** @private */\n  _debouncedCalculateState = debounce(this._calculateState.bind(this), 100);\n\n  /** @private */\n  _renderedOnce = false;\n\n  constructor() {\n    super();\n\n    this.init$ = {\n      ...this.init$,\n      uid: '',\n      itemName: '',\n      errorText: '',\n      thumbUrl: '',\n      progressValue: 0,\n      progressVisible: false,\n      badgeIcon: '',\n      isFinished: false,\n      isFailed: false,\n      isUploading: false,\n      isFocused: false,\n      isEditable: false,\n      state: FileItemState.IDLE,\n      onEdit: () => {\n        this.set$({\n          '*focusedEntry': this._entry,\n        });\n        if (this.hasBlockInCtx((b) => b.activityType === ActivityBlock.activities.DETAILS)) {\n          this.$['*currentActivity'] = ActivityBlock.activities.DETAILS;\n        } else {\n          this.$['*currentActivity'] = ActivityBlock.activities.CLOUD_IMG_EDIT;\n        }\n      },\n      onRemove: () => {\n        this.uploadCollection.remove(this.$.uid);\n      },\n      onUpload: () => {\n        this.upload();\n      },\n    };\n  }\n\n  _reset() {\n    for (let sub of this._entrySubs) {\n      sub.remove();\n    }\n\n    this._debouncedGenerateThumb.cancel();\n    this._debouncedCalculateState.cancel();\n    this._entrySubs = new Set();\n    this._entry = null;\n  }\n\n  /**\n   * @private\n   * @param {IntersectionObserverEntry[]} entries\n   */\n  _observerCallback(entries) {\n    let [entry] = entries;\n    this._isIntersecting = entry.isIntersecting;\n\n    if (entry.isIntersecting && !this._renderedOnce) {\n      this.render();\n      this._renderedOnce = true;\n    }\n    if (entry.intersectionRatio === 0) {\n      this._debouncedGenerateThumb.cancel();\n    } else {\n      this._debouncedGenerateThumb();\n    }\n  }\n\n  /** @private */\n  _calculateState() {\n    if (!this._entry) {\n      return;\n    }\n    let entry = this._entry;\n    let state = FileItemState.IDLE;\n\n    if (entry.getValue('errors').length > 0) {\n      state = FileItemState.FAILED;\n    } else if (entry.getValue('isUploading')) {\n      state = FileItemState.UPLOADING;\n    } else if (entry.getValue('fileInfo')) {\n      state = FileItemState.FINISHED;\n    }\n\n    this.$.state = state;\n  }\n\n  /** @private */\n  async _generateThumbnail() {\n    if (!this._entry) {\n      return;\n    }\n    let entry = this._entry;\n\n    if (entry.getValue('fileInfo') && entry.getValue('isImage')) {\n      let size = this.cfg.thumbSize;\n      let thumbUrl = this.proxyUrl(\n        createCdnUrl(\n          createOriginalUrl(this.cfg.cdnCname, this._entry.getValue('uuid')),\n          createCdnUrlModifiers(entry.getValue('cdnUrlModifiers'), `scale_crop/${size}x${size}/center`),\n        ),\n      );\n      let currentThumbUrl = entry.getValue('thumbUrl');\n      if (currentThumbUrl !== thumbUrl) {\n        entry.setValue('thumbUrl', thumbUrl);\n        currentThumbUrl?.startsWith('blob:') && URL.revokeObjectURL(currentThumbUrl);\n      }\n      return;\n    }\n\n    if (entry.getValue('thumbUrl')) {\n      return;\n    }\n\n    if (entry.getValue('file')?.type.includes('image')) {\n      try {\n        let thumbUrl = await generateThumb(entry.getValue('file'), this.cfg.thumbSize);\n        entry.setValue('thumbUrl', thumbUrl);\n      } catch (err) {\n        let color = window.getComputedStyle(this).getPropertyValue('--clr-generic-file-icon');\n        entry.setValue('thumbUrl', fileCssBg(color));\n      }\n    } else {\n      let color = window.getComputedStyle(this).getPropertyValue('--clr-generic-file-icon');\n      entry.setValue('thumbUrl', fileCssBg(color));\n    }\n  }\n\n  /**\n   * @private\n   * @param {string} prop\n   * @param {(value: any) => void} handler\n   */\n  _subEntry(prop, handler) {\n    let sub = this._entry.subscribe(\n      prop,\n      /** @param {any} value */ (value) => {\n        if (this.isConnected) {\n          handler(value);\n        }\n      },\n    );\n    this._entrySubs.add(sub);\n  }\n\n  /**\n   * @private\n   * @param {String} id\n   */\n  _handleEntryId(id) {\n    this._reset();\n\n    /** @type {import('../../abstract/TypedData.js').TypedData} */\n    let entry = this.uploadCollection?.read(id);\n    this._entry = entry;\n\n    if (!entry) {\n      return;\n    }\n\n    this._subEntry('uploadProgress', (uploadProgress) => {\n      this.$.progressValue = uploadProgress;\n    });\n\n    this._subEntry('fileName', (name) => {\n      this.$.itemName = name || entry.getValue('externalUrl') || this.l10n('file-no-name');\n      this._debouncedCalculateState();\n    });\n\n    this._subEntry('externalUrl', (externalUrl) => {\n      this.$.itemName = entry.getValue('fileName') || externalUrl || this.l10n('file-no-name');\n    });\n\n    this._subEntry('fileInfo', (fileInfo) => {\n      this._debouncedCalculateState();\n      if (fileInfo && this._isIntersecting) {\n        this._debouncedGenerateThumb();\n      }\n    });\n\n    this._subEntry('cdnUrlModifiers', () => {\n      if (this._isIntersecting) {\n        this._debouncedGenerateThumb();\n      }\n    });\n\n    this._subEntry('thumbUrl', (thumbUrl) => {\n      this.$.thumbUrl = thumbUrl ? `url(${thumbUrl})` : '';\n    });\n\n    this._subEntry('errors', () => this._debouncedCalculateState());\n    this._subEntry('isUploading', () => this._debouncedCalculateState());\n    this._subEntry('fileSize', () => this._debouncedCalculateState());\n    this._subEntry('mimeType', () => this._debouncedCalculateState());\n    this._subEntry('isImage', () => this._debouncedCalculateState());\n\n    if (this._isIntersecting) {\n      this._debouncedGenerateThumb();\n    }\n  }\n\n  initCallback() {\n    super.initCallback();\n\n    this.sub('uid', (uid) => {\n      this._handleEntryId(uid);\n    });\n\n    this.sub('state', (state) => {\n      this._handleState(state);\n    });\n\n    this.subConfigValue('useCloudImageEditor', () => this._debouncedCalculateState());\n\n    this.onclick = () => {\n      FileItem.activeInstances.forEach((inst) => {\n        if (inst === this) {\n          inst.setAttribute('focused', '');\n        } else {\n          inst.removeAttribute('focused');\n        }\n      });\n    };\n\n    this.sub(\n      '*uploadTrigger',\n      /** @param {Set<string>} itemsToUpload */\n      (itemsToUpload) => {\n        if (!itemsToUpload.has(this._entry.uid)) {\n          return;\n        }\n        setTimeout(() => this.isConnected && this.upload());\n      },\n    );\n    FileItem.activeInstances.add(this);\n  }\n\n  /** @param {(typeof FileItemState)[keyof typeof FileItemState]} state */\n  _handleState(state) {\n    if (state === FileItemState.FAILED) {\n      this.$.badgeIcon = 'badge-error';\n    } else if (state === FileItemState.FINISHED) {\n      this.$.badgeIcon = 'badge-success';\n    }\n\n    if (state === FileItemState.UPLOADING) {\n      this.$.isFocused = false;\n    } else {\n      this.$.progressValue = 0;\n    }\n\n    this.set$({\n      isFailed: state === FileItemState.FAILED,\n      isUploading: state === FileItemState.UPLOADING,\n      isFinished: state === FileItemState.FINISHED,\n      progressVisible: state === FileItemState.UPLOADING,\n      isEditable: this.cfg.useCloudImageEditor && this._entry?.getValue('isImage') && this._entry?.getValue('cdnUrl'),\n      errorText: this._entry.getValue('errors')?.[0]?.message,\n    });\n  }\n\n  destroyCallback() {\n    super.destroyCallback();\n\n    FileItem.activeInstances.delete(this);\n\n    this._reset();\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    /** @private */\n    this._observer = new window.IntersectionObserver(this._observerCallback.bind(this), {\n      root: this.parentElement,\n      rootMargin: '50% 0px 50% 0px',\n      threshold: [0, 1],\n    });\n    this._observer.observe(this);\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    this._debouncedGenerateThumb.cancel();\n    this._observer?.disconnect();\n  }\n\n  _settingsOfShrink() {\n    return parseShrink(this.cfg.imageShrink);\n  }\n\n  /**\n   * @private\n   * @param {File} file\n   */\n  _processShrink(file) {\n    return shrinkFile(file, this._settingsOfShrink());\n  }\n\n  async upload() {\n    let entry = this._entry;\n\n    if (!this.uploadCollection.read(entry.uid)) {\n      return;\n    }\n\n    if (entry.getValue('fileInfo') || entry.getValue('isUploading') || entry.getValue('errors').length > 0) {\n      return;\n    }\n    const multipleMax = this.cfg.multiple ? this.cfg.multipleMax : 1;\n    if (multipleMax && this.uploadCollection.size > multipleMax) {\n      return;\n    }\n\n    this._debouncedCalculateState();\n    entry.setValue('isUploading', true);\n    entry.setValue('errors', []);\n\n    try {\n      let abortController = new AbortController();\n      entry.setValue('abortController', abortController);\n\n      const uploadTask = async () => {\n        let file = entry.getValue('file');\n        if (file && this.cfg.imageShrink) {\n          file = await this._processShrink(file).catch(() => file);\n        }\n\n        const fileInput = file || entry.getValue('externalUrl') || entry.getValue('uuid');\n        const baseUploadClientOptions = this.getUploadClientOptions();\n        /** @type {import('@uploadcare/upload-client').FileFromOptions} */\n        const uploadClientOptions = {\n          ...baseUploadClientOptions,\n          fileName: entry.getValue('fileName'),\n          source: entry.getValue('source'),\n          onProgress: (progress) => {\n            if (progress.isComputable) {\n              let percentage = progress.value * 100;\n              entry.setValue('uploadProgress', percentage);\n            }\n          },\n          signal: abortController.signal,\n          metadata: await this.getMetadataFor(entry.uid),\n        };\n        this.debugPrint('upload options', fileInput, uploadClientOptions);\n        return uploadFile(fileInput, uploadClientOptions);\n      };\n\n      /** @type {import('@uploadcare/upload-client').UploadcareFile} */\n      let fileInfo = await this.$['*uploadQueue'].add(uploadTask);\n      entry.setMultipleValues({\n        fileInfo,\n        isUploading: false,\n        fileName: fileInfo.originalFilename,\n        fileSize: fileInfo.size,\n        isImage: fileInfo.isImage,\n        mimeType: fileInfo.contentInfo?.mime?.mime ?? fileInfo.mimeType,\n        uuid: fileInfo.uuid,\n        cdnUrl: entry.getValue('cdnUrl') ?? fileInfo.cdnUrl,\n        cdnUrlModifiers: entry.getValue('cdnUrlModifiers') ?? '',\n        uploadProgress: 100,\n      });\n\n      if (entry === this._entry) {\n        this._debouncedCalculateState();\n      }\n    } catch (cause) {\n      if (cause instanceof CancelError && cause.isCancel) {\n        entry.setMultipleValues({\n          isUploading: false,\n          uploadProgress: 0,\n        });\n      } else {\n        entry.setMultipleValues({\n          isUploading: false,\n          uploadProgress: 0,\n          uploadError: cause,\n        });\n      }\n\n      if (entry === this._entry) {\n        this._debouncedCalculateState();\n      }\n    }\n  }\n}\n\nFileItem.template = /* HTML */ `\n  <div class=\"inner\" set=\"@finished: isFinished; @uploading: isUploading; @failed: isFailed; @focused: isFocused\">\n    <div class=\"thumb\" set=\"style.backgroundImage: thumbUrl\">\n      <div class=\"badge\">\n        <lr-icon set=\"@name: badgeIcon\"></lr-icon>\n      </div>\n    </div>\n    <div class=\"file-name-wrapper\">\n      <span class=\"file-name\" set=\"@title: itemName\">{{itemName}}</span>\n      <span class=\"file-error\" set=\"@hidden: !errorText\">{{errorText}}</span>\n    </div>\n    <div class=\"file-actions\">\n      <button type=\"button\" class=\"edit-btn mini-btn\" set=\"onclick: onEdit; @hidden: !isEditable\">\n        <lr-icon name=\"edit-file\"></lr-icon>\n      </button>\n      <button type=\"button\" class=\"remove-btn mini-btn\" set=\"onclick: onRemove;\">\n        <lr-icon name=\"remove-file\"></lr-icon>\n      </button>\n      <button type=\"button\" class=\"upload-btn mini-btn\" set=\"onclick: onUpload;\">\n        <lr-icon name=\"upload\"></lr-icon>\n      </button>\n    </div>\n    <lr-progress-bar class=\"progress-bar\" set=\"value: progressValue; visible: progressVisible;\"> </lr-progress-bar>\n  </div>\n`;\nFileItem.activeInstances = new Set();\n","// @ts-check\nimport { Block } from '../../abstract/Block.js';\n\nexport class Modal extends Block {\n  static StateConsumerScope = 'modal';\n\n  constructor() {\n    super();\n    this.init$ = {\n      ...this.init$,\n      '*modalActive': false,\n      isOpen: false,\n      closeClicked: this._handleDialogClose,\n    };\n  }\n\n  _handleBackdropClick = () => {\n    this._closeDialog();\n  };\n\n  _closeDialog = () => {\n    this.setOrAddState('*modalActive', false);\n  };\n\n  _handleDialogClose = () => {\n    this._closeDialog();\n  };\n\n  /** @param {Event} e */\n  _handleDialogMouseDown = (e) => {\n    /** @private */\n    this._mouseDownTarget = e.target;\n  };\n\n  /** @param {Event} e */\n  _handleDialogMouseUp = (e) => {\n    if (e.target === this.ref.dialog && e.target === this._mouseDownTarget) {\n      this._closeDialog();\n    }\n  };\n\n  show() {\n    if (this.ref.dialog.showModal) {\n      this.ref.dialog.showModal();\n    } else {\n      this.ref.dialog.setAttribute('open', '');\n    }\n  }\n\n  hide() {\n    if (this.ref.dialog.close) {\n      this.ref.dialog.close();\n    } else {\n      this.ref.dialog.removeAttribute('open');\n    }\n  }\n\n  initCallback() {\n    super.initCallback();\n    if (typeof HTMLDialogElement === 'function') {\n      this.ref.dialog.addEventListener('close', this._handleDialogClose);\n      this.ref.dialog.addEventListener('mousedown', this._handleDialogMouseDown);\n      this.ref.dialog.addEventListener('mouseup', this._handleDialogMouseUp);\n    } else {\n      this.setAttribute('dialog-fallback', '');\n      let backdrop = document.createElement('div');\n      backdrop.className = 'backdrop';\n      this.appendChild(backdrop);\n      backdrop.addEventListener('click', this._handleBackdropClick);\n    }\n\n    this.sub('*modalActive', (modalActive) => {\n      if (this.$.isOpen !== modalActive) {\n        this.$.isOpen = modalActive;\n      }\n\n      if (modalActive && this.cfg.modalScrollLock) {\n        document.body.style.overflow = 'hidden';\n      } else {\n        document.body.style.overflow = '';\n      }\n    });\n\n    this.subConfigValue('modalBackdropStrokes', (val) => {\n      if (val) {\n        this.setAttribute('strokes', '');\n      } else {\n        this.removeAttribute('strokes');\n      }\n    });\n\n    this.sub('isOpen', (isOpen) => {\n      if (isOpen) {\n        this.show();\n      } else {\n        this.hide();\n      }\n    });\n  }\n\n  destroyCallback() {\n    super.destroyCallback();\n    document.body.style.overflow = '';\n    this._mouseDownTarget = undefined;\n    this.ref.dialog.removeEventListener('close', this._handleDialogClose);\n    this.ref.dialog.removeEventListener('mousedown', this._handleDialogMouseDown);\n    this.ref.dialog.removeEventListener('mouseup', this._handleDialogMouseUp);\n  }\n}\n\nModal.template = /* HTML */ `\n  <dialog ref=\"dialog\">\n    <slot></slot>\n  </dialog>\n`;\n","// @ts-check\n\n/**\n * @template {{ (...args: any[]): void }} T\n * @param {T} fn\n * @param {number} wait\n * @returns {T & { readonly cancel: () => void }} }\n */\nexport const throttle = (fn, wait) => {\n  /** @type {boolean} */\n  let inThrottle;\n  /** @type {ReturnType<typeof setTimeout>} */\n  let lastFn;\n  /** @type {number} */\n  let lastTime;\n  /** @param {...any} args */\n  const throttled = (...args) => {\n    if (!inThrottle) {\n      fn(...args);\n      lastTime = Date.now();\n      inThrottle = true;\n    } else {\n      clearTimeout(lastFn);\n      lastFn = setTimeout(\n        () => {\n          if (Date.now() - lastTime >= wait) {\n            fn(...args);\n            lastTime = Date.now();\n          }\n        },\n        Math.max(wait - (Date.now() - lastTime), 0),\n      );\n    }\n  };\n  Object.defineProperty(throttled, 'cancel', {\n    configurable: false,\n    writable: false,\n    enumerable: false,\n    value: () => {\n      clearTimeout(lastFn);\n    },\n  });\n\n  return /** @type {T & { readonly cancel: () => void }} */ (/** @type {unknown} */ (throttled));\n};\n","// @ts-check\nimport { ActivityBlock } from '../../abstract/ActivityBlock.js';\nimport { UploaderBlock } from '../../abstract/UploaderBlock.js';\nimport { EventType } from '../UploadCtxProvider/EventEmitter.js';\nimport { throttle } from '../utils/throttle.js';\n\n/**\n * @typedef {{\n *   total: number;\n *   succeed: number;\n *   uploading: number;\n *   failed: number;\n * }} Summary\n */\n\nexport class UploadList extends UploaderBlock {\n  // Context owner should have access to CSS l10n\n  // TODO: We need to move away l10n from CSS\n  couldBeCtxOwner = true;\n  historyTracked = true;\n  activityType = ActivityBlock.activities.UPLOAD_LIST;\n\n  constructor() {\n    super();\n\n    this.init$ = {\n      ...this.init$,\n      doneBtnVisible: false,\n      doneBtnEnabled: false,\n      uploadBtnVisible: false,\n      addMoreBtnVisible: false,\n      addMoreBtnEnabled: false,\n      headerText: '',\n      commonErrorMessage: '',\n\n      hasFiles: false,\n      onAdd: () => {\n        this.initFlow(true);\n      },\n      onUpload: () => {\n        this.emit(EventType.UPLOAD_CLICK);\n        this.uploadAll();\n        this._throttledHandleCollectionUpdate();\n      },\n      onDone: () => {\n        this.emit(EventType.DONE_CLICK, this.getOutputCollectionState());\n        this.doneFlow();\n      },\n      onCancel: () => {\n        this.uploadCollection.clearAll();\n      },\n    };\n  }\n\n  /** @private */\n  _throttledHandleCollectionUpdate = throttle(() => {\n    if (!this.isConnected) {\n      return;\n    }\n    this._updateUploadsState();\n\n    if (!this.couldOpenActivity && this.$['*currentActivity'] === this.activityType) {\n      this.historyBack();\n    }\n  }, 300);\n\n  /** @private */\n  _updateUploadsState() {\n    const collectionState = this.getOutputCollectionState();\n    /** @type {Summary} */\n    const summary = {\n      total: collectionState.totalCount,\n      succeed: collectionState.successCount,\n      uploading: collectionState.uploadingCount,\n      failed: collectionState.failedCount,\n    };\n    const fitCountRestrictions = !collectionState.errors.some(\n      (err) => err.type === 'TOO_MANY_FILES' || err.type === 'TOO_FEW_FILES',\n    );\n    const tooMany = collectionState.errors.some((err) => err.type === 'TOO_MANY_FILES');\n    const exact = collectionState.totalCount === (this.cfg.multiple ? this.cfg.multipleMax : 1);\n    const validationOk = summary.failed === 0;\n    let uploadBtnVisible = false;\n    let allDone = false;\n    let doneBtnEnabled = false;\n\n    const readyToUpload = summary.total - summary.succeed - summary.uploading - summary.failed;\n    if (readyToUpload > 0 && fitCountRestrictions) {\n      uploadBtnVisible = true;\n    } else {\n      allDone = true;\n      doneBtnEnabled = summary.total === summary.succeed && fitCountRestrictions && validationOk;\n    }\n\n    this.set$({\n      doneBtnVisible: allDone,\n      doneBtnEnabled: doneBtnEnabled,\n\n      uploadBtnVisible,\n\n      addMoreBtnEnabled: summary.total === 0 || (!tooMany && !exact),\n      addMoreBtnVisible: !exact || this.cfg.multiple,\n    });\n\n    this.bindL10n('headerText', () => this._getHeaderText(summary));\n  }\n\n  /**\n   * @private\n   * @param {Summary} summary\n   */\n  _getHeaderText(summary) {\n    /** @param {keyof Summary} status */\n    const localizedText = (status) => {\n      const count = summary[status];\n      return this.l10n(`header-${status}`, {\n        count: count,\n      });\n    };\n    if (summary.uploading > 0) {\n      return localizedText('uploading');\n    }\n    if (summary.failed > 0) {\n      return localizedText('failed');\n    }\n    if (summary.succeed > 0) {\n      return localizedText('succeed');\n    }\n\n    return localizedText('total');\n  }\n\n  get couldOpenActivity() {\n    return this.cfg.showEmptyList || this.uploadCollection.size > 0;\n  }\n\n  initCallback() {\n    super.initCallback();\n\n    this.registerActivity(this.activityType);\n\n    this.subConfigValue('multiple', this._throttledHandleCollectionUpdate);\n    this.subConfigValue('multipleMin', this._throttledHandleCollectionUpdate);\n    this.subConfigValue('multipleMax', this._throttledHandleCollectionUpdate);\n\n    this.sub('*currentActivity', (currentActivity) => {\n      if (!this.couldOpenActivity && currentActivity === this.activityType) {\n        this.$['*currentActivity'] = this.initActivity;\n      }\n    });\n\n    // TODO: could be performance issue on many files\n    // there is no need to update buttons state on every progress tick\n    this.uploadCollection.observeProperties(this._throttledHandleCollectionUpdate);\n\n    this.sub(\n      '*uploadList',\n      (list) => {\n        this._throttledHandleCollectionUpdate();\n\n        this.set$({\n          hasFiles: list.length > 0,\n        });\n\n        if (!this.cfg.confirmUpload) {\n          this.uploadAll();\n        }\n      },\n      false,\n    );\n\n    this.sub(\n      '*collectionErrors',\n      /** @param {import('../../types').OutputError<import('../../types').OutputCollectionErrorType>[]} errors */\n      (errors) => {\n        const firstError = errors.filter((err) => err.type !== 'SOME_FILES_HAS_ERRORS')[0];\n        if (!firstError) {\n          this.set$({\n            commonErrorMessage: null,\n          });\n          return;\n        }\n        this.set$({\n          commonErrorMessage: firstError.message,\n        });\n      },\n    );\n  }\n\n  destroyCallback() {\n    super.destroyCallback();\n    this.uploadCollection.unobserveProperties(this._throttledHandleCollectionUpdate);\n  }\n}\n\nUploadList.template = /* HTML */ `\n  <lr-activity-header>\n    <span class=\"header-text\">{{headerText}}</span>\n    <button type=\"button\" class=\"mini-btn close-btn\" set=\"onclick: *closeModal\">\n      <lr-icon name=\"close\"></lr-icon>\n    </button>\n  </lr-activity-header>\n\n  <div class=\"no-files\" set=\"@hidden: hasFiles\">\n    <slot name=\"empty\"><span l10n=\"no-files\"></span></slot>\n  </div>\n\n  <div class=\"files\" repeat=\"*uploadList\" repeat-item-tag=\"lr-file-item\"></div>\n\n  <div class=\"common-error\" set=\"@hidden: !commonErrorMessage; textContent: commonErrorMessage;\"></div>\n\n  <div class=\"toolbar\">\n    <button type=\"button\" class=\"cancel-btn secondary-btn\" set=\"onclick: onCancel;\" l10n=\"clear\"></button>\n    <div class=\"toolbar-spacer\"></div>\n    <button\n      type=\"button\"\n      class=\"add-more-btn secondary-btn\"\n      set=\"onclick: onAdd; @disabled: !addMoreBtnEnabled; @hidden: !addMoreBtnVisible\"\n    >\n      <lr-icon name=\"add\"></lr-icon><span l10n=\"add-more\"></span>\n    </button>\n    <button\n      type=\"button\"\n      class=\"upload-btn primary-btn\"\n      set=\"@hidden: !uploadBtnVisible; onclick: onUpload;\"\n      l10n=\"upload\"\n    ></button>\n    <button\n      type=\"button\"\n      class=\"done-btn primary-btn\"\n      set=\"@hidden: !doneBtnVisible; onclick: onDone;  @disabled: !doneBtnEnabled\"\n      l10n=\"done\"\n    ></button>\n  </div>\n\n  <lr-drop-area ghost></lr-drop-area>\n`;\n","import { UploaderBlock } from '../../abstract/UploaderBlock.js';\nimport { ActivityBlock } from '../../abstract/ActivityBlock.js';\nimport { UploadSource } from '../utils/UploadSource.js';\n\nexport class UrlSource extends UploaderBlock {\n  couldBeCtxOwner = true;\n  activityType = ActivityBlock.activities.URL;\n\n  init$ = {\n    ...this.init$,\n    importDisabled: true,\n    onUpload: (e) => {\n      e.preventDefault();\n\n      let url = this.ref.input['value'];\n      this.addFileFromUrl(url, { source: UploadSource.URL_TAB });\n      this.$['*currentActivity'] = ActivityBlock.activities.UPLOAD_LIST;\n    },\n    onCancel: () => {\n      this.historyBack();\n    },\n    onInput: (e) => {\n      let value = /** @type {HTMLInputElement} */ (e.target).value;\n      this.set$({ importDisabled: !value });\n    },\n  };\n\n  initCallback() {\n    super.initCallback();\n    this.registerActivity(this.activityType, {\n      onActivate: () => {\n        this.ref.input['value'] = '';\n        this.ref.input.focus();\n      },\n    });\n  }\n}\n\nUrlSource.template = /* HTML */ `\n  <lr-activity-header>\n    <button type=\"button\" class=\"mini-btn\" set=\"onclick: *historyBack\">\n      <lr-icon name=\"back\"></lr-icon>\n    </button>\n    <div>\n      <lr-icon name=\"url\"></lr-icon>\n      <span l10n=\"caption-from-url\"></span>\n    </div>\n    <button type=\"button\" class=\"mini-btn close-btn\" set=\"onclick: *closeModal\">\n      <lr-icon name=\"close\"></lr-icon>\n    </button>\n  </lr-activity-header>\n  <form class=\"content\">\n    <input placeholder=\"https://\" class=\"url-input\" type=\"text\" ref=\"input\" set=\"oninput: onInput\" />\n    <button\n      type=\"submit\"\n      class=\"url-upload-btn primary-btn\"\n      set=\"onclick: onUpload; @disabled: importDisabled\"\n      l10n=\"upload-url\"\n    ></button>\n  </form>\n`;\n","export const canUsePermissionsApi = () => {\n  return typeof navigator.permissions !== 'undefined';\n};\n","import { UploaderBlock } from '../../abstract/UploaderBlock.js';\nimport { ActivityBlock } from '../../abstract/ActivityBlock.js';\nimport { canUsePermissionsApi } from '../utils/abilities.js';\nimport { debounce } from '../utils/debounce.js';\nimport { UploadSource } from '../utils/UploadSource.js';\n\nexport class CameraSource extends UploaderBlock {\n  couldBeCtxOwner = true;\n  activityType = ActivityBlock.activities.CAMERA;\n\n  /** @private */\n  _unsubPermissions = null;\n\n  init$ = {\n    ...this.init$,\n    video: null,\n    videoTransformCss: null,\n    shotBtnDisabled: true,\n    videoHidden: true,\n    messageHidden: true,\n    requestBtnHidden: canUsePermissionsApi(),\n    cameraSelectOptions: null,\n    cameraSelectHidden: true,\n    l10nMessage: '',\n\n    onCameraSelectChange: (e) => {\n      /** @type {String} */\n      this._selectedCameraId = e.target.value;\n      this._capture();\n    },\n    onCancel: () => {\n      this.historyBack();\n    },\n    onShot: () => {\n      this._shot();\n    },\n    onRequestPermissions: () => {\n      this._capture();\n    },\n  };\n\n  /** @private */\n  _onActivate = () => {\n    if (canUsePermissionsApi()) {\n      this._subscribePermissions();\n    }\n    this._capture();\n  };\n\n  /** @private */\n  _onDeactivate = () => {\n    if (this._unsubPermissions) {\n      this._unsubPermissions();\n    }\n\n    this._stopCapture();\n  };\n\n  /** @private */\n  _handlePermissionsChange = () => {\n    this._capture();\n  };\n\n  /**\n   * @private\n   * @param {'granted' | 'denied' | 'prompt'} state\n   */\n  _setPermissionsState = debounce((state) => {\n    this.classList.toggle('initialized', state === 'granted');\n\n    if (state === 'granted') {\n      this.set$({\n        videoHidden: false,\n        shotBtnDisabled: false,\n        messageHidden: true,\n      });\n    } else if (state === 'prompt') {\n      this.$.l10nMessage = 'camera-permissions-prompt';\n      this.set$({\n        videoHidden: true,\n        shotBtnDisabled: true,\n        messageHidden: false,\n      });\n      this._stopCapture();\n    } else {\n      this.$.l10nMessage = 'camera-permissions-denied';\n\n      this.set$({\n        videoHidden: true,\n        shotBtnDisabled: true,\n        messageHidden: false,\n      });\n      this._stopCapture();\n    }\n  }, 300);\n\n  /** @private */\n  async _subscribePermissions() {\n    try {\n      // @ts-ignore\n      let permissionsResponse = await navigator.permissions.query({ name: 'camera' });\n      permissionsResponse.addEventListener('change', this._handlePermissionsChange);\n    } catch (err) {\n      console.log('Failed to use permissions API. Fallback to manual request mode.', err);\n      this._capture();\n    }\n  }\n\n  /** @private */\n  async _capture() {\n    let constr = {\n      video: {\n        width: {\n          ideal: 1920,\n        },\n        height: {\n          ideal: 1080,\n        },\n        frameRate: {\n          ideal: 30,\n        },\n      },\n      audio: false,\n    };\n    if (this._selectedCameraId) {\n      constr.video.deviceId = {\n        exact: this._selectedCameraId,\n      };\n    }\n    /** @private */\n    this._canvas = document.createElement('canvas');\n    /** @private */\n    this._ctx = this._canvas.getContext('2d');\n\n    try {\n      this._setPermissionsState('prompt');\n      let stream = await navigator.mediaDevices.getUserMedia(constr);\n      stream.addEventListener('inactive', () => {\n        this._setPermissionsState('denied');\n      });\n      this.$.video = stream;\n      /** @private */\n      this._capturing = true;\n      this._setPermissionsState('granted');\n    } catch (err) {\n      this._setPermissionsState('denied');\n      console.error('Failed to capture camera', err);\n    }\n  }\n\n  /** @private */\n  _stopCapture() {\n    if (this._capturing) {\n      this.$.video?.getTracks()[0].stop();\n      this.$.video = null;\n      this._capturing = false;\n    }\n  }\n\n  /** @private */\n  _shot() {\n    this._canvas.height = this.ref.video['videoHeight'];\n    this._canvas.width = this.ref.video['videoWidth'];\n    // @ts-ignore\n    this._ctx.drawImage(this.ref.video, 0, 0);\n    const date = Date.now();\n    const name = `camera-${date}.jpeg`;\n    const format = 'image/jpeg';\n    this._canvas.toBlob((blob) => {\n      let file = new File([blob], name, {\n        lastModified: date,\n        type: format,\n      });\n      this.addFileFromObject(file, { source: UploadSource.CAMERA });\n      this.set$({\n        '*currentActivity': ActivityBlock.activities.UPLOAD_LIST,\n      });\n    }, format);\n  }\n\n  async initCallback() {\n    super.initCallback();\n    this.registerActivity(this.activityType, {\n      onActivate: this._onActivate,\n      onDeactivate: this._onDeactivate,\n    });\n\n    this.subConfigValue('cameraMirror', (val) => {\n      this.$.videoTransformCss = val ? 'scaleX(-1)' : null;\n    });\n\n    try {\n      let deviceList = await navigator.mediaDevices.enumerateDevices();\n      let cameraSelectOptions = deviceList\n        .filter((info) => {\n          return info.kind === 'videoinput';\n        })\n        .map((info, idx) => {\n          return {\n            text: info.label.trim() || `${this.l10n('caption-camera')} ${idx + 1}`,\n            value: info.deviceId,\n          };\n        });\n      if (cameraSelectOptions.length > 1) {\n        this.$.cameraSelectOptions = cameraSelectOptions;\n        this.$.cameraSelectHidden = false;\n      }\n      this._selectedCameraId = cameraSelectOptions[0]?.value;\n    } catch (err) {\n      // mediaDevices isn't available for HTTP\n      // TODO: handle this case\n    }\n  }\n}\n\nCameraSource.template = /* HTML */ `\n  <lr-activity-header>\n    <button type=\"button\" class=\"mini-btn\" set=\"onclick: *historyBack\">\n      <lr-icon name=\"back\"></lr-icon>\n    </button>\n    <div set=\"@hidden: !cameraSelectHidden\">\n      <lr-icon name=\"camera\"></lr-icon>\n      <span l10n=\"caption-camera\"></span>\n    </div>\n    <lr-select\n      class=\"camera-select\"\n      set=\"$.options: cameraSelectOptions; @hidden: cameraSelectHidden; onchange: onCameraSelectChange\"\n    >\n    </lr-select>\n    <button type=\"button\" class=\"mini-btn close-btn\" set=\"onclick: *closeModal\">\n      <lr-icon name=\"close\"></lr-icon>\n    </button>\n  </lr-activity-header>\n  <div class=\"content\">\n    <video\n      autoplay\n      playsinline\n      set=\"srcObject: video; style.transform: videoTransformCss; @hidden: videoHidden\"\n      ref=\"video\"\n    ></video>\n    <div class=\"message-box\" set=\"@hidden: messageHidden\">\n      <span l10n=\"l10nMessage\"></span>\n      <button\n        type=\"button\"\n        set=\"onclick: onRequestPermissions; @hidden: requestBtnHidden\"\n        l10n=\"camera-permissions-request\"\n      ></button>\n    </div>\n    <button type=\"button\" class=\"shot-btn\" set=\"onclick: onShot; @disabled: shotBtnDisabled\">\n      <lr-icon name=\"camera\"></lr-icon>\n    </button>\n  </div>\n`;\n","// @ts-check\n\nimport { UploaderBlock } from '../../abstract/UploaderBlock.js';\nimport { EventType } from './EventEmitter.js';\nclass UploadCtxProviderClass extends UploaderBlock {\n  requireCtxName = true;\n\n  initCallback() {\n    super.initCallback();\n\n    this.$['*eventEmitter'].bindTarget(this);\n  }\n\n  destroyCallback() {\n    super.destroyCallback();\n\n    this.$['*eventEmitter'].unbindTarget(this);\n  }\n}\n\nUploadCtxProviderClass.EventType = EventType;\n\n/**\n * @typedef {import('../../utils/mixinClass.js').MixinClass<\n *   typeof UploadCtxProviderClass,\n *   {\n *     addEventListener<\n *       T extends (typeof import('./EventEmitter.js').EventType)[keyof typeof import('./EventEmitter.js').EventType],\n *     >(\n *       type: T,\n *       listener: (e: CustomEvent<import('./EventEmitter.js').EventPayload[T]>) => void,\n *       options?: boolean | AddEventListenerOptions,\n *     ): void;\n *     removeEventListener<\n *       T extends (typeof import('./EventEmitter.js').EventType)[keyof typeof import('./EventEmitter.js').EventType],\n *     >(\n *       type: T,\n *       listener: (e: CustomEvent<import('./EventEmitter.js').EventPayload[T]>) => void,\n *       options?: boolean | EventListenerOptions,\n *     ): void;\n *   }\n * >} UploadCtxProvider\n */\n\nexport const UploadCtxProvider = /** @type {UploadCtxProvider} */ (/** @type {unknown} */ (UploadCtxProviderClass));\n","import { ActivityBlock } from '../../abstract/ActivityBlock.js';\n\nexport class UiConfirmation {\n  captionL10nStr = 'confirm-your-action';\n  messageL10Str = 'are-you-sure';\n  confirmL10nStr = 'yes';\n  denyL10nStr = 'no';\n  confirmAction() {\n    console.log('Confirmed');\n  }\n  denyAction() {\n    this['historyBack']();\n  }\n}\n\nexport class ConfirmationDialog extends ActivityBlock {\n  activityType = ActivityBlock.activities.CONFIRMATION;\n\n  /** @private */\n  _defaults = new UiConfirmation();\n\n  init$ = {\n    ...this.init$,\n    activityCaption: '',\n    messageTxt: '',\n    confirmBtnTxt: '',\n    denyBtnTxt: '',\n    '*confirmation': null,\n    onConfirm: this._defaults.confirmAction,\n    onDeny: this._defaults.denyAction.bind(this),\n  };\n\n  initCallback() {\n    super.initCallback();\n    this.set$({\n      messageTxt: this.l10n(this._defaults.messageL10Str),\n      confirmBtnTxt: this.l10n(this._defaults.confirmL10nStr),\n      denyBtnTxt: this.l10n(this._defaults.denyL10nStr),\n    });\n    this.sub('*confirmation', (/** @type {UiConfirmation} */ cfn) => {\n      if (!cfn) {\n        return;\n      }\n      this.set$({\n        '*currentActivity': ActivityBlock.activities.CONFIRMATION,\n        activityCaption: this.l10n(cfn.captionL10nStr),\n        messageTxt: this.l10n(cfn.messageL10Str),\n        confirmBtnTxt: this.l10n(cfn.confirmL10nStr),\n        denyBtnTxt: this.l10n(cfn.denyL10nStr),\n        onDeny: () => {\n          cfn.denyAction();\n        },\n        onConfirm: () => {\n          cfn.confirmAction();\n        },\n      });\n    });\n  }\n}\n\nConfirmationDialog.template = /* HTML */ `\n  <lr-activity-header>\n    <button type=\"button\" class=\"mini-btn\" set=\"onclick: *historyBack\">\n      <lr-icon name=\"back\"></lr-icon>\n    </button>\n    <span>{{activityCaption}}</span>\n    <button type=\"button\" class=\"mini-btn close-btn\" set=\"onclick: *closeModal\">\n      <lr-icon name=\"close\"></lr-icon>\n    </button>\n  </lr-activity-header>\n\n  <div class=\"message\">{{messageTxt}}</div>\n  <div class=\"toolbar\">\n    <button type=\"button\" class=\"deny-btn secondary-btn\" set=\"onclick: onDeny\">{{denyBtnTxt}}</button>\n    <button type=\"button\" class=\"confirm-btn primary-btn\" set=\"onclick: onConfirm\">{{confirmBtnTxt}}</button>\n  </div>\n`;\n","import { UploaderBlock } from '../../abstract/UploaderBlock.js';\n\nexport class ProgressBarCommon extends UploaderBlock {\n  init$ = {\n    ...this.init$,\n    visible: false,\n    value: 0,\n\n    '*commonProgress': 0,\n  };\n\n  initCallback() {\n    super.initCallback();\n    /** @private */\n    this._unobserveCollection = this.uploadCollection.observeProperties(() => {\n      let anyUploading = this.uploadCollection.items().some((id) => {\n        let item = this.uploadCollection.read(id);\n        return item.getValue('isUploading');\n      });\n\n      this.$.visible = anyUploading;\n    });\n\n    this.sub('visible', (visible) => {\n      if (visible) {\n        this.setAttribute('active', '');\n      } else {\n        this.removeAttribute('active');\n      }\n    });\n\n    this.sub('*commonProgress', (progress) => {\n      this.$.value = progress;\n    });\n  }\n\n  destroyCallback() {\n    super.destroyCallback();\n\n    this._unobserveCollection?.();\n  }\n}\n\nProgressBarCommon.template = /* HTML */ ` <lr-progress-bar set=\"visible: visible; value: value\"></lr-progress-bar> `;\n","import { Block } from '../../abstract/Block.js';\n\nexport class ProgressBar extends Block {\n  /** @type {Number} */\n  _value = 0;\n\n  init$ = {\n    ...this.init$,\n    width: 0,\n    opacity: 0,\n  };\n\n  initCallback() {\n    super.initCallback();\n    this.defineAccessor('value', (value) => {\n      if (value === undefined) {\n        return;\n      }\n      const prevValue = this._value;\n      this._value = value;\n\n      if (value === 0 && prevValue > 0) {\n        this.ref.line.addEventListener('transitionend', () => {\n          this.style.setProperty('--l-width', this._value.toString());\n        });\n        return;\n      }\n\n      this.style.setProperty('--l-width', this._value.toString());\n    });\n\n    this.defineAccessor('visible', (visible) => {\n      this.ref.line.classList.toggle('progress--hidden', !visible);\n    });\n  }\n}\n\nProgressBar.template = /* HTML */ ` <div ref=\"line\" class=\"progress\"></div> `;\n","export const TRANSPARENT_PIXEL_SRC =\n  'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=';\n","import { Block } from '../../abstract/Block.js';\nimport { checkerboardCssBg } from '../svg-backgrounds/svg-backgrounds.js';\nimport { TRANSPARENT_PIXEL_SRC } from '../../utils/transparentPixelSrc.js';\n\nexport class FilePreview extends Block {\n  init$ = {\n    ...this.init$,\n    checkerboard: false,\n    src: TRANSPARENT_PIXEL_SRC,\n  };\n\n  constructor() {\n    super();\n  }\n\n  initCallback() {\n    super.initCallback();\n    this.sub('checkerboard', () => {\n      this.style.backgroundImage = this.hasAttribute('checkerboard') ? `url(${checkerboardCssBg()})` : 'unset';\n    });\n  }\n\n  destroyCallback() {\n    super.destroyCallback();\n    URL.revokeObjectURL(this._lastObjectUrl);\n  }\n\n  /** @param {HTMLImageElement} img */\n  setImage(img) {\n    this.$.src = img.src;\n  }\n\n  /** @param {File} imgFile */\n  setImageFile(imgFile) {\n    let url = URL.createObjectURL(imgFile);\n    this.$.src = url;\n    this._lastObjectUrl = url;\n  }\n\n  /** @param {String} url */\n  setImageUrl(url) {\n    this.$.src = url;\n  }\n\n  clear() {\n    URL.revokeObjectURL(this._lastObjectUrl);\n    this.$.src = TRANSPARENT_PIXEL_SRC;\n  }\n}\n\nFilePreview.template = /* HTML */ ` <lr-img class=\"img-view\" ref=\"img\" set=\"@src: src; style.aa: src;\" /> `;\n\nFilePreview.bindAttributes({\n  checkerboard: 'checkerboard',\n});\n","function normalize(...args) {\n  return args.reduce((result, arg) => {\n    if (typeof arg === 'string') {\n      result[arg] = true;\n      return result;\n    }\n\n    for (let token of Object.keys(arg)) {\n      result[token] = arg[token];\n    }\n\n    return result;\n  }, {});\n}\n\nexport function classNames(...args) {\n  let mapping = normalize(...args);\n  return Object.keys(mapping)\n    .reduce((result, token) => {\n      if (mapping[token]) {\n        result.push(token);\n      }\n\n      return result;\n    }, [])\n    .join(' ');\n}\n\nexport function applyClassNames(element, ...args) {\n  let mapping = normalize(...args);\n  for (let token of Object.keys(mapping)) {\n    element.classList.toggle(token, mapping[token]);\n  }\n}\n","// @ts-check\n\nimport { deserealizeCsv } from '../../../utils/comma-separated.js';\nimport { ALL_TABS } from '../toolbar-constants.js';\n\n/** @param {string} tabs */\nexport const parseTabs = (tabs) => {\n  if (!tabs) return ALL_TABS;\n  const tabList = deserealizeCsv(tabs).filter((tab) => ALL_TABS.includes(tab));\n  if (tabList.length === 0) {\n    return ALL_TABS;\n  }\n  return tabList;\n};\n","export default \"<svg width='0' height='0' style='position:absolute'><symbol viewBox='0 0 20 20' id='uc-icon-brightness' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M15 10a5 5 0 0 1-5 5m5-5a5 5 0 0 0-5-5m5 5h-5m0 5a5 5 0 0 1 0-10m0 10V5m0 15v-3M2.93 2.929 5.05 5.05M0 10h3m-.07 7.071 2.12-2.121M10 0v3m7.07 14.071-2.12-2.121M20 10h-3m.07-7.071L14.95 5.05m-.626 2.45H10m4.324 5H10'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-closeMax' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='m3 3 14 14m0-14L3 17'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-contrast' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M2 10a8 8 0 1 0 16 0 8 8 0 1 0-16 0m8-8v16m8-8h-8m7.598 2.5H10m6.24 2.5H10m7.6-7.5H10M16.242 5H10'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-crop' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M20 14H7.005C6.45 14 6 13.55 6 12.995V0M0 6h13.067c.515 0 .933.418.933.933V20M14.5.4 13 2l1.5 1.6M13 2h2a3 3 0 0 1 3 3v2M5.5 19.6 7 18l-1.5-1.6M7 18H5a3 3 0 0 1-3-3v-2'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-done' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='m1 10.632 5.684 5.684L19 4'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-enhance' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M19 13h-2m0 0a4 4 0 0 1-4-4m4 4a4 4 0 0 0-4 4m0-8V7m0 2a4 4 0 0 1-4 4m-2 0h2m0 0a4 4 0 0 1 4 4m0 0v2M8 8.5H6.5m0 0a2 2 0 0 1-2-2m2 2a2 2 0 0 0-2 2m0-4V5m0 1.5a2 2 0 0 1-2 2M1 8.5h1.5m0 0a2 2 0 0 1 2 2m0 0V12M12 3h-1m0 0a1 1 0 0 1-1-1m1 1a1 1 0 0 0-1 1m0-2V1m0 1a1 1 0 0 1-1 1M8 3h1m0 0a1 1 0 0 1 1 1m0 0v1'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-exposure' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M10 20v-3M2.93 2.929 5.05 5.05M0 10h3m-.07 7.071 2.12-2.121M10 0v3m7.07 14.071-2.12-2.121M20 10h-3m.07-7.071L14.95 5.05M5 10a5 5 0 1 0 10 0 5 5 0 1 0-10 0'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-filters' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M4.5 6.5a5.5 5.5 0 1 0 11 0 5.5 5.5 0 1 0-11 0m-3.5 6a5.5 5.5 0 1 0 11 0 5.5 5.5 0 1 0-11 0m7 0a5.5 5.5 0 1 0 11 0 5.5 5.5 0 1 0-11 0'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-flip' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M19.6 5 18 3.5 16.4 5m3.2 10L18 16.5 16.4 15M18 3.523v12.954M3.3 8.5h10.654c.301 0 .415-.395.159-.554L3.459 1.286A.3.3 0 0 0 3 1.542V8.2a.3.3 0 0 0 .3.3zm0 3h10.654c.301 0 .415.395.159.554l-10.654 6.66A.3.3 0 0 1 3 18.458v-6.66a.3.3 0 0 1 .3-.3z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-gamma' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M17 3C9 6 2.5 11.5 2.5 17.5m0 0h1m-1 0v-1m14 1h1m-3 0h1m-3 0h1m-3 0h1m-3 0h1m-3 0h1m-3 0h1m-3-14v-1m0 3v-1m0 3v-1m0 3v-1m0 3v-1m0 3v-1m0 3v-1'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-mirror' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M5 .4 3.5 2 5 3.6M15 .4 16.5 2 15 3.6M3.52 2h12.957M8.5 16.7V6.046c0-.301-.394-.415-.554-.159L1.287 16.541a.3.3 0 0 0 .255.459H8.2a.3.3 0 0 0 .3-.3zm3 0V6.046c0-.301.395-.415.555-.159l6.659 10.654a.3.3 0 0 1-.255.459H11.8a.3.3 0 0 1-.3-.3z'/></symbol><symbol viewBox='0 0 40 40' id='uc-icon-original' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M0 40 40 0'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-rotate' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M13.5.4 12 2l1.5 1.6M12.023 2H14.4A3.6 3.6 0 0 1 18 5.6V8M4 17h9a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-sad' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M2 17c4.418-4 11.582-4 16 0M16.5 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-11 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-saturation' xmlns='http://www.w3.org/2000/svg'><defs><linearGradient id='ouc-icon-id__a' x1='10.001' y1='1' x2='10.001' y2='19' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient></defs><circle cx='10.001' cy='10' r='9' transform='rotate(90 10 10)' fill='url(#ouc-icon-id__a)'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-slider' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M0 10h11m0 0a2 2 0 1 0 4 0m-4 0a2 2 0 1 1 4 0m0 0h5'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-tuning' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M8 10h11M1 10h4M1 4.5h11m3 0h4m-18 11h11m3 0h4m-7-11a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0M5 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0m7 5.5a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-vibrance' xmlns='http://www.w3.org/2000/svg'><path d='M2.125 5.64A8.96 8.96 0 0 0 1.001 10a8.96 8.96 0 0 0 1.124 4.36V5.64z' fill='url(#ruc-icon-id__a)'/><path d='M2.875 15.499V4.502a9.053 9.053 0 0 1 1.75-1.72v14.437a9.05 9.05 0 0 1-1.75-1.72z' fill='url(#ruc-icon-id__b)'/><path d='M5.375 17.722c.548.33 1.134.601 1.75.809V1.469a8.956 8.956 0 0 0-1.75.81v15.443z' fill='url(#ruc-icon-id__c)'/><path d='M7.875 1.253v17.495c.564.136 1.15.22 1.75.244V1.008a9 9 0 0 0-1.75.245z' fill='url(#ruc-icon-id__d)'/><path d='M10.375 1.008v17.984a9 9 0 0 0 1.75-.244V1.252a9 9 0 0 0-1.75-.244z' fill='url(#ruc-icon-id__e)'/><path d='M12.875 1.469V18.53a8.957 8.957 0 0 0 1.75-.808V2.277a8.957 8.957 0 0 0-1.75-.808z' fill='url(#ruc-icon-id__f)'/><path d='M15.375 2.78v14.44a9.053 9.053 0 0 0 1.75-1.72v-11a9.054 9.054 0 0 0-1.75-1.72z' fill='url(#ruc-icon-id__g)'/><path d='M17.875 5.638v8.724A8.959 8.959 0 0 0 19.001 10a8.96 8.96 0 0 0-1.126-4.362z' fill='url(#ruc-icon-id__h)'/><defs><linearGradient id='ruc-icon-id__a' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='ruc-icon-id__b' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='ruc-icon-id__c' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='ruc-icon-id__d' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='ruc-icon-id__e' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='ruc-icon-id__f' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='ruc-icon-id__g' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='ruc-icon-id__h' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient></defs></symbol><symbol viewBox='0 0 20 20' id='uc-icon-warmth' xmlns='http://www.w3.org/2000/svg'><path d='m7.5 13.05.429.42.171-.175v-.244h-.6zm5 0h-.6v.245l.172.175.428-.42zM8.1 3.5c0-1.05.85-1.9 1.9-1.9V.4a3.1 3.1 0 0 0-3.1 3.1h1.2zm0 9.55V3.5H6.9v9.55h1.2zm-1 2.45c0-.79.315-1.506.829-2.03l-.858-.84A4.088 4.088 0 0 0 5.9 15.5h1.2zm2.9 2.9a2.9 2.9 0 0 1-2.9-2.9H5.9a4.1 4.1 0 0 0 4.1 4.1v-1.2zm2.9-2.9a2.9 2.9 0 0 1-2.9 2.9v1.2a4.1 4.1 0 0 0 4.1-4.1h-1.2zm-.829-2.03c.514.524.829 1.24.829 2.03h1.2c0-1.117-.447-2.13-1.171-2.87l-.858.84zM11.9 3.5v9.55h1.2V3.5h-1.2zM10 1.6c1.05 0 1.9.85 1.9 1.9h1.2A3.1 3.1 0 0 0 10 .4v1.2z' fill='currentColor'/><path d='M10 14V8' stroke='currentColor' stroke-width='1.2' stroke-linecap='round'/><path d='M14 3h3m-3 3h3m-3 3h3m-8 6.5a1 1 0 1 0 2 0 1 1 0 1 0-2 0' stroke='currentColor' stroke-width='1.2'/></symbol></svg>\";","import { TRANSPARENT_PIXEL_SRC } from '../../../utils/transparentPixelSrc.js';\nimport svgIconsSprite from './svg-sprite.js';\n\nexport const TEMPLATE = /* HTML */ `\n  ${svgIconsSprite}\n  <div class=\"wrapper wrapper_desktop\">\n    <lr-presence-toggle class=\"network_problems_splash\" set=\"visible: presence.networkProblems;\">\n      <div class=\"network_problems_content\">\n        <div class=\"network_problems_icon\">\n          <lr-icon name=\"sad\"></lr-icon>\n        </div>\n        <div class=\"network_problems_text\">Network error</div>\n      </div>\n      <div class=\"network_problems_footer\">\n        <lr-btn-ui theme=\"primary\" text=\"Retry\" set=\"onclick: *on.retryNetwork\"></lr-btn-ui>\n      </div>\n    </lr-presence-toggle>\n    <div class=\"viewport\">\n      <div class=\"file_type_outer\">\n        <div class=\"file_type\">{{fileType}}</div>\n      </div>\n      <div class=\"image_container\" ref=\"img-container-el\">\n        <img src=\"${TRANSPARENT_PIXEL_SRC}\" class=\"image image_visible_from_editor\" ref=\"img-el\" />\n        <lr-editor-image-cropper ref=\"cropper-el\"></lr-editor-image-cropper>\n        <lr-editor-image-fader ref=\"fader-el\"></lr-editor-image-fader>\n      </div>\n      <div class=\"info_pan\">{{msg}}</div>\n    </div>\n    <div class=\"toolbar\">\n      <lr-line-loader-ui set=\"active: showLoader\"></lr-line-loader-ui>\n      <div class=\"toolbar_content toolbar_content__editor\">\n        <lr-editor-toolbar></lr-editor-toolbar>\n      </div>\n    </div>\n  </div>\n`;\n","// @ts-check\nimport { Block } from '../../../abstract/Block.js';\nimport {\n  createCdnUrl,\n  createCdnUrlModifiers,\n  createOriginalUrl,\n  extractOperations,\n  extractUuid,\n} from '../../../utils/cdn-utils.js';\nimport { TRANSPARENT_PIXEL_SRC } from '../../../utils/transparentPixelSrc.js';\nimport { debounce } from '../../utils/debounce.js';\nimport { classNames } from './lib/classNames.js';\nimport { parseCropPreset } from './lib/parseCropPreset.js';\nimport { parseTabs } from './lib/parseTabs.js';\nimport { operationsToTransformations, transformationsToOperations } from './lib/transformationUtils.js';\nimport { initState } from './state.js';\nimport { TEMPLATE } from './template.js';\nimport { TabId } from './toolbar-constants.js';\n\nexport class CloudImageEditorBlock extends Block {\n  ctxOwner = true;\n  static className = 'cloud-image-editor';\n\n  constructor() {\n    super();\n\n    this.init$ = {\n      ...this.init$,\n      ...initState(this),\n    };\n  }\n\n  /** @private */\n  _debouncedShowLoader = debounce(this._showLoader.bind(this), 300);\n\n  /**\n   * @private\n   * @param {boolean} show\n   */\n  _showLoader(show) {\n    this.$.showLoader = show;\n  }\n\n  /**\n   * To proper work, we need non-zero size the element. So, we'll wait for it.\n   *\n   * @private\n   * @returns {Promise<void>}\n   */\n  _waitForSize() {\n    const TIMEOUT = 3000;\n    return new Promise((resolve, reject) => {\n      const timeoutId = setTimeout(() => {\n        reject(new Error('[cloud-image-editor] timeout waiting for non-zero container size'));\n      }, TIMEOUT);\n      const resizeObserver = new ResizeObserver(([element]) => {\n        if (element.contentRect.width > 0 && element.contentRect.height > 0) {\n          resolve();\n          clearTimeout(timeoutId);\n          resizeObserver.disconnect();\n        }\n      });\n      resizeObserver.observe(this);\n    });\n  }\n\n  initCallback() {\n    super.initCallback();\n\n    this.$['*faderEl'] = this.ref['fader-el'];\n    this.$['*cropperEl'] = this.ref['cropper-el'];\n    this.$['*imgContainerEl'] = this.ref['img-container-el'];\n\n    this.initEditor();\n  }\n\n  async updateImage() {\n    if (!this.isConnected) {\n      return;\n    }\n    await this._waitForSize();\n\n    if (this.$.cdnUrl) {\n      const uuid = extractUuid(this.$.cdnUrl);\n      const originalUrl = createOriginalUrl(this.$.cdnUrl, uuid);\n      if (originalUrl === this.$['*originalUrl']) {\n        return;\n      }\n      this.$['*originalUrl'] = originalUrl;\n      const operations = extractOperations(this.$.cdnUrl);\n      const transformations = operationsToTransformations(operations);\n      this.$['*editorTransformations'] = transformations;\n    } else if (this.$.uuid) {\n      const originalUrl = createOriginalUrl(this.cfg.cdnCname, this.$.uuid);\n      if (originalUrl === this.$['*originalUrl']) {\n        return;\n      }\n      this.$['*originalUrl'] = originalUrl;\n      this.$['*editorTransformations'] = {};\n    } else {\n      throw new Error('No UUID nor CDN URL provided');\n    }\n\n    if (this.$['*tabId'] === TabId.CROP) {\n      this.$['*cropperEl'].deactivate({ reset: true });\n    } else {\n      this.$['*faderEl'].deactivate();\n    }\n\n    try {\n      const cdnUrl = createCdnUrl(this.$['*originalUrl'], createCdnUrlModifiers('json'));\n      const json = await fetch(cdnUrl).then((response) => response.json());\n\n      const { width, height } = /** @type {{ width: number; height: number }} */ (json);\n      this.$['*imageSize'] = { width, height };\n\n      if (this.$['*tabId'] === TabId.CROP) {\n        this.$['*cropperEl'].activate(this.$['*imageSize']);\n      } else {\n        this.$['*faderEl'].activate({ url: this.$['*originalUrl'] });\n      }\n    } catch (err) {\n      if (err) {\n        console.error('Failed to load image info', err);\n      }\n    }\n  }\n\n  async initEditor() {\n    try {\n      await this._waitForSize();\n    } catch (err) {\n      if (this.isConnected) {\n        // @ts-ignore TODO: fix this\n        console.error(err.message);\n      }\n      return;\n    }\n\n    this.ref['img-el'].addEventListener('load', () => {\n      this._imgLoading = false;\n      this._debouncedShowLoader(false);\n\n      if (this.$.src !== TRANSPARENT_PIXEL_SRC) {\n        this.$['*networkProblems'] = false;\n      }\n    });\n\n    this.ref['img-el'].addEventListener('error', () => {\n      this._imgLoading = false;\n      this._debouncedShowLoader(false);\n\n      this.$['*networkProblems'] = true;\n    });\n\n    this.sub('src', (src) => {\n      let el = this.ref['img-el'];\n      if (el.src !== src) {\n        this._imgLoading = true;\n        el.src = src || TRANSPARENT_PIXEL_SRC;\n      }\n    });\n\n    this.sub('cropPreset', (val) => {\n      this.$['*cropPresetList'] = parseCropPreset(val);\n    });\n\n    this.sub(\n      'tabs',\n      /** @param {string} val */ (val) => {\n        this.$['*tabList'] = parseTabs(val);\n      },\n    );\n\n    this.sub('*tabId', (tabId) => {\n      this.ref['img-el'].className = classNames('image', {\n        image_hidden_to_cropper: tabId === TabId.CROP,\n        image_hidden_effects: tabId !== TabId.CROP,\n      });\n    });\n\n    this.classList.add('editor_ON');\n\n    this.sub('*networkProblems', (networkProblems) => {\n      this.$['presence.networkProblems'] = networkProblems;\n      this.$['presence.modalCaption'] = !networkProblems;\n    });\n\n    this.sub(\n      '*editorTransformations',\n      (transformations) => {\n        if (Object.keys(transformations).length === 0) {\n          return;\n        }\n        let originalUrl = this.$['*originalUrl'];\n        let cdnUrlModifiers = createCdnUrlModifiers(transformationsToOperations(transformations), 'preview');\n        let cdnUrl = createCdnUrl(originalUrl, cdnUrlModifiers);\n\n        /** @type {import('./types.js').ApplyResult} */\n        let eventData = {\n          originalUrl,\n          cdnUrlModifiers,\n          cdnUrl,\n          transformations,\n        };\n        this.dispatchEvent(\n          new CustomEvent('change', {\n            detail: eventData,\n            bubbles: true,\n            composed: true,\n          }),\n        );\n      },\n      false,\n    );\n\n    this.sub('uuid', (val) => val && this.updateImage());\n    this.sub('cdnUrl', (val) => val && this.updateImage());\n  }\n}\n\nCloudImageEditorBlock.template = TEMPLATE;\nCloudImageEditorBlock.bindAttributes({\n  uuid: 'uuid',\n  'cdn-url': 'cdnUrl',\n  'crop-preset': 'cropPreset',\n  tabs: 'tabs',\n});\n","// @ts-check\n\nimport { createCdnUrl, createCdnUrlModifiers } from '../../../utils/cdn-utils.js';\nimport { TRANSPARENT_PIXEL_SRC } from '../../../utils/transparentPixelSrc.js';\nimport { serializeCsv } from '../../utils/comma-separated.js';\nimport { transformationsToOperations } from './lib/transformationUtils.js';\nimport { ALL_TABS, TabId } from './toolbar-constants.js';\n\n/** @param {import('./CloudImageEditorBlock.js').CloudImageEditorBlock} fnCtx */\nexport function initState(fnCtx) {\n  return {\n    '*originalUrl': null,\n    '*faderEl': null,\n    '*cropperEl': null,\n    '*imgEl': null,\n    '*imgContainerEl': null,\n    '*networkProblems': false,\n    '*imageSize': null,\n    /** @type {import('./types.js').Transformations} */\n    '*editorTransformations': {},\n    /** @type {import('./types.js').CropPresetList} */\n    '*cropPresetList': [],\n    '*tabList': ALL_TABS,\n    '*tabId': TabId.CROP,\n\n    entry: null,\n    extension: null,\n    editorMode: false,\n    modalCaption: '',\n    isImage: false,\n    msg: '',\n    src: TRANSPARENT_PIXEL_SRC,\n    fileType: '',\n    showLoader: false,\n\n    // options\n    uuid: null,\n    cdnUrl: null,\n    cropPreset: '',\n    tabs: serializeCsv(ALL_TABS),\n\n    'presence.networkProblems': false,\n    'presence.modalCaption': true,\n    'presence.editorToolbar': false,\n    'presence.viewerToolbar': true,\n    // TODO: beware of wrong ctx in case of element re-creation:\n    '*on.retryNetwork': () => {\n      let images = fnCtx.querySelectorAll('img');\n      for (let img of images) {\n        let originalSrc = img.src;\n        img.src = TRANSPARENT_PIXEL_SRC;\n        img.src = originalSrc;\n      }\n      fnCtx.$['*networkProblems'] = false;\n    },\n    /** @param {import('./types.js').Transformations} transformations */\n    '*on.apply': (transformations) => {\n      if (!transformations) {\n        return;\n      }\n      let originalUrl = fnCtx.$['*originalUrl'];\n      let cdnUrlModifiers = createCdnUrlModifiers(transformationsToOperations(transformations), 'preview');\n      let cdnUrl = createCdnUrl(originalUrl, cdnUrlModifiers);\n\n      /** @type {import('./types.js').ApplyResult} */\n      let eventData = {\n        originalUrl,\n        cdnUrlModifiers,\n        cdnUrl,\n        transformations,\n      };\n      fnCtx.dispatchEvent(\n        new CustomEvent('apply', {\n          detail: eventData,\n          bubbles: true,\n          composed: true,\n        }),\n      );\n      fnCtx.remove();\n    },\n    '*on.cancel': () => {\n      fnCtx.remove();\n\n      fnCtx.dispatchEvent(\n        new CustomEvent('cancel', {\n          bubbles: true,\n          composed: true,\n        }),\n      );\n    },\n  };\n}\n","// @ts-check\nimport { Block } from '../../../abstract/Block.js';\nimport {\n  clamp,\n  constraintRect,\n  cornerPath,\n  createSvgNode,\n  moveRect,\n  rectContainsPoint,\n  resizeRect,\n  roundRect,\n  setSvgNodeAttrs,\n  sidePath,\n  thumbCursor,\n} from './crop-utils.js';\nimport {\n  GUIDE_STROKE_WIDTH,\n  GUIDE_THIRD,\n  MAX_INTERACTION_SIZE,\n  MIN_CROP_SIZE,\n  MIN_INTERACTION_SIZE,\n  THUMB_CORNER_SIZE,\n  THUMB_SIDE_SIZE,\n  THUMB_STROKE_WIDTH,\n} from './cropper-constants.js';\nimport { classNames } from './lib/classNames.js';\n\nexport class CropFrame extends Block {\n  constructor() {\n    super();\n\n    this.init$ = {\n      ...this.init$,\n      dragging: false,\n    };\n\n    /** @private */\n    this._handlePointerUp = this._handlePointerUp_.bind(this);\n\n    /** @private */\n    this._handlePointerMove = this._handlePointerMove_.bind(this);\n\n    /** @private */\n    this._handleSvgPointerMove = this._handleSvgPointerMove_.bind(this);\n  }\n\n  /**\n   * @private\n   * @param {import('./types.js').Direction} direction\n   */\n  _shouldThumbBeDisabled(direction) {\n    let imageBox = this.$['*imageBox'];\n    if (!imageBox) {\n      return;\n    }\n\n    if (direction === '' && imageBox.height <= MIN_CROP_SIZE && imageBox.width <= MIN_CROP_SIZE) {\n      return true;\n    }\n\n    let tooHigh = imageBox.height <= MIN_CROP_SIZE && (direction.includes('n') || direction.includes('s'));\n    let tooWide = imageBox.width <= MIN_CROP_SIZE && (direction.includes('e') || direction.includes('w'));\n    return tooHigh || tooWide;\n  }\n\n  /** @private */\n  _createBackdrop() {\n    /** @type {import('./types.js').Rectangle} */\n    let cropBox = this.$['*cropBox'];\n    if (!cropBox) {\n      return;\n    }\n    let { x, y, width, height } = cropBox;\n    let svg = this.ref['svg-el'];\n\n    let mask = createSvgNode('mask', { id: 'backdrop-mask' });\n    let maskRectOuter = createSvgNode('rect', {\n      x: 0,\n      y: 0,\n      width: '100%',\n      height: '100%',\n      fill: 'white',\n    });\n    let maskRectInner = createSvgNode('rect', {\n      x,\n      y,\n      width,\n      height,\n      fill: 'black',\n    });\n    mask.appendChild(maskRectOuter);\n    mask.appendChild(maskRectInner);\n\n    let backdropRect = createSvgNode('rect', {\n      x: 0,\n      y: 0,\n      width: '100%',\n      height: '100%',\n      fill: 'var(--color-image-background)',\n      'fill-opacity': 0.85,\n      mask: 'url(#backdrop-mask)',\n    });\n    svg.appendChild(backdropRect);\n    svg.appendChild(mask);\n\n    this._backdropMask = mask;\n    this._backdropMaskInner = maskRectInner;\n  }\n\n  /**\n   * @private Super Tricky workaround for the chromium bug See\n   *   https://bugs.chromium.org/p/chromium/issues/detail?id=330815\n   */\n  _resizeBackdrop() {\n    if (!this._backdropMask) {\n      return;\n    }\n    this._backdropMask.style.display = 'none';\n    window.requestAnimationFrame(() => {\n      if (this._backdropMask) {\n        this._backdropMask.style.display = 'block';\n      }\n    });\n  }\n\n  /** @private */\n  _updateBackdrop() {\n    /** @type {import('./types.js').Rectangle} */\n    let cropBox = this.$['*cropBox'];\n    if (!cropBox) {\n      return;\n    }\n    let { x, y, width, height } = cropBox;\n\n    this._backdropMaskInner && setSvgNodeAttrs(this._backdropMaskInner, { x, y, width, height });\n  }\n\n  /** @private */\n  _updateFrame() {\n    /** @type {import('./types.js').Rectangle} */\n    let cropBox = this.$['*cropBox'];\n\n    if (!cropBox || !this._frameGuides || !this._frameThumbs) {\n      return;\n    }\n    for (let thumb of Object.values(this._frameThumbs)) {\n      let { direction, pathNode, interactionNode, groupNode } = thumb;\n      let isCenter = direction === '';\n      let isCorner = direction.length === 2;\n      let { x, y, width, height } = cropBox;\n\n      if (isCenter) {\n        const moveThumbRect = {\n          x: x + width / 3,\n          y: y + height / 3,\n          width: width / 3,\n          height: height / 3,\n        };\n        setSvgNodeAttrs(interactionNode, moveThumbRect);\n      } else {\n        const thumbSizeMultiplier = clamp(\n          Math.min(width, height) / (THUMB_CORNER_SIZE * 2 + THUMB_SIDE_SIZE) / 2,\n          0,\n          1,\n        );\n\n        let { d, center } = isCorner\n          ? cornerPath(cropBox, direction, thumbSizeMultiplier)\n          : sidePath(\n              cropBox,\n              /** @type {Extract<import('./types.js').Direction, 'n' | 's' | 'w' | 'e'>} */ (direction),\n              thumbSizeMultiplier,\n            );\n        const size = Math.max(\n          MAX_INTERACTION_SIZE * clamp(Math.min(width, height) / MAX_INTERACTION_SIZE / 3, 0, 1),\n          MIN_INTERACTION_SIZE,\n        );\n        setSvgNodeAttrs(interactionNode, {\n          x: center[0] - size,\n          y: center[1] - size,\n          width: size * 2,\n          height: size * 2,\n        });\n        setSvgNodeAttrs(pathNode, { d });\n      }\n\n      let disableThumb = this._shouldThumbBeDisabled(direction);\n      groupNode.setAttribute(\n        'class',\n        classNames('thumb', {\n          'thumb--hidden': disableThumb,\n          'thumb--visible': !disableThumb,\n        }),\n      );\n    }\n\n    setSvgNodeAttrs(this._frameGuides, {\n      x: cropBox.x - GUIDE_STROKE_WIDTH * 0.5,\n      y: cropBox.y - GUIDE_STROKE_WIDTH * 0.5,\n      width: cropBox.width + GUIDE_STROKE_WIDTH,\n      height: cropBox.height + GUIDE_STROKE_WIDTH,\n    });\n  }\n\n  /** @private */\n  _createThumbs() {\n    /**\n     * @type {Partial<{\n     *   [K in import('./types.js').Direction]: {\n     *     direction: import('./types.js').Direction;\n     *     pathNode: SVGElement;\n     *     interactionNode: SVGElement;\n     *     groupNode: SVGElement;\n     *   };\n     * }>}\n     */\n    const frameThumbs = {};\n\n    for (let i = 0; i < 3; i++) {\n      for (let j = 0; j < 3; j++) {\n        let direction = /** @type {import('./types.js').Direction} */ (`${['n', '', 's'][i]}${['w', '', 'e'][j]}`);\n        let groupNode = createSvgNode('g');\n        groupNode.classList.add('thumb');\n        groupNode.setAttribute('with-effects', '');\n        let interactionNode = createSvgNode('rect', {\n          fill: 'transparent',\n        });\n        let pathNode = createSvgNode('path', {\n          stroke: 'currentColor',\n          fill: 'none',\n          'stroke-width': THUMB_STROKE_WIDTH,\n        });\n        groupNode.appendChild(pathNode);\n        groupNode.appendChild(interactionNode);\n        frameThumbs[direction] = {\n          direction,\n          pathNode,\n          interactionNode,\n          groupNode,\n        };\n\n        interactionNode.addEventListener('pointerdown', this._handlePointerDown.bind(this, direction));\n      }\n    }\n\n    return frameThumbs;\n  }\n\n  /** @private */\n  _createGuides() {\n    let svg = createSvgNode('svg');\n\n    let rect = createSvgNode('rect', {\n      x: 0,\n      y: 0,\n      width: '100%',\n      height: '100%',\n      fill: 'none',\n      stroke: '#000000',\n      'stroke-width': GUIDE_STROKE_WIDTH,\n      'stroke-opacity': 0.5,\n    });\n    svg.appendChild(rect);\n\n    for (let i = 1; i <= 2; i++) {\n      let line = createSvgNode('line', {\n        x1: `${GUIDE_THIRD * i}%`,\n        y1: `0%`,\n        x2: `${GUIDE_THIRD * i}%`,\n        y2: `100%`,\n        stroke: '#000000',\n        'stroke-width': GUIDE_STROKE_WIDTH,\n        'stroke-opacity': 0.3,\n      });\n      svg.appendChild(line);\n    }\n\n    for (let i = 1; i <= 2; i++) {\n      let line = createSvgNode('line', {\n        x1: `0%`,\n        y1: `${GUIDE_THIRD * i}%`,\n        x2: `100%`,\n        y2: `${GUIDE_THIRD * i}%`,\n        stroke: '#000000',\n        'stroke-width': GUIDE_STROKE_WIDTH,\n        'stroke-opacity': 0.3,\n      });\n      svg.appendChild(line);\n    }\n\n    svg.classList.add('guides', 'guides--semi-hidden');\n\n    return svg;\n  }\n\n  /** @private */\n  _createFrame() {\n    let svg = this.ref['svg-el'];\n    let fr = document.createDocumentFragment();\n\n    let frameGuides = this._createGuides();\n    fr.appendChild(frameGuides);\n\n    let frameThumbs = this._createThumbs();\n    for (let { groupNode } of Object.values(frameThumbs)) {\n      fr.appendChild(groupNode);\n    }\n\n    svg.appendChild(fr);\n    this._frameThumbs = frameThumbs;\n    this._frameGuides = frameGuides;\n  }\n\n  /**\n   * @private\n   * @param {import('./types.js').Direction} direction\n   * @param {PointerEvent} e\n   */\n  _handlePointerDown(direction, e) {\n    if (!this._frameThumbs) return;\n    let thumb = this._frameThumbs[direction];\n    if (this._shouldThumbBeDisabled(direction)) {\n      return;\n    }\n\n    let cropBox = this.$['*cropBox'];\n    let { x: svgX, y: svgY } = this.ref['svg-el'].getBoundingClientRect();\n    let x = e.x - svgX;\n    let y = e.y - svgY;\n\n    this.$.dragging = true;\n    this._draggingThumb = thumb;\n    this._dragStartPoint = [x, y];\n    /** @type {import('./types.js').Rectangle} */\n    this._dragStartCrop = { ...cropBox };\n  }\n\n  /**\n   * @private\n   * @param {PointerEvent} e\n   */\n  _handlePointerUp_(e) {\n    this._updateCursor();\n\n    if (!this.$.dragging) {\n      return;\n    }\n    e.stopPropagation();\n    e.preventDefault();\n\n    this.$.dragging = false;\n  }\n\n  /**\n   * @private\n   * @param {PointerEvent} e\n   */\n  _handlePointerMove_(e) {\n    if (!this.$.dragging || !this._dragStartPoint || !this._draggingThumb) {\n      return;\n    }\n    e.stopPropagation();\n    e.preventDefault();\n\n    let svg = this.ref['svg-el'];\n    let { x: svgX, y: svgY } = svg.getBoundingClientRect();\n    let x = e.x - svgX;\n    let y = e.y - svgY;\n    let dx = x - this._dragStartPoint[0];\n    let dy = y - this._dragStartPoint[1];\n    let { direction } = this._draggingThumb;\n\n    const movedCropBox = this._calcCropBox(direction, [dx, dy]);\n    if (movedCropBox) {\n      this.$['*cropBox'] = movedCropBox;\n    }\n  }\n\n  /**\n   * @private\n   * @param {import('./types.js').Direction} direction\n   * @param {[Number, Number]} delta\n   */\n  _calcCropBox(direction, delta) {\n    const [dx, dy] = delta;\n    /** @type {import('./types.js').Rectangle} */\n    let imageBox = this.$['*imageBox'];\n    let rect = /** @type {import('./types.js').Rectangle} */ (this._dragStartCrop) ?? this.$['*cropBox'];\n    /** @type {import('./types.js').CropPresetList[0]} */\n    const cropPreset = this.$['*cropPresetList']?.[0];\n    const aspectRatio = cropPreset ? cropPreset.width / cropPreset.height : undefined;\n\n    if (direction === '') {\n      rect = moveRect({ rect, delta: [dx, dy], imageBox });\n    } else {\n      rect = resizeRect({ rect, delta: [dx, dy], direction, aspectRatio, imageBox });\n    }\n\n    if (!Object.values(rect).every((number) => Number.isFinite(number) && number >= 0)) {\n      console.error('CropFrame is trying to create invalid rectangle', {\n        payload: rect,\n      });\n      return;\n    }\n    return constraintRect(roundRect(rect), this.$['*imageBox']);\n  }\n\n  /**\n   * @private\n   * @param {PointerEvent} e\n   */\n  _handleSvgPointerMove_(e) {\n    if (!this._frameThumbs) return;\n\n    let hoverThumb = Object.values(this._frameThumbs).find((thumb) => {\n      if (this._shouldThumbBeDisabled(thumb.direction)) {\n        return false;\n      }\n      let node = thumb.interactionNode;\n      let bounds = node.getBoundingClientRect();\n      let rect = {\n        x: bounds.x,\n        y: bounds.y,\n        width: bounds.width,\n        height: bounds.height,\n      };\n      let hover = rectContainsPoint(rect, [e.x, e.y]);\n      return hover;\n    });\n\n    this._hoverThumb = hoverThumb;\n    this._updateCursor();\n  }\n\n  /** @private */\n  _updateCursor() {\n    let hoverThumb = this._hoverThumb;\n    this.ref['svg-el'].style.cursor = hoverThumb ? thumbCursor(hoverThumb.direction) : 'initial';\n  }\n\n  /** @private */\n  _render() {\n    this._updateBackdrop();\n    this._updateFrame();\n  }\n\n  /** @param {boolean} visible */\n  toggleThumbs(visible) {\n    if (!this._frameThumbs) return;\n    Object.values(this._frameThumbs)\n      .map(({ groupNode }) => groupNode)\n      .forEach((groupNode) => {\n        groupNode.setAttribute(\n          'class',\n          classNames('thumb', {\n            'thumb--hidden': !visible,\n            'thumb--visible': visible,\n          }),\n        );\n      });\n  }\n\n  initCallback() {\n    super.initCallback();\n\n    this._createBackdrop();\n    this._createFrame();\n\n    this.sub('*imageBox', () => {\n      this._resizeBackdrop();\n      window.requestAnimationFrame(() => {\n        this._render();\n      });\n    });\n\n    this.sub('*cropBox', (cropBox) => {\n      if (!cropBox) {\n        return;\n      }\n      this._guidesHidden = cropBox.height <= MIN_CROP_SIZE || cropBox.width <= MIN_CROP_SIZE;\n      window.requestAnimationFrame(() => {\n        this._render();\n      });\n    });\n\n    this.sub('dragging', (dragging) => {\n      if (!this._frameGuides) return;\n      this._frameGuides.setAttribute(\n        'class',\n        classNames({\n          'guides--hidden': this._guidesHidden,\n          'guides--visible': !this._guidesHidden && dragging,\n          'guides--semi-hidden': !this._guidesHidden && !dragging,\n        }),\n      );\n    });\n\n    this.ref['svg-el'].addEventListener('pointermove', this._handleSvgPointerMove, true);\n    document.addEventListener('pointermove', this._handlePointerMove, true);\n    document.addEventListener('pointerup', this._handlePointerUp, true);\n  }\n\n  destroyCallback() {\n    super.destroyCallback();\n\n    document.removeEventListener('pointermove', this._handlePointerMove);\n    document.removeEventListener('pointerup', this._handlePointerUp);\n  }\n}\n\nCropFrame.template = /* HTML */ ` <svg class=\"svg\" ref=\"svg-el\" xmlns=\"http://www.w3.org/2000/svg\"></svg> `;\n","import { classNames } from './lib/classNames.js';\nimport { Block } from '../../../abstract/Block.js';\n\nexport class EditorButtonControl extends Block {\n  init$ = {\n    ...this.init$,\n    active: false,\n    title: '',\n    icon: '',\n    'on.click': null,\n  };\n\n  initCallback() {\n    super.initCallback();\n\n    this._titleEl = this.ref['title-el'];\n    this._iconEl = this.ref['icon-el'];\n\n    this.setAttribute('role', 'button');\n    if (this.tabIndex === -1) {\n      this.tabIndex = 0;\n    }\n\n    this.sub('title', (title) => {\n      let titleEl = this._titleEl;\n      if (titleEl) {\n        this._titleEl.style.display = title ? 'block' : 'none';\n      }\n    });\n\n    this.sub('active', (active) => {\n      this.className = classNames({\n        active: active,\n        not_active: !active,\n      });\n    });\n\n    this.sub('on.click', (onClick) => {\n      this.onclick = onClick;\n    });\n  }\n}\n\nEditorButtonControl.template = /* HTML */ `\n  <div class=\"before\"></div>\n  <lr-icon set=\"@name: icon;\"></lr-icon>\n  <div class=\"title\" ref=\"title-el\">{{title}}</div>\n`;\n","import { EditorButtonControl } from './EditorButtonControl.js';\n\nfunction nextAngle(prev) {\n  let angle = prev + 90;\n  angle = angle >= 360 ? 0 : angle;\n  return angle;\n}\n\nfunction nextValue(operation, prev) {\n  if (operation === 'rotate') {\n    return nextAngle(prev);\n  }\n  if (['mirror', 'flip'].includes(operation)) {\n    return !prev;\n  }\n  return null;\n}\n\nexport class EditorCropButtonControl extends EditorButtonControl {\n  initCallback() {\n    super.initCallback();\n\n    this.defineAccessor('operation', (operation) => {\n      if (!operation) {\n        return;\n      }\n\n      /** @private */\n      this._operation = operation;\n      this.$['icon'] = operation;\n    });\n\n    this.$['on.click'] = (e) => {\n      let prev = this.$['*cropperEl'].getValue(this._operation);\n      let next = nextValue(this._operation, prev);\n      this.$['*cropperEl'].setValue(this._operation, next);\n    };\n  }\n}\n","import { Block } from '../../../abstract/Block.js';\nimport { COLOR_OPERATIONS_CONFIG } from './toolbar-constants.js';\n\nconst ControlType = {\n  FILTER: 'filter',\n  COLOR_OPERATION: 'color_operation',\n};\n\nexport const FAKE_ORIGINAL_FILTER = 'original';\n\nexport class EditorSlider extends Block {\n  init$ = {\n    ...this.init$,\n    disabled: false,\n    min: 0,\n    max: 100,\n    value: 0,\n    defaultValue: 0,\n    zero: 0,\n    'on.input': (value) => {\n      this.$['*faderEl'].set(value);\n      this.$.value = value;\n    },\n  };\n\n  /**\n   * @param {String} operation\n   * @param {String} [filter]\n   */\n  setOperation(operation, filter) {\n    this._controlType = operation === 'filter' ? ControlType.FILTER : ControlType.COLOR_OPERATION;\n    this._operation = operation;\n    this._iconName = operation;\n    this._title = operation.toUpperCase();\n    this._filter = filter;\n\n    this._initializeValues();\n\n    this.$['*faderEl'].activate({\n      url: this.$['*originalUrl'],\n      operation: this._operation,\n      value: this._filter === FAKE_ORIGINAL_FILTER ? undefined : this.$.value,\n      filter: this._filter === FAKE_ORIGINAL_FILTER ? undefined : this._filter,\n      fromViewer: false,\n    });\n  }\n\n  /** @private */\n  _initializeValues() {\n    let { range, zero } = COLOR_OPERATIONS_CONFIG[this._operation];\n    let [min, max] = range;\n\n    this.$.min = min;\n    this.$.max = max;\n    this.$.zero = zero;\n\n    let transformation = this.$['*editorTransformations'][this._operation];\n    if (this._controlType === ControlType.FILTER) {\n      let value = max;\n      if (transformation) {\n        let { name, amount } = transformation;\n        value = name === this._filter ? amount : max;\n      }\n      this.$.value = value;\n      this.$.defaultValue = value;\n    }\n    if (this._controlType === ControlType.COLOR_OPERATION) {\n      let value = typeof transformation !== 'undefined' ? transformation : zero;\n      this.$.value = value;\n      this.$.defaultValue = value;\n    }\n  }\n\n  apply() {\n    let operationValue;\n    if (this._controlType === ControlType.FILTER) {\n      if (this._filter === FAKE_ORIGINAL_FILTER) {\n        operationValue = null;\n      } else {\n        operationValue = { name: this._filter, amount: this.$.value };\n      }\n    } else {\n      operationValue = this.$.value;\n    }\n\n    /** @type {import('./types.js').Transformations} */\n    let transformations = {\n      ...this.$['*editorTransformations'],\n      [this._operation]: operationValue,\n    };\n\n    this.$['*editorTransformations'] = transformations;\n  }\n\n  cancel() {\n    this.$['*faderEl'].deactivate({ hide: false });\n  }\n\n  initCallback() {\n    super.initCallback();\n\n    this.sub('*originalUrl', (originalUrl) => {\n      this._originalUrl = originalUrl;\n    });\n\n    this.sub('value', (value) => {\n      let tooltip = `${this._filter || this._operation} ${value}`;\n      this.$['*operationTooltip'] = tooltip;\n    });\n  }\n}\n\nEditorSlider.template = /* HTML */ `\n  <lr-slider-ui\n    ref=\"slider-el\"\n    set=\"disabled: disabled; min: min; max: max; defaultValue: defaultValue; zero: zero; onInput: on.input;\"\n  ></lr-slider-ui>\n`;\n","import { TRANSPARENT_PIXEL_SRC } from '../../../../utils/transparentPixelSrc.js';\n\nexport function preloadImage(src) {\n  let image = new Image();\n\n  let promise = new Promise((resolve, reject) => {\n    image.src = src;\n    image.onload = resolve;\n    image.onerror = reject;\n  });\n\n  let cancel = () => {\n    if (image.naturalWidth === 0) {\n      image.src = TRANSPARENT_PIXEL_SRC;\n    }\n  };\n\n  return { promise, image, cancel };\n}\n\nexport function batchPreloadImages(list) {\n  let preloaders = [];\n\n  for (let src of list) {\n    let preload = preloadImage(src);\n    preloaders.push(preload);\n  }\n\n  let images = preloaders.map((preload) => preload.image);\n  let promise = Promise.allSettled(preloaders.map((preload) => preload.promise));\n  let cancel = () => {\n    preloaders.forEach((preload) => {\n      preload.cancel();\n    });\n  };\n\n  return { promise, images, cancel };\n}\n","import { createCdnUrl, createCdnUrlModifiers } from '../../../utils/cdn-utils.js';\nimport { EditorButtonControl } from './EditorButtonControl.js';\nimport { FAKE_ORIGINAL_FILTER } from './EditorSlider.js';\nimport { COMMON_OPERATIONS, transformationsToOperations } from './lib/transformationUtils.js';\nimport { preloadImage } from './lib/preloadImage.js';\n\nexport class EditorFilterControl extends EditorButtonControl {\n  init$ = {\n    ...this.init$,\n    active: false,\n    title: '',\n    icon: '',\n    isOriginal: false,\n    iconSize: '20',\n    'on.click': null,\n  };\n\n  _previewSrc() {\n    let previewSize = parseInt(window.getComputedStyle(this).getPropertyValue('--l-base-min-width'), 10);\n    let dpr = window.devicePixelRatio;\n    let size = Math.ceil(dpr * previewSize);\n    let quality = dpr >= 2 ? 'lightest' : 'normal';\n    let filterValue = 100;\n\n    /** @type {import('./types.js').Transformations} */\n    let transformations = { ...this.$['*editorTransformations'] };\n    transformations[this._operation] =\n      this._filter !== FAKE_ORIGINAL_FILTER\n        ? {\n            name: this._filter,\n            amount: filterValue,\n          }\n        : undefined;\n\n    return createCdnUrl(\n      this._originalUrl,\n      createCdnUrlModifiers(\n        COMMON_OPERATIONS,\n        transformationsToOperations(transformations),\n        `quality/${quality}`,\n        `scale_crop/${size}x${size}/center`,\n      ),\n    );\n  }\n\n  /**\n   * @param {IntersectionObserverEntry[]} entries\n   * @param {IntersectionObserver} observer\n   */\n  _observerCallback(entries, observer) {\n    let intersectionEntry = entries[0];\n    if (intersectionEntry.isIntersecting) {\n      let src = this.proxyUrl(this._previewSrc());\n      let previewEl = this.ref['preview-el'];\n      let { promise, cancel } = preloadImage(src);\n      this._cancelPreload = cancel;\n      promise\n        .catch((err) => {\n          this.$['*networkProblems'] = true;\n          console.error('Failed to load image', { error: err });\n        })\n        .finally(() => {\n          previewEl.style.backgroundImage = `url(${src})`;\n          previewEl.setAttribute('loaded', '');\n\n          observer.unobserve(this);\n        });\n    } else {\n      this._cancelPreload && this._cancelPreload();\n    }\n  }\n\n  initCallback() {\n    super.initCallback();\n\n    this.$['on.click'] = (e) => {\n      if (!this.$.active) {\n        this.$['*sliderEl'].setOperation(this._operation, this._filter);\n        this.$['*sliderEl'].apply();\n      } else if (!this.$.isOriginal) {\n        this.$['*sliderEl'].setOperation(this._operation, this._filter);\n        this.$['*showSlider'] = true;\n      }\n\n      this.$['*currentFilter'] = this._filter;\n    };\n\n    this.defineAccessor('filter', (filter) => {\n      this._operation = 'filter';\n      this._filter = filter;\n      this.$.isOriginal = filter === FAKE_ORIGINAL_FILTER;\n      this.$.icon = this.$.isOriginal ? 'original' : 'slider';\n    });\n\n    this._observer = new window.IntersectionObserver(this._observerCallback.bind(this), {\n      threshold: [0, 1],\n    });\n\n    let originalUrl = this.$['*originalUrl'];\n    this._originalUrl = originalUrl;\n\n    if (this.$.isOriginal) {\n      this.ref['icon-el'].classList.add('original-icon');\n    } else {\n      this._observer.observe(this);\n    }\n\n    this.sub('*currentFilter', (currentFilter) => {\n      this.$.active = currentFilter && currentFilter === this._filter;\n    });\n\n    this.sub('isOriginal', (isOriginal) => {\n      this.$.iconSize = isOriginal ? 40 : 20;\n    });\n\n    this.sub('active', (active) => {\n      if (this.$.isOriginal) {\n        return;\n      }\n      let iconEl = this.ref['icon-el'];\n      iconEl.style.opacity = active ? '1' : '0';\n\n      let previewEl = this.ref['preview-el'];\n      if (active) {\n        previewEl.style.opacity = '0';\n      } else if (previewEl.style.backgroundImage) {\n        previewEl.style.opacity = '1';\n      }\n    });\n\n    this.sub('*networkProblems', (networkProblems) => {\n      if (!networkProblems) {\n        let src = this.proxyUrl(this._previewSrc());\n        let previewEl = this.ref['preview-el'];\n        if (previewEl.style.backgroundImage) {\n          previewEl.style.backgroundImage = 'none';\n          previewEl.style.backgroundImage = `url(${src})`;\n        }\n      }\n    });\n  }\n\n  destroyCallback() {\n    super.destroyCallback();\n    this._observer?.disconnect();\n    this._cancelPreload && this._cancelPreload();\n  }\n}\n\nEditorFilterControl.template = /* HTML */ `\n  <div class=\"before\"></div>\n  <div class=\"preview\" ref=\"preview-el\"></div>\n  <lr-icon ref=\"icon-el\" set=\"@name: icon; @size: iconSize;\"></lr-icon>\n`;\n","import { EditorButtonControl } from './EditorButtonControl.js';\nimport { COLOR_OPERATIONS_CONFIG } from './toolbar-constants.js';\n\nexport class EditorOperationControl extends EditorButtonControl {\n  /**\n   * @private\n   * @type {String}\n   */\n  _operation = '';\n\n  initCallback() {\n    super.initCallback();\n\n    this.$['on.click'] = (e) => {\n      this.$['*sliderEl'].setOperation(this._operation);\n      this.$['*showSlider'] = true;\n      this.$['*currentOperation'] = this._operation;\n    };\n\n    this.defineAccessor('operation', (operation) => {\n      if (operation) {\n        this._operation = operation;\n        this.$['icon'] = operation;\n        this.bindL10n('title', () => this.l10n(operation));\n      }\n    });\n\n    this.sub('*editorTransformations', (editorTransformations) => {\n      if (!this._operation) {\n        return;\n      }\n\n      let { zero } = COLOR_OPERATIONS_CONFIG[this._operation];\n      let value = editorTransformations[this._operation];\n      let isActive = typeof value !== 'undefined' ? value !== zero : false;\n      this.$.active = isActive;\n    });\n  }\n}\n","import { createCdnUrl, createCdnUrlModifiers } from '../../../utils/cdn-utils.js';\nimport { COMMON_OPERATIONS, transformationsToOperations } from './lib/transformationUtils.js';\n\nexport function viewerImageSrc(originalUrl, width, transformations) {\n  const MAX_CDN_DIMENSION = 3000;\n  let dpr = window.devicePixelRatio;\n  let size = Math.min(Math.ceil(width * dpr), MAX_CDN_DIMENSION);\n  let quality = dpr >= 2 ? 'lightest' : 'normal';\n\n  return createCdnUrl(\n    originalUrl,\n    createCdnUrlModifiers(\n      COMMON_OPERATIONS,\n      transformationsToOperations(transformations),\n      `quality/${quality}`,\n      `stretch/off/-/resize/${size}x`,\n    ),\n  );\n}\n","// @ts-check\n\nimport { Block } from '../../../abstract/Block.js';\nimport { debounce } from '../../utils/debounce.js';\nimport { throttle } from '../../utils/throttle.js';\nimport {\n  clamp,\n  constraintRect,\n  isRectInsideRect,\n  isRectMatchesAspectRatio,\n  rotateSize,\n  roundRect,\n} from './crop-utils.js';\nimport { CROP_PADDING } from './cropper-constants.js';\nimport { classNames } from './lib/classNames.js';\nimport { pick } from './lib/pick.js';\nimport { preloadImage } from './lib/preloadImage.js';\nimport { viewerImageSrc } from './util.js';\n\n/**\n * @typedef {Object} Operations\n * @property {boolean} flip\n * @property {boolean} mirror\n * @property {Number} rotate\n */\n\n/**\n * @param {import('./types.js').Transformations['crop']} crop\n * @returns {boolean}\n */\nfunction validateCrop(crop) {\n  if (!crop) {\n    return true;\n  }\n  /** @type {((arg: NonNullable<typeof crop>) => boolean)[]} */\n  let shouldMatch = [\n    ({ dimensions, coords }) =>\n      [...dimensions, ...coords].every((number) => Number.isInteger(number) && Number.isFinite(number)),\n    ({ dimensions, coords }) => dimensions.every((d) => d > 0) && coords.every((c) => c >= 0),\n  ];\n  return shouldMatch.every((matcher) => matcher(crop));\n}\n\nexport class EditorImageCropper extends Block {\n  ctxOwner = true;\n  constructor() {\n    super();\n\n    this.init$ = {\n      ...this.init$,\n      image: null,\n      '*padding': CROP_PADDING,\n      /** @type {Operations} */\n      '*operations': {\n        rotate: 0,\n        mirror: false,\n        flip: false,\n      },\n      /** @type {import('./types.js').Rectangle} */\n      '*imageBox': {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0,\n      },\n      /** @type {import('./types.js').Rectangle} */\n      '*cropBox': {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0,\n      },\n    };\n\n    /** @private */\n    this._commitDebounced = debounce(this._commit.bind(this), 300);\n\n    /** @private */\n    this._handleResizeThrottled = throttle(this._handleResize.bind(this), 100);\n\n    this._imageSize = { width: 0, height: 0 };\n  }\n\n  /** @private */\n  _handleResize() {\n    if (!this.isConnected || !this._isActive) {\n      return;\n    }\n    this._initCanvas();\n    this._syncTransformations();\n    this._alignImage();\n    this._alignCrop();\n    this._draw();\n  }\n\n  /** @private */\n  _syncTransformations() {\n    let transformations = this.$['*editorTransformations'];\n    let pickedTransformations = pick(transformations, Object.keys(this.$['*operations']));\n    let operations = { ...this.$['*operations'], ...pickedTransformations };\n    this.$['*operations'] = operations;\n  }\n\n  /** @private */\n  _initCanvas() {\n    /** @type {HTMLCanvasElement} */\n    let canvas = this.ref['canvas-el'];\n    let ctx = canvas.getContext('2d');\n\n    let width = this.offsetWidth;\n    let height = this.offsetHeight;\n    let dpr = window.devicePixelRatio;\n    canvas.style.width = `${width}px`;\n    canvas.style.height = `${height}px`;\n    canvas.width = width * dpr;\n    canvas.height = height * dpr;\n    ctx?.scale(dpr, dpr);\n\n    this._canvas = canvas;\n    this._ctx = ctx;\n  }\n\n  /** @private */\n  _alignImage() {\n    if (!this._isActive || !this.$.image) {\n      return;\n    }\n\n    let image = this.$.image;\n    let padding = this.$['*padding'];\n    let operations = this.$['*operations'];\n    let { rotate } = operations;\n\n    let bounds = { width: this.offsetWidth, height: this.offsetHeight };\n    let naturalSize = rotateSize({ width: image.naturalWidth, height: image.naturalHeight }, rotate);\n    let imageBox;\n\n    if (naturalSize.width > bounds.width - padding * 2 || naturalSize.height > bounds.height - padding * 2) {\n      let imageAspectRatio = naturalSize.width / naturalSize.height;\n      let viewportAspectRatio = bounds.width / bounds.height;\n\n      if (imageAspectRatio > viewportAspectRatio) {\n        let width = bounds.width - padding * 2;\n        let height = width / imageAspectRatio;\n        let x = 0 + padding;\n        let y = padding + (bounds.height - padding * 2) / 2 - height / 2;\n        imageBox = { x, y, width, height };\n      } else {\n        let height = bounds.height - padding * 2;\n        let width = height * imageAspectRatio;\n        let x = padding + (bounds.width - padding * 2) / 2 - width / 2;\n        let y = 0 + padding;\n        imageBox = { x, y, width, height };\n      }\n    } else {\n      let { width, height } = naturalSize;\n      let x = padding + (bounds.width - padding * 2) / 2 - width / 2;\n      let y = padding + (bounds.height - padding * 2) / 2 - height / 2;\n      imageBox = { x, y, width, height };\n    }\n\n    this.$['*imageBox'] = roundRect(imageBox);\n  }\n\n  /** @private */\n  _alignCrop() {\n    let cropBox = this.$['*cropBox'];\n    let imageBox = this.$['*imageBox'];\n    let operations = this.$['*operations'];\n    let { rotate } = operations;\n    let cropTransformation = this.$['*editorTransformations']['crop'];\n    let { width: previewWidth, x: previewX, y: previewY } = this.$['*imageBox'];\n\n    if (cropTransformation) {\n      let {\n        dimensions: [width, height],\n        coords: [x, y],\n      } = cropTransformation;\n      let { width: sourceWidth } = rotateSize(this._imageSize, rotate);\n      let ratio = previewWidth / sourceWidth;\n      cropBox = constraintRect(\n        roundRect({\n          x: previewX + x * ratio,\n          y: previewY + y * ratio,\n          width: width * ratio,\n          height: height * ratio,\n        }),\n        this.$['*imageBox'],\n      );\n    }\n\n    /** @type {import('./types.js').CropPresetList[0] | undefined} */\n    const cropPreset = this.$['*cropPresetList']?.[0];\n    const cropAspectRatio = cropPreset ? cropPreset.width / cropPreset.height : undefined;\n\n    if (\n      !isRectInsideRect(cropBox, imageBox) ||\n      (cropAspectRatio && !isRectMatchesAspectRatio(cropBox, cropAspectRatio))\n    ) {\n      const imageAspectRatio = imageBox.width / imageBox.height;\n      let width = imageBox.width;\n      let height = imageBox.height;\n      if (cropAspectRatio) {\n        if (imageAspectRatio > cropAspectRatio) {\n          width = Math.min(imageBox.height * cropAspectRatio, imageBox.width);\n        } else {\n          height = Math.min(imageBox.width / cropAspectRatio, imageBox.height);\n        }\n      }\n      cropBox = {\n        x: imageBox.x + imageBox.width / 2 - width / 2,\n        y: imageBox.y + imageBox.height / 2 - height / 2,\n        width,\n        height,\n      };\n    }\n\n    this.$['*cropBox'] = constraintRect(roundRect(cropBox), this.$['*imageBox']);\n  }\n\n  /** @private */\n  _drawImage() {\n    let ctx = this._ctx;\n    if (!ctx) return;\n    let image = this.$.image;\n    let imageBox = this.$['*imageBox'];\n    let operations = this.$['*operations'];\n    let { mirror, flip, rotate } = operations;\n    let rotated = rotateSize({ width: imageBox.width, height: imageBox.height }, rotate);\n    ctx.save();\n    ctx.translate(imageBox.x + imageBox.width / 2, imageBox.y + imageBox.height / 2);\n    ctx.rotate((rotate * Math.PI * -1) / 180);\n    ctx.scale(mirror ? -1 : 1, flip ? -1 : 1);\n    ctx.drawImage(image, -rotated.width / 2, -rotated.height / 2, rotated.width, rotated.height);\n    ctx.restore();\n  }\n\n  /** @private */\n  _draw() {\n    if (!this._isActive || !this.$.image || !this._canvas || !this._ctx) {\n      return;\n    }\n    let canvas = this._canvas;\n    let ctx = this._ctx;\n\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n    this._drawImage();\n  }\n\n  /**\n   * @private\n   * @param {{ fromViewer?: boolean }} options\n   */\n  _animateIn({ fromViewer }) {\n    if (this.$.image) {\n      this.ref['frame-el'].toggleThumbs(true);\n      this._transitionToImage();\n      setTimeout(() => {\n        this.className = classNames({\n          active_from_viewer: fromViewer,\n          active_from_editor: !fromViewer,\n          inactive_to_editor: false,\n        });\n      });\n    }\n  }\n\n  /**\n   * @private\n   * @returns {NonNullable<import('./types.js').Transformations['crop']>['dimensions']}\n   */\n  _getCropDimensions() {\n    let cropBox = this.$['*cropBox'];\n    let imageBox = this.$['*imageBox'];\n    let operations = this.$['*operations'];\n    let { rotate } = operations;\n    let { width: previewWidth, height: previewHeight } = imageBox;\n    let { width: sourceWidth, height: sourceHeight } = rotateSize(this._imageSize, rotate);\n    let { width: cropWidth, height: cropHeight } = cropBox;\n    let ratioW = previewWidth / sourceWidth;\n    let ratioH = previewHeight / sourceHeight;\n\n    /** @type {[Number, Number]} */\n    let dimensions = [\n      clamp(Math.round(cropWidth / ratioW), 1, sourceWidth),\n      clamp(Math.round(cropHeight / ratioH), 1, sourceHeight),\n    ];\n\n    return dimensions;\n  }\n\n  /**\n   * @private\n   * @returns {import('./types.js').Transformations['crop']}\n   */\n  _getCropTransformation() {\n    let cropBox = this.$['*cropBox'];\n    let imageBox = this.$['*imageBox'];\n    let operations = this.$['*operations'];\n    let { rotate } = operations;\n    let { width: previewWidth, height: previewHeight, x: previewX, y: previewY } = imageBox;\n    let { width: sourceWidth, height: sourceHeight } = rotateSize(this._imageSize, rotate);\n    let { x: cropX, y: cropY } = cropBox;\n    let ratioW = previewWidth / sourceWidth;\n    let ratioH = previewHeight / sourceHeight;\n\n    let dimensions = this._getCropDimensions();\n    let crop = {\n      dimensions,\n      coords: /** @type {[Number, Number]} */ ([\n        clamp(Math.round((cropX - previewX) / ratioW), 0, sourceWidth - dimensions[0]),\n        clamp(Math.round((cropY - previewY) / ratioH), 0, sourceHeight - dimensions[1]),\n      ]),\n    };\n    if (!validateCrop(crop)) {\n      console.error('Cropper is trying to create invalid crop object', {\n        payload: crop,\n      });\n      return undefined;\n    }\n    if (dimensions[0] === sourceWidth && dimensions[1] === sourceHeight) {\n      return undefined;\n    }\n\n    return crop;\n  }\n\n  /** @private */\n  _commit() {\n    if (!this.isConnected || !this._imageSize) {\n      return;\n    }\n    let operations = this.$['*operations'];\n    let { rotate, mirror, flip } = operations;\n    let crop = this._getCropTransformation();\n    /** @type {import('./types.js').Transformations} */\n    let editorTransformations = this.$['*editorTransformations'];\n    let transformations = {\n      ...editorTransformations,\n      crop,\n      rotate,\n      mirror,\n      flip,\n    };\n\n    this.$['*editorTransformations'] = transformations;\n  }\n\n  /**\n   * @param {String} operation\n   * @param {Number} value\n   * @returns {void}\n   */\n  setValue(operation, value) {\n    this.$['*operations'] = {\n      ...this.$['*operations'],\n      [operation]: value,\n    };\n\n    if (!this._isActive) {\n      return;\n    }\n\n    this._alignImage();\n    this._alignCrop();\n    this._draw();\n  }\n\n  /**\n   * @param {keyof Operations} operation\n   * @returns {Number | boolean}\n   */\n  getValue(operation) {\n    return this.$['*operations'][operation];\n  }\n\n  /**\n   * @param {import('./types.js').ImageSize} imageSize\n   * @param {{ fromViewer?: boolean }} options\n   */\n  async activate(imageSize, { fromViewer } = {}) {\n    if (this._isActive) {\n      return;\n    }\n    this._isActive = true;\n    this._imageSize = imageSize;\n    this.removeEventListener('transitionend', this._reset);\n\n    try {\n      this.$.image = await this._waitForImage(this.$['*originalUrl'], this.$['*editorTransformations']);\n      this._syncTransformations();\n      this._animateIn({ fromViewer });\n    } catch (err) {\n      console.error('Failed to activate cropper', { error: err });\n    }\n\n    this._observer = new ResizeObserver(([entry]) => {\n      const nonZeroSize = entry.contentRect.width > 0 && entry.contentRect.height > 0;\n      if (nonZeroSize && this._isActive && this.$.image) {\n        this._handleResizeThrottled();\n      }\n    });\n    this._observer.observe(this);\n  }\n  deactivate({ reset = false } = {}) {\n    if (!this._isActive) {\n      return;\n    }\n    !reset && this._commit();\n    this._isActive = false;\n\n    this._transitionToCrop();\n\n    this.className = classNames({\n      active_from_viewer: false,\n      active_from_editor: false,\n      inactive_to_editor: true,\n    });\n\n    this.ref['frame-el'].toggleThumbs(false);\n    this.addEventListener('transitionend', this._reset, { once: true });\n    this._observer?.disconnect();\n  }\n\n  /** @private */\n  _transitionToCrop() {\n    let dimensions = this._getCropDimensions();\n    let scaleX = Math.min(this.offsetWidth, dimensions[0]) / this.$['*cropBox'].width;\n    let scaleY = Math.min(this.offsetHeight, dimensions[1]) / this.$['*cropBox'].height;\n    let scale = Math.min(scaleX, scaleY);\n    let cropCenterX = this.$['*cropBox'].x + this.$['*cropBox'].width / 2;\n    let cropCenterY = this.$['*cropBox'].y + this.$['*cropBox'].height / 2;\n\n    this.style.transform = `scale(${scale}) translate(${(this.offsetWidth / 2 - cropCenterX) / scale}px, ${\n      (this.offsetHeight / 2 - cropCenterY) / scale\n    }px)`;\n    this.style.transformOrigin = `${cropCenterX}px ${cropCenterY}px`;\n  }\n\n  /** @private */\n  _transitionToImage() {\n    let cropCenterX = this.$['*cropBox'].x + this.$['*cropBox'].width / 2;\n    let cropCenterY = this.$['*cropBox'].y + this.$['*cropBox'].height / 2;\n\n    this.style.transform = `scale(1)`;\n    this.style.transformOrigin = `${cropCenterX}px ${cropCenterY}px`;\n  }\n\n  /** @private */\n  _reset() {\n    if (this._isActive) {\n      return;\n    }\n    this.$.image = null;\n  }\n\n  /**\n   * @private\n   * @param {String} originalUrl\n   * @param {import('./types.js').Transformations} transformations\n   * @returns {Promise<HTMLImageElement>}\n   */\n  _waitForImage(originalUrl, transformations) {\n    let width = this.offsetWidth;\n    transformations = {\n      ...transformations,\n      crop: undefined,\n      rotate: undefined,\n      flip: undefined,\n      mirror: undefined,\n    };\n    let src = this.proxyUrl(viewerImageSrc(originalUrl, width, transformations));\n    let { promise, cancel, image } = preloadImage(src);\n\n    let stop = this._handleImageLoading(src);\n    image.addEventListener('load', stop, { once: true });\n    image.addEventListener('error', stop, { once: true });\n    this._cancelPreload && this._cancelPreload();\n    this._cancelPreload = cancel;\n\n    return promise\n      .then(() => image)\n      .catch((err) => {\n        console.error('Failed to load image', { error: err });\n        this.$['*networkProblems'] = true;\n        return Promise.resolve(image);\n      });\n  }\n\n  /**\n   * @private\n   * @param {String} src\n   * @returns {() => void} Destructor\n   */\n  _handleImageLoading(src) {\n    let operation = 'crop';\n    let loadingOperations = this.$['*loadingOperations'];\n    if (!loadingOperations.get(operation)) {\n      loadingOperations.set(operation, new Map());\n    }\n\n    if (!loadingOperations.get(operation).get(src)) {\n      loadingOperations.set(operation, loadingOperations.get(operation).set(src, true));\n      this.$['*loadingOperations'] = loadingOperations;\n    }\n\n    return () => {\n      if (loadingOperations?.get(operation)?.has(src)) {\n        loadingOperations.get(operation).delete(src);\n        this.$['*loadingOperations'] = loadingOperations;\n      }\n    };\n  }\n\n  initCallback() {\n    super.initCallback();\n\n    this.sub('*imageBox', () => {\n      this._draw();\n    });\n\n    this.sub('*cropBox', () => {\n      if (this.$.image) {\n        this._commitDebounced();\n      }\n    });\n\n    this.sub('*cropPresetList', () => {\n      this._alignCrop();\n    });\n\n    setTimeout(() => {\n      this.sub('*networkProblems', (networkProblems) => {\n        if (!networkProblems) {\n          this._isActive && this.activate(this._imageSize, { fromViewer: false });\n        }\n      });\n    }, 0);\n  }\n\n  destroyCallback() {\n    super.destroyCallback();\n    this._observer?.disconnect();\n  }\n}\n\nEditorImageCropper.template = /* HTML */ `\n  <canvas class=\"canvas\" ref=\"canvas-el\"></canvas>\n  <lr-crop-frame ref=\"frame-el\"></lr-crop-frame>\n`;\n","/**\n * @param {{}} obj\n * @param {String[]} keys\n * @returns {{}}\n */\nexport function pick(obj, keys) {\n  let result = {};\n  for (let key of keys) {\n    let value = obj[key];\n    if (obj.hasOwnProperty(key) || value !== undefined) {\n      result[key] = value;\n    }\n  }\n  return result;\n}\n","/**\n * @param {Number} a Start of sample (int)\n * @param {Number} b End of sample (int)\n * @param {Number} n Number of elements (int)\n * @returns {Number[]}\n */\nexport function linspace(a, b, n) {\n  let ret = Array(n);\n  n--;\n  for (let i = n; i >= 0; i--) {\n    ret[i] = Math.ceil((i * b + (n - i) * a) / n);\n  }\n  return ret;\n}\n","import { debounce } from '../../utils/debounce.js';\nimport { Block } from '../../../abstract/Block.js';\nimport { classNames } from './lib/classNames.js';\nimport { linspace } from './lib/linspace.js';\nimport { batchPreloadImages } from './lib/preloadImage.js';\nimport { COLOR_OPERATIONS_CONFIG } from './toolbar-constants.js';\nimport { viewerImageSrc } from './util.js';\n\n/**\n * @param {Number[]} numbers\n * @returns {[Number, Number][]}\n */\nfunction splitBySections(numbers) {\n  return numbers.reduce(\n    (acc, point, idx) => (idx < numbers.length - 1 ? [...acc, [point, numbers[idx + 1]]] : acc),\n    [],\n  );\n}\n\n/**\n * @param {Number[]} keypoints\n * @param {Number} value\n * @param {Number} zero\n */\nfunction calculateOpacities(keypoints, value, zero) {\n  let section = splitBySections(keypoints).find(([left, right]) => left <= value && value <= right);\n  return keypoints.map((point) => {\n    let distance = Math.abs(section[0] - section[1]);\n    let relation = Math.abs(value - section[0]) / distance;\n\n    if (section[0] === point) {\n      return value > zero ? 1 : 1 - relation;\n    }\n    if (section[1] === point) {\n      return value >= zero ? relation : 1;\n    }\n    return 0;\n  });\n}\n\n/**\n * @param {Number[]} keypoints\n * @param {Number} zero\n */\nfunction calculateZIndices(keypoints, zero) {\n  return keypoints.map((point, idx) => (point < zero ? keypoints.length - idx : idx));\n}\n\n/**\n * @param {String} operation\n * @param {Number} value\n * @returns {Number[]}\n */\nfunction keypointsRange(operation, value) {\n  let n = COLOR_OPERATIONS_CONFIG[operation].keypointsNumber;\n  let { range, zero } = COLOR_OPERATIONS_CONFIG[operation];\n\n  return [...new Set([...linspace(range[0], zero, n + 1), ...linspace(zero, range[1], n + 1), zero, value])].sort(\n    (a, b) => a - b,\n  );\n}\n\n/**\n * @typedef {Object} Keypoint\n * @property {String} src\n * @property {Number} opacity\n * @property {Number} zIndex\n * @property {HTMLImageElement} image\n * @property {Number} value\n */\n\nexport class EditorImageFader extends Block {\n  constructor() {\n    super();\n\n    /**\n     * @private\n     * @type {Boolean}\n     */\n    this._isActive = false;\n\n    /**\n     * @private\n     * @type {Boolean}\n     */\n    this._hidden = true;\n\n    /** @private */\n    this._addKeypointDebounced = debounce(this._addKeypoint.bind(this), 600);\n\n    this.classList.add('inactive_to_cropper');\n  }\n\n  /**\n   * @private\n   * @param {String} src\n   * @returns {() => void} Destructor\n   */\n  _handleImageLoading(src) {\n    let operation = this._operation;\n\n    let loadingOperations = this.$['*loadingOperations'];\n    if (!loadingOperations.get(operation)) {\n      loadingOperations.set(operation, new Map());\n    }\n\n    if (!loadingOperations.get(operation).get(src)) {\n      loadingOperations.set(operation, loadingOperations.get(operation).set(src, true));\n      this.$['*loadingOperations'] = loadingOperations;\n    }\n\n    return () => {\n      if (loadingOperations?.get(operation)?.has(src)) {\n        loadingOperations.get(operation).delete(src);\n        this.$['*loadingOperations'] = loadingOperations;\n      }\n    };\n  }\n\n  /** @private */\n  _flush() {\n    window.cancelAnimationFrame(this._raf);\n    this._raf = window.requestAnimationFrame(() => {\n      for (let kp of this._keypoints) {\n        let { image } = kp;\n        if (image) {\n          image.style.opacity = kp.opacity.toString();\n          image.style.zIndex = kp.zIndex.toString();\n        }\n      }\n    });\n  }\n\n  /**\n   * @private\n   * @param {Object} options\n   * @param {String} [options.url]\n   * @param {String} [options.filter]\n   * @param {String} [options.operation]\n   * @param {Number} [options.value]\n   * @returns {String}\n   */\n  _imageSrc({ url = this._url, filter = this._filter, operation, value } = {}) {\n    let transformations = { ...this._transformations };\n\n    if (operation) {\n      transformations[operation] = filter ? { name: filter, amount: value } : value;\n    }\n\n    // do not use getBoundingClientRect because scale transform affects it\n    let width = this.offsetWidth;\n    return this.proxyUrl(viewerImageSrc(url, width, transformations));\n  }\n\n  /**\n   * @private\n   * @param {String} operation\n   * @param {Number} value\n   * @returns {Keypoint}\n   */\n  _constructKeypoint(operation, value) {\n    let src = this._imageSrc({ operation, value });\n    return {\n      src,\n      image: null,\n      opacity: 0,\n      zIndex: 0,\n      value,\n    };\n  }\n\n  /**\n   * Check if current operation and filter equals passed ones\n   *\n   * @private\n   * @param {String} operation\n   * @param {String} [filter]\n   * @returns {Boolean}\n   */\n  _isSame(operation, filter) {\n    return this._operation === operation && this._filter === filter;\n  }\n\n  /**\n   * @private\n   * @param {String} operation\n   * @param {String | null} filter\n   * @param {Number} value\n   */\n  _addKeypoint(operation, filter, value) {\n    let shouldSkip = () =>\n      !this._isSame(operation, filter) || this._value !== value || !!this._keypoints.find((kp) => kp.value === value);\n\n    if (shouldSkip()) {\n      return;\n    }\n    let keypoint = this._constructKeypoint(operation, value);\n    let image = new Image();\n    image.src = keypoint.src;\n    let stop = this._handleImageLoading(keypoint.src);\n    image.addEventListener('load', stop, { once: true });\n    image.addEventListener('error', stop, { once: true });\n    keypoint.image = image;\n    image.classList.add('fader-image');\n\n    image.addEventListener(\n      'load',\n      () => {\n        if (shouldSkip()) {\n          return;\n        }\n        let keypoints = this._keypoints;\n        let idx = keypoints.findIndex((kp) => kp.value > value);\n        let insertBeforeNode = idx < keypoints.length ? keypoints[idx].image : null;\n        if (!this._container || (insertBeforeNode && !this._container.contains(insertBeforeNode))) {\n          return;\n        }\n        keypoints.splice(idx, 0, keypoint);\n        this._container.insertBefore(image, insertBeforeNode);\n        this._update(operation, value);\n      },\n      { once: true },\n    );\n\n    image.addEventListener(\n      'error',\n      () => {\n        this.$['*networkProblems'] = true;\n      },\n      { once: true },\n    );\n  }\n\n  /** @param {String | Number} value */\n  set(value) {\n    value = typeof value === 'string' ? parseInt(value, 10) : value;\n    this._update(this._operation, value);\n    this._addKeypointDebounced(this._operation, this._filter, value);\n  }\n\n  /**\n   * @private\n   * @param {String} operation\n   * @param {Number} value\n   */\n  _update(operation, value) {\n    this._operation = operation;\n    this._value = value;\n\n    let { zero } = COLOR_OPERATIONS_CONFIG[operation];\n\n    let keypointValues = this._keypoints.map((kp) => kp.value);\n    let opacities = calculateOpacities(keypointValues, value, zero);\n    let zIndices = calculateZIndices(keypointValues, zero);\n\n    for (let [idx, kp] of Object.entries(this._keypoints)) {\n      kp.opacity = opacities[idx];\n      kp.zIndex = zIndices[idx];\n    }\n\n    this._flush();\n  }\n\n  /** @private */\n  _createPreviewImage() {\n    let image = new Image();\n    image.classList.add('fader-image', 'fader-image--preview');\n    image.style.opacity = '0';\n    return image;\n  }\n\n  /** @private */\n  async _initNodes() {\n    let fr = document.createDocumentFragment();\n    this._previewImage = this._previewImage || this._createPreviewImage();\n    !this.contains(this._previewImage) && fr.appendChild(this._previewImage);\n\n    let container = document.createElement('div');\n    fr.appendChild(container);\n\n    let srcList = this._keypoints.map((kp) => kp.src);\n\n    let { images, promise, cancel } = batchPreloadImages(srcList);\n    images.forEach((node) => {\n      let stop = this._handleImageLoading(node.src);\n      node.addEventListener('load', stop);\n      node.addEventListener('error', stop);\n    });\n    this._cancelLastImages = () => {\n      cancel();\n      this._cancelLastImages = undefined;\n    };\n    let operation = this._operation;\n    let filter = this._filter;\n    await promise;\n    if (this._isActive && this._isSame(operation, filter)) {\n      this._container && this._container.remove();\n      this._container = container;\n      this._keypoints.forEach((kp, idx) => {\n        let kpImage = images[idx];\n        kpImage.classList.add('fader-image');\n        kp.image = kpImage;\n        this._container.appendChild(kpImage);\n      });\n      this.appendChild(fr);\n      this._flush();\n    }\n  }\n\n  /** @param {import('./types.js').Transformations} transformations */\n  setTransformations(transformations) {\n    this._transformations = transformations;\n    if (this._previewImage) {\n      let src = this._imageSrc();\n      let stop = this._handleImageLoading(src);\n      this._previewImage.src = src;\n      this._previewImage.addEventListener('load', stop, { once: true });\n      this._previewImage.addEventListener('error', stop, { once: true });\n      this._previewImage.style.opacity = '1';\n\n      this._previewImage.addEventListener(\n        'error',\n        () => {\n          this.$['*networkProblems'] = true;\n        },\n        { once: true },\n      );\n    }\n  }\n\n  /**\n   * @param {object} options\n   * @param {String} options.url\n   * @param {String} options.operation\n   * @param {Number} options.value\n   * @param {String} [options.filter]\n   */\n  preload({ url, filter, operation, value }) {\n    this._cancelBatchPreload && this._cancelBatchPreload();\n\n    let keypoints = keypointsRange(operation, value);\n    let srcList = keypoints.map((kp) => this._imageSrc({ url, filter, operation, value: kp }));\n    let { cancel } = batchPreloadImages(srcList);\n\n    this._cancelBatchPreload = cancel;\n  }\n\n  /** @private */\n  _setOriginalSrc(src) {\n    let image = this._previewImage || this._createPreviewImage();\n    !this.contains(image) && this.appendChild(image);\n    this._previewImage = image;\n\n    if (image.src === src) {\n      image.style.opacity = '1';\n      image.style.transform = 'scale(1)';\n      this.className = classNames({\n        active_from_viewer: this._fromViewer,\n        active_from_cropper: !this._fromViewer,\n        inactive_to_cropper: false,\n      });\n      return;\n    }\n    image.style.opacity = '0';\n    let stop = this._handleImageLoading(src);\n    image.addEventListener('error', stop, { once: true });\n    image.src = src;\n    image.addEventListener(\n      'load',\n      () => {\n        stop();\n        if (image) {\n          image.style.opacity = '1';\n          image.style.transform = 'scale(1)';\n          this.className = classNames({\n            active_from_viewer: this._fromViewer,\n            active_from_cropper: !this._fromViewer,\n            inactive_to_cropper: false,\n          });\n        }\n      },\n      { once: true },\n    );\n    image.addEventListener(\n      'error',\n      () => {\n        this.$['*networkProblems'] = true;\n      },\n      { once: true },\n    );\n  }\n\n  /**\n   * @param {object} options\n   * @param {String} options.url\n   * @param {String} [options.operation]\n   * @param {Number} [options.value]\n   * @param {String} [options.filter]\n   * @param {Boolean} [options.fromViewer]\n   */\n  activate({ url, operation, value, filter, fromViewer }) {\n    this._isActive = true;\n    this._hidden = false;\n    this._url = url;\n    this._operation = operation || 'initial';\n    this._value = value;\n    this._filter = filter;\n    this._fromViewer = fromViewer;\n\n    let isOriginal = typeof value !== 'number' && !filter;\n    if (isOriginal) {\n      let src = this._imageSrc({ operation, value });\n      this._setOriginalSrc(src);\n      this._container && this._container.remove();\n      return;\n    }\n    this._keypoints = keypointsRange(operation, value).map((keyValue) => this._constructKeypoint(operation, keyValue));\n\n    this._update(operation, value);\n    this._initNodes();\n  }\n\n  /** @param {{ hide?: Boolean }} options */\n  deactivate({ hide = true } = {}) {\n    this._isActive = false;\n\n    this._cancelLastImages && this._cancelLastImages();\n    this._cancelBatchPreload && this._cancelBatchPreload();\n\n    if (hide && !this._hidden) {\n      this._hidden = true;\n      if (this._previewImage) {\n        this._previewImage.style.transform = 'scale(1)';\n      }\n      this.className = classNames({\n        active_from_viewer: false,\n        active_from_cropper: false,\n        inactive_to_cropper: true,\n      });\n      this.addEventListener(\n        'transitionend',\n        () => {\n          this._container && this._container.remove();\n        },\n        { once: true },\n      );\n    } else {\n      this._container && this._container.remove();\n    }\n  }\n}\n","import { Block } from '../../../abstract/Block.js';\n\nconst X_THRESHOLD = 1;\n\nexport class EditorScroller extends Block {\n  initCallback() {\n    super.initCallback();\n\n    this.addEventListener('wheel', (e) => {\n      e.preventDefault();\n      let { deltaY, deltaX } = e;\n      if (Math.abs(deltaX) > X_THRESHOLD) {\n        this.scrollLeft += deltaX;\n      } else {\n        this.scrollLeft += deltaY;\n      }\n    });\n  }\n}\n\nEditorScroller.template = /* HTML */ ` <slot></slot> `;\n","// @ts-check\nimport { debounce } from '../../utils/debounce.js';\nimport { Block } from '../../../abstract/Block.js';\nimport { EditorCropButtonControl } from './EditorCropButtonControl.js';\nimport { EditorFilterControl } from './EditorFilterControl.js';\nimport { EditorOperationControl } from './EditorOperationControl.js';\nimport { FAKE_ORIGINAL_FILTER } from './EditorSlider.js';\nimport { batchPreloadImages } from './lib/preloadImage.js';\nimport {\n  ALL_COLOR_OPERATIONS,\n  ALL_CROP_OPERATIONS,\n  ALL_FILTERS,\n  ALL_TABS,\n  COLOR_OPERATIONS_CONFIG,\n  TabId,\n} from './toolbar-constants.js';\nimport { viewerImageSrc } from './util.js';\n\n/** @param {String} id */\nfunction renderTabToggle(id) {\n  return /* HTML */ `\n    <lr-presence-toggle class=\"tab-toggle\" set=\"visible: presence.tabToggle.${id}; styles: presence.tabToggleStyles;\">\n      <lr-btn-ui\n        theme=\"boring\"\n        ref=\"tab-toggle-${id}\"\n        data-id=\"${id}\"\n        icon=\"${id}\"\n        tabindex=\"0\"\n        set=\"onclick: on.clickTab;\"\n      >\n      </lr-btn-ui>\n    </lr-presence-toggle>\n  `;\n}\n\n/** @param {String} id */\nfunction renderTabContent(id) {\n  return /* HTML */ `\n    <lr-presence-toggle class=\"tab-content\" set=\"visible: presence.tabContent.${id}; styles: presence.tabContentStyles\">\n      <lr-editor-scroller hidden-scrollbar>\n        <div class=\"controls-list_align\">\n          <div class=\"controls-list_inner\" ref=\"controls-list-${id}\"></div>\n        </div>\n      </lr-editor-scroller>\n    </lr-presence-toggle>\n  `;\n}\n\nexport class EditorToolbar extends Block {\n  constructor() {\n    super();\n\n    this.init$ = {\n      ...this.init$,\n      '*sliderEl': null,\n      /** @type {import('./types.js').LoadingOperations} */\n      '*loadingOperations': new Map(),\n      '*showSlider': false,\n      '*currentFilter': FAKE_ORIGINAL_FILTER,\n      '*currentOperation': null,\n      showLoader: false,\n      filters: ALL_FILTERS,\n      colorOperations: ALL_COLOR_OPERATIONS,\n      cropOperations: ALL_CROP_OPERATIONS,\n      '*operationTooltip': null,\n\n      'presence.mainToolbar': true,\n      'presence.subToolbar': false,\n      'presence.tabToggles': true,\n      'presence.tabContent.crop': false,\n      'presence.tabContent.tuning': false,\n      'presence.tabContent.filters': false,\n      'presence.tabToggle.crop': true,\n      'presence.tabToggle.tuning': true,\n      'presence.tabToggle.filters': true,\n      'presence.subTopToolbarStyles': {\n        hidden: 'sub-toolbar--top-hidden',\n        visible: 'sub-toolbar--visible',\n      },\n      'presence.subBottomToolbarStyles': {\n        hidden: 'sub-toolbar--bottom-hidden',\n        visible: 'sub-toolbar--visible',\n      },\n      'presence.tabContentStyles': {\n        hidden: 'tab-content--hidden',\n        visible: 'tab-content--visible',\n      },\n      'presence.tabToggleStyles': {\n        hidden: 'tab-toggle--hidden',\n        visible: 'tab-toggle--visible',\n      },\n      'presence.tabTogglesStyles': {\n        hidden: 'tab-toggles--hidden',\n        visible: 'tab-toggles--visible',\n      },\n      'on.cancel': () => {\n        this._cancelPreload && this._cancelPreload();\n        this.$['*on.cancel']();\n      },\n      'on.apply': () => {\n        this.$['*on.apply'](this.$['*editorTransformations']);\n      },\n      'on.applySlider': () => {\n        this.ref['slider-el'].apply();\n        this._onSliderClose();\n      },\n      'on.cancelSlider': () => {\n        this.ref['slider-el'].cancel();\n        this._onSliderClose();\n      },\n      /** @param {MouseEvent} e */\n      'on.clickTab': (e) => {\n        const id = /** @type {HTMLElement} */ (e.currentTarget).getAttribute('data-id');\n        if (id) {\n          this._activateTab(id, { fromViewer: false });\n        }\n      },\n    };\n\n    /** @private */\n\n    this._debouncedShowLoader = debounce(this._showLoader.bind(this), 500);\n  }\n\n  /** @private */\n  _onSliderClose() {\n    this.$['*showSlider'] = false;\n    if (this.$['*tabId'] === TabId.TUNING) {\n      this.ref['tooltip-el'].classList.toggle('info-tooltip_visible', false);\n    }\n  }\n\n  /**\n   * @private\n   * @param {String} operation\n   */\n  _createOperationControl(operation) {\n    let el = new EditorOperationControl();\n    // @ts-expect-error TODO: fix\n    el.operation = operation;\n    return el;\n  }\n\n  /**\n   * @private\n   * @param {String} filter\n   */\n  _createFilterControl(filter) {\n    let el = new EditorFilterControl();\n    // @ts-expect-error TODO: fix\n    el.filter = filter;\n    return el;\n  }\n\n  /**\n   * @private\n   * @param {String} operation\n   */\n  _createToggleControl(operation) {\n    let el = new EditorCropButtonControl();\n    // @ts-expect-error TODO: fix\n    el.operation = operation;\n    return el;\n  }\n\n  /**\n   * @private\n   * @param {String} tabId\n   */\n  _renderControlsList(tabId) {\n    let listEl = this.ref[`controls-list-${tabId}`];\n    let fr = document.createDocumentFragment();\n\n    if (tabId === TabId.CROP) {\n      this.$.cropOperations.forEach(\n        /** @param {string} operation */ (operation) => {\n          let el = this._createToggleControl(operation);\n          // @ts-ignore\n          fr.appendChild(el);\n        },\n      );\n    } else if (tabId === TabId.FILTERS) {\n      [FAKE_ORIGINAL_FILTER, ...this.$.filters].forEach((filterId) => {\n        let el = this._createFilterControl(filterId);\n        // @ts-ignore\n        fr.appendChild(el);\n      });\n    } else if (tabId === TabId.TUNING) {\n      this.$.colorOperations.forEach(\n        /** @param {string} operation */ (operation) => {\n          let el = this._createOperationControl(operation);\n          // @ts-ignore\n          fr.appendChild(el);\n        },\n      );\n    }\n\n    [...fr.children].forEach((el, idx) => {\n      if (idx === fr.childNodes.length - 1) {\n        el.classList.add('controls-list_last-item');\n      }\n    });\n\n    listEl.innerHTML = '';\n    listEl.appendChild(fr);\n  }\n\n  /**\n   * @private\n   * @param {String} id\n   * @param {{ fromViewer?: Boolean }} options\n   */\n  _activateTab(id, { fromViewer }) {\n    this.$['*tabId'] = id;\n\n    if (id === TabId.CROP) {\n      this.$['*faderEl'].deactivate();\n      this.$['*cropperEl'].activate(this.$['*imageSize'], { fromViewer });\n    } else {\n      this.$['*faderEl'].activate({ url: this.$['*originalUrl'], fromViewer });\n      this.$['*cropperEl'].deactivate();\n    }\n\n    for (let tabId of ALL_TABS) {\n      let isCurrentTab = tabId === id;\n\n      let tabToggleEl = this.ref[`tab-toggle-${tabId}`];\n      tabToggleEl.active = isCurrentTab;\n\n      if (isCurrentTab) {\n        this._renderControlsList(id);\n        this._syncTabIndicator();\n      } else {\n        this._unmountTabControls(tabId);\n      }\n      this.$[`presence.tabContent.${tabId}`] = isCurrentTab;\n    }\n  }\n\n  /**\n   * @private\n   * @param {String} tabId\n   */\n  _unmountTabControls(tabId) {\n    let listEl = this.ref[`controls-list-${tabId}`];\n    if (listEl) {\n      listEl.innerHTML = '';\n    }\n  }\n\n  /** @private */\n  _syncTabIndicator() {\n    let tabToggleEl = this.ref[`tab-toggle-${this.$['*tabId']}`];\n    let indicatorEl = this.ref['tabs-indicator'];\n    indicatorEl.style.transform = `translateX(${tabToggleEl.offsetLeft}px)`;\n  }\n\n  /** @private */\n  _preloadEditedImage() {\n    if (this.$['*imgContainerEl'] && this.$['*originalUrl']) {\n      let width = this.$['*imgContainerEl'].offsetWidth;\n      let src = this.proxyUrl(viewerImageSrc(this.$['*originalUrl'], width, this.$['*editorTransformations']));\n      this._cancelPreload && this._cancelPreload();\n      let { cancel } = batchPreloadImages([src]);\n      this._cancelPreload = () => {\n        cancel();\n        this._cancelPreload = undefined;\n      };\n    }\n  }\n\n  /**\n   * @private\n   * @param {boolean} show\n   */\n  _showLoader(show) {\n    this.$.showLoader = show;\n  }\n\n  _updateInfoTooltip = debounce(() => {\n    const transformations = this.$['*editorTransformations'];\n    /** @type {keyof COLOR_OPERATIONS_CONFIG} */\n    const currentOperation = this.$['*currentOperation'];\n    let text = '';\n    let visible = false;\n\n    if (this.$['*tabId'] === TabId.FILTERS) {\n      visible = true;\n      if (this.$['*currentFilter'] && transformations?.filter?.name === this.$['*currentFilter']) {\n        let value = transformations?.filter?.amount || 100;\n        text = this.$['*currentFilter'] + ' ' + value;\n      } else {\n        text = this.l10n(FAKE_ORIGINAL_FILTER);\n      }\n    } else if (this.$['*tabId'] === TabId.TUNING && currentOperation) {\n      visible = true;\n      let value = transformations?.[currentOperation] || COLOR_OPERATIONS_CONFIG[currentOperation].zero;\n      text = this.l10n(currentOperation) + ' ' + value;\n    }\n    if (visible) {\n      this.$['*operationTooltip'] = text;\n    }\n    this.ref['tooltip-el'].classList.toggle('info-tooltip_visible', visible);\n  }, 0);\n\n  initCallback() {\n    super.initCallback();\n\n    this.$['*sliderEl'] = this.ref['slider-el'];\n\n    this.sub('*imageSize', (imageSize) => {\n      if (imageSize) {\n        setTimeout(() => {\n          this._activateTab(this.$['*tabId'], { fromViewer: true });\n        }, 0);\n      }\n    });\n\n    this.sub('*editorTransformations', (editorTransformations) => {\n      let appliedFilter = editorTransformations?.filter?.name;\n      if (this.$['*currentFilter'] !== appliedFilter) {\n        this.$['*currentFilter'] = appliedFilter;\n      }\n    });\n\n    this.sub('*currentFilter', () => {\n      this._updateInfoTooltip();\n    });\n\n    this.sub('*currentOperation', () => {\n      this._updateInfoTooltip();\n    });\n\n    this.sub('*tabId', () => {\n      this._updateInfoTooltip();\n    });\n\n    this.sub('*originalUrl', () => {\n      this.$['*faderEl'] && this.$['*faderEl'].deactivate();\n    });\n\n    this.sub('*editorTransformations', (transformations) => {\n      this._preloadEditedImage();\n      if (this.$['*faderEl']) {\n        this.$['*faderEl'].setTransformations(transformations);\n      }\n    });\n\n    this.sub('*loadingOperations', (/** @type {import('./types.js').LoadingOperations} */ loadingOperations) => {\n      let anyLoading = false;\n      for (let [, mapping] of loadingOperations.entries()) {\n        if (anyLoading) {\n          break;\n        }\n        for (let [, loading] of mapping.entries()) {\n          if (loading) {\n            anyLoading = true;\n            break;\n          }\n        }\n      }\n      this._debouncedShowLoader(anyLoading);\n    });\n\n    this.sub('*showSlider', (showSlider) => {\n      this.$['presence.subToolbar'] = showSlider;\n      this.$['presence.mainToolbar'] = !showSlider;\n    });\n\n    this.sub('*tabList', (tabList) => {\n      this.$['presence.tabToggles'] = tabList.length > 1;\n      for (const tabId of ALL_TABS) {\n        this.$[`presence.tabToggle.${tabId}`] = tabList.includes(tabId);\n        const toggleEl = this.ref[`tab-toggle-${tabId}`];\n        toggleEl.style.gridColumn = tabList.indexOf(tabId) + 1;\n      }\n\n      if (!tabList.includes(this.$['*tabId'])) {\n        this._activateTab(tabList[0], { fromViewer: false });\n      }\n    });\n\n    this._updateInfoTooltip();\n  }\n}\n\nEditorToolbar.template = /* HTML */ `\n  <lr-line-loader-ui set=\"active: showLoader\"></lr-line-loader-ui>\n  <div class=\"info-tooltip_container\">\n    <div class=\"info-tooltip_wrapper\">\n      <div ref=\"tooltip-el\" class=\"info-tooltip info-tooltip_hidden\">{{*operationTooltip}}</div>\n    </div>\n  </div>\n  <div class=\"toolbar-container\">\n    <lr-presence-toggle class=\"sub-toolbar\" set=\"visible: presence.mainToolbar; styles: presence.subTopToolbarStyles\">\n      <div class=\"tab-content-row\">${ALL_TABS.map(renderTabContent).join('')}</div>\n      <div class=\"controls-row\">\n        <lr-btn-ui theme=\"boring\" icon=\"closeMax\" set=\"onclick: on.cancel\"> </lr-btn-ui>\n        <lr-presence-toggle class=\"tab-toggles\" set=\"visible: presence.tabToggles; styles: presence.tabTogglesStyles\">\n          <div ref=\"tabs-indicator\" class=\"tab-toggles_indicator\"></div>\n          ${ALL_TABS.map(renderTabToggle).join('')}\n        </lr-presence-toggle>\n        <lr-btn-ui theme=\"primary\" icon=\"done\" set=\"onclick: on.apply\"> </lr-btn-ui>\n      </div>\n    </lr-presence-toggle>\n    <lr-presence-toggle class=\"sub-toolbar\" set=\"visible: presence.subToolbar; styles: presence.subBottomToolbarStyles\">\n      <div class=\"slider\">\n        <lr-editor-slider ref=\"slider-el\"></lr-editor-slider>\n      </div>\n      <div class=\"controls-row\">\n        <lr-btn-ui theme=\"boring\" set=\"onclick: on.cancelSlider;\" l10n=\"@text:cancel\"> </lr-btn-ui>\n        <lr-btn-ui theme=\"primary\" set=\"onclick: on.applySlider;\" l10n=\"@text:apply\"> </lr-btn-ui>\n      </div>\n    </lr-presence-toggle>\n  </div>\n`;\n","import { Block } from '../../../../../abstract/Block.js';\nimport { classNames } from '../../lib/classNames.js';\n\nexport class LrBtnUi extends Block {\n  constructor() {\n    super();\n\n    this._iconReversed = false;\n    this._iconSingle = false;\n    this._iconHidden = false;\n\n    this.init$ = {\n      ...this.init$,\n      text: '',\n      icon: '',\n      iconCss: this._iconCss(),\n      theme: null,\n    };\n\n    this.defineAccessor('active', (active) => {\n      if (active) {\n        this.setAttribute('active', '');\n      } else {\n        this.removeAttribute('active');\n      }\n    });\n  }\n\n  _iconCss() {\n    return classNames('icon', {\n      icon_left: !this._iconReversed,\n      icon_right: this._iconReversed,\n      icon_hidden: this._iconHidden,\n      icon_single: this._iconSingle,\n    });\n  }\n\n  initCallback() {\n    super.initCallback();\n\n    this.sub('icon', (iconName) => {\n      this._iconSingle = !this.$.text;\n      this._iconHidden = !iconName;\n      this.$.iconCss = this._iconCss();\n    });\n\n    this.sub('theme', (theme) => {\n      if (theme !== 'custom') {\n        this.className = theme;\n      }\n    });\n\n    this.sub('text', (txt) => {\n      this._iconSingle = false;\n    });\n\n    this.setAttribute('role', 'button');\n    if (this.tabIndex === -1) {\n      this.tabIndex = 0;\n    }\n    if (!this.hasAttribute('theme')) {\n      this.setAttribute('theme', 'default');\n    }\n  }\n\n  set reverse(val) {\n    if (this.hasAttribute('reverse')) {\n      this.style.flexDirection = 'row-reverse';\n      this._iconReversed = true;\n    } else {\n      this._iconReversed = false;\n      this.style.flexDirection = null;\n    }\n  }\n}\nLrBtnUi.bindAttributes({ text: 'text', icon: 'icon', reverse: 'reverse', theme: 'theme' });\n\nLrBtnUi.template = /* HTML */ `\n  <lr-icon set=\"className: iconCss; @name: icon; @hidden: !icon\"></lr-icon>\n  <div class=\"text\">{{text}}</div>\n`;\n","import { Block } from '../../../../../abstract/Block.js';\n\nexport class LineLoaderUi extends Block {\n  constructor() {\n    super();\n\n    this._active = false;\n\n    this._handleTransitionEndRight = () => {\n      let lineEl = this.ref['line-el'];\n      lineEl.style.transition = `initial`;\n      lineEl.style.opacity = '0';\n      lineEl.style.transform = `translateX(-101%)`;\n      this._active && this._start();\n    };\n  }\n\n  initCallback() {\n    super.initCallback();\n    this.defineAccessor('active', (active) => {\n      if (typeof active === 'boolean') {\n        if (active) {\n          this._start();\n        } else {\n          this._stop();\n        }\n      }\n    });\n  }\n\n  _start() {\n    this._active = true;\n    let { width } = this.getBoundingClientRect();\n    let lineEl = this.ref['line-el'];\n    lineEl.style.transition = `transform 1s`;\n    lineEl.style.opacity = '1';\n    lineEl.style.transform = `translateX(${width}px)`;\n    lineEl.addEventListener('transitionend', this._handleTransitionEndRight, {\n      once: true,\n    });\n  }\n\n  _stop() {\n    this._active = false;\n  }\n}\n\nLineLoaderUi.template = /* HTML */ `\n  <div class=\"inner\">\n    <div class=\"line\" ref=\"line-el\"></div>\n  </div>\n`;\n","import { applyClassNames } from '../../lib/classNames.js';\nimport { Block } from '../../../../../abstract/Block.js';\n\n/**\n * @typedef {Object} Style\n * @property {String} [transition]\n * @property {String} [visible]\n * @property {String} [hidden]\n */\n\n/** @type {Style} */\nconst DEFAULT_STYLE = {\n  transition: 'transition',\n  visible: 'visible',\n  hidden: 'hidden',\n};\n\nexport class PresenceToggle extends Block {\n  constructor() {\n    super();\n\n    this._visible = false;\n    this._visibleStyle = DEFAULT_STYLE.visible;\n    this._hiddenStyle = DEFAULT_STYLE.hidden;\n    this._externalTransitions = false;\n\n    this.defineAccessor('styles', (styles) => {\n      if (!styles) {\n        return;\n      }\n      this._externalTransitions = true;\n      this._visibleStyle = styles.visible;\n      this._hiddenStyle = styles.hidden;\n    });\n\n    this.defineAccessor('visible', (visible) => {\n      if (typeof visible !== 'boolean') {\n        return;\n      }\n\n      this._visible = visible;\n      this._handleVisible();\n    });\n  }\n\n  _handleVisible() {\n    this.style.visibility = this._visible ? 'inherit' : 'hidden';\n    applyClassNames(this, {\n      [DEFAULT_STYLE.transition]: !this._externalTransitions,\n      [this._visibleStyle]: this._visible,\n      [this._hiddenStyle]: !this._visible,\n    });\n    this.setAttribute('aria-hidden', this._visible ? 'false' : 'true');\n  }\n\n  initCallback() {\n    super.initCallback();\n    this.setAttribute('hidden', '');\n\n    if (!this._externalTransitions) {\n      this.classList.add(DEFAULT_STYLE.transition);\n    }\n\n    this._handleVisible();\n    setTimeout(() => this.removeAttribute('hidden'), 0);\n  }\n}\nPresenceToggle.template = /* HTML */ ` <slot></slot> `;\n","import { Block } from '../../../../../abstract/Block.js';\n\nexport class SliderUi extends Block {\n  init$ = {\n    ...this.init$,\n    disabled: false,\n    min: 0,\n    max: 100,\n    onInput: null,\n    onChange: null,\n    defaultValue: null,\n    'on.sliderInput': () => {\n      let value = parseInt(this.ref['input-el'].value, 10);\n      this._updateValue(value);\n      this.$.onInput && this.$.onInput(value);\n    },\n    'on.sliderChange': () => {\n      let value = parseInt(this.ref['input-el'].value, 10);\n      this.$.onChange && this.$.onChange(value);\n    },\n  };\n\n  constructor() {\n    super();\n    this.setAttribute('with-effects', '');\n  }\n\n  initCallback() {\n    super.initCallback();\n\n    this.defineAccessor('disabled', (disabled) => {\n      this.$.disabled = disabled;\n    });\n\n    this.defineAccessor('min', (min) => {\n      this.$.min = min;\n    });\n\n    this.defineAccessor('max', (max) => {\n      this.$.max = max;\n    });\n\n    this.defineAccessor('defaultValue', (defaultValue) => {\n      this.$.defaultValue = defaultValue;\n      this.ref['input-el'].value = defaultValue;\n      this._updateValue(defaultValue);\n    });\n\n    this.defineAccessor('zero', (zero) => {\n      this._zero = zero;\n    });\n\n    this.defineAccessor('onInput', (onInput) => {\n      if (!onInput) return;\n      this.$.onInput = onInput;\n    });\n\n    this.defineAccessor('onChange', (onChange) => {\n      if (!onChange) return;\n      this.$.onChange = onChange;\n    });\n\n    this._updateSteps();\n\n    this._observer = new ResizeObserver(() => {\n      this._updateSteps();\n      let value = parseInt(this.ref['input-el'].value, 10);\n      this._updateValue(value);\n    });\n    this._observer.observe(this);\n\n    this._thumbSize = parseInt(window.getComputedStyle(this).getPropertyValue('--l-thumb-size'), 10);\n\n    setTimeout(() => {\n      let value = parseInt(this.ref['input-el'].value, 10);\n      this._updateValue(value);\n    }, 0);\n\n    this.sub('disabled', (disabled) => {\n      let el = this.ref['input-el'];\n      if (disabled) {\n        el.setAttribute('disabled', 'disabled');\n      } else {\n        el.removeAttribute('disabled');\n      }\n    });\n\n    let inputEl = this.ref['input-el'];\n    inputEl.addEventListener('focus', () => {\n      this.style.setProperty('--color-effect', 'var(--hover-color-rgb)');\n    });\n    inputEl.addEventListener('blur', () => {\n      this.style.setProperty('--color-effect', 'var(--idle-color-rgb)');\n    });\n  }\n\n  _updateValue(value) {\n    this._updateZeroDot(value);\n\n    let { width } = this.getBoundingClientRect();\n    let slope = 100 / (this.$.max - this.$.min);\n    let mappedValue = slope * (value - this.$.min);\n    let offset = (mappedValue * (width - this._thumbSize)) / 100;\n\n    window.requestAnimationFrame(() => {\n      this.ref['thumb-el'].style.transform = `translateX(${offset}px)`;\n    });\n  }\n\n  _updateZeroDot(value) {\n    if (!this._zeroDotEl) {\n      return;\n    }\n    if (value === this._zero) {\n      this._zeroDotEl.style.opacity = '0';\n    } else {\n      this._zeroDotEl.style.opacity = '0.2';\n    }\n    let { width } = this.getBoundingClientRect();\n    let slope = 100 / (this.$.max - this.$.min);\n    let mappedValue = slope * (this._zero - this.$.min);\n    let offset = (mappedValue * (width - this._thumbSize)) / 100;\n    window.requestAnimationFrame(() => {\n      this._zeroDotEl.style.transform = `translateX(${offset}px)`;\n    });\n  }\n\n  _updateSteps() {\n    const STEP_GAP = 15;\n\n    let stepsEl = this.ref['steps-el'];\n    let { width } = stepsEl.getBoundingClientRect();\n    let half = Math.ceil(width / 2);\n    let count = Math.ceil(half / STEP_GAP) - 2;\n\n    if (this._stepsCount === count) {\n      return;\n    }\n\n    let fr = document.createDocumentFragment();\n    let minorStepEl = document.createElement('div');\n    let borderStepEl = document.createElement('div');\n    minorStepEl.className = 'minor-step';\n    borderStepEl.className = 'border-step';\n    fr.appendChild(borderStepEl);\n    for (let i = 0; i < count; i++) {\n      fr.appendChild(minorStepEl.cloneNode());\n    }\n    fr.appendChild(borderStepEl.cloneNode());\n    for (let i = 0; i < count; i++) {\n      fr.appendChild(minorStepEl.cloneNode());\n    }\n    fr.appendChild(borderStepEl.cloneNode());\n\n    let zeroDotEl = document.createElement('div');\n    zeroDotEl.className = 'zero-dot';\n    fr.appendChild(zeroDotEl);\n    this._zeroDotEl = zeroDotEl;\n\n    stepsEl.innerHTML = '';\n    stepsEl.appendChild(fr);\n    this._stepsCount = count;\n  }\n\n  destroyCallback() {\n    this._observer?.disconnect();\n  }\n}\nSliderUi.template = /* HTML */ `\n  <div class=\"steps\" ref=\"steps-el\"></div>\n  <div ref=\"thumb-el\" class=\"thumb\"></div>\n  <input\n    class=\"input\"\n    type=\"range\"\n    ref=\"input-el\"\n    tabindex=\"0\"\n    set=\"oninput: on.sliderInput; onchange: on.sliderChange; @min: min; @max: max; @value: defaultValue;\"\n  />\n`;\n","// @ts-check\nimport { ActivityBlock } from '../../abstract/ActivityBlock.js';\nimport { UploaderBlock } from '../../abstract/UploaderBlock.js';\nimport { CloudImageEditorBlock } from '../CloudImageEditor/index.js';\n\nexport class CloudImageEditorActivity extends UploaderBlock {\n  couldBeCtxOwner = true;\n  activityType = ActivityBlock.activities.CLOUD_IMG_EDIT;\n\n  constructor() {\n    super();\n\n    this.init$ = {\n      ...this.init$,\n      cdnUrl: null,\n    };\n  }\n\n  initCallback() {\n    super.initCallback();\n\n    this.registerActivity(this.activityType, {\n      onActivate: () => this.mountEditor(),\n      onDeactivate: () => this.unmountEditor(),\n    });\n\n    this.sub('*focusedEntry', (/** @type {import('../../abstract/TypedData.js').TypedData} */ entry) => {\n      if (!entry) {\n        return;\n      }\n      this.entry = entry;\n\n      this.entry.subscribe('cdnUrl', (cdnUrl) => {\n        if (cdnUrl) {\n          this.$.cdnUrl = cdnUrl;\n        }\n      });\n    });\n\n    this.subConfigValue('cropPreset', (cropPreset) => {\n      if (this._instance && this._instance.getAttribute('crop-preset') !== cropPreset) {\n        this._instance.setAttribute('crop-preset', cropPreset);\n      }\n    });\n\n    this.subConfigValue('cloudImageEditorTabs', (tabs) => {\n      if (this._instance && this._instance.getAttribute('tabs') !== tabs) {\n        this._instance.setAttribute('tabs', tabs);\n      }\n    });\n  }\n\n  /** @param {CustomEvent<import('../CloudImageEditor/src/types.js').ApplyResult>} e */\n  handleApply(e) {\n    if (!this.entry) {\n      return;\n    }\n    let result = e.detail;\n    this.entry.setMultipleValues({\n      cdnUrl: result.cdnUrl,\n      cdnUrlModifiers: result.cdnUrlModifiers,\n    });\n    this.historyBack();\n  }\n\n  handleCancel() {\n    this.historyBack();\n  }\n\n  mountEditor() {\n    const instance = new CloudImageEditorBlock();\n    const cdnUrl = this.$.cdnUrl;\n    const cropPreset = this.cfg.cropPreset;\n    const tabs = this.cfg.cloudImageEditorTabs;\n\n    instance.setAttribute('ctx-name', this.ctxName);\n    instance.setAttribute('cdn-url', cdnUrl);\n\n    if (cropPreset) {\n      instance.setAttribute('crop-preset', cropPreset);\n    }\n    if (tabs) {\n      instance.setAttribute('tabs', tabs);\n    }\n\n    instance.addEventListener('apply', (e) => {\n      const customEvent = /** @type {CustomEvent<import('../CloudImageEditor/src/types.js').ApplyResult>} */ (e);\n      this.handleApply(customEvent);\n      this.debugPrint(`editor event \"apply\"`, customEvent.detail);\n    });\n    instance.addEventListener('cancel', (e) => {\n      const customEvent = /** @type {CustomEvent<void>} */ (e);\n      this.handleCancel();\n      this.debugPrint(`editor event \"cancel\"`, customEvent.detail);\n    });\n    instance.addEventListener('change', (e) => {\n      const customEvent = /** @type {CustomEvent<import('../CloudImageEditor/src/types.js').ChangeResult>} */ (e);\n      this.debugPrint(`editor event \"change\"`, customEvent.detail);\n    });\n\n    this.innerHTML = '';\n    this.appendChild(instance);\n    this._mounted = true;\n\n    /** @private */\n    this._instance = instance;\n  }\n\n  unmountEditor() {\n    this._instance = undefined;\n    this.innerHTML = '';\n  }\n}\n","/**\n * @param {string} str\n * @returns {string}\n */\nconst escapeRegExp = function (str) {\n  return str.replace(/[\\\\-\\\\[]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n};\n\n/**\n * @param {string} str\n * @param {string} flags\n * @returns {RegExp}\n */\nexport const wildcardRegexp = function (str, flags = 'i') {\n  const parts = str.split('*').map(escapeRegExp);\n  return new RegExp('^' + parts.join('.+') + '$', flags);\n};\n","let styleToCss = (style) => {\n  let css = Object.keys(style).reduce((acc, selector) => {\n    let propertiesObj = style[selector];\n    let propertiesStr = Object.keys(propertiesObj).reduce((acc, prop) => {\n      let value = propertiesObj[prop];\n      return acc + `${prop}: ${value};`;\n    }, '');\n    return acc + `${selector}{${propertiesStr}}`;\n  }, '');\n  return css;\n};\n\nexport function buildStyles({ textColor, backgroundColor, linkColor, linkColorHover, shadeColor }) {\n  let border = `solid 1px ${shadeColor}`;\n\n  // TODO: we need to update source source styles, add css custom properties to control theme\n  return styleToCss({\n    body: {\n      color: textColor,\n      'background-color': backgroundColor,\n    },\n    '.side-bar': {\n      background: 'inherit',\n      'border-right': border,\n    },\n    '.main-content': {\n      background: 'inherit',\n    },\n    '.main-content-header': {\n      background: 'inherit',\n    },\n    '.main-content-footer': {\n      background: 'inherit',\n    },\n    '.list-table-row': {\n      color: 'inherit',\n    },\n    '.list-table-row:hover': {\n      background: shadeColor,\n    },\n    '.list-table-row .list-table-cell-a, .list-table-row .list-table-cell-b': {\n      'border-top': border,\n    },\n    '.list-table-body .list-items': {\n      'border-bottom': border,\n    },\n    '.bread-crumbs a': {\n      color: linkColor,\n    },\n    '.bread-crumbs a:hover': {\n      color: linkColorHover,\n    },\n    '.main-content.loading': {\n      background: `${backgroundColor} url(/static/images/loading_spinner.gif) center no-repeat`,\n      'background-size': '25px 25px',\n    },\n    '.list-icons-item': {\n      'background-color': shadeColor,\n    },\n    '.source-gdrive .side-bar-menu a, .source-gphotos .side-bar-menu a': {\n      color: linkColor,\n    },\n    '.source-gdrive .side-bar-menu a, .source-gphotos .side-bar-menu a:hover': {\n      color: linkColorHover,\n    },\n    '.side-bar-menu a': {\n      color: linkColor,\n    },\n    '.side-bar-menu a:hover': {\n      color: linkColorHover,\n    },\n    '.source-gdrive .side-bar-menu .current, .source-gdrive .side-bar-menu a:hover, .source-gphotos .side-bar-menu .current, .source-gphotos .side-bar-menu a:hover':\n      {\n        color: linkColorHover,\n      },\n    '.source-vk .side-bar-menu a': {\n      color: linkColor,\n    },\n    '.source-vk .side-bar-menu a:hover': {\n      color: linkColorHover,\n      background: 'none',\n    },\n  });\n}\n","let cbMapping = {};\n\nwindow.addEventListener('message', (e) => {\n  let message;\n  try {\n    message = JSON.parse(e.data);\n  } catch (err) {\n    return;\n  }\n\n  if (message?.type in cbMapping) {\n    let cbList = cbMapping[message.type];\n    for (let [sender, callback] of cbList) {\n      if (e.source === sender) {\n        callback(message);\n      }\n    }\n  }\n});\n\nconst registerMessage = function (type, sender, callback) {\n  if (!(type in cbMapping)) {\n    cbMapping[type] = [];\n  }\n\n  cbMapping[type].push([sender, callback]);\n};\n\nconst unregisterMessage = function (type, sender) {\n  if (type in cbMapping) {\n    cbMapping[type] = cbMapping[type].filter((item) => item[0] !== sender);\n  }\n};\n\nexport { registerMessage, unregisterMessage };\n","// @ts-check\n\nimport { create } from '@symbiotejs/symbiote';\nimport { ActivityBlock } from '../../abstract/ActivityBlock.js';\nimport { UploaderBlock } from '../../abstract/UploaderBlock.js';\nimport { stringToArray } from '../../utils/stringToArray.js';\nimport { wildcardRegexp } from '../../utils/wildcardRegexp.js';\nimport { buildStyles } from './buildStyles.js';\nimport { registerMessage, unregisterMessage } from './messages.js';\nimport { queryString } from './query-string.js';\n\n/** @typedef {{ externalSourceType: string }} ActivityParams */\n\n/**\n * @typedef {{\n *   type: 'file-selected';\n *   obj_type: 'selected_file';\n *   filename: string;\n *   url: string;\n *   alternatives?: Record<string, string>;\n * }} SelectedFileMessage\n */\n\n/**\n * @typedef {{\n *   type: 'embed-css';\n *   style: string;\n * }} EmbedCssMessage\n */\n\n/** @typedef {SelectedFileMessage | EmbedCssMessage} Message */\n\nexport class ExternalSource extends UploaderBlock {\n  couldBeCtxOwner = true;\n  activityType = ActivityBlock.activities.EXTERNAL;\n\n  constructor() {\n    super();\n\n    this.init$ = {\n      ...this.init$,\n      activityIcon: '',\n      activityCaption: '',\n      selectedList: [],\n      counter: 0,\n      multiple: false,\n      onDone: () => {\n        for (const message of this.$.selectedList) {\n          const url = this.extractUrlFromMessage(message);\n          const { filename } = message;\n          const { externalSourceType } = this.activityParams;\n          this.addFileFromUrl(url, { fileName: filename, source: externalSourceType });\n        }\n\n        this.$['*currentActivity'] = ActivityBlock.activities.UPLOAD_LIST;\n      },\n      onCancel: () => {\n        this.historyBack();\n      },\n    };\n  }\n\n  /**\n   * @private\n   * @type {HTMLIFrameElement | null}\n   */\n  _iframe = null;\n\n  initCallback() {\n    super.initCallback();\n    this.registerActivity(this.activityType, {\n      onActivate: () => {\n        let { externalSourceType } = /** @type {ActivityParams} */ (this.activityParams);\n\n        this.set$({\n          activityCaption: `${externalSourceType?.[0].toUpperCase()}${externalSourceType?.slice(1)}`,\n          activityIcon: externalSourceType,\n        });\n\n        this.mountIframe();\n      },\n    });\n    this.sub('*currentActivity', (val) => {\n      if (val !== this.activityType) {\n        this.unmountIframe();\n      }\n    });\n    this.sub('selectedList', (list) => {\n      this.$.counter = list.length;\n    });\n    this.subConfigValue('multiple', (multiple) => {\n      this.$.multiple = multiple;\n    });\n  }\n\n  /**\n   * @private\n   * @param {SelectedFileMessage} message\n   */\n  extractUrlFromMessage(message) {\n    if (message.alternatives) {\n      const preferredTypes = stringToArray(this.cfg.externalSourcesPreferredTypes);\n      for (const preferredType of preferredTypes) {\n        const regexp = wildcardRegexp(preferredType);\n        for (const [type, typeUrl] of Object.entries(message.alternatives)) {\n          if (regexp.test(type)) {\n            return typeUrl;\n          }\n        }\n      }\n    }\n\n    return message.url;\n  }\n\n  /**\n   * @private\n   * @param {Message} message\n   */\n  sendMessage(message) {\n    this._iframe?.contentWindow?.postMessage(JSON.stringify(message), '*');\n  }\n\n  /**\n   * @private\n   * @param {SelectedFileMessage} message\n   */\n  async handleFileSelected(message) {\n    if (!this.$.multiple && this.$.selectedList.length) {\n      return;\n    }\n\n    this.$.selectedList = [...this.$.selectedList, message];\n\n    if (!this.$.multiple) {\n      this.$.onDone();\n    }\n  }\n\n  /** @private */\n  handleIframeLoad() {\n    this.applyStyles();\n  }\n\n  /**\n   * @private\n   * @param {string} propName\n   */\n  getCssValue(propName) {\n    let style = window.getComputedStyle(this);\n    return style.getPropertyValue(propName).trim();\n  }\n\n  /** @private */\n  applyStyles() {\n    let colors = {\n      backgroundColor: this.getCssValue('--clr-background-light'),\n      textColor: this.getCssValue('--clr-txt'),\n      shadeColor: this.getCssValue('--clr-shade-lv1'),\n      linkColor: '#157cfc',\n      linkColorHover: '#3891ff',\n    };\n\n    this.sendMessage({\n      type: 'embed-css',\n      style: buildStyles(colors),\n    });\n  }\n\n  /** @private */\n  remoteUrl() {\n    const { pubkey, remoteTabSessionKey, socialBaseUrl } = this.cfg;\n    const { externalSourceType } = this.activityParams;\n    const lang = this.l10n('social-source-lang')?.split('-')?.[0] || 'en';\n    const params = {\n      lang,\n      public_key: pubkey,\n      images_only: false.toString(),\n      pass_window_open: false,\n      session_key: remoteTabSessionKey,\n    };\n    const url = new URL(`/window3/${externalSourceType}`, socialBaseUrl);\n    url.search = queryString(params);\n    return url.toString();\n  }\n\n  /** @private */\n  mountIframe() {\n    /** @type {HTMLIFrameElement} */\n    // @ts-ignore\n    let iframe = create({\n      tag: 'iframe',\n      attributes: {\n        src: this.remoteUrl(),\n        marginheight: 0,\n        marginwidth: 0,\n        frameborder: 0,\n        allowTransparency: true,\n      },\n    });\n    iframe.addEventListener('load', this.handleIframeLoad.bind(this));\n\n    this.ref.iframeWrapper.innerHTML = '';\n    this.ref.iframeWrapper.appendChild(iframe);\n\n    registerMessage('file-selected', iframe.contentWindow, this.handleFileSelected.bind(this));\n\n    this._iframe = iframe;\n    this.$.selectedList = [];\n  }\n\n  /** @private */\n  unmountIframe() {\n    this._iframe && unregisterMessage('file-selected', this._iframe.contentWindow);\n    this.ref.iframeWrapper.innerHTML = '';\n    this._iframe = null;\n    this.$.selectedList = [];\n    this.$.counter = 0;\n  }\n}\n\nExternalSource.template = /* HTML */ `\n  <lr-activity-header>\n    <button type=\"button\" class=\"mini-btn\" set=\"onclick: *historyBack\">\n      <lr-icon name=\"back\"></lr-icon>\n    </button>\n    <div>\n      <lr-icon set=\"@name: activityIcon\"></lr-icon>\n      <span>{{activityCaption}}</span>\n    </div>\n    <button type=\"button\" class=\"mini-btn close-btn\" set=\"onclick: *historyBack\">\n      <lr-icon name=\"close\"></lr-icon>\n    </button>\n  </lr-activity-header>\n  <div class=\"content\">\n    <div ref=\"iframeWrapper\" class=\"iframe-wrapper\"></div>\n    <div class=\"toolbar\">\n      <button type=\"button\" class=\"cancel-btn secondary-btn\" set=\"onclick: onCancel\" l10n=\"cancel\"></button>\n      <div></div>\n      <div set=\"@hidden: !multiple\" class=\"selected-counter\"><span l10n=\"selected-count\"></span>{{counter}}</div>\n      <button type=\"button\" class=\"done-btn primary-btn\" set=\"onclick: onDone; @disabled: !counter\">\n        <lr-icon name=\"check\"></lr-icon>\n      </button>\n    </div>\n  </div>\n`;\n","/**\n * @param {{ [key: string]: string | number | boolean | null | undefined }} params\n * @returns {string}\n */\nexport function queryString(params) {\n  let list = [];\n  for (let [key, value] of Object.entries(params)) {\n    if (value === undefined || value === null || (typeof value === 'string' && value.length === 0)) {\n      continue;\n    }\n    list.push(`${key}=${encodeURIComponent(value)}`);\n  }\n  return list.join('&');\n}\n","import { Block } from '../../abstract/Block.js';\nimport { create } from '@symbiotejs/symbiote';\nimport { stringToArray } from '../../utils/stringToArray.js';\n\nexport class Tabs extends Block {\n  /** @param {String} tabL10nStr */\n  setCurrentTab(tabL10nStr) {\n    if (!tabL10nStr) {\n      return;\n    }\n    let ctxList = [...this.ref.context.querySelectorAll('[tab-ctx]')];\n    ctxList.forEach((ctxEl) => {\n      if (ctxEl.getAttribute('tab-ctx') === tabL10nStr) {\n        ctxEl.removeAttribute('hidden');\n      } else {\n        ctxEl.setAttribute('hidden', '');\n      }\n    });\n    for (let lStr in this._tabMap) {\n      if (lStr === tabL10nStr) {\n        this._tabMap[lStr].setAttribute('current', '');\n      } else {\n        this._tabMap[lStr].removeAttribute('current');\n      }\n    }\n  }\n\n  initCallback() {\n    super.initCallback();\n    /**\n     * @private\n     * @type {Object<string, HTMLElement>}\n     */\n    this._tabMap = {};\n    this.defineAccessor('tab-list', (/** @type {String} */ val) => {\n      if (!val) {\n        return;\n      }\n      let tabList = stringToArray(val);\n      tabList.forEach((tabL10nStr) => {\n        let tabEl = create({\n          tag: 'div',\n          attributes: {\n            class: 'tab',\n          },\n          properties: {\n            onclick: () => {\n              this.setCurrentTab(tabL10nStr);\n            },\n          },\n        });\n        tabEl.textContent = this.l10n(tabL10nStr);\n        this.ref.row.appendChild(tabEl);\n        this._tabMap[tabL10nStr] = tabEl;\n      });\n    });\n\n    this.defineAccessor('default', (val) => {\n      this.setCurrentTab(val);\n    });\n\n    if (!this.hasAttribute('default')) {\n      this.setCurrentTab(Object.keys(this._tabMap)[0]);\n    }\n  }\n}\n\nTabs.bindAttributes({\n  'tab-list': null,\n  default: null,\n});\n\nTabs.template = /* HTML */ `\n  <div ref=\"row\" class=\"tabs-row\"></div>\n  <div ref=\"context\" class=\"tabs-context\">\n    <slot></slot>\n  </div>\n`;\n","// @ts-check\nimport { applyStyles } from '@symbiotejs/symbiote';\nimport { UploaderBlock } from '../../abstract/UploaderBlock.js';\n\nexport class FormInput extends UploaderBlock {\n  requireCtxName = true;\n\n  _createValidationInput() {\n    const validationInput = document.createElement('input');\n    validationInput.type = 'text';\n    validationInput.name = this.ctxName;\n    validationInput.required = this.cfg.multipleMin > 0;\n    validationInput.tabIndex = -1;\n    applyStyles(validationInput, {\n      opacity: 0,\n      height: 0,\n      width: 0,\n    });\n    return validationInput;\n  }\n\n  initCallback() {\n    super.initCallback();\n\n    this._validationInputElement = this._createValidationInput();\n    this.appendChild(this._validationInputElement);\n\n    this.sub(\n      '*collectionState',\n      (/** @type {import('../../types/index.js').OutputCollectionState} */ collectionState) => {\n        {\n          if (!this._dynamicInputsContainer) {\n            this._dynamicInputsContainer = document.createElement('div');\n            this.appendChild(this._dynamicInputsContainer);\n          }\n          if (!this._validationInputElement) {\n            const input = this._createValidationInput();\n            this.appendChild(input);\n            this._validationInputElement = input;\n          }\n\n          this._dynamicInputsContainer.innerHTML = '';\n\n          if (collectionState.status === 'uploading' || collectionState.status === 'idle') {\n            this._validationInputElement.value = '';\n            this._validationInputElement.setCustomValidity('');\n            return;\n          }\n\n          if (collectionState.status === 'failed') {\n            const errorMsg = collectionState.errors[0]?.message;\n            this._validationInputElement.value = '';\n            this._validationInputElement.setCustomValidity(errorMsg);\n            return;\n          }\n\n          const group = collectionState.group ? collectionState.group : null;\n          if (group) {\n            this._validationInputElement.value = group.cdnUrl;\n            this._validationInputElement.setCustomValidity('');\n            return;\n          }\n\n          const cdnUrls = collectionState.allEntries.map((entry) => entry.cdnUrl);\n\n          if (!this.cfg.multiple && cdnUrls.length === 1) {\n            this._validationInputElement.value = cdnUrls[0];\n            this._validationInputElement.setCustomValidity('');\n            return;\n          }\n\n          // Remove validation input to prevent it from being submitted\n          this._validationInputElement.remove();\n          this._validationInputElement = null;\n\n          const fr = new DocumentFragment();\n\n          for (let value of cdnUrls) {\n            const input = document.createElement('input');\n            input.type = 'hidden';\n            input.name = `${this.ctxName}[]`;\n            input.value = value;\n            fr.appendChild(input);\n          }\n\n          this._dynamicInputsContainer.replaceChildren(fr);\n        }\n      },\n      false,\n    );\n  }\n}\n","import { ActivityBlock } from '../../abstract/ActivityBlock.js';\n\nexport class ActivityHeader extends ActivityBlock {}\n","import { Block } from '../../abstract/Block.js';\n\nexport class Select extends Block {\n  init$ = {\n    ...this.init$,\n    currentText: '',\n    options: [],\n    selectHtml: '',\n    onSelect: (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      this.value = this.ref.select.value;\n      this.$.currentText =\n        this.$.options.find((opt) => {\n          return opt.value == this.value;\n        })?.text || '';\n      this.dispatchEvent(new Event('change'));\n    },\n  };\n\n  initCallback() {\n    super.initCallback();\n\n    this.sub('options', (/** @type {{ text: String; value: String }[]} */ options) => {\n      this.$.currentText = options?.[0]?.text || '';\n      let html = '';\n      options?.forEach((opt) => {\n        html += /* HTML */ `<option value=\"${opt.value}\">${opt.text}</option>`;\n      });\n      this.$.selectHtml = html;\n    });\n  }\n}\n\nSelect.template = /* HTML */ `\n  <button>\n    {{currentText}}\n    <lr-icon name=\"select\"></lr-icon>\n    <select ref=\"select\" set=\"innerHTML: selectHtml; onchange: onSelect\"></select>\n  </button>\n`;\n","import { Block } from '../../abstract/Block.js';\n\n/** @enum {String} */\nconst ICO_MAP = {\n  PLAY: 'play',\n  PAUSE: 'pause',\n  FS_ON: 'fullscreen-on',\n  FS_OFF: 'fullscreen-off',\n  VOL_ON: 'unmute',\n  VOL_OFF: 'mute',\n  CAP_ON: 'captions',\n  CAP_OFF: 'captions-off',\n};\n\n// TODO: refactor and move fullscreen adapter to utils:\nconst FSAPI = {\n  requestFullscreen: (el) => {\n    if (el.requestFullscreen) {\n      el.requestFullscreen();\n    } else if (el.webkitRequestFullscreen) {\n      el.webkitRequestFullscreen();\n    }\n  },\n  exitFullscreen: () => {\n    if (document.exitFullscreen) {\n      document.exitFullscreen();\n    } else if (document['webkitExitFullscreen']) {\n      document['webkitExitFullscreen']();\n    }\n  },\n};\n\nexport class Video extends Block {\n  togglePlay() {\n    if (this._video.paused || this._video.ended) {\n      this._video.play();\n    } else {\n      this._video.pause();\n    }\n  }\n\n  toggleFullscreen() {\n    if ((document.fullscreenElement || document['webkitFullscreenElement']) === this) {\n      FSAPI.exitFullscreen();\n    } else {\n      FSAPI.requestFullscreen(this);\n    }\n  }\n\n  toggleCaptions() {\n    if (this.$.capIcon === ICO_MAP.CAP_OFF) {\n      this.$.capIcon = ICO_MAP.CAP_ON;\n      this._video.textTracks[0].mode = 'showing';\n      window.localStorage.setItem(Video.is + ':captions', '1');\n    } else {\n      this.$.capIcon = ICO_MAP.CAP_OFF;\n      this._video.textTracks[0].mode = 'hidden';\n      window.localStorage.removeItem(Video.is + ':captions');\n    }\n  }\n\n  toggleSound() {\n    if (this.$.volIcon === ICO_MAP.VOL_ON) {\n      this.$.volIcon = ICO_MAP.VOL_OFF;\n      this.$.volumeDisabled = true;\n      this._video.muted = true;\n    } else {\n      this.$.volIcon = ICO_MAP.VOL_ON;\n      this.$.volumeDisabled = false;\n      this._video.muted = false;\n    }\n  }\n\n  setVolume(val) {\n    window.localStorage.setItem(Video.is + ':volume', val);\n    let volume = val ? val / 100 : 0;\n    this._video.volume = volume;\n  }\n\n  /** @type {HTMLElement} */\n  get progress() {\n    return this.ref.progress;\n  }\n\n  init$ = {\n    ...this.init$,\n    src: '',\n    ppIcon: ICO_MAP.PLAY,\n    fsIcon: ICO_MAP.FS_ON,\n    volIcon: ICO_MAP.VOL_ON,\n    capIcon: ICO_MAP.CAP_OFF,\n    totalTime: '00:00',\n    currentTime: '00:00',\n    progressCssWidth: '0',\n    hasSubtitles: false,\n    volumeDisabled: false,\n    volumeValue: 0,\n    onPP: () => {\n      this.togglePlay();\n    },\n    onFs: () => {\n      this.toggleFullscreen();\n    },\n    onCap: () => {\n      this.toggleCaptions();\n    },\n    onMute: () => {\n      this.toggleSound();\n    },\n    onVolChange: (e) => {\n      // TODO: cast range.value instead of range.$.value\n      let val = parseFloat(e.currentTarget.$.value);\n      this.setVolume(val);\n    },\n    progressClicked: (e) => {\n      let progressRect = this.progress.getBoundingClientRect();\n      this._video.currentTime = this._video.duration * (e.offsetX / progressRect.width);\n    },\n  };\n\n  /**\n   * @private\n   * @param {String} input\n   */\n  _getUrl(input) {\n    return input.includes('/') ? input : `https://ucarecdn.com/${input}/`;\n  }\n\n  /**\n   * @private\n   * @param {Object<string, any>} desc\n   */\n  _desc2attrs(desc) {\n    let attrs = [];\n    for (let attr in desc) {\n      let val = attr === 'src' ? this._getUrl(desc[attr]) : desc[attr];\n      attrs.push(`${attr}=\"${val}\"`);\n    }\n    return attrs.join(' ');\n  }\n\n  /**\n   * @private\n   * @param {Number} seconds\n   */\n  _timeFmt(seconds) {\n    // TODO: add hours\n    let date = new Date(Math.round(seconds) * 1000);\n    return [date.getMinutes(), date.getSeconds()]\n      .map((n) => {\n        return n < 10 ? '0' + n : n;\n      })\n      .join(':');\n  }\n\n  /** @private */\n  _initTracks() {\n    [...this._video.textTracks].forEach((track) => {\n      track.mode = 'hidden';\n    });\n    if (window.localStorage.getItem(Video.is + ':captions')) {\n      this.toggleCaptions();\n    }\n  }\n\n  /** @private */\n  _castAttributes() {\n    let toCast = ['autoplay', 'loop', 'muted'];\n    [...this.attributes].forEach((attr) => {\n      if (toCast.includes(attr.name)) {\n        this._video.setAttribute(attr.name, attr.value);\n      }\n    });\n  }\n\n  initCallback() {\n    super.initCallback();\n    /**\n     * @private\n     * @type {HTMLVideoElement}\n     */\n    this._video = this.ref.video;\n\n    this._castAttributes();\n\n    this._video.addEventListener('play', () => {\n      this.$.ppIcon = ICO_MAP.PAUSE;\n      this.setAttribute('playback', '');\n    });\n\n    this._video.addEventListener('pause', () => {\n      this.$.ppIcon = ICO_MAP.PLAY;\n      this.removeAttribute('playback');\n    });\n\n    this.addEventListener('fullscreenchange', (e) => {\n      console.log(e);\n      if (document.fullscreenElement === this) {\n        this.$.fsIcon = ICO_MAP.FS_OFF;\n      } else {\n        this.$.fsIcon = ICO_MAP.FS_ON;\n      }\n    });\n\n    this.sub('src', (src) => {\n      if (!src) {\n        return;\n      }\n      let url = this._getUrl(src);\n      this._video.src = url;\n    });\n\n    this.sub('video', async (descPath) => {\n      if (!descPath) {\n        return;\n      }\n      let desc = await (await window.fetch(this._getUrl(descPath))).json();\n\n      if (desc.poster) {\n        this._video.poster = this._getUrl(desc.poster);\n      }\n\n      let html = '';\n      desc?.sources.forEach((srcDesc) => {\n        html += /* HTML */ `<source ${this._desc2attrs(srcDesc)} />`;\n      });\n\n      if (desc.tracks) {\n        desc.tracks.forEach((trackDesc) => {\n          html += /* HTML */ `<track ${this._desc2attrs(trackDesc)} />`;\n        });\n        this.$.hasSubtitles = true;\n      }\n\n      this._video.innerHTML += html;\n\n      this._initTracks();\n      console.log(desc);\n    });\n\n    this._video.addEventListener('loadedmetadata', (e) => {\n      this.$.currentTime = this._timeFmt(this._video.currentTime);\n      this.$.totalTime = this._timeFmt(this._video.duration);\n    });\n\n    this._video.addEventListener('timeupdate', (e) => {\n      let perc = Math.round(100 * (this._video.currentTime / this._video.duration));\n      this.$.progressCssWidth = perc + '%';\n      this.$.currentTime = this._timeFmt(this._video.currentTime);\n    });\n\n    let volume = window.localStorage.getItem(Video.is + ':volume');\n    if (volume) {\n      let vol = parseFloat(volume);\n      this.setVolume(vol);\n      this.$.volumeValue = vol;\n    }\n  }\n}\n\nVideo.template = /* HTML */ `\n  <div class=\"video-wrapper\">\n    <video ref=\"video\" preload=\"metadata\" crossorigin=\"anonymous\"></video>\n  </div>\n\n  <div class=\"toolbar\">\n    <div class=\"progress\" ref=\"progress\" set -onclick=\"progressClicked\">\n      <div class=\"bar\" set -style.width=\"progressCssWidth\"></div>\n    </div>\n\n    <div class=\"tb-block\">\n      <button set -onclick=\"onPP\">\n        <lr-icon set -@name=\"ppIcon\"></lr-icon>\n      </button>\n      <div class=\"timer\">{{currentTime}} / {{totalTime}}</div>\n    </div>\n\n    <div class=\"tb-block\">\n      <button set -onclick=\"onCap\" -@hidden=\"!hasSubtitles\">\n        <lr-icon set -@name=\"capIcon\"></lr-icon>\n      </button>\n\n      <button set -onclick=\"onMute\">\n        <lr-icon set -@name=\"volIcon\"></lr-icon>\n      </button>\n\n      <lr-range type=\"range\" set -onchange=\"onVolChange\" -@disabled=\"volumeDisabled\" -value=\"volumeValue\"> </lr-range>\n\n      <button set -onclick=\"onFs\">\n        <lr-icon set -@name=\"fsIcon\"></lr-icon>\n      </button>\n    </div>\n  </div>\n`;\n\nVideo.bindAttributes({\n  video: 'video',\n  src: 'src',\n});\n","import { Block } from '../../abstract/Block.js';\n\nexport class Copyright extends Block {\n  initCallback() {\n    super.initCallback();\n\n    this.subConfigValue(\n      'removeCopyright',\n      /** @param {number} value */\n      (value) => {\n        this.toggleAttribute('hidden', !!value);\n      },\n    );\n  }\n\n  static template = /* HTML */ `\n    <a\n      href=\"https://uploadcare.com/?utm_source=copyright&utm_medium=referral&utm_campaign=v4\"\n      target=\"_blank noopener\"\n      class=\"credits\"\n      >Powered by Uploadcare</a\n    >\n  `;\n}\n","export default \"<svg width='0' height='0' style='position:absolute'><symbol viewBox='0 0 24 24' id='uc-icon-about' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M11.152 14.12v.1h1.523v-.1c.007-.409.053-.752.138-1.028.086-.277.22-.517.405-.72.188-.202.434-.397.735-.586.32-.191.593-.412.82-.66.232-.249.41-.531.533-.847.125-.32.187-.678.187-1.076 0-.579-.137-1.085-.41-1.518a2.717 2.717 0 0 0-1.14-1.018c-.49-.245-1.062-.367-1.715-.367-.597 0-1.142.114-1.636.34-.49.228-.884.564-1.182 1.008-.299.44-.46.98-.485 1.619h1.62c.024-.377.118-.684.282-.922a1.48 1.48 0 0 1 .617-.532c.25-.114.51-.17.784-.17.301 0 .575.063.82.191.248.124.447.302.597.533.149.23.223.504.223.82 0 .263-.05.502-.149.72a1.91 1.91 0 0 1-.405.574 3.48 3.48 0 0 1-.575.453 4.22 4.22 0 0 0-.847.66c-.234.242-.415.558-.543.949-.125.39-.19.916-.197 1.577Zm.053 3.03c.21.206.46.31.75.31.196 0 .374-.049.534-.144a1.1 1.1 0 0 0 .383-.384c.1-.163.15-.343.15-.538a1 1 0 0 0-.32-.746 1.019 1.019 0 0 0-.746-.314c-.291 0-.542.105-.751.314-.21.206-.314.455-.314.746 0 .295.104.547.314.756ZM24 12c0 6.627-5.373 12-12 12S0 18.627 0 12 5.373 0 12 0s12 5.373 12 12Zm-1.5 0c0 5.799-4.701 10.5-10.5 10.5S1.5 17.799 1.5 12 6.201 1.5 12 1.5 22.5 6.201 22.5 12Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-add' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M12.75 21a.75.75 0 0 1-1.5 0v-8.25H3a.75.75 0 0 1 0-1.5h8.25V3a.75.75 0 0 1 1.5 0v8.25H21a.75.75 0 0 1 0 1.5h-8.25V21Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-arrow-down' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M11.5 23.03a.75.75 0 0 0 .999 0l9.29-8.276a.75.75 0 0 0-.998-1.12l-8.042 7.164V1.53a.75.75 0 0 0-1.5 0v19.267l-8.04-7.163a.75.75 0 0 0-.998 1.12z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-back' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M20.251 12a.75.75 0 0 1-.75.75H6.067l5.72 5.85a.75.75 0 1 1-1.072 1.05L4.136 12.92a1.292 1.292 0 0 1 0-1.842l6.579-6.728a.75.75 0 1 1 1.072 1.048l-5.72 5.851H19.5a.75.75 0 0 1 .75.75Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-badge-error' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M13.6 18.4a1.6 1.6 0 1 1-3.2 0 1.6 1.6 0 0 1 3.2 0zM12 4.5A1.5 1.5 0 0 1 13.5 6v7a1.5 1.5 0 0 1-3 0V6A1.5 1.5 0 0 1 12 4.5z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-badge-success' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='m10.5 18.204 7.6-8.183a1.5 1.5 0 0 0-2.2-2.042l-5.4 5.817-2.4-2.586a1.5 1.5 0 1 0-2.2 2.041l4.6 4.953Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-box' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M1.01 4.148a.75.75 0 0 1 .75.75v4.348a4.437 4.437 0 0 1 2.988-1.153c1.734 0 3.23.992 3.978 2.438a4.478 4.478 0 0 1 3.978-2.438c2.49 0 4.488 2.044 4.488 4.543 0 2.5-1.999 4.544-4.488 4.544a4.478 4.478 0 0 1-3.978-2.438 4.478 4.478 0 0 1-3.978 2.438C2.26 17.18.26 15.135.26 12.636V4.898a.75.75 0 0 1 .75-.75Zm.75 8.488c0 1.692 1.348 3.044 2.988 3.044s2.989-1.352 2.989-3.044c0-1.691-1.349-3.043-2.989-3.043S1.76 10.945 1.76 12.636Zm10.944-3.043c-1.64 0-2.988 1.352-2.988 3.043 0 1.692 1.348 3.044 2.988 3.044s2.988-1.352 2.988-3.044c0-1.69-1.348-3.043-2.988-3.043Zm4.328-1.23a.75.75 0 0 1 1.052.128l2.333 2.983 2.333-2.983a.75.75 0 0 1 1.181.924l-2.562 3.277 2.562 3.276a.75.75 0 1 1-1.181.924l-2.333-2.983-2.333 2.983a.75.75 0 1 1-1.181-.924l2.562-3.276-2.562-3.277a.75.75 0 0 1 .129-1.052Z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-brightness' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M15 10a5 5 0 0 1-5 5m5-5a5 5 0 0 0-5-5m5 5h-5m0 5a5 5 0 0 1 0-10m0 10V5m0 15v-3M2.93 2.929 5.05 5.05M0 10h3m-.07 7.071 2.12-2.121M10 0v3m7.07 14.071-2.12-2.121M20 10h-3m.07-7.071L14.95 5.05m-.626 2.45H10m4.324 5H10'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-camera' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M7.65 2.55a.75.75 0 0 1 .6-.3h7.5a.75.75 0 0 1 .6.3l2.025 2.7H21a3 3 0 0 1 3 3v10.5a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V8.25a3 3 0 0 1 3-3h2.625zm.975 1.2L6.6 6.45a.75.75 0 0 1-.6.3H3a1.5 1.5 0 0 0-1.5 1.5v10.5a1.5 1.5 0 0 0 1.5 1.5h18a1.5 1.5 0 0 0 1.5-1.5V8.25a1.5 1.5 0 0 0-1.5-1.5h-3a.75.75 0 0 1-.6-.3l-2.025-2.7zm3.375 6a3.375 3.375 0 1 0 0 6.75 3.375 3.375 0 0 0 0-6.75zm-4.875 3.375a4.875 4.875 0 1 1 9.75 0 4.875 4.875 0 0 1-9.75 0z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-check' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10zm4.707-11.493L10.8 16.414l-3.507-3.507a1 1 0 1 1 1.414-1.414l2.093 2.093 4.493-4.493a1 1 0 1 1 1.414 1.414z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-close' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M4.604 4.604a.75.75 0 0 1 1.06 0L12 10.939l6.335-6.335a.75.75 0 1 1 1.061 1.06L13.061 12l6.335 6.335a.75.75 0 1 1-1.06 1.061L12 13.061l-6.335 6.335a.75.75 0 0 1-1.061-1.06L10.939 12 4.604 5.665a.75.75 0 0 1 0-1.061z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-closeMax' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='m3 3 14 14m0-14L3 17'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-collapse' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M3.116 12a.75.75 0 0 1 .75-.75h16.268a.75.75 0 0 1 0 1.5H3.866a.75.75 0 0 1-.75-.75Z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-contrast' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M2 10a8 8 0 1 0 16 0 8 8 0 1 0-16 0m8-8v16m8-8h-8m7.598 2.5H10m6.24 2.5H10m7.6-7.5H10M16.242 5H10'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-crop' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M20 14H7.005C6.45 14 6 13.55 6 12.995V0M0 6h13.067c.515 0 .933.418.933.933V20M14.5.4 13 2l1.5 1.6M13 2h2a3 3 0 0 1 3 3v2M5.5 19.6 7 18l-1.5-1.6M7 18H5a3 3 0 0 1-3-3v-2'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-default' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M11.501.392a.75.75 0 0 1 .998 0l6.704 5.972a.75.75 0 0 1-.998 1.12l-5.455-4.86v13.439a.75.75 0 0 1-1.5 0V2.625l-5.454 4.86a.75.75 0 1 1-.998-1.12zM.857 16.73a.75.75 0 0 1 .75.75v4.914h20.786v-4.914a.75.75 0 0 1 1.5 0v5.664a.75.75 0 0 1-.75.75H.857a.75.75 0 0 1-.75-.75v-5.664a.75.75 0 0 1 .75-.75z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-detail' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M5 3c-1.11 0-2 .89-2 2v14c0 1.11.89 2 2 2h14c1.11 0 2-.89 2-2V5c0-1.11-.89-2-2-2H5m0 2h14v14H5V5m2 2v2h10V7H7m0 4v2h10v-2H7m0 4v2h7v-2H7Z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-done' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='m1 10.632 5.684 5.684L19 4'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-dots' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M16 12a2 2 0 0 1 2-2 2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2m-6 0a2 2 0 0 1 2-2 2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2m-6 0a2 2 0 0 1 2-2 2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-dropbox' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M6.019 1.92a.75.75 0 0 1 .806 0L12 5.219l5.176-3.297a.75.75 0 0 1 .806 0l5.577 3.553a.75.75 0 0 1 0 1.265l-4.574 2.914 4.574 2.914a.75.75 0 0 1 0 1.265l-5.577 3.554a.75.75 0 0 1-.806 0L12 14.089l-5.175 3.297a.75.75 0 0 1-.806 0L.44 13.833a.75.75 0 0 1 0-1.266l4.575-2.914L.44 6.74a.75.75 0 0 1 0-1.265zm.403 8.616L2.24 13.2l4.182 2.664 4.181-2.664zm6.975 2.664 4.182 2.664L21.76 13.2l-4.181-2.664zm2.776-3.547L12 12.311 7.828 9.653 12 6.995zm1.406-.882 4.181-2.664-4.181-2.664-4.182 2.664zm-6.976-2.664L6.422 3.443 2.24 6.107 6.422 8.77zM5.791 18.544a.75.75 0 0 1 1.035-.23l5.175 3.297 5.175-3.297a.75.75 0 1 1 .806 1.265l-5.578 3.554a.75.75 0 0 1-.806 0L6.02 19.579a.75.75 0 0 1-.23-1.035z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-edit' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M3.964 14.48a1.123 1.123 0 0 0-.302.55l-1.134 5.103a1.123 1.123 0 0 0 1.339 1.34l5.103-1.135c.209-.046.4-.15.55-.302l8.051-8.05-5.557-5.557-8.05 8.05Zm9.465-9.466 5.557 5.557 2.02-2.02a1.684 1.684 0 0 0 0-2.382l-3.175-3.176a1.684 1.684 0 0 0-2.381 0l-2.021 2.021Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-edit-brightness' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M12 18a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-2.69L23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-edit-color' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M17.5 12a1.5 1.5 0 0 1-1.5-1.5A1.5 1.5 0 0 1 17.5 9a1.5 1.5 0 0 1 1.5 1.5 1.5 1.5 0 0 1-1.5 1.5m-3-4A1.5 1.5 0 0 1 13 6.5 1.5 1.5 0 0 1 14.5 5 1.5 1.5 0 0 1 16 6.5 1.5 1.5 0 0 1 14.5 8m-5 0A1.5 1.5 0 0 1 8 6.5 1.5 1.5 0 0 1 9.5 5 1.5 1.5 0 0 1 11 6.5 1.5 1.5 0 0 1 9.5 8m-3 4A1.5 1.5 0 0 1 5 10.5 1.5 1.5 0 0 1 6.5 9 1.5 1.5 0 0 1 8 10.5 1.5 1.5 0 0 1 6.5 12M12 3a9 9 0 0 0-9 9 9 9 0 0 0 9 9 1.5 1.5 0 0 0 1.5-1.5c0-.39-.15-.74-.39-1-.23-.27-.38-.62-.38-1a1.5 1.5 0 0 1 1.5-1.5H16a5 5 0 0 0 5-5c0-4.42-4.03-8-9-8Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-edit-contrast' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M12 20c-2.21 0-4.21-.9-5.66-2.34L17.66 6.34A8.014 8.014 0 0 1 20 12a8 8 0 0 1-8 8M6 8h2V6h1.5v2h2v1.5h-2v2H8v-2H6M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2m0 14h5v-1.5h-5V16Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-edit-crop' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M7 17V1H5v4H1v2h4v10a2 2 0 0 0 2 2h10v4h2v-4h4v-2m-6-2h2V7a2 2 0 0 0-2-2H9v2h8v8Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-edit-draw' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M21.88 2.163a3.739 3.739 0 0 0-5.597.195L7.72 12.525a4.824 4.824 0 0 0-4.208 1.449c-1.067 1.107-1.1 2.465-1.12 3.308l-.005.166c-.028.894-.086 1.463-.582 2.07l-.806.984.88.913c1.054 1.094 2.67 1.587 4.175 1.587 1.527 0 3.223-.506 4.446-1.775 1.147-1.19 1.613-2.82 1.396-4.368l9.797-8.888c1.67-1.515 1.756-4.18.187-5.808zM5.42 15.956a2.184 2.184 0 0 1 3.17 0 2.389 2.389 0 0 1 0 3.29c-.591.612-1.526.954-2.537.954-.523 0-.994-.09-1.384-.233.363-.916.396-1.776.416-2.43.032-1.045.072-1.308.335-1.581z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-edit-file' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M12.11 6a3.716 3.716 0 0 1 7.28 0h2.313a.75.75 0 0 1 0 1.5H19.39a3.716 3.716 0 0 1-7.278 0H2.297a.75.75 0 1 1 0-1.5zm3.64-1.465a2.215 2.215 0 1 0 0 4.43 2.215 2.215 0 0 0 0-4.43zM4.61 16.5a3.716 3.716 0 0 1 7.28 0h9.813a.75.75 0 0 1 0 1.5H11.89a3.716 3.716 0 0 1-7.278 0H2.297a.75.75 0 0 1 0-1.5zm3.64-1.465a2.215 2.215 0 1 0 0 4.43 2.215 2.215 0 0 0 0-4.43z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-edit-flip-h' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M15 21h2v-2h-2m4-10h2V7h-2M3 5v14c0 1.1.9 2 2 2h4v-2H5V5h4V3H5c-1.1 0-2 .9-2 2m16-2v2h2c0-1.1-.9-2-2-2m-8 20h2V1h-2m8 16h2v-2h-2M15 5h2V3h-2m4 10h2v-2h-2m0 10c1.1 0 2-.9 2-2h-2Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-edit-flip-v' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M3 15v2h2v-2m10 4v2h2v-2m2-16H5c-1.1 0-2 .9-2 2v4h2V5h14v4h2V5c0-1.1-.9-2-2-2m2 16h-2v2c1.1 0 2-.9 2-2M1 11v2h22v-2M7 19v2h2v-2m10-4v2h2v-2m-10 4v2h2v-2M3 19c0 1.1.9 2 2 2v-2Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-edit-guides' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='m1.39 18.36 1.77-1.76L4.58 18l1.06-1.05-1.42-1.41 1.42-1.42 2.47 2.48 1.06-1.06-2.47-2.48 1.41-1.41 1.42 1.41L10.59 12l-1.42-1.41 1.42-1.42 2.47 2.48 1.06-1.06-2.47-2.48 1.41-1.41 1.41 1.41 1.07-1.06-1.42-1.41 1.42-1.42L18 6.7l1.07-1.06-2.47-2.48 1.76-1.77 4.25 4.25L5.64 22.61l-4.25-4.25Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-edit-resize' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='m10.59 12 4-4H11V6h7v7h-2V9.41l-4 4V16h8V4H8v8h2.59M22 2v16H12v4H2V12h4V2h16M10 14H4v6h6v-6Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-edit-rotate' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='m16.89 15.5 1.42 1.39c.9-1.16 1.45-2.5 1.62-3.89h-2.02c-.14.87-.48 1.72-1.02 2.5M13 17.9v2.02c1.39-.17 2.74-.71 3.9-1.61l-1.44-1.44c-.75.54-1.59.89-2.46 1.03m6.93-6.9a7.906 7.906 0 0 0-1.62-3.89l-1.42 1.42c.54.75.88 1.6 1.02 2.47m-2.36-5.45L11 1v3.07C7.06 4.56 4 7.92 4 12s3.05 7.44 7 7.93v-2.02c-2.84-.48-5-2.94-5-5.91s2.16-5.43 5-5.91V10l4.55-4.45Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-edit-saturation' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M3 13a9 9 0 0 0 9 9c0-5-4.03-9-9-9m9-7.5A2.5 2.5 0 0 1 14.5 8a2.5 2.5 0 0 1-2.5 2.5A2.5 2.5 0 0 1 9.5 8 2.5 2.5 0 0 1 12 5.5m-6.4 4.75a2.5 2.5 0 0 0 2.5 2.5c.53 0 1.02-.17 1.4-.44v.19A2.5 2.5 0 0 0 12 15a2.5 2.5 0 0 0 2.5-2.5v-.19c.38.27.87.44 1.4.44a2.5 2.5 0 0 0 2.5-2.5c0-1-.59-1.85-1.43-2.25.84-.4 1.43-1.26 1.43-2.25a2.5 2.5 0 0 0-2.5-2.5c-.53 0-1.02.16-1.4.44V3.5A2.5 2.5 0 0 0 12 1a2.5 2.5 0 0 0-2.5 2.5v.19c-.38-.28-.87-.44-1.4-.44a2.5 2.5 0 0 0-2.5 2.5c0 .99.59 1.85 1.43 2.25-.84.4-1.43 1.25-1.43 2.25M12 22a9 9 0 0 0 9-9c-5 0-9 4-9 9Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-edit-text' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='m18.5 4 1.16 4.35-.96.26c-.45-.87-.91-1.74-1.44-2.18C16.73 6 16.11 6 15.5 6H13v10.5c0 .5 0 1 .33 1.25.34.25 1 .25 1.67.25v1H9v-1c.67 0 1.33 0 1.67-.25.33-.25.33-.75.33-1.25V6H8.5c-.61 0-1.23 0-1.76.43-.53.44-.99 1.31-1.44 2.18l-.96-.26L5.5 4h13Z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-enhance' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M19 13h-2m0 0a4 4 0 0 1-4-4m4 4a4 4 0 0 0-4 4m0-8V7m0 2a4 4 0 0 1-4 4m-2 0h2m0 0a4 4 0 0 1 4 4m0 0v2M8 8.5H6.5m0 0a2 2 0 0 1-2-2m2 2a2 2 0 0 0-2 2m0-4V5m0 1.5a2 2 0 0 1-2 2M1 8.5h1.5m0 0a2 2 0 0 1 2 2m0 0V12M12 3h-1m0 0a1 1 0 0 1-1-1m1 1a1 1 0 0 0-1 1m0-2V1m0 1a1 1 0 0 1-1 1M8 3h1m0 0a1 1 0 0 1 1 1m0 0v1'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-error' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M13 13h-2V7h2m0 10h-2v-2h2M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-evernote' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M9.804 2.27v-.048c.055-.263.313-.562.85-.562h.44c.142 0 .325.014.526.033.066.009.124.023.267.06l.13.032h.002c.319.079.515.275.644.482a1.461 1.461 0 0 1 .16.356l.004.012a.75.75 0 0 0 .603.577l1.191.207a1988.512 1988.512 0 0 0 2.332.402c.512.083 1.1.178 1.665.442.64.3 1.19.795 1.376 1.77.548 2.931.657 5.829.621 8a39.233 39.233 0 0 1-.125 2.602 17.518 17.518 0 0 1-.092.849.735.735 0 0 0-.024.112c-.378 2.705-1.269 3.796-2.04 4.27-.746.457-1.53.451-2.217.447h-.192c-.46 0-1.073-.23-1.581-.635-.518-.412-.763-.87-.763-1.217 0-.45.188-.688.355-.786.161-.095.436-.137.796.087a.75.75 0 1 0 .792-1.274c-.766-.476-1.64-.52-2.345-.108-.7.409-1.098 1.188-1.098 2.08 0 .996.634 1.84 1.329 2.392.704.56 1.638.96 2.515.96l.185.002c.667.009 1.874.025 3.007-.67 1.283-.786 2.314-2.358 2.733-5.276a4.213 4.213 0 0 0 .056-.335c.023-.184.051-.445.079-.772.055-.655.111-1.585.13-2.704.037-2.234-.074-5.239-.647-8.301v-.002c-.294-1.544-1.233-2.391-2.215-2.85-.777-.363-1.623-.496-2.129-.576a8.872 8.872 0 0 1-.25-.041l-.006-.001-1.99-.345-.761-.132a2.93 2.93 0 0 0-.182-.338A2.532 2.532 0 0 0 12.379.329l-.091-.023a3.967 3.967 0 0 0-.493-.103L11.769.2a7.846 7.846 0 0 0-.675-.04h-.44c-.733 0-1.368.284-1.795.742L2.416 7.431c-.468.428-.751 1.071-.751 1.81 0 .02 0 .041.003.062l.003.034c.017.21.038.468.096.796.107.715.275 1.47.391 1.994.029.13.055.245.075.342l.002.008c.258 1.141.641 1.94.978 2.466.168.263.323.456.444.589a2.808 2.808 0 0 0 .192.194c1.536 1.562 3.713 2.196 5.731 2.08.13-.005.35-.032.537-.073a2.627 2.627 0 0 0 .652-.24c.425-.26.75-.661.992-1.046.184-.294.342-.61.473-.915a3.8 3.8 0 0 0 .627.493 5.022 5.022 0 0 0 1.97.709l.023.002.018.003.11.016c.088.014.205.035.325.058l.056.014c.088.022.164.04.235.061a1.736 1.736 0 0 1 .145.048l.03.014c.765.34 1.302 1.09 1.302 1.871a.75.75 0 0 0 1.5 0c0-1.456-.964-2.69-2.18-3.235a3.595 3.595 0 0 0-.679-.217l-.063-.015a10.616 10.616 0 0 0-.606-.105l-.02-.003-.03-.003h-.002a3.542 3.542 0 0 1-1.331-.485c-.471-.298-.788-.692-.828-1.234a.75.75 0 0 0-1.48-.106l-.001.003-.004.017a8.23 8.23 0 0 1-.092.352 9.963 9.963 0 0 1-.298.892c-.132.34-.29.68-.47.966-.174.276-.339.454-.478.549a1.178 1.178 0 0 1-.221.072 1.949 1.949 0 0 1-.241.036h-.013l-.032.002c-1.684.1-3.423-.437-4.604-1.65a.746.746 0 0 0-.053-.05L4.84 14.6a1.348 1.348 0 0 1-.07-.073 2.99 2.99 0 0 1-.293-.392c-.242-.379-.558-1.014-.778-1.985a54.1 54.1 0 0 0-.083-.376 27.494 27.494 0 0 1-.367-1.872l-.003-.02a6.791 6.791 0 0 1-.08-.67c.004-.277.086-.475.2-.609l.067-.067a.63.63 0 0 1 .292-.145h.05c.18 0 1.095.055 2.013.115l1.207.08.534.037a.747.747 0 0 0 .052.002c.782 0 1.349-.206 1.759-.585l.005-.005c.553-.52.622-1.225.622-1.76V6.24l-.026-.565A774.97 774.97 0 0 1 9.885 4.4c-.042-.961-.081-1.939-.081-2.13ZM4.995 6.953a251.126 251.126 0 0 1 2.102.137l.508.035c.48-.004.646-.122.715-.185.07-.068.146-.209.147-.649l-.024-.548a791.69 791.69 0 0 1-.095-2.187L4.995 6.953Zm16.122 9.996Zm-5.479-5.323a.75.75 0 0 0 1.014.31 2.04 2.04 0 0 1 .304-.089 1.84 1.84 0 0 1 .544-.039c.215.023.321.06.37.085.033.016.039.026.047.04a.75.75 0 0 0 1.289-.767c-.337-.567-.906-.783-1.552-.85a3.334 3.334 0 0 0-1.002.062c-.27.056-.531.14-.705.234a.75.75 0 0 0-.31 1.014Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-expand' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='m12 8.337-8.47 8.47a.75.75 0 0 1-1.06-1.06l8.605-8.606a1.29 1.29 0 0 1 1.85 0l8.605 8.605a.75.75 0 1 1-1.06 1.06L12 8.338Z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-exposure' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M10 20v-3M2.93 2.929 5.05 5.05M0 10h3m-.07 7.071 2.12-2.121M10 0v3m7.07 14.071-2.12-2.121M20 10h-3m.07-7.071L14.95 5.05M5 10a5 5 0 1 0 10 0 5 5 0 1 0-10 0'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-external-source-placeholder' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M6.341 3.27a10.5 10.5 0 0 1 5.834-1.77.75.75 0 0 0 0-1.5 12 12 0 1 0 12 12 .75.75 0 0 0-1.5 0A10.5 10.5 0 1 1 6.34 3.27Zm14.145 1.48a.75.75 0 1 0-1.06-1.062L9.925 13.19V7.95a.75.75 0 1 0-1.5 0V15c0 .414.336.75.75.75h7.05a.75.75 0 0 0 0-1.5h-5.24l9.501-9.5Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-facebook' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M12 1.5C6.201 1.5 1.5 6.201 1.5 12c0 4.943 3.416 9.089 8.016 10.204v-6.108H7.383a.75.75 0 0 1-.75-.75v-3.281a.75.75 0 0 1 .75-.75h2.133V9.393c0-.958.225-2.511 1.38-3.65 1.194-1.177 3.174-1.718 6.254-1.056a.75.75 0 0 1 .592.733v2.754a.75.75 0 0 1-.75.75c-.692 0-1.203.026-1.584.082-.387.057-.578.137-.675.202-.109.073-.237.205-.237 1.029v1.078h2.39a.75.75 0 0 1 .742.866l-.516 3.281a.75.75 0 0 1-.74.634h-1.876v6.106C19.09 21.082 22.5 16.939 22.5 12c0-5.799-4.701-10.5-10.5-10.5zM0 12C0 5.373 5.373 0 12 0s12 5.373 12 12c0 5.995-4.395 10.961-10.138 11.856a.75.75 0 0 1-.866-.74v-7.77a.75.75 0 0 1 .75-.75h1.984l.28-1.781h-2.264a.75.75 0 0 1-.75-.75v-1.828c0-.829.089-1.729.9-2.274.363-.244.807-.37 1.293-.441a9.623 9.623 0 0 1 1.053-.086V6.04c-2.41-.405-3.645.132-4.293.771-.737.728-.933 1.793-.933 2.582v2.672a.75.75 0 0 1-.75.75H8.133v1.78h2.133a.75.75 0 0 1 .75.75v7.772a.75.75 0 0 1-.865.741C4.4 22.968 0 18 0 12z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-file' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M2.895 1.201c0-.473.383-.857.857-.857h8.4c.227 0 .445.09.606.251l8.4 8.4c.16.16.25.379.25.606v13.2a.857.857 0 0 1-.856.857h-16.8a.857.857 0 0 1-.857-.857zm1.714.857v19.886h15.085V10.458h-7.542a.857.857 0 0 1-.858-.857V2.058zm8.4 1.213 5.473 5.473H13.01z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-filters' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M4.5 6.5a5.5 5.5 0 1 0 11 0 5.5 5.5 0 1 0-11 0m-3.5 6a5.5 5.5 0 1 0 11 0 5.5 5.5 0 1 0-11 0m7 0a5.5 5.5 0 1 0 11 0 5.5 5.5 0 1 0-11 0'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-flickr' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M5.959 7.926c-2.298 0-4.14 1.834-4.14 4.073 0 2.241 1.842 4.075 4.14 4.075 2.302 0 4.145-1.834 4.145-4.075 0-2.238-1.843-4.073-4.145-4.073Zm-5.64 4.073c0-3.086 2.533-5.573 5.64-5.573 3.11 0 5.645 2.486 5.645 5.573 0 3.089-2.535 5.575-5.645 5.575-3.107 0-5.64-2.487-5.64-5.575Zm18.07-4.073c-2.301 0-4.144 1.835-4.144 4.073 0 2.24 1.843 4.075 4.145 4.075 2.299 0 4.141-1.834 4.141-4.075 0-2.239-1.842-4.073-4.141-4.073Zm-5.644 4.073c0-3.087 2.535-5.573 5.645-5.573 3.108 0 5.641 2.487 5.641 5.573 0 3.088-2.533 5.575-5.641 5.575-3.11 0-5.645-2.486-5.645-5.575Z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-flip' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M19.6 5 18 3.5 16.4 5m3.2 10L18 16.5 16.4 15M18 3.523v12.954M3.3 8.5h10.654c.301 0 .415-.395.159-.554L3.459 1.286A.3.3 0 0 0 3 1.542V8.2a.3.3 0 0 0 .3.3zm0 3h10.654c.301 0 .415.395.159.554l-10.654 6.66A.3.3 0 0 1 3 18.458v-6.66a.3.3 0 0 1 .3-.3z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-fullscreen' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M5 5h5v2H7v3H5V5m9 0h5v5h-2V7h-3V5m3 9h2v5h-5v-2h3v-3m-7 3v2H5v-5h2v3h3Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-fullscreen-exit' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M14 14h5v2h-3v3h-2v-5m-9 0h5v5H8v-3H5v-2m3-9h2v5H5V8h3V5m11 3v2h-5V5h2v3h3Z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-gamma' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M17 3C9 6 2.5 11.5 2.5 17.5m0 0h1m-1 0v-1m14 1h1m-3 0h1m-3 0h1m-3 0h1m-3 0h1m-3 0h1m-3 0h1m-3-14v-1m0 3v-1m0 3v-1m0 3v-1m0 3v-1m0 3v-1m0 3v-1'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-gdrive' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M7.736 1.818a.75.75 0 0 1 .647-.37h7.587a.75.75 0 0 1 .655.383l7.233 12.946a.75.75 0 0 1-.003.737l-3.794 6.66a.75.75 0 0 1-.651.378H4.59a.75.75 0 0 1-.651-.378l-3.794-6.66a.75.75 0 0 1 .005-.75zm.64 1.876L1.663 15.148l2.93 5.145 6.655-11.581zm3.736 6.526-2.398 4.173H14.5zm4.116 4.173h5.697L15.53 2.947H9.677zm5.685 1.5H8.852l-2.966 5.16h13.088z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-gphotos' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M12.51 0c-.702 0-1.272.57-1.272 1.273V7.35A6.381 6.381 0 0 0 0 11.489c0 .703.57 1.273 1.273 1.273H7.35A6.381 6.381 0 0 0 11.488 24c.704 0 1.274-.57 1.274-1.273V16.65A6.381 6.381 0 0 0 24 12.51c0-.703-.57-1.273-1.273-1.273H16.65A6.381 6.381 0 0 0 12.511 0Zm.252 11.232V1.53a4.857 4.857 0 0 1 0 9.702Zm-1.53.006H1.53a4.857 4.857 0 0 1 9.702 0Zm1.536 1.524a4.857 4.857 0 0 0 9.702 0h-9.702Zm-6.136 4.857c0-2.598 2.04-4.72 4.606-4.85v9.7a4.857 4.857 0 0 1-4.606-4.85Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-huddle' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M6.204 2.002c-.252.23-.357.486-.357.67V21.07c0 .15.084.505.313.812.208.28.499.477.929.477.519 0 .796-.174.956-.365.178-.212.286-.535.286-.924v-.013l.117-6.58c.004-1.725 1.419-3.883 3.867-3.883 1.33 0 2.332.581 2.987 1.364.637.762.95 1.717.95 2.526v6.47c0 .392.11.751.305.995.175.22.468.41 1.008.41.52 0 .816-.198 1.002-.437.207-.266.31-.633.31-.969V14.04c0-2.81-1.943-5.108-4.136-5.422a5.971 5.971 0 0 0-3.183.41c-.912.393-1.538.96-1.81 1.489a.75.75 0 0 1-1.417-.344v-7.5c0-.587-.47-1.031-1.242-1.031-.315 0-.638.136-.885.36ZM5.194.892A2.844 2.844 0 0 1 7.09.142c1.328 0 2.742.867 2.742 2.53v5.607a6.358 6.358 0 0 1 1.133-.629 7.47 7.47 0 0 1 3.989-.516c3.056.436 5.425 3.482 5.425 6.906v6.914c0 .602-.177 1.313-.627 1.89-.47.605-1.204 1.016-2.186 1.016-.96 0-1.698-.37-2.179-.973-.46-.575-.633-1.294-.633-1.933v-6.469c0-.456-.19-1.071-.602-1.563-.394-.471-.986-.827-1.836-.827-1.447 0-2.367 1.304-2.367 2.39v.014l-.117 6.58c-.001.64-.177 1.333-.637 1.881-.48.57-1.2.9-2.105.9-.995 0-1.7-.5-2.132-1.081-.41-.552-.61-1.217-.61-1.708V2.672c0-.707.366-1.341.847-1.78Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-info' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M11 9h2V7h-2m1 13c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0-18A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2m-1 15h2v-6h-2v6Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-instagram' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M6.225 12a5.775 5.775 0 1 1 11.55 0 5.775 5.775 0 0 1-11.55 0zM12 7.725a4.275 4.275 0 1 0 0 8.55 4.275 4.275 0 0 0 0-8.55zm6.425-.75a1.4 1.4 0 1 0 0-2.8 1.4 1.4 0 0 0 0 2.8zm-6.467-6.8h.084c2.152 0 3.823 0 5.152.132 1.35.134 2.427.41 3.362 1.013a7.15 7.15 0 0 1 2.124 2.124c.604.935.88 2.012 1.013 3.362.132 1.329.132 3 .132 5.152v.084c0 2.152 0 3.823-.132 5.152-.134 1.35-.41 2.427-1.013 3.362a7.15 7.15 0 0 1-2.124 2.124c-.935.604-2.012.88-3.362 1.013-1.329.132-3 .132-5.152.132h-.084c-2.152 0-3.824 0-5.153-.132-1.35-.134-2.427-.409-3.36-1.013a7.15 7.15 0 0 1-2.125-2.124C.716 19.62.44 18.544.307 17.194c-.132-1.329-.132-3-.132-5.152v-.084c0-2.152 0-3.823.132-5.152.133-1.35.409-2.427 1.013-3.362A7.15 7.15 0 0 1 3.444 1.32C4.378.716 5.456.44 6.805.307c1.33-.132 3-.132 5.153-.132zM6.953 1.799c-1.234.123-2.043.36-2.695.78A5.65 5.65 0 0 0 2.58 4.26c-.42.65-.657 1.46-.78 2.695C1.676 8.2 1.675 9.797 1.675 12s0 3.8.124 5.046c.123 1.235.36 2.044.78 2.696a5.649 5.649 0 0 0 1.68 1.678c.65.421 1.46.658 2.694.78 1.247.124 2.844.125 5.047.125s3.8 0 5.046-.124c1.235-.123 2.044-.36 2.695-.78a5.648 5.648 0 0 0 1.68-1.68c.42-.65.657-1.46.78-2.694.123-1.247.124-2.844.124-5.047s-.001-3.8-.125-5.046c-.122-1.235-.359-2.044-.78-2.695a5.65 5.65 0 0 0-1.679-1.68c-.651-.42-1.46-.657-2.695-.78-1.246-.123-2.843-.124-5.046-.124-2.203 0-3.8 0-5.047.124z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-local' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M3 3.75a1.5 1.5 0 0 0-1.5 1.5v13.5a1.5 1.5 0 0 0 1.5 1.5h18a1.5 1.5 0 0 0 1.5-1.5V9A1.5 1.5 0 0 0 21 7.5h-9a.75.75 0 0 1-.643-.364L9.325 3.75zm-3 1.5a3 3 0 0 1 3-3h6.75a.75.75 0 0 1 .643.364L12.425 6H21a3 3 0 0 1 3 3v9.75a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-mirror' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M5 .4 3.5 2 5 3.6M15 .4 16.5 2 15 3.6M3.52 2h12.957M8.5 16.7V6.046c0-.301-.394-.415-.554-.159L1.287 16.541a.3.3 0 0 0 .255.459H8.2a.3.3 0 0 0 .3-.3zm3 0V6.046c0-.301.395-.415.555-.159l6.659 10.654a.3.3 0 0 1-.255.459H11.8a.3.3 0 0 1-.3-.3z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-onedrive' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M13.616 4.147a7.689 7.689 0 0 0-7.642 3.285A6.299 6.299 0 0 0 1.455 17.3c.684.894 2.473 2.658 5.17 2.658h12.141c.95 0 1.882-.256 2.697-.743.815-.486 1.514-1.247 1.964-2.083a5.26 5.26 0 0 0-3.713-7.612 7.69 7.69 0 0 0-6.098-5.373ZM3.34 17.15c.674.63 1.761 1.308 3.284 1.308h12.142a3.76 3.76 0 0 0 2.915-1.383l-7.494-4.489L3.34 17.15Zm10.875-6.25 2.47-1.038a5.239 5.239 0 0 1 1.427-.389 6.19 6.19 0 0 0-10.3-1.952 6.338 6.338 0 0 1 2.118.813l4.285 2.567Zm4.55.033c-.512 0-1.019.104-1.489.307l-.006.003-1.414.594 6.521 3.906a3.76 3.76 0 0 0-3.357-4.8l-.254-.01ZM4.097 9.617A4.799 4.799 0 0 1 6.558 8.9c.9 0 1.84.25 2.587.713l3.4 2.037-10.17 4.28a4.799 4.799 0 0 1 1.721-6.312Z'/></symbol><symbol viewBox='0 0 40 40' id='uc-icon-original' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M0 40 40 0'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-remove' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M6.357 9.714c-.764 0-1.359.661-1.279 1.42l1.015 9.643c.069.655.62 1.152 1.279 1.152h9.256c.658 0 1.21-.497 1.279-1.151l1.015-9.643c.08-.76-.515-1.42-1.279-1.42zm.5-4.5v.322H4.286a1.286 1.286 0 0 0 0 2.571h15.428a1.286 1.286 0 1 0 0-2.571h-2.571v-.322A3.214 3.214 0 0 0 13.929 2H10.07a3.214 3.214 0 0 0-3.214 3.214zm7.072-.643c.355 0 .642.288.642.643v.322H9.43v-.322c0-.355.287-.643.642-.643z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-remove-file' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M11.955 3.3A2.969 2.969 0 0 0 8.998 6h5.914a2.97 2.97 0 0 0-2.957-2.7zM16.416 6a4.47 4.47 0 0 0-8.922 0h-2.32a.755.755 0 0 0-.111.008H3.075a.75.75 0 1 0 0 1.5h1.35V19.35a2.85 2.85 0 0 0 2.85 2.85h9.45a2.85 2.85 0 0 0 2.85-2.85V7.508h1.35a.75.75 0 0 0 0-1.5h-1.989A.754.754 0 0 0 18.825 6zM5.925 7.508V19.35a1.35 1.35 0 0 0 1.35 1.35h9.45a1.35 1.35 0 0 0 1.35-1.35V7.508z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-rotate' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M13.5.4 12 2l1.5 1.6M12.023 2H14.4A3.6 3.6 0 0 1 18 5.6V8M4 17h9a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-sad' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M2 17c4.418-4 11.582-4 16 0M16.5 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-11 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-saturation' xmlns='http://www.w3.org/2000/svg'><defs><linearGradient id='aouc-icon-id__a' x1='10.001' y1='1' x2='10.001' y2='19' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient></defs><circle cx='10.001' cy='10' r='9' transform='rotate(90 10 10)' fill='url(#aouc-icon-id__a)'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-select' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='m7 10 5 5 5-5H7Z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-slider' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M0 10h11m0 0a2 2 0 1 0 4 0m-4 0a2 2 0 1 1 4 0m0 0h5'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-trash-file' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M6.357 9.714c-.764 0-1.359.661-1.279 1.42l1.015 9.643c.069.655.62 1.152 1.279 1.152h9.256c.658 0 1.21-.497 1.279-1.151l1.015-9.643c.08-.76-.515-1.42-1.279-1.42zm.5-4.5v.322H4.286a1.286 1.286 0 0 0 0 2.571h15.428a1.286 1.286 0 1 0 0-2.571h-2.571v-.322A3.214 3.214 0 0 0 13.929 2H10.07a3.214 3.214 0 0 0-3.214 3.214zm7.072-.643c.355 0 .642.288.642.643v.322H9.43v-.322c0-.355.287-.643.642-.643z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-tuning' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M8 10h11M1 10h4M1 4.5h11m3 0h4m-18 11h11m3 0h4m-7-11a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0M5 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0m7 5.5a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-upload' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M11.501.392a.75.75 0 0 1 .998 0l6.704 5.972a.75.75 0 0 1-.998 1.12l-5.455-4.86v13.439a.75.75 0 0 1-1.5 0V2.625l-5.454 4.86a.75.75 0 1 1-.998-1.12zM.857 16.73a.75.75 0 0 1 .75.75v4.914h20.786v-4.914a.75.75 0 0 1 1.5 0v5.664a.75.75 0 0 1-.75.75H.857a.75.75 0 0 1-.75-.75v-5.664a.75.75 0 0 1 .75-.75z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-upload-error' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M13 13h-2V7h2m0 10h-2v-2h2M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-url' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M19.11 3.67c-1.71-1.709-4.578-1.682-6.408.148l-2.22 2.22a.75.75 0 0 1-1.062-1.06l2.222-2.221C14.018.381 17.836.276 20.17 2.61l1.22 1.22c2.335 2.334 2.23 6.153-.147 8.529l-2.22 2.22a.75.75 0 0 1-1.062-1.06l2.222-2.221c1.83-1.83 1.856-4.698.147-6.408zm-3.36 4.58a.75.75 0 0 1 0 1.06l-6.439 6.44a.75.75 0 0 1-1.06-1.06l6.439-6.44a.75.75 0 0 1 1.06 0zM6.04 9.42a.75.75 0 0 1 0 1.061l-2.222 2.222c-1.83 1.83-1.856 4.698-.147 6.407l1.22 1.22c1.71 1.71 4.578 1.683 6.408-.147l2.221-2.221a.75.75 0 1 1 1.06 1.06l-2.22 2.222c-2.377 2.376-6.195 2.481-8.53.147l-1.22-1.22c-2.334-2.334-2.228-6.153.148-8.53l2.221-2.22a.75.75 0 0 1 1.06 0z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-vibrance' xmlns='http://www.w3.org/2000/svg'><path d='M2.125 5.64A8.96 8.96 0 0 0 1.001 10a8.96 8.96 0 0 0 1.124 4.36V5.64z' fill='url(#aruc-icon-id__a)'/><path d='M2.875 15.499V4.502a9.053 9.053 0 0 1 1.75-1.72v14.437a9.05 9.05 0 0 1-1.75-1.72z' fill='url(#aruc-icon-id__b)'/><path d='M5.375 17.722c.548.33 1.134.601 1.75.809V1.469a8.956 8.956 0 0 0-1.75.81v15.443z' fill='url(#aruc-icon-id__c)'/><path d='M7.875 1.253v17.495c.564.136 1.15.22 1.75.244V1.008a9 9 0 0 0-1.75.245z' fill='url(#aruc-icon-id__d)'/><path d='M10.375 1.008v17.984a9 9 0 0 0 1.75-.244V1.252a9 9 0 0 0-1.75-.244z' fill='url(#aruc-icon-id__e)'/><path d='M12.875 1.469V18.53a8.957 8.957 0 0 0 1.75-.808V2.277a8.957 8.957 0 0 0-1.75-.808z' fill='url(#aruc-icon-id__f)'/><path d='M15.375 2.78v14.44a9.053 9.053 0 0 0 1.75-1.72v-11a9.054 9.054 0 0 0-1.75-1.72z' fill='url(#aruc-icon-id__g)'/><path d='M17.875 5.638v8.724A8.959 8.959 0 0 0 19.001 10a8.96 8.96 0 0 0-1.126-4.362z' fill='url(#aruc-icon-id__h)'/><defs><linearGradient id='aruc-icon-id__a' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='aruc-icon-id__b' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='aruc-icon-id__c' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='aruc-icon-id__d' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='aruc-icon-id__e' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='aruc-icon-id__f' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='aruc-icon-id__g' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='aruc-icon-id__h' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient></defs></symbol><symbol viewBox='0 0 24 24' id='uc-icon-vk' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M6.341 3.27a10.5 10.5 0 0 1 5.834-1.77.75.75 0 0 0 0-1.5 12 12 0 1 0 12 12 .75.75 0 0 0-1.5 0A10.5 10.5 0 1 1 6.34 3.27Zm14.145 1.48a.75.75 0 1 0-1.06-1.062L9.925 13.19V7.95a.75.75 0 1 0-1.5 0V15c0 .414.336.75.75.75h7.05a.75.75 0 0 0 0-1.5h-5.24l9.501-9.5Z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-warmth' xmlns='http://www.w3.org/2000/svg'><path d='m7.5 13.05.429.42.171-.175v-.244h-.6zm5 0h-.6v.245l.172.175.428-.42zM8.1 3.5c0-1.05.85-1.9 1.9-1.9V.4a3.1 3.1 0 0 0-3.1 3.1h1.2zm0 9.55V3.5H6.9v9.55h1.2zm-1 2.45c0-.79.315-1.506.829-2.03l-.858-.84A4.088 4.088 0 0 0 5.9 15.5h1.2zm2.9 2.9a2.9 2.9 0 0 1-2.9-2.9H5.9a4.1 4.1 0 0 0 4.1 4.1v-1.2zm2.9-2.9a2.9 2.9 0 0 1-2.9 2.9v1.2a4.1 4.1 0 0 0 4.1-4.1h-1.2zm-.829-2.03c.514.524.829 1.24.829 2.03h1.2c0-1.117-.447-2.13-1.171-2.87l-.858.84zM11.9 3.5v9.55h1.2V3.5h-1.2zM10 1.6c1.05 0 1.9.85 1.9 1.9h1.2A3.1 3.1 0 0 0 10 .4v1.2z' fill='currentColor'/><path d='M10 14V8' stroke='currentColor' stroke-width='1.2' stroke-linecap='round'/><path d='M14 3h3m-3 3h3m-3 3h3m-8 6.5a1 1 0 1 0 2 0 1 1 0 1 0-2 0' stroke='currentColor' stroke-width='1.2'/></symbol></svg>\";","import { uploaderBlockCtx } from './CTX.js';\nimport svgIconsSprite from '../blocks/themes/lr-basic/svg-sprite.js';\nimport { Block } from './Block.js';\n\nexport class SolutionBlock extends Block {\n  requireCtxName = true;\n  init$ = uploaderBlockCtx(this);\n  _template = null;\n\n  static set template(value) {\n    this._template = svgIconsSprite + value + /** HTML */ `<slot></slot>`;\n  }\n\n  static get template() {\n    return this._template;\n  }\n}\n","// @ts-check\nimport { SolutionBlock } from '../../../abstract/SolutionBlock.js';\nimport { EventType } from '../../../blocks/UploadCtxProvider/EventEmitter.js';\n\nexport class FileUploaderRegular extends SolutionBlock {\n  initCallback() {\n    super.initCallback();\n\n    this.sub(\n      '*modalActive',\n      (modalActive) => {\n        if (this._lastModalActive !== modalActive) {\n          this.emit(modalActive ? EventType.MODAL_OPEN : EventType.MODAL_CLOSE, undefined, { debounce: true });\n        }\n\n        /** @private */\n        this._lastModalActive = modalActive;\n      },\n      false,\n    );\n  }\n}\n\nFileUploaderRegular.template = /* HTML */ `\n  <lr-simple-btn></lr-simple-btn>\n\n  <lr-modal strokes block-body-scrolling>\n    <lr-start-from>\n      <lr-drop-area with-icon clickable></lr-drop-area>\n      <lr-source-list wrap></lr-source-list>\n      <button type=\"button\" l10n=\"start-from-cancel\" class=\"secondary-btn\" set=\"onclick: *historyBack\"></button>\n      <lr-copyright></lr-copyright>\n    </lr-start-from>\n    <lr-upload-list></lr-upload-list>\n    <lr-camera-source></lr-camera-source>\n    <lr-url-source></lr-url-source>\n    <lr-external-source></lr-external-source>\n    <lr-cloud-image-editor-activity></lr-cloud-image-editor-activity>\n  </lr-modal>\n\n  <lr-progress-bar-common></lr-progress-bar-common>\n`;\n","import { ActivityBlock } from '../../../abstract/ActivityBlock.js';\nimport { SolutionBlock } from '../../../abstract/SolutionBlock.js';\n\nexport class FileUploaderMinimal extends SolutionBlock {\n  initCallback() {\n    super.initCallback();\n\n    /** @type {import('../../../abstract/UploaderBlock.js').UploaderBlock} */\n    const uBlock = this.ref.uBlock;\n    this.sub('*currentActivity', (val) => {\n      if (!val) {\n        this.$['*currentActivity'] = uBlock.initActivity || ActivityBlock.activities.START_FROM;\n      }\n    });\n\n    this.sub('*uploadList', (list) => {\n      if (list?.length > 0) {\n        this.$['*currentActivity'] = ActivityBlock.activities.UPLOAD_LIST;\n      } else {\n        this.$['*currentActivity'] = uBlock.initActivity || ActivityBlock.activities.START_FROM;\n      }\n    });\n\n    this.subConfigValue('sourceList', (sourceList) => {\n      if (sourceList !== 'local') {\n        this.cfg.sourceList = 'local';\n      }\n    });\n\n    this.subConfigValue('confirmUpload', (confirmUpload) => {\n      if (confirmUpload !== false) {\n        this.cfg.confirmUpload = false;\n      }\n    });\n  }\n}\n\nFileUploaderMinimal.template = /* HTML */ `\n  <lr-start-from>\n    <lr-drop-area clickable l10n=\"choose-file\"></lr-drop-area>\n    <lr-copyright></lr-copyright>\n  </lr-start-from>\n  <lr-upload-list ref=\"uBlock\"></lr-upload-list>\n`;\n","// @ts-check\nimport { ActivityBlock } from '../../../abstract/ActivityBlock.js';\nimport { SolutionBlock } from '../../../abstract/SolutionBlock.js';\n\nexport class FileUploaderInline extends SolutionBlock {\n  constructor() {\n    super();\n\n    this.init$ = {\n      ...this.init$,\n      couldCancel: false,\n      cancel: () => {\n        if (this.couldHistoryBack) {\n          this.$['*historyBack']();\n        } else if (this.couldShowList) {\n          this.$['*currentActivity'] = ActivityBlock.activities.UPLOAD_LIST;\n        }\n      },\n    };\n  }\n\n  get couldHistoryBack() {\n    const history = this.$['*history'];\n    return history.length > 1 && history[history.length - 1] !== ActivityBlock.activities.START_FROM;\n  }\n\n  get couldShowList() {\n    return this.cfg.showEmptyList || this.$['*uploadList'].length > 0;\n  }\n\n  initCallback() {\n    super.initCallback();\n\n    /** @type {import('../../../abstract/UploaderBlock.js').UploaderBlock} */\n    const uBlock = this.ref.uBlock;\n    this.sub('*currentActivity', (val) => {\n      if (!val) {\n        this.$['*currentActivity'] = uBlock.initActivity || ActivityBlock.activities.START_FROM;\n      }\n    });\n\n    this.sub('*uploadList', (list) => {\n      if (\n        list?.length > 0 &&\n        this.$['*currentActivity'] === (uBlock.initActivity || ActivityBlock.activities.START_FROM)\n      ) {\n        this.$['*currentActivity'] = ActivityBlock.activities.UPLOAD_LIST;\n      }\n    });\n\n    this.sub('*history', () => {\n      this.$['couldCancel'] = this.couldHistoryBack || this.couldShowList;\n    });\n  }\n}\n\nFileUploaderInline.template = /* HTML */ ` <lr-start-from>\n    <lr-drop-area with-icon clickable></lr-drop-area>\n    <lr-source-list wrap></lr-source-list>\n    <button\n      type=\"button\"\n      l10n=\"start-from-cancel\"\n      class=\"cancel-btn secondary-btn\"\n      set=\"onclick: cancel; @hidden: !couldCancel\"\n    ></button>\n    <lr-copyright></lr-copyright>\n  </lr-start-from>\n  <lr-upload-list ref=\"uBlock\"></lr-upload-list>\n  <lr-camera-source></lr-camera-source>\n  <lr-url-source></lr-url-source>\n  <lr-external-source></lr-external-source>\n  <lr-progress-bar></lr-progress-bar>\n  <lr-cloud-image-editor-activity></lr-cloud-image-editor-activity>`;\n","// @ts-check\nimport { CloudImageEditorBlock } from '../../blocks/CloudImageEditor/src/CloudImageEditorBlock.js';\n\nexport class CloudImageEditor extends CloudImageEditorBlock {\n  initCallback() {\n    super.initCallback();\n\n    /** @private */\n    this.__shadowReady = true;\n\n    this.$['*faderEl'] = this.ref['fader-el'];\n    this.$['*cropperEl'] = this.ref['cropper-el'];\n    this.$['*imgContainerEl'] = this.ref['img-container-el'];\n\n    this.initEditor();\n  }\n\n  async initEditor() {\n    if (this.__shadowReady) {\n      await super.initEditor();\n    }\n  }\n}\n","import { registerBlocks } from './registerBlocks.js';\n\nexport const LR_WINDOW_KEY = 'LR';\n\n/**\n * @param {String} url Blocks pack url\n * @param {Boolean} [register] Register connected package, if it not registered yet\n * @returns {Promise<import('../index.js')>}\n */\nexport async function connectBlocksFrom(url, register = false) {\n  return new Promise((resolve, reject) => {\n    if (typeof document !== 'object') {\n      resolve(null);\n      return;\n    }\n    if (typeof window === 'object' && window[LR_WINDOW_KEY]) {\n      resolve(window[LR_WINDOW_KEY]);\n      return;\n    }\n    let script = document.createElement('script');\n    script.async = true;\n    script.src = url;\n    script.onerror = () => {\n      reject();\n    };\n    script.onload = () => {\n      /** @type {import('../index.js')} */\n      let blocks = window[LR_WINDOW_KEY];\n      register && registerBlocks(blocks);\n      resolve(blocks);\n    };\n    document.head.appendChild(script);\n  });\n}\n"],"names":["_objectWithoutProperties","source","excluded","key","i","target","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","sourceSymbolKeys","length","propertyIsEnumerable","registerBlocks","blockExports","blockName","tagName","_toConsumableArray","reduce","name","char","toUpperCase","toLowerCase","startsWith","replace","reg","__defProp","defineProperty","__publicField","obj","value","enumerable","configurable","writable","__defNormalProp","Data","schema","_classCallCheck","constructor","this","store","clone","o","_a","prop","_objectSpread","_storeIsProxy","callbackMap","create","_createClass","warn","val","rewrite","arguments","undefined","keys","includes","notify","updObj","pub","_this","forEach","callback","_this2","init","Set","add","remove","delete","size","actionName","console","concat","uid","Symbol","data","globalStore","get","set","Map","DICT","freeze","BIND_ATTR","ATTR_BIND_PRFX","EXT_DATA_CTX_PRFX","NAMED_DATA_CTX_SPLTR","CTX_NAME_ATTR","CTX_OWNER_ATTR","CSS_CTX_PROP","EL_REF_ATTR","AUTO_TAG_PRFX","REPEAT_ATTR","REPEAT_ITEM_TAG_ATTR","SET_LATER_KEY","USE_TPL","ROOT_STYLE_ATTR_NAME","CHARS","CHLENGTH","UID","pattern","charAt","Math","random","setNestedProp","parent","path","lastStep","success","propPath","split","step","idx","DEFAULT_SLOT_KEY","OPEN_TOKEN","CLOSE_TOKEN","tpl_processors_default","fr","fnCtx","querySelectorAll","el","itemClass","itemTag","getAttribute","window","customElements","_fnCtx$BaseComponent","_inherits","_super","_createSuper","_this3","style","display","BaseComponent","itemTpl","innerHTML","template","firstChild","repeatDataKey","sub","fragment","currentList","children","fillItems","items","item","set$","setTimeout","k","DocumentFragment","repeatItem","assign","init$","appendChild","_step","oversize","slice","_iterator","_createForOfIteratorHelper","s","n","done","err","e","f","Array","itemKey","push","log","removeAttribute","shadowRoot","slots","slotMap","slot","slotName","document","createDocumentFragment","initChildren","child","Element","hasAttribute","values","mapObj","childNodes","parentNode","replaceChild","slotFr","append","apply","refName","ref","keyValArr","attributes","attr","map","p","join","keyValStr","isAttr","kv","str","trim","_step2","valKeysArr","valKey","_iterator2","_loop","castType","Boolean","setAttribute","node","result","walk","createTreeWalker","NodeFilter","SHOW_TEXT","acceptNode","txt","parentElement","textContent","nextNode","getTextNodesWithTokens","txtNode","offset","tokenNodes","splitText","nextSibling","tNode","SINGLE_QUOTE","DOUBLE_QUOTE","ESCAPED_PATTERN","parseCssPropertyValue","input","output","trimQuotes","prev","next","escapeQuotes","match","p1","String","fromCodePoint","parseInt","replaceAll","JSON","parse","Error","autoTagsCount","styleMutationObserver","styleMutationObserverCbList","_BaseComponent","_HTMLElement","_super2","_this4","_assertThisInitialized","dropCssDataCache","__boundCssProps","ctxProp","getCssData","__extractCssName","$","cssInit$","tplProcessors","allSubs","pauseRender","renderShadow","readyToDestroy","processInnerHtml","allowCustomTemplate","ctxOwner","__initialized","initCallback","_this5","shadow","attachShadow","mode","customTplSelector","root","getRootNode","customTpl","querySelector","content","cloneNode","_step3","_iterator3","fn","createElement","tpl","_step4","_iterator4","addFr","__initCallback","styleLink","rel","href","onload","prepend","processorFn","__autoCtxName","generate","setProperty","ctxName","cssCtxName","__cachedCtxName","autoCtxName","__localCtx","registerCtx","getCtx","handler","_this6","subCb","isConnected","parsed","__parseProp","ctx","has","_this7","__stateProxy","Proxy","read","kvObj","forcePrimitives","primArr","Number","attrDesc","_i","_Object$values","nodeCtx","__ctxOwner","propArr","propName","namedCtx","localCtx","cssProp","bindCssData","__dataCtxInitialized","_this8","__disconnectTimeout","clearTimeout","connectedOnce","ctxNameAttrVal","__initDataCtx","_i2","_tpl_processors_defau","proc","addTemplateProcessor","is","render","rootLink","nodeType","Node","DOCUMENT_NODE","head","_this9","destroyCallback","_step5","_iterator5","_step6","_iterator6","updateCssData","disconnect","oldVal","newVal","$prop","silentCheck","__cssDataCache","__computedStyle","getComputedStyle","getPropertyValue","ctxPropName","part","MutationObserver","records","type","cb","observe","childList","subtree","attributeFilter","initValue","__initStyleAttrObserver","isAsync","_this10","localPropName","pArr","isAlias","__tag","registeredClass","define","_this11","_class","_super3","desc","observedAttributes","__attrDesc","cssTxt","styleBlob","Blob","__shadowStylesUrl","URL","createObjectURL","__rootStylesLink","url","link","_wrapNativeSuper","HTMLElement","AppRouter","msg","title","defaultTitle","route","appMap","defaultRoute","default","errorRoute","error","__routingEventName","options","location","search","separator","pair","decodeURI","routeBase","readAddressBar","routeScheme","applyRoute","event","CustomEvent","routingEventName","detail","dispatchEvent","_print","routeStr","history","pushState","reflect","_separator","routingMap","_this12","setRoutingMap","routeData","addEventListener","multiPub","initPopstateListener","_this13","__onPopstate","removeEventListener","applyStyles","styleMap","applyAttributes","attrMap","attrName","tag","styles","properties","processors","desc2","READY_EVENT_NAME","DEFAULT_DB_NAME","DbInstance","dbName","storeName","_this14","version","request","indexedDB","open","onupgradeneeded","db","objStore","createObjectStore","keyPath","transaction","oncomplete","ev","_notifyWhenReady","onsuccess","onerror","_subscriptionsMap","_updateHandler","newValue","_ref","_asyncToGenerator","_regeneratorRuntime","_callee","_context","t0","t1","sent","stop","_x","_localUpdateHandler","_updEventName","localStorage","removeItem","setItem","_getUpdateEvent","objectStore","Promise","resolve","reject","_value","_this15","silent","_key","tx","put","_notifySubscribers","_this16","getAll","all","_this17","IDB","clear","_reg","deleteDatabase","_superPropBase","object","property","getPrototypeOf","_get","Reflect","bind","receiver","base","getOwnPropertyDescriptor","EventType","FILE_ADDED","FILE_REMOVED","FILE_UPLOAD_START","FILE_UPLOAD_PROGRESS","FILE_UPLOAD_SUCCESS","FILE_UPLOAD_FAILED","FILE_URL_CHANGED","MODAL_OPEN","MODAL_CLOSE","DONE_CLICK","UPLOAD_CLICK","ACTIVITY_CHANGE","COMMON_UPLOAD_START","COMMON_UPLOAD_PROGRESS","COMMON_UPLOAD_SUCCESS","COMMON_UPLOAD_FAILED","CHANGE","GROUP_CREATED","EventEmitter","debugPrint","_defineProperty","_debugPrint","_targets","payload","_this$_debugPrint","copyPayload","debounce","_timeoutStore","timeout","timeoutId","_dispatch","wait","timer","debounced","_len","args","cancel","WINDOW_HEIGHT_TRACKER_PROPERTY","WindowHeightTracker","client","clientsRegistry","attachTracker","detachTracker","flush","passive","capture","documentElement","removeProperty","innerHeight","getPluralForm","locale","count","Intl","PluralRules","select","DEFAULT_TRANSFORMER","PLURAL_PREFIX","applyTemplateData","_options$openToken","openToken","_options$closeToken","closeToken","_options$transform","transform","_data$key","toString","getPluralObjects","pluralObjects","close","variable","substring","keyValue","pluralKey","countVariable","isObject","SEPARATOR","camelizeString","text","word","index","camelizeArrayItems","array","ignoreKeys","isArray","camelizeKeys","_ref2","_Object$keys","delay","ms","getUserAgent$1","_ref3","libraryName","libraryVersion","userAgent","_ref3$publicKey","publicKey","_ref3$integration","integration","languageName","mainInfo","filter","additionInfo","defaultOptions","factor","time","UploadcareError","_Error","NetworkError","_UploadcareError","progressEvent","message","setPrototypeOf","originalProgressEvent","onCancel","signal","aborted","then","once","CancelError","_UploadcareError2","poll","_ref4","check","_ref4$interval","interval","tickTimeoutId","tick","catch","defaultSettings","baseCDN","baseURL","maxContentLength","retryThrottledRequestMaxTimes","retryNetworkErrorMaxTimes","multipartMinFileSize","multipartChunkSize","multipartMinLastPartSize","maxConcurrentRequests","pollingTimeoutMilliseconds","pusherKey","defaultContentType","defaultFilename","_ref5","method","_ref5$headers","headers","onProgress","xhr","XMLHttpRequest","requestMethod","entries","entry","_entry","_slicedToArray","setRequestHeader","responseType","abort","status","statusText","headersArray","getAllResponseHeaders","responseHeaders","line","parts","header","shift","responseData","response","responseStatus","upload","onprogress","lengthComputable","isComputable","loaded","total","send","transformFile","isBlob","isFile","File","isReactNativeAsset","uri","isFileData","collectParams","params","inputKey","inputValue","isFileValue","contentType","file","_ref6","getFileOptions","isObjectValue","_Object$entries","_Object$entries$_i","isSimpleValue","buildFormData","formData","FormData","paramsList","_i3","_Object$entries2","_Object$entries2$_i","getFormDataParams","_params","_toArray","rest","UploadError","_UploadcareError3","_super4","code","getUrl","query","pathname","searchParams","URLSearchParams","_Object$entries3$_i","_Object$entries3","_i4","_entry$","buildSearchParams","getUserAgent","retryIfFailed","attempts","runAttempt","defaultDelayTime","round","pow","attempt","retry","retrier","_ref8","seconds","isFinite","getTimeoutFromThrottledRequest","TypeEnum","Status","getContentType","getFileName","filename","getStoreValue","_ref9","fileName","_ref9$baseURL","secureSignature","secureExpire","_ref9$source","_ref9$retryThrottledR","_ref9$retryNetworkErr","metadata","jsonerrors","UPLOADCARE_PUB_KEY","UPLOADCARE_STORE","signature","expire","_ref10","errorCode","fromUrl","sourceUrl","_ref11","_ref11$baseURL","checkForUrlDuplicates","saveUrlForRecurrentUploads","_ref11$source","_ref11$retryThrottled","_ref11$retryNetworkEr","pub_key","source_url","check_URL_duplicates","save_URL_duplicates","_ref12","isErrorResponse","fromUrlStatus","token","_ref13","_ref13$baseURL","_ref13$retryThrottled","_ref13$retryNetworkEr","_ref14","group","uuids","_ref15","_ref15$baseURL","jsonpCallback","_ref15$retryThrottled","_ref15$retryNetworkEr","files","_ref16","info","uuid","_ref19","_ref19$baseURL","_ref19$retryThrottled","_ref19$retryNetworkEr","file_id","_ref20","multipartStart","_ref21","_ref21$multipartChunk","_ref21$baseURL","_ref21$source","_ref21$retryThrottled","_ref21$retryNetworkEr","content_type","part_size","_ref22","multipartUpload","_ref23","_ref23$retryThrottled","_ref23$retryNetworkEr","_ref24","multipartComplete","_ref25","_ref25$baseURL","_ref25$source","_ref25$retryThrottled","_ref25$retryNetworkEr","_ref26","isReadyPoll","_ref27","isReady","isGroupFileInfo","fileInfo","UploadcareFile","_ref28","_ref28$baseCDN","s3Bucket","cdnUrl","s3Url","isStored","isImage","mimeType","originalFilename","imageInfo","videoInfo","contentInfo","defaultEffects","uploadDirect","_ref29","_ref30","uploadFromUploaded","_ref31","WebSocket","Events","_this$events$event","events","Pusher","disconnectTime","disconnectTimeoutId","ws","pusherUrl","emmitter","emit","on","queue","channel","Success","Progress","actualDisconect","_this5$ws","_this$ws","stringify","subscribers","connect","off","pusher","getPusher","disconectTimeout","uploadFromUrl","_ref35","_ref35$pusherKey","preconnect","urlResponse","FileInfo","fns","lastError","winnerIndex","controllers","AbortController","createStopRaceCallback","controller","stopRace","results","race","_ref36","_ref33","Waiting","Unknown","pollStrategy","_ref37","_ref34","unsubErrorHandler","onError","destroy","unsubscribe","subscribe","error_code","pushStrategy","memo","WeakMap","getBlobFromReactNativeAsset","_ref38","asset","blob","abrupt","fetch","res","getFileSize","_ref39","_callee2","_context2","_x2","isMultipart","fileSize","isUuid","regExp","RegExp","test","isUrl","runWithConcurrency","concurrency","tasks","rejected","settled","forRun","run","sliceChunk","chunkSize","start","end","min","prepareChunks","_ref40","_callee3","_context3","_x3","_x4","_x5","uploadPart","chunk","_ref41","uploadMultipart","_ref43","_callee5","_ref42","_ref42$multipartChunk","_ref42$maxConcurrentR","progressValues","createProgressHandler","_context5","totalChunks","chunkIdx","fill","sum","_ref45","_callee4","_ref44","getChunk","_context4","_x8","_ref46","_x6","_x7","uploadFile","_x9","_x10","_uploadFile","_callee6","_ref48","_ref48$baseURL","_ref48$baseCDN","_context6","TypeError","UploadcareGroup","groupInfo","_ref49","_ref49$baseCDN","id","filesCount","groupFiles","totalSize","acc","datetimeStored","createdAt","datetimeCreated","storedAt","uploadFileGroup","_ref50","_ref50$baseURL","_ref50$multipartChunk","_ref50$baseCDN","isFileDataArray","isUrlArray","isUuidArray","isStillComputable","Queue","_concurrency","tasksLeft","_running","_loop2","task","_pending","v","resolver","_resolvers","rejector","_rejectors","finally","_run","_ret","activityBlockCtx","uploaderBlockCtx","selected","back","ok","no","yes","browse","file__one","file__other","error__one","error__other","rotate","brightness","contrast","saturation","exposure","gamma","vibrance","warmth","enhance","original","resize","crop","draw","localeRegistry","localeResolvers","defineLocaleSync","localeName","definition","en","defineLocale","definitionOrResolver","definitionResolver","defineLocaleAsync","resolveLocaleDefinition","localeStateKey","LocaleManager","blockInstance","_blockInstance","subConfigValue","_this$_blockInstance$","overrides","overriddenValue","_localeName","cfg","localeDefinitionOverride","_callbacks","_this$_blockInstance","debouncedCb","block","_this$_boundBlocks$ge","_this$_boundBlocks$ge2","_this$_boundBlocks$ge3","_boundBlocks","onLocaleChange","callbacks","l10nProcessor","elProp","useAttribute","arr","localCtxKey","mappedKey","l10nProcessorSubs","keySubs","nodeStateKey","l10n","stateKey","sharedConfigKey","normalizeCdnOperation","operation","endsWith","joinCdnOperations","operations","op","createCdnUrlModifiers","joined","extractFilename","noOrigin","hash","urlFilenameIdx","lastIndexOf","plainFilenameIdx","extractUuid","slashIndex","secondSlashIndex","extractOperations","withoutFilename","trimFilename","operationsMarker","filenamePathPart","isFileUrl","splitFileUrl","fileUrl","origin","createCdnUrl","baseCdnUrl","cdnModifiers","splitted","createOriginalUrl","stringToArray","delimiter","OPERATIONS_DEFAULTS","mirror","flip","SUPPORTED_OPERATIONS_ORDERED","transformationsToOperations","transformations","amount","dimensions","coords","transformationToStr","COMMON_OPERATIONS","asNumber","asBoolean","OPERATION_PROCESSORS","alignment","operationsToTransformations","_operation$split","_operation$split2","operationName","processor","TabId","CROP","TUNING","FILTERS","ALL_TABS","ALL_COLOR_OPERATIONS","ALL_FILTERS","ALL_CROP_OPERATIONS","COLOR_OPERATIONS_CONFIG","zero","range","keypointsNumber","serializeCsv","initialConfig","pubkey","multiple","multipleMin","multipleMax","MAX_SAFE_INTEGER","confirmUpload","imgOnly","accept","externalSourcesPreferredTypes","cameraMirror","cameraCapture","sourceList","cloudImageEditorTabs","maxLocalFileSizeBytes","thumbSize","showEmptyList","useLocalImageEditor","useCloudImageEditor","removeCopyright","cropPreset","imageShrink","modalScrollLock","modalBackdropStrokes","sourceListWrap","remoteTabSessionKey","cdnCname","baseUrl","socialBaseUrl","secureDeliveryProxy","multipartMaxConcurrentRequests","multipartMaxAttempts","groupOutput","userAgentIntegration","debug","iconHrefResolver","TAG_PREFIX","Block","variables","pluralObject","pluralize","pluralForm","_this$localeManager","localeManager","bindL10n","eventEmitter","blocksRegistry","add$","activityType","hasBlockInCtx","b","className","classList","toggle","requireCtxName","element","attribute","onSuccess","onTimeout","_ref$timeout","currentAttrValue","observer","mutations","mutation","handleMutation","attrValue","attributeName","waitForAttribute","_getPrototypeOf","registerClient","unregisterClient","localeId","direction","_locale$textInfo","Locale","getTextInfo","textInfo","getLocaleDirection","_this$localeManager2","destroyL10nBindings","deleteCtx","destroyCtxCallback","_this$localeManager3","bytes","decimals","units","dm","floor","parseFloat","toFixed","previewProxy","previewUrl","encodeURIComponent","__cfgProxy","sharedKey","_console","consoleArgs","ACTIVE_ATTR","ACTIVE_PROP","ActivityBlock","_Block","_historyFlush","_actDesc$deactivateCa","actDesc","_activityCallbacks","deactivateCallback","_actDesc$activateCall","historyBack","activateCallback","_debouncedHistoryFlush","activity","_deactivate","_activate","modalActive","historyTracked","onActivate","onDeactivate","isActivityActive","_isActivityRegistered","unregisterActivity","currentActivity","find","nextActivity","pop","couldOpenActivity","_nextActivityBlock$co","nextActivityBlock","setOrAddState","activities","START_FROM","CAMERA","DRAW","UPLOAD_LIST","CONFIRMATION","CLOUD_IMG_EDIT","EXTERNAL","DETAILS","THUMB_OFFSET","THUMB_STROKE_WIDTH","GUIDE_THIRD","setSvgNodeAttrs","attrs","setAttributeNS","createSvgNode","createElementNS","cornerPath","rect","sizeMultiplier","x","y","width","height","wMul","hMul","xSide","ySide","p2","p3","d","center","sidePath","w","constraintRect","rect1","rect2","resizeRect","_excluded","delta","aspectRatio","imageBox","dy","max","resizeNorth","dx","resizeWest","resizeSouth","resizeEast","_delta5","abs","resizeNorthWest","_ref7","_delta6","resizeNorthEast","_delta7","resizeSouthWest","_delta8","resizeSouthEast","rotateSize","angle","swap","calculateMaxCenteredCropFrame","cropWidth","cropHeight","cropX","cropY","roundRect","clamp","parseCropPreset","_cropPreset$split$map","_cropPreset$split$map2","h","UploadSource","LOCAL","DROP_AREA","URL_TAB","API","PACKAGE_NAME","PACKAGE_VERSION","customUserAgent","buildOutputError","buildOutputFileError","buildCollectionFileError","IMAGE_ACCEPT_LIST","mergeFileTypes","fileTypes","flat","matchMimeType","allowedFileTypes","some","fileIsImage","BASE","ByteUnitEnum","AUTO","BYTE","KB","MB","GB","TB","PB","number","ceil","prettyBytes","unit","isAutoMode","pluralized","one","other","warnings","warnOnce","MSG_NAME","TypedData","typedSchema","__typedSchema","__ctxId","__schema","__data","pDesc","nullable","setValue","TypedCollection","__watchList","watchList","__subsMap","__propertyObservers","__collectionObservers","__items","__removed","__added","changeMap","__notifyObservers","ctxId","__observeTimeout","__notifyTimeout","added","removed","unobserveCollection","_this$__collectionObs","getValue","unobserveProperties","_this$__propertyObser","checkFn","memoize","cache","buildOutputCollectionState","uploaderBlock","getters","progress","errors","totalCount","uploadCollection","failedCount","state","failedEntries","successCount","successEntries","uploadingCount","uploadingEntries","isFailed","isUploading","isSuccess","allEntries","getOutputData","idleEntries","withAssert","warning","createAsyncAssertWrapper","wrapped","uploadEntrySchema","externalUrl","lastModified","Date","now","uploadProgress","cdnUrlModifiers","abortController","thumbUrl","fullPath","uploadError","isRemoved","cdnUrlRegex","parseCdnUrl","cdnBase","cdnBaseUrlObj","urlObj","host","_cdnUrlRegex$exec","exec","_cdnUrlRegex$exec2","UploaderBlock","_ActivityBlock","_validateIsImage","_validateFileType","_validateMaxSizeLimit","_validateUploadError","collection","readProp","itemsToUpload","getOutputCollectionState","collectionState","_createGroup","_runFileValidators","_runCollectionValidators","getOutputItem","_entry$getValue","setMultipleValues","revokeObjectURL","_flushCommonUploadProgress","_flushOutputItems","entriesToRunValidation","ids","entryId","_Data$getCtx$store","_Data$getCtx$store2","_Data$getCtx$store3","setInitialCrop","loadedItems","findItems","_this$uploadCollectio","commonProgress","uploadTrigger","__initialUploadMetadata","isCtxOwner","hasCtxOwner","couldBeCtxOwner","initCtxOwner","_this$_unobserveColle","_this$_unobserveColle2","_unobserveCollectionProperties","_unobserveCollection","observeCollection","_handleCollectionUpdate","observeProperties","_handleCollectionPropertiesUpdate","runAllValidators","internalId","parsedCdnUrl","clearAll","_this$cfg$accept","fileInput","captureCamera","MouseEvent","onchange","addFileFromObject","list","_this$sourceList","force","srcKey","isSourceBtn","sourceBtnBlock","activate","doneActivity","outputEntry","imagesOnly","mimeOk","extOk","matchExtension","maxFileSize","internalEntry","cause","_step7","_iterator7","_fileValidators","validator","entryIds","_step8","_iterator8","_runFileValidatorsForEntry","_step9","_iterator9","_collectionValidators","errorOrErrors","_createGroup2","uploadClientOptions","uuidList","resp","collectionStateWithGroup","getUploadClientOptions","_step10","aspectRatioPreset","_entry$getValue2","_iterator10","_fileInfo$imageInfo","_getMetadataFor","_this$cfg$metadata","configValue","outputFileEntry","_fileInfo$uuid","_fileInfo$originalFil","_fileInfo$size","_fileInfo$isImage","_fileInfo$mimeType","_uploadEntryData$cdnU","_uploadEntryData$meta","uploadEntryData","itemId","extSrcList","FACEBOOK","DROPBOX","GDRIVE","GPHOTOS","INSTAGRAM","FLICKR","VK","EVERNOTE","BOX","ONEDRIVE","HUDDLE","sourceTypes","toKebabCase","_str$match","asString","isNaN","mapping","strValue","allConfigKeys","complexConfigKeys","plainConfigKeys","isComplexKey","attrKeyMapping","fromEntries","attrStateMapping","getLocalPropName","ConfigClass","anyThis","normalizedValue","reason","normalizeConfigValue","_assertSameValueDifferentReference","_flushValueToAttribute","_flushValueToState","previousValue","nextValue","_setValue","_anyThis$key","initialValue","_getValue","bindAttributes","Config","Icon","iconHref","customIconHref","PROPS_MAP","src","lazy","intersection","breakpoints","format","progressive","quality","CSS_PREF","UNRESOLVED_ATTR","DEV_MODE","hostname","ImgTypeEnum","PREVIEW","MAIN","CSS_PROPS","_PROPS_MAP$prop","ImgConfig","kbFn","cbkFn","_isnObserver","IntersectionObserver","ent","isIntersecting","unobserve","rootMargin","_observed","ImgBase","_ImgConfig","Image","baseURI","numericPart","alphabeticPart","bp","hasFormatJPG","blur","$$","_validateSize","analytics","analyticsParams","parseObjectToString","_proxyUrl","_getCdnModifiers","_fmtAbs","wOnly","getBoundingClientRect","img","proxifyEvent","stopPropagation","Event","_EVENTS","hasPreviewImage","_setupConfigForImage","elNode","_img","_imgPreview","imgSet","_getUrlBase","_getElSize","iSet","srcset","currentImg","bgSelector","initIntersection","renderBg","_setupEventProxy","initAttributes","_appendURL","_renderImage","_this$_imgPreview","_this$_imgPreview2","_this6$_imgPreview","srcUrlPreview","loaderImage","getSrc","getSrcset","renderBackground","renderImage","Img","_ImgBase","sub$$","loading","SimpleBtn","_UploaderBlock","withDropZone","onClick","initFlow","defineAccessor","dropzone","StartFrom","registerActivity","getDropItems","dataTransfer","dropItems","promises","webkitEntry","dataTransferItemType","kind","itemType","webkitGetAsEntry","getAsEntry","reading","readEntry","scope","clonedFile","isDirectory","readReaderContent","createReader","reader","readEntries","getAsFile","FileReader","onLoad","onloadend","readAsDataURL","checkIsDirectory","getAsString","DropzoneState","ACTIVE","INACTIVE","NEAR","OVER","RESET_EVENTS","nearnessRegistry","addDropzone","eventCounter","body","switchHandlers","setState","newState","shouldIgnore","isDragging","onChange","onResetEvent","onDragEnter","onDragLeave","onDrop","preventDefault","onDragOver","dragPoint","targetRect","nearness","r","cx","cy","sqrt","distance","isNear","isOver","composedPath","isNearest","onElementDrop","onItems","eventName","GLOBAL_CTX_NAME","REGISTRY_KEY","DropArea","withIcon","isClickable","isFullscreen","isEnabled","isVisible","bounds","hasSize","isInViewport","top","left","bottom","clientHeight","right","innerWidth","clientWidth","visible","visibility","_destroyDropzone","_shouldIgnore","addFileFromUrl","contentWrapperEl","_destroyContentWrapperDropzone","_Object$entries$find","stateText","_Object$entries$find2","toggleAttribute","_onAreaClicked","openSystemDialog","_couldHandleFiles","isActive","isMultiple","currentFilesCount","_this$_destroyDropzon","_this$_destroyContent","registry","clickable","fullscreen","disabled","SourceBtn","iconName","registerType","textKey","supportsCapture","icon","externalSourceType","activityParams","initTypes","applyType","typeConfig","_registeredTypes","configType","_configType$activityP","_configType$textKey","_configType$icon","onclick","SourceList","html","srcName","outerHTML","readJpegChunks","stack","promiseReadJpegChunks","pos","readToView","DataView","readAsArrayBuffer","readNext","view","j","byteLength","getUint8","readNextChunk","startPos","marker","getUint16","getIccProfile","iccProfile","_readJpegChunks","getUint32","replaceJpegChunk","chunks","oldChunkPos","oldChunkLength","_readJpegChunks2","newChunks","intro","ArrayBuffer","setUint16","buffer","replaceIccProfile","iccProfiles","stripIccProfile","canvasToBlob","canvas","toBlob","createCanvas","getContext","hasTransparency","_createCanvas","drawImage","imageData","getImageData","getExif","exif","_readJpegChunks3","isApplied","setExifOrientation","orientation","exifCallback","little","findExifOrientation","littleEndian","replaceExif","isExifApplied","imageLoader","image","complete","processImage","allowLayers","markers","sizes","squareSide","dimension","shouldSkipShrink","skip","_readJpegChunks4","layer","serializer","memoKeySerializer","cachedWidths","sort","a","cachedWidth","isSupported","TestPixel","FILL_STYLE","canvasTest","_createCanvas2","cropCvs","cropCtx","_createCanvas3","testCvs","testCtx","fillStyle","fillRect","isTestPass","wrapAsync","_len2","_key2","squareTest","dimensionTest","testCanvasSize","_callee7","testSquareSide","testDimension","_yield$Promise$all","_yield$Promise$all2","squareSupported","dimensionSupported","_context7","side","_x11","_x12","canvasResize","_callee8","_createCanvas4","_context8","imageSmoothingQuality","HTMLImageElement","HTMLCanvasElement","_x13","_x14","_x15","fallback","steps","sourceW","targetW","targetH","sW","sH","reverse","calcShrinkSteps","chain","isIpadOS","navigator","maxTouchPoints","platform","STEP","shrinkImage","settings","sourceH","ratio","native","shrinkFile","_ref17","_callee9","inputBlob","exifResults","isRejected","isJPEG","_exifResults","exifResult","isExifOrientationAppliedResult","iccProfileResult","inputBlobWithoutIcc","newBlob","isExifOrientationApplied","_context9","allSettled","naturalWidth","naturalHeight","_x16","_x17","createSvgBlobUrl","svg","fileCssBg","color","generateThumb","imgFile","promise","regExpShrink","FileItemState","FINISHED","FAILED","UPLOADING","IDLE","FileItem","_generateThumbnail","_calculateState","itemName","errorText","progressValue","progressVisible","badgeIcon","isFinished","isFocused","isEditable","onEdit","onRemove","onUpload","_entrySubs","_debouncedGenerateThumb","_debouncedCalculateState","_isIntersecting","_renderedOnce","intersectionRatio","_generateThumbnail2","currentThumbUrl","_thumbUrl","_color","proxyUrl","_reset","_subEntry","_handleEntryId","_handleState","activeInstances","inst","_this$_entry","_this$_entry2","_this$_entry$getValue","_this$_entry$getValue2","_observer","_observerCallback","threshold","_this$_observer","terms","toLocaleLowerCase","sizeShrink","MAX_SQUARE_SIDE","maxSize","parseShrink","_settingsOfShrink","_upload","_fileInfo$contentInfo","_fileInfo$contentInfo2","_fileInfo$contentInfo3","_entry$getValue3","uploadTask","baseUploadClientOptions","_processShrink","t2","t3","t4","t5","percentage","t6","getMetadataFor","t7","t8","mime","isCancel","Modal","_closeDialog","_mouseDownTarget","dialog","isOpen","closeClicked","_handleDialogClose","showModal","HTMLDialogElement","_handleDialogMouseDown","_handleDialogMouseUp","backdrop","_handleBackdropClick","overflow","show","hide","throttle","inThrottle","lastFn","lastTime","throttled","UploadList","_updateUploadsState","doneBtnVisible","doneBtnEnabled","uploadBtnVisible","addMoreBtnVisible","addMoreBtnEnabled","headerText","commonErrorMessage","hasFiles","onAdd","uploadAll","_throttledHandleCollectionUpdate","onDone","doneFlow","summary","succeed","uploading","failed","fitCountRestrictions","tooMany","exact","allDone","_getHeaderText","localizedText","initActivity","firstError","UrlSource","importDisabled","onInput","focus","canUsePermissionsApi","permissions","CameraSource","video","videoTransformCss","shotBtnDisabled","videoHidden","messageHidden","requestBtnHidden","cameraSelectOptions","cameraSelectHidden","l10nMessage","onCameraSelectChange","_selectedCameraId","_capture","onShot","_shot","onRequestPermissions","_subscribePermissions","_unsubPermissions","_stopCapture","_subscribePermissions2","_handlePermissionsChange","_capture2","constr","stream","ideal","frameRate","audio","deviceId","_canvas","_ctx","_setPermissionsState","mediaDevices","getUserMedia","_capturing","_this$$$video","getTracks","date","_initCallback","_cameraSelectOptions$","deviceList","_onActivate","_onDeactivate","enumerateDevices","label","UploadCtxProviderClass","bindTarget","unbindTarget","UploadCtxProvider","UiConfirmation","ConfirmationDialog","activityCaption","messageTxt","confirmBtnTxt","denyBtnTxt","onConfirm","_defaults","confirmAction","onDeny","denyAction","messageL10Str","confirmL10nStr","denyL10nStr","cfn","captionL10nStr","ProgressBarCommon","anyUploading","ProgressBar","opacity","prevValue","TRANSPARENT_PIXEL_SRC","FilePreview","checkerboard","backgroundImage","color2","checkerboardCssBg","_lastObjectUrl","normalize","arg","classNames","parseTabs","tabs","tabList","tab","TEMPLATE","CloudImageEditorBlock","_showLoader","extension","editorMode","modalCaption","fileType","showLoader","images","originalSrc","originalUrl","eventData","bubbles","composed","resizeObserver","ResizeObserver","contentRect","initEditor","_updateImage","_originalUrl","json","_waitForSize","deactivate","reset","_initEditor","_imgLoading","_debouncedShowLoader","tabId","image_hidden_to_cropper","image_hidden_effects","networkProblems","updateImage","CropFrame","dragging","_handlePointerUp","_handlePointerUp_","_handlePointerMove","_handlePointerMove_","_handleSvgPointerMove","_handleSvgPointerMove_","tooHigh","tooWide","cropBox","mask","maskRectOuter","maskRectInner","backdropRect","_backdropMask","_backdropMaskInner","requestAnimationFrame","_frameGuides","_frameThumbs","thumb","pathNode","interactionNode","groupNode","isCenter","isCorner","thumbSizeMultiplier","disableThumb","_shouldThumbBeDisabled","GUIDE_STROKE_WIDTH","frameThumbs","stroke","_handlePointerDown","x1","y1","x2","y2","frameGuides","_createGuides","_createThumbs","_Object$values2","_this$ref$svgEl$getB","svgX","svgY","_draggingThumb","_dragStartPoint","_dragStartCrop","_updateCursor","_svg$getBoundingClien","movedCropBox","_calcCropBox","_this$_dragStartCrop","_this$$$CropPresetLi","_delta","_ref$delta","moveRect","every","hoverThumb","hover","rectContainsPoint","_hoverThumb","cursor","_updateBackdrop","_updateFrame","_createBackdrop","_createFrame","_resizeBackdrop","_render","_guidesHidden","EditorButtonControl","active","_titleEl","_iconEl","tabIndex","not_active","EditorCropButtonControl","_EditorButtonControl","_operation","nextAngle","ControlType","FAKE_ORIGINAL_FILTER","EditorSlider","defaultValue","_controlType","_iconName","_title","_filter","_initializeValues","fromViewer","_COLOR_OPERATIONS_CON","_range","transformation","operationValue","tooltip","preloadImage","batchPreloadImages","preloaders","preload","EditorFilterControl","isOriginal","iconSize","previewSize","dpr","devicePixelRatio","_previewSrc","previewEl","_preloadImage","_cancelPreload","setOperation","currentFilter","EditorOperationControl","editorTransformations","viewerImageSrc","EditorImageCropper","_commitDebounced","_commit","_handleResizeThrottled","_handleResize","_imageSize","_isActive","_initCanvas","_syncTransformations","_alignImage","_alignCrop","_draw","pickedTransformations","pick","offsetWidth","offsetHeight","scale","padding","naturalSize","imageAspectRatio","cropTransformation","_this$$$ImageBox","previewWidth","previewX","previewY","_cropTransformation$d","_cropTransformation$c","cropAspectRatio","rotated","save","translate","PI","restore","clearRect","_drawImage","toggleThumbs","_transitionToImage","active_from_viewer","active_from_editor","inactive_to_editor","previewHeight","_rotateSize2","sourceWidth","sourceHeight","ratioW","ratioH","_rotateSize3","_getCropDimensions","isInteger","c","matcher","validateCrop","_getCropTransformation","imageSize","_args","_waitForImage","_animateIn","_ref7$reset","_transitionToCrop","scaleX","scaleY","cropCenterX","cropCenterY","transformOrigin","_handleImageLoading","loadingOperations","_loadingOperations$ge","_this$_observer2","linspace","ret","calculateOpacities","keypoints","numbers","section","point","relation","keypointsRange","EditorImageFader","_hidden","_addKeypointDebounced","_addKeypoint","cancelAnimationFrame","_raf","_keypoints","kp","zIndex","_ref3$url","_url","_ref3$filter","_transformations","_imageSrc","shouldSkip","_isSame","keypoint","_constructKeypoint","findIndex","insertBeforeNode","_container","contains","splice","insertBefore","_update","keypointValues","opacities","zIndices","calculateZIndices","_flush","_initNodes2","container","srcList","_batchPreloadImages","_previewImage","_createPreviewImage","_cancelLastImages","kpImage","_cancelBatchPreload","_fromViewer","active_from_cropper","inactive_to_cropper","_setOriginalSrc","_initNodes","_ref6$hide","EditorScroller","deltaY","deltaX","scrollLeft","EditorToolbar","_transformations$filt","currentOperation","_transformations$filt2","filters","colorOperations","cropOperations","hidden","_onSliderClose","currentTarget","_activateTab","listEl","_createToggleControl","filterId","_createFilterControl","_createOperationControl","isCurrentTab","_renderControlsList","_syncTabIndicator","_unmountTabControls","tabToggleEl","offsetLeft","_editorTransformation","appliedFilter","_updateInfoTooltip","_preloadEditedImage","setTransformations","anyLoading","showSlider","gridColumn","LrBtnUi","_iconReversed","_iconSingle","_iconHidden","iconCss","_iconCss","theme","icon_left","icon_right","icon_hidden","icon_single","flexDirection","LineLoaderUi","_active","_handleTransitionEndRight","lineEl","transition","_start","_stop","DEFAULT_STYLE","PresenceToggle","_visible","_visibleStyle","_hiddenStyle","_externalTransitions","_handleVisible","_applyClassNames","_Object$keys2","applyClassNames","SliderUi","_updateValue","_zero","_updateSteps","_thumbSize","inputEl","_updateZeroDot","_zeroDotEl","stepsEl","half","_stepsCount","minorStepEl","borderStepEl","zeroDotEl","CloudImageEditorActivity","mountEditor","unmountEditor","_instance","instance","customEvent","handleApply","handleCancel","_mounted","escapeRegExp","wildcardRegexp","flags","buildStyles","textColor","backgroundColor","linkColor","linkColorHover","shadeColor","border","css","selector","propertiesObj","propertiesStr","styleToCss","background","cbMapping","_message","cbList","_step$value","sender","ExternalSource","activityIcon","selectedList","counter","extractUrlFromMessage","mountIframe","unmountIframe","alternatives","preferredTypes","preferredType","regexp","typeUrl","_this$_iframe","_this$_iframe$content","_iframe","contentWindow","postMessage","_handleFileSelected","colors","getCssValue","sendMessage","_this$l10n","_this$l10n$split","_this$cfg","lang","public_key","images_only","pass_window_open","session_key","queryString","iframe","remoteUrl","marginheight","marginwidth","frameborder","allowTransparency","handleIframeLoad","iframeWrapper","handleFileSelected","Tabs","tabL10nStr","ctxList","context","lStr","ctxEl","_tabMap","tabEl","class","setCurrentTab","row","FormInput","validationInput","required","_validationInputElement","_createValidationInput","_dynamicInputsContainer","setCustomValidity","_collectionState$erro","errorMsg","cdnUrls","replaceChildren","ActivityHeader","Select","currentText","selectHtml","onSelect","_this$$$options$find","opt","_options$","ICO_MAP","FSAPI","requestFullscreen","webkitRequestFullscreen","exitFullscreen","Video","ppIcon","fsIcon","volIcon","capIcon","totalTime","currentTime","progressCssWidth","hasSubtitles","volumeDisabled","volumeValue","onPP","togglePlay","onFs","toggleFullscreen","onCap","toggleCaptions","onMute","toggleSound","onVolChange","setVolume","progressClicked","progressRect","_video","duration","offsetX","paused","ended","play","pause","fullscreenElement","textTracks","muted","volume","_getUrl","getMinutes","getSeconds","track","getItem","toCast","_castAttributes","descPath","poster","sources","srcDesc","_desc2attrs","tracks","trackDesc","_initTracks","_timeFmt","perc","vol","Copyright","SolutionBlock","_template","FileUploaderRegular","_SolutionBlock","_lastModalActive","FileUploaderMinimal","uBlock","FileUploaderInline","couldCancel","couldHistoryBack","couldShowList","CloudImageEditor","_CloudImageEditorBloc","__shadowReady","connectBlocksFrom","_connectBlocksFrom","register","script","async","blocks"],"sourceRoot":""}