"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[542],{9542:function(t,e,n){n.r(e),n.d(e,{default:function(){return m}});var r=n(3433),i=n(4942),o=n(1413),c=n(9439),a=n(2791),u=n(9509),s=n(9095),l=(n(2151),n(184));u.n(s);var d=function(t){var e=t.onCdnUrlsChange,n=(0,a.useState)([]),i=(0,c.Z)(n,2),o=i[0],u=i[1],s=(0,a.useState)([]),d=(0,c.Z)(s,2),h=d[0],p=d[1],f=(0,a.useRef)(null);return(0,a.useEffect)((function(){var t=f.current;if(t){var e=function(t){var e=t.detail.allEntries.filter((function(t){return"success"===t.status}));u(e),p((function(t){var n=e.map((function(t){return{cdnUrl:t.cdnUrl,uuid:t.uuid}}));return[].concat((0,r.Z)(t),(0,r.Z)(n.filter((function(e){return!t.some((function(t){return t.cdnUrl===e.cdnUrl}))}))))}))};return t.addEventListener("change",e),function(){t.removeEventListener("change",e)}}}),[]),(0,a.useEffect)((function(){e(h)}),[h]),(0,l.jsxs)("div",{children:[(0,l.jsx)("lr-config",{"ctx-name":"my-uploader",pubkey:"274c6cf9681b13936265"}),(0,l.jsx)("lr-file-uploader-regular",{"ctx-name":"my-uploader"}),(0,l.jsx)("lr-upload-ctx-provider",{"ctx-name":"my-uploader",ref:f}),(0,l.jsx)("div",{children:o.map((function(t){return(0,l.jsx)("div",{children:(0,l.jsx)("img",{src:t.cdnUrl,alt:t.fileInfo.originalFilename})},t.uuid)}))})]})},h=function(){var t={title:"",description:"",categories:[{nameCategory:"",todoList:[{todo:""}],publicList:!1}],isPublic:!1,photos:[]},e=(0,a.useState)(t),n=(0,c.Z)(e,2),u=n[0],s=n[1],h=(0,a.useState)([]),p=(0,c.Z)(h,2),f=p[0],g=p[1];(0,a.useEffect)((function(){var t=JSON.parse(localStorage.getItem("data"));t&&s(t)}),[]),(0,a.useEffect)((function(){localStorage.setItem("data",JSON.stringify(u))}),[u]);var x=function(t){var e=t.target,n=e.name,r=e.value;s((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,i.Z)({},n,r))}))};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h1",{children:"Form"}),(0,l.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n=localStorage.getItem("token"),r=(0,o.Z)((0,o.Z)({},u),{},{photos:f});fetch("http://localhost:3000/api/trips",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(r)}).then((function(t){return t.json()})).then((function(e){console.log("Response:",e),s(t),localStorage.removeItem("data"),g([]),window.location.reload()})).catch((function(t){console.error("Error:",t)}))},children:[(0,l.jsx)("label",{htmlFor:"title",children:"Title"}),(0,l.jsx)("input",{type:"text",id:"title",name:"title",value:u.title,onChange:x}),(0,l.jsx)("label",{htmlFor:"description",children:"Description"}),(0,l.jsx)("input",{type:"text",id:"description",name:"description",value:u.description,onChange:x}),(0,l.jsx)("h2",{children:"Categories"}),u.categories.map((function(t,e){return(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"category-".concat(e),children:"Category Name"}),(0,l.jsx)("input",{type:"text",id:"category-".concat(e),name:"nameCategory",value:t.nameCategory,onChange:function(t){return function(t,e){var n=t.target,c=n.name,a=n.value;s((function(t){var n=(0,r.Z)(t.categories);return n[e]=(0,o.Z)((0,o.Z)({},n[e]),{},(0,i.Z)({},c,a)),(0,o.Z)((0,o.Z)({},t),{},{categories:n})}))}(t,e)}}),(0,l.jsx)("label",{htmlFor:"category-public-".concat(e),children:"Public"}),(0,l.jsx)("input",{type:"checkbox",id:"category-public-".concat(e),name:"publicList",checked:t.publicList,onChange:function(t){return function(t,e){var n=t.target.checked;s((function(t){var i=(0,r.Z)(t.categories);return i[e]=(0,o.Z)((0,o.Z)({},i[e]),{},{publicList:n}),(0,o.Z)((0,o.Z)({},t),{},{categories:i})}))}(t,e)}}),(0,l.jsx)("h3",{children:"Todo List"}),t.todoList.map((function(t,n){return(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"todo-".concat(e,"-").concat(n),children:"Todo"}),(0,l.jsx)("input",{type:"text",id:"todo-".concat(e,"-").concat(n),name:"todo",value:t.todo,onChange:function(t){return function(t,e,n){var i=t.target.value;s((function(t){var c=(0,r.Z)(t.categories),a=(0,r.Z)(c[e].todoList);return a[n]={todo:i},c[e]=(0,o.Z)((0,o.Z)({},c[e]),{},{todoList:a}),(0,o.Z)((0,o.Z)({},t),{},{categories:c})}))}(t,e,n)}}),(0,l.jsx)("button",{type:"button",onClick:function(){return function(t,e){var n=(0,r.Z)(u.categories);n[t].todoList.splice(e,1),s((function(t){return(0,o.Z)((0,o.Z)({},t),{},{categories:n})}))}(e,n)},children:"Delete Todo"})]},n)})),(0,l.jsx)("button",{type:"button",onClick:function(){return function(t){var e=(0,r.Z)(u.categories);e[t].todoList.push({todo:""}),s((function(t){return(0,o.Z)((0,o.Z)({},t),{},{categories:e})}))}(e)},children:"Add Todo"}),(0,l.jsx)("button",{type:"button",onClick:function(){return function(t){s((function(e){var n=(0,r.Z)(e.categories);return n.splice(t,1),(0,o.Z)((0,o.Z)({},e),{},{categories:n})}))}(e)},children:"Delete Category"})]},e)})),(0,l.jsx)("button",{type:"button",onClick:function(){s((function(t){return(0,o.Z)((0,o.Z)({},t),{},{categories:[].concat((0,r.Z)(t.categories),[{nameCategory:"",todoList:[{todo:""}],publicList:!1}])})}))},children:"Add Category"}),(0,l.jsx)("label",{htmlFor:"isPublic",children:"Public"}),(0,l.jsx)("input",{type:"checkbox",id:"isPublic",name:"isPublic",checked:u.isPublic,onChange:function(t){var e=t.target.checked;s((function(t){return(0,o.Z)((0,o.Z)({},t),{},{isPublic:e})}))}}),(0,l.jsx)(d,{onCdnUrlsChange:function(t){g(t)}}),(0,l.jsx)("button",{type:"submit",children:"Submit"})]})]})},p=function(){var t=(0,a.useState)([]),e=(0,c.Z)(t,2),n=e[0],r=e[1],i=localStorage.getItem("token");return(0,a.useEffect)((function(){fetch("http://localhost:3000/api/trips",{headers:{Authorization:"Bearer ".concat(i)}}).then((function(t){return t.json()})).then((function(t){return r(t)})).catch((function(t){return console.error("Error fetching trips:",t)}))}),[i]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h1",{children:"All User Trips"}),(0,l.jsx)("ul",{children:n.map((function(t){return(0,l.jsxs)("li",{children:[(0,l.jsx)("h2",{children:t.title}),(0,l.jsx)("p",{children:t.description}),(0,l.jsx)("h3",{children:"Categories:"}),(0,l.jsx)("ul",{children:t.categories.map((function(t,e){return(0,l.jsxs)("li",{children:[(0,l.jsx)("h4",{children:t.nameCategory}),(0,l.jsx)("ul",{children:t.todoList.map((function(t,e){return(0,l.jsx)("li",{children:t.todo},e)}))})]},e)}))}),(0,l.jsxs)("p",{children:["Public: ",t.isPublic?"Yes":"No"]}),t.photos.length>0&&(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{children:"Photos:"}),(0,l.jsx)("ul",{children:t.photos.map((function(t,e){return(0,l.jsx)("li",{children:(0,l.jsx)("img",{src:t.cdnUrl,alt:"Photo ".concat(e+1)})},e)}))})]})]},t._id)}))})]})},f=n(5861),g=n(4687),x=n.n(g),j=n(5294),Z=function(){var t=(0,a.useState)({title:"",description:"",categories:[{nameCategory:"",todoList:[{todo:""}],publicList:!1}],isPublic:!1}),e=(0,c.Z)(t,2),n=e[0],u=e[1],s=(0,a.useState)([]),d=(0,c.Z)(s,2),h=d[0],p=d[1],g=(0,a.useState)(null),Z=(0,c.Z)(g,2),m=Z[0],b=Z[1],v=localStorage.getItem("token");(0,a.useEffect)((function(){var t=function(){var t=(0,f.Z)(x().mark((function t(){var e;return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j.Z.get("http://localhost:3000/api/trips/allpublic",{headers:{Authorization:"Bearer ".concat(v)}});case 3:e=t.sent,p(e.data.trips),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("Error fetching trips:",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();t()}),[v]);var y=function(t){var e=t.target,n=e.name,r=e.value;u((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,i.Z)({},n,r))}))},C=function(){var t=(0,f.Z)(x().mark((function t(e){var r;return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),t.prev=1,t.next=4,j.Z.post("http://localhost:3000/api/trips/".concat(m._id),(0,o.Z)({},n),{headers:{Authorization:"Bearer ".concat(v)}});case 4:r=t.sent,console.log("Trip updated successfully:",r.data),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.error("Error updating trip:",t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h2",{children:"Select a Trip to Update"}),(0,l.jsx)("ul",{children:h.map((function(t){return(0,l.jsx)("li",{onClick:function(){return function(t){b(t),u({title:t.title,description:t.description,categories:t.categories,isPublic:t.isPublic})}(t)},children:t.title},t._id)}))}),m&&(0,l.jsxs)("form",{onSubmit:C,children:[(0,l.jsxs)("h3",{children:["Update Trip: ",m.title]}),(0,l.jsxs)("label",{children:["Title:",(0,l.jsx)("input",{type:"text",name:"title",value:n.title,onChange:y,required:!0})]}),(0,l.jsxs)("label",{children:["Description:",(0,l.jsx)("input",{type:"text",name:"description",value:n.description,onChange:y})]}),(0,l.jsx)("h2",{children:"Categories"}),n.categories.map((function(t,e){return(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{children:["Category Name:",(0,l.jsx)("input",{type:"text",name:"nameCategory",value:t.nameCategory,onChange:function(t){return function(t,e){var n=t.target,c=n.name,a=n.value;u((function(t){var n=(0,r.Z)(t.categories);return n[e]=(0,o.Z)((0,o.Z)({},n[e]),{},(0,i.Z)({},c,a)),(0,o.Z)((0,o.Z)({},t),{},{categories:n})}))}(t,e)}})]}),(0,l.jsxs)("label",{children:["Public:",(0,l.jsx)("input",{type:"checkbox",name:"publicList",checked:t.publicList,onChange:function(t){return function(t,e){var n=t.target.checked;u((function(t){var i=(0,r.Z)(t.categories);return i[e]=(0,o.Z)((0,o.Z)({},i[e]),{},{publicList:n}),(0,o.Z)((0,o.Z)({},t),{},{categories:i})}))}(t,e)}})]}),(0,l.jsx)("h3",{children:"Todo List"}),t.todoList.map((function(t,i){return(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{children:["Todo:",(0,l.jsx)("input",{type:"text",name:"todo",value:t.todo,onChange:function(t){return function(t,e,n){var i=t.target.value;u((function(t){var c=(0,r.Z)(t.categories),a=(0,r.Z)(c[e].todoList);return a[n]={todo:i},c[e]=(0,o.Z)((0,o.Z)({},c[e]),{},{todoList:a}),(0,o.Z)((0,o.Z)({},t),{},{categories:c})}))}(t,e,i)}})]}),(0,l.jsx)("button",{type:"button",onClick:function(){return function(t,e){var i=(0,r.Z)(n.categories);i[t].todoList.splice(e,1),u((function(t){return(0,o.Z)((0,o.Z)({},t),{},{categories:i})}))}(e,i)},children:"Delete Todo"})]},i)})),(0,l.jsx)("button",{type:"button",onClick:function(){return function(t){var e=(0,r.Z)(n.categories);e[t].todoList.push({todo:""}),u((function(t){return(0,o.Z)((0,o.Z)({},t),{},{categories:e})}))}(e)},children:"Add Todo"}),(0,l.jsx)("button",{type:"button",onClick:function(){return function(t){u((function(e){var n=(0,r.Z)(e.categories);return n.splice(t,1),(0,o.Z)((0,o.Z)({},e),{},{categories:n})}))}(e)},children:"Delete Category"})]},e)})),(0,l.jsx)("button",{type:"button",onClick:function(){u((function(t){return(0,o.Z)((0,o.Z)({},t),{},{categories:[].concat((0,r.Z)(t.categories),[{nameCategory:"",todoList:[{todo:""}],publicList:!1}])})}))},children:"Add Category"}),(0,l.jsxs)("label",{children:["Public:",(0,l.jsx)("input",{type:"checkbox",name:"isPublic",checked:n.isPublic,onChange:function(t){var e=t.target.checked;u((function(t){return(0,o.Z)((0,o.Z)({},t),{},{isPublic:e})}))}})]}),(0,l.jsx)("button",{type:"submit",children:"Update Trip"})]})]})},m=function(){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h1",{children:"User"}),(0,l.jsx)(h,{}),(0,l.jsx)("br",{}),(0,l.jsx)(p,{}),(0,l.jsx)("br",{}),(0,l.jsx)(Z,{})]})}}}]);
//# sourceMappingURL=542.b88d2351.chunk.js.map