"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[127],{8127:function(t,e,n){n.r(e),n.d(e,{default:function(){return p}});var r=n(3433),o=n(4942),i=n(1413),c=n(9439),a=n(2791),u=n(9509),s=n(9095),l=(n(2151),n(184));u.n(s);var d=function(t){var e=t.onCdnUrlsChange,n=(0,a.useState)([]),o=(0,c.Z)(n,2),i=o[0],u=o[1],s=(0,a.useState)([]),d=(0,c.Z)(s,2),h=d[0],f=d[1],p=(0,a.useRef)(null);return(0,a.useEffect)((function(){var t=p.current;if(t){var e=function(t){var e=t.detail.allEntries.filter((function(t){return"success"===t.status}));u(e),f((function(t){var n=e.map((function(t){return{cdnUrl:t.cdnUrl,uuid:t.uuid}}));return[].concat((0,r.Z)(t),(0,r.Z)(n.filter((function(e){return!t.some((function(t){return t.cdnUrl===e.cdnUrl}))}))))}))};return t.addEventListener("change",e),function(){t.removeEventListener("change",e)}}}),[]),(0,a.useEffect)((function(){e(h)}),[h]),(0,l.jsxs)("div",{children:[(0,l.jsx)("lr-config",{"ctx-name":"my-uploader",pubkey:"274c6cf9681b13936265"}),(0,l.jsx)("lr-file-uploader-regular",{"ctx-name":"my-uploader"}),(0,l.jsx)("lr-upload-ctx-provider",{"ctx-name":"my-uploader",ref:p}),(0,l.jsx)("div",{children:i.map((function(t){return(0,l.jsx)("div",{children:(0,l.jsx)("img",{src:t.cdnUrl,alt:t.fileInfo.originalFilename})},t.uuid)}))})]})},h=function(){var t={title:"",description:"",categories:[{nameCategory:"",todoList:[{todo:""}],publicList:!1}],isPublic:!1,photos:[]},e=(0,a.useState)(t),n=(0,c.Z)(e,2),u=n[0],s=n[1],h=(0,a.useState)([]),f=(0,c.Z)(h,2),p=f[0],g=f[1];(0,a.useEffect)((function(){var t=JSON.parse(localStorage.getItem("data"));t&&s(t)}),[]),(0,a.useEffect)((function(){localStorage.setItem("data",JSON.stringify(u))}),[u]);var x=function(t){var e=t.target,n=e.name,r=e.value;s((function(t){return(0,i.Z)((0,i.Z)({},t),{},(0,o.Z)({},n,r))}))};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h1",{children:"Form"}),(0,l.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n=localStorage.getItem("token"),r=(0,i.Z)((0,i.Z)({},u),{},{photos:p});fetch("http://localhost:3000/api/trips",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(r)}).then((function(t){return t.json()})).then((function(e){console.log("Response:",e),s(t),localStorage.removeItem("data"),g([]),window.location.reload()})).catch((function(t){console.error("Error:",t)}))},children:[(0,l.jsx)("label",{htmlFor:"title",children:"Title"}),(0,l.jsx)("input",{type:"text",id:"title",name:"title",value:u.title,onChange:x}),(0,l.jsx)("label",{htmlFor:"description",children:"Description"}),(0,l.jsx)("input",{type:"text",id:"description",name:"description",value:u.description,onChange:x}),(0,l.jsx)("h2",{children:"Categories"}),u.categories.map((function(t,e){return(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"category-".concat(e),children:"Category Name"}),(0,l.jsx)("input",{type:"text",id:"category-".concat(e),name:"nameCategory",value:t.nameCategory,onChange:function(t){return function(t,e){var n=t.target,c=n.name,a=n.value;s((function(t){var n=(0,r.Z)(t.categories);return n[e]=(0,i.Z)((0,i.Z)({},n[e]),{},(0,o.Z)({},c,a)),(0,i.Z)((0,i.Z)({},t),{},{categories:n})}))}(t,e)}}),(0,l.jsx)("label",{htmlFor:"category-public-".concat(e),children:"Public"}),(0,l.jsx)("input",{type:"checkbox",id:"category-public-".concat(e),name:"publicList",checked:t.publicList,onChange:function(t){return function(t,e){var n=t.target.checked;s((function(t){var o=(0,r.Z)(t.categories);return o[e]=(0,i.Z)((0,i.Z)({},o[e]),{},{publicList:n}),(0,i.Z)((0,i.Z)({},t),{},{categories:o})}))}(t,e)}}),(0,l.jsx)("h3",{children:"Todo List"}),t.todoList.map((function(t,n){return(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"todo-".concat(e,"-").concat(n),children:"Todo"}),(0,l.jsx)("input",{type:"text",id:"todo-".concat(e,"-").concat(n),name:"todo",value:t.todo,onChange:function(t){return function(t,e,n){var o=t.target.value;s((function(t){var c=(0,r.Z)(t.categories),a=(0,r.Z)(c[e].todoList);return a[n]={todo:o},c[e]=(0,i.Z)((0,i.Z)({},c[e]),{},{todoList:a}),(0,i.Z)((0,i.Z)({},t),{},{categories:c})}))}(t,e,n)}}),(0,l.jsx)("button",{type:"button",onClick:function(){return function(t,e){var n=(0,r.Z)(u.categories);n[t].todoList.splice(e,1),s((function(t){return(0,i.Z)((0,i.Z)({},t),{},{categories:n})}))}(e,n)},children:"Delete Todo"})]},n)})),(0,l.jsx)("button",{type:"button",onClick:function(){return function(t){var e=(0,r.Z)(u.categories);e[t].todoList.push({todo:""}),s((function(t){return(0,i.Z)((0,i.Z)({},t),{},{categories:e})}))}(e)},children:"Add Todo"}),(0,l.jsx)("button",{type:"button",onClick:function(){return function(t){s((function(e){var n=(0,r.Z)(e.categories);return n.splice(t,1),(0,i.Z)((0,i.Z)({},e),{},{categories:n})}))}(e)},children:"Delete Category"})]},e)})),(0,l.jsx)("button",{type:"button",onClick:function(){s((function(t){return(0,i.Z)((0,i.Z)({},t),{},{categories:[].concat((0,r.Z)(t.categories),[{nameCategory:"",todoList:[{todo:""}],publicList:!1}])})}))},children:"Add Category"}),(0,l.jsx)("label",{htmlFor:"isPublic",children:"Public"}),(0,l.jsx)("input",{type:"checkbox",id:"isPublic",name:"isPublic",checked:u.isPublic,onChange:function(t){var e=t.target.checked;s((function(t){return(0,i.Z)((0,i.Z)({},t),{},{isPublic:e})}))}}),(0,l.jsx)(d,{onCdnUrlsChange:function(t){g(t)}}),(0,l.jsx)("button",{type:"submit",children:"Submit"})]})]})},f=function(){var t=(0,a.useState)([]),e=(0,c.Z)(t,2),n=e[0],r=e[1],o=localStorage.getItem("token");return(0,a.useEffect)((function(){fetch("http://localhost:3000/api/trips",{headers:{Authorization:"Bearer ".concat(o)}}).then((function(t){return t.json()})).then((function(t){return r(t)})).catch((function(t){return console.error("Error fetching trips:",t)}))}),[o]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h1",{children:"All User Trips"}),(0,l.jsx)("ul",{children:n.map((function(t){return(0,l.jsxs)("li",{children:[(0,l.jsx)("h2",{children:t.title}),(0,l.jsx)("p",{children:t.description}),(0,l.jsx)("h3",{children:"Categories:"}),(0,l.jsx)("ul",{children:t.categories.map((function(t,e){return(0,l.jsxs)("li",{children:[(0,l.jsx)("h4",{children:t.nameCategory}),(0,l.jsx)("ul",{children:t.todoList.map((function(t,e){return(0,l.jsx)("li",{children:t.todo},e)}))})]},e)}))}),(0,l.jsxs)("p",{children:["Public: ",t.isPublic?"Yes":"No"]}),t.photos.length>0&&(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{children:"Photos:"}),(0,l.jsx)("ul",{children:t.photos.map((function(t,e){return(0,l.jsx)("li",{children:(0,l.jsx)("img",{src:t.cdnUrl,alt:"Photo ".concat(e+1)})},e)}))})]})]},t._id)}))})]})},p=function(){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h1",{children:"User"}),(0,l.jsx)(h,{}),(0,l.jsx)("br",{}),(0,l.jsx)(f,{})]})}}}]);
//# sourceMappingURL=127.f0fd9499.chunk.js.map