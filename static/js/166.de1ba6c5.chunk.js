"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[166],{2151:function(){},4925:function(e,t,n){function r(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}n.d(t,{Z:function(){return r}})},9509:function(e,t,n){n.d(t,{n:function(){return i}});var r=n(3433);function i(e){for(var t in e){var n=(0,r.Z)(t).reduce((function(e,t){return t.toUpperCase()===t&&(t="-"+t.toLowerCase()),e+t}),"");n.startsWith("-")&&(n=n.replace("-","")),n.startsWith("lr-")||(n="lr-"+n),e[t].reg&&e[t].reg(n)}}},9095:function(e,t,n){n.r(t),n.d(t,{ActivityBlock:function(){return fn},ActivityHeader:function(){return So},BaseComponent:function(){return O},Block:function(){return un},CameraSource:function(){return Oi},CloudImageEditor:function(){return Ko},CloudImageEditorActivity:function(){return wo},CloudImageEditorBlock:function(){return Ki},Config:function(){return gr},ConfirmationDialog:function(){return Ni},Copyright:function(){return Vo},CropFrame:function(){return Gi},Data:function(){return m},DropArea:function(){return Fr},EditorCropButtonControl:function(){return Xi},EditorFilterControl:function(){return ro},EditorImageCropper:function(){return ao},EditorImageFader:function(){return uo},EditorOperationControl:function(){return io},EditorScroller:function(){return ho},EditorSlider:function(){return eo},EditorToolbar:function(){return fo},ExternalSource:function(){return Zo},FileItem:function(){return Ti},FilePreview:function(){return Vi},FileUploaderInline:function(){return qo},FileUploaderMinimal:function(){return Ho},FileUploaderRegular:function(){return jo},FormInput:function(){return To},Icon:function(){return yr},Img:function(){return Sr},LineLoaderUi:function(){return po},LrBtnUi:function(){return vo},Modal:function(){return Si},PACKAGE_NAME:function(){return Mn},PACKAGE_VERSION:function(){return In},PresenceToggle:function(){return bo},ProgressBar:function(){return Bi},ProgressBarCommon:function(){return Fi},Select:function(){return Mo},SimpleBtn:function(){return Mr},SliderUi:function(){return _o},SourceBtn:function(){return Br},SourceList:function(){return Dr},StartFrom:function(){return Ir},Tabs:function(){return Eo},UID:function(){return _},UploadCtxProvider:function(){return Ri},UploadList:function(){return Ii},UploaderBlock:function(){return tr},UrlSource:function(){return Li},Video:function(){return Do},connectBlocksFrom:function(){return Wo},defineLocale:function(){return Tt},registerBlocks:function(){return Go.n},toKebabCase:function(){return nr}});var r=n(5861),i=n(7326),o=n(8737),a=n(7762),s=n(136),l=n(9388),c=n(3433),u=n(5671),d=n(3144),h=n(1413),f=n(4687),v=Object.defineProperty,p=function(e,t,n){return function(e,t,n){t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!==typeof t?t+"":t,n),n};var m=function(){function e(t){(0,u.Z)(this,e),t.constructor===Object?this.store=function e(t){var n;for(var r in t)(null==(n=t[r])?void 0:n.constructor)===Object&&(t[r]=e(t[r]));return(0,h.Z)({},t)}(t):(this._storeIsProxy=!0,this.store=t),this.callbackMap=Object.create(null)}return(0,d.Z)(e,[{key:"read",value:function(t){return this._storeIsProxy||this.store.hasOwnProperty(t)?this.store[t]:(e.warn("read",t),null)}},{key:"has",value:function(e){return this._storeIsProxy?void 0!==this.store[e]:this.store.hasOwnProperty(e)}},{key:"add",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!n&&Object.keys(this.store).includes(e)||(this.store[e]=t,this.notify(e))}},{key:"pub",value:function(t,n){this._storeIsProxy||this.store.hasOwnProperty(t)?(this.store[t]=n,this.notify(t)):e.warn("publish",t)}},{key:"multiPub",value:function(e){for(var t in e)this.pub(t,e[t])}},{key:"notify",value:function(e){var t=this;this.callbackMap[e]&&this.callbackMap[e].forEach((function(n){n(t.store[e])}))}},{key:"sub",value:function(t,n){var r=this,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this._storeIsProxy||this.store.hasOwnProperty(t)?(this.callbackMap[t]||(this.callbackMap[t]=new Set),this.callbackMap[t].add(n),i&&n(this.store[t]),{remove:function(){r.callbackMap[t].delete(n),r.callbackMap[t].size||delete r.callbackMap[t]},callback:n}):(e.warn("subscribe",t),null)}}],[{key:"warn",value:function(e,t){console.warn("Symbiote Data: cannot ".concat(e,". Prop name: ")+t)}},{key:"registerCtx",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Symbol(),r=e.globalStore.get(n);return r?console.warn('State: context UID "'+n+'" already in use'):(r=new e(t),e.globalStore.set(n,r)),r}},{key:"deleteCtx",value:function(t){e.globalStore.delete(t)}},{key:"getCtx",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.globalStore.get(t)||(n&&console.warn('State: wrong context UID - "'+t+'"'),null)}}]),e}();m.globalStore=new Map;var g=Object.freeze({BIND_ATTR:"set",ATTR_BIND_PRFX:"@",EXT_DATA_CTX_PRFX:"*",NAMED_DATA_CTX_SPLTR:"/",CTX_NAME_ATTR:"ctx-name",CTX_OWNER_ATTR:"ctx-owner",CSS_CTX_PROP:"--ctx-name",EL_REF_ATTR:"ref",AUTO_TAG_PRFX:"sym",REPEAT_ATTR:"repeat",REPEAT_ITEM_TAG_ATTR:"repeat-item-tag",SET_LATER_KEY:"__toSetLater__",USE_TPL:"use-template",ROOT_STYLE_ATTR_NAME:"sym-component"}),y="1234567890QWERTYUIOPASDFGHJKLZXCVBNMqwertyuiopasdfghjklzxcvbnm",b=y.length-1,_=function(){function e(){(0,u.Z)(this,e)}return(0,d.Z)(e,null,[{key:"generate",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"XXXXXXXXX-XXX",t="",n=0;n<e.length;n++)t+="-"===e[n]?e[n]:y.charAt(Math.random()*b);return t}}]),e}();function w(e,t,n){var r,i=!0,o=t.split(".");return o.forEach((function(t,n){n<o.length-1?e=e[t]:r=t})),e?e[r]=n:i=!1,i}var k="__default__";var x="{{",C="}}";var A=[function(e,t){(0,c.Z)(e.querySelectorAll("[".concat(g.REPEAT_ATTR,"]"))).forEach((function(e){var n,r=e.getAttribute(g.REPEAT_ITEM_TAG_ATTR);if(r&&(n=window.customElements.get(r)),!n){n=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;return(0,u.Z)(this,n),e=t.call(this),r||(e.style.display="contents"),e}return(0,d.Z)(n)}(t.BaseComponent);var i=e.innerHTML;n.template=i,n.reg(r)}for(;e.firstChild;)e.firstChild.remove();var o=e.getAttribute(g.REPEAT_ATTR);t.sub(o,(function(t){if(t){var r,i=(0,c.Z)(e.children),o=function(t){t.forEach((function(e,t){if(i[t])if(i[t].set$)setTimeout((function(){i[t].set$(e)}));else for(var o in e)i[t][o]=e[o];else{r||(r=new DocumentFragment);var a=new n;Object.assign(a.init$,e),r.appendChild(a)}})),r&&e.appendChild(r);var o,s=i.slice(t.length,i.length),l=(0,a.Z)(s);try{for(l.s();!(o=l.n()).done;){o.value.remove()}}catch(c){l.e(c)}finally{l.f()}};if(t.constructor===Array)o(t);else if(t.constructor===Object){var s=[];for(var l in t){var u=t[l];Object.defineProperty(u,"_KEY_",{value:l,enumerable:!0}),s.push(u)}o(s)}else console.warn("Symbiote repeat data type error:"),console.log(t)}else for(;e.firstChild;)e.firstChild.remove()})),e.removeAttribute(g.REPEAT_ATTR),e.removeAttribute(g.REPEAT_ITEM_TAG_ATTR)}))},function(e,t){if(!t.shadowRoot){var n=(0,c.Z)(e.querySelectorAll("slot"));if(n.length){var r={};n.forEach((function(e){var t=e.getAttribute("name")||k;r[t]={slot:e,fr:document.createDocumentFragment()}})),t.initChildren.forEach((function(e){var t,n=k;e instanceof Element&&e.hasAttribute("slot")&&(n=e.getAttribute("slot"),e.removeAttribute("slot")),null==(t=r[n])||t.fr.appendChild(e)})),Object.values(r).forEach((function(e){if(e.fr.childNodes.length)e.slot.parentNode.replaceChild(e.fr,e.slot);else if(e.slot.childNodes.length){var t=document.createDocumentFragment();t.append.apply(t,(0,c.Z)(e.slot.childNodes)),e.slot.parentNode.replaceChild(t,e.slot)}else e.slot.remove()}))}}},function(e,t){(0,c.Z)(e.querySelectorAll("[".concat(g.EL_REF_ATTR,"]"))).forEach((function(e){var n=e.getAttribute(g.EL_REF_ATTR);t.ref[n]=e,e.removeAttribute(g.EL_REF_ATTR)}))},function(e,t){(0,c.Z)(e.querySelectorAll("[".concat(g.BIND_ATTR,"]"))).forEach((function(e){var n=e.getAttribute(g.BIND_ATTR).split(";");(0,c.Z)(e.attributes).forEach((function(t){if(t.name.startsWith("-")&&t.value){var r=t.name.replace("-","").split("-").map((function(e,t){return e&&t?e[0].toUpperCase()+e.slice(1):e})).join("").split("_").map((function(e,t){return e&&t?e.toUpperCase():e})).join("");n.push(r+":"+t.value),e.removeAttribute(t.name)}})),n.forEach((function(n){if(n){var r,i=n.split(":").map((function(e){return e.trim()})),o=i[0];0===o.indexOf(g.ATTR_BIND_PRFX)&&(r=!0,o=o.replace(g.ATTR_BIND_PRFX,""));var s,l=i[1].split(",").map((function(e){return e.trim()})),c=(0,a.Z)(l);try{var u=function(){var n=s.value,i=void 0;n.startsWith("!!")?(i="double",n=n.replace("!!","")):n.startsWith("!")&&(i="single",n=n.replace("!","")),t.sub(n,(function(t){"double"===i?t=!!t:"single"===i&&(t=!t),r?(null==t?void 0:t.constructor)===Boolean?t?e.setAttribute(o,""):e.removeAttribute(o):e.setAttribute(o,t):w(e,o,t)||(e[g.SET_LATER_KEY]||(e[g.SET_LATER_KEY]=Object.create(null)),e[g.SET_LATER_KEY][o]=t)}))};for(c.s();!(s=c.n()).done;)u()}catch(d){c.e(d)}finally{c.f()}}})),e.removeAttribute(g.BIND_ATTR)}))},function(e,t){(function(e){for(var t,n=[],r=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,{acceptNode:function(e){var t;return!(null==(t=e.parentElement)?void 0:t.hasAttribute("skip-text"))&&e.textContent.includes(x)&&e.textContent.includes(C)&&1}});t=r.nextNode();)n.push(t);return n})(e).forEach((function(e){for(var n,r=[];e.textContent.includes(C);)e.textContent.startsWith(x)?(n=e.textContent.indexOf(C)+C.length,e.splitText(n),r.push(e)):(n=e.textContent.indexOf(x),e.splitText(n)),e=e.nextSibling;r.forEach((function(e){var n=e.textContent.replace(x,"").replace(C,"");e.textContent="",t.sub(n,(function(t){e.textContent=t}))}))}))}],Z="'",E='"',T=/\\([0-9a-fA-F]{1,6} ?)/g;function S(e){var t,n=e;(t=e)[0]!==E&&t[0]!==Z||t[t.length-1]!==E&&t[t.length-1]!==Z||(n=function(e){return e[0]!==E&&e[0]!==Z||(e=e.slice(1)),e[e.length-1]!==E&&e[e.length-1]!==Z||(e=e.slice(0,-1)),e}(n),n=function(e){for(var t="",n="",r=0;r<e.length;r++){var i=e[r+1];"\\"===e[r]&&'"'===i?(t+='\\"',r++):'"'===e[r]&&"\\"!==n?t+='\\"':t+=e[r],n=e[r]}return t}(n=(n=n.replace(T,(function(e,t){return String.fromCodePoint(parseInt(t.trim(),16))}))).replaceAll("\\\n","\\n")),n=E+n+E);try{return JSON.parse(n)}catch(r){throw new Error("Failed to parse CSS property value: ".concat(n,". Original input: ").concat(e))}}var M=0,I=null,L=null,$=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;return(0,u.Z)(this,n),e=t.call(this),p((0,i.Z)(e),"updateCssData",(function(){var t;e.dropCssDataCache(),null==(t=e.__boundCssProps)||t.forEach((function(t){var n=e.getCssData(e.__extractCssName(t),!0);null!==n&&e.$[t]!==n&&(e.$[t]=n)}))})),e.init$=Object.create(null),e.cssInit$=Object.create(null),e.tplProcessors=new Set,e.ref=Object.create(null),e.allSubs=new Set,e.pauseRender=!1,e.renderShadow=!1,e.readyToDestroy=!0,e.processInnerHtml=!1,e.allowCustomTemplate=!1,e.ctxOwner=!1,e}return(0,d.Z)(n,[{key:"BaseComponent",get:function(){return n}},{key:"initCallback",value:function(){}},{key:"__initCallback",value:function(){var e;this.__initialized||(this.__initialized=!0,null==(e=this.initCallback)||e.call(this))}},{key:"render",value:function(e){var t,n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.renderShadow;if(!r&&!this.constructor.__shadowStylesUrl||this.shadowRoot||this.attachShadow({mode:"open"}),this.allowCustomTemplate){var i=this.getAttribute(g.USE_TPL);if(i){var o=this.getRootNode(),s=(null==o?void 0:o.querySelector(i))||document.querySelector(i);s?e=s.content.cloneNode(!0):console.warn('Symbiote template "'.concat(i,'" is not found...'))}}if(this.processInnerHtml){var l,c=(0,a.Z)(this.tplProcessors);try{for(c.s();!(l=c.n()).done;){var u=l.value;u(this,this)}}catch(y){c.e(y)}finally{c.f()}}if(e||this.constructor.template){if(this.constructor.template&&!this.constructor.__tpl&&(this.constructor.__tpl=document.createElement("template"),this.constructor.__tpl.innerHTML=this.constructor.template),(null==e?void 0:e.constructor)===DocumentFragment)t=e;else if((null==e?void 0:e.constructor)===String){var d=document.createElement("template");d.innerHTML=e,t=d.content.cloneNode(!0)}else this.constructor.__tpl&&(t=this.constructor.__tpl.content.cloneNode(!0));var h,f=(0,a.Z)(this.tplProcessors);try{for(f.s();!(h=f.n()).done;){var v=h.value;v(t,this)}}catch(y){f.e(y)}finally{f.f()}}var p=function(){t&&(r&&n.shadowRoot.appendChild(t)||n.appendChild(t)),n.__initCallback()};if(this.constructor.__shadowStylesUrl){r=!0;var m=document.createElement("link");m.rel="stylesheet",m.href=this.constructor.__shadowStylesUrl,m.onload=p,this.shadowRoot.prepend(m)}else p()}},{key:"addTemplateProcessor",value:function(e){this.tplProcessors.add(e)}},{key:"autoCtxName",get:function(){return this.__autoCtxName||(this.__autoCtxName=_.generate(),this.style.setProperty(g.CSS_CTX_PROP,"'".concat(this.__autoCtxName,"'"))),this.__autoCtxName}},{key:"cssCtxName",get:function(){return this.getCssData(g.CSS_CTX_PROP,!0)}},{key:"ctxName",get:function(){var e,t=(null==(e=this.getAttribute(g.CTX_NAME_ATTR))?void 0:e.trim())||this.cssCtxName||this.__cachedCtxName||this.autoCtxName;return this.__cachedCtxName=t,t}},{key:"localCtx",get:function(){return this.__localCtx||(this.__localCtx=m.registerCtx({},this)),this.__localCtx}},{key:"nodeCtx",get:function(){return m.getCtx(this.ctxName,!1)||m.registerCtx({},this.ctxName)}},{key:"sub",value:function(e,t){var r=this,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=function(e){r.isConnected&&t(e)},a=n.__parseProp(e,this);a.ctx.has(a.name)?this.allSubs.add(a.ctx.sub(a.name,o,i)):window.setTimeout((function(){r.allSubs.add(a.ctx.sub(a.name,o,i))}))}},{key:"notify",value:function(e){var t=n.__parseProp(e,this);t.ctx.notify(t.name)}},{key:"has",value:function(e){var t=n.__parseProp(e,this);return t.ctx.has(t.name)}},{key:"add",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=n.__parseProp(e,this);i.ctx.add(i.name,t,r)}},{key:"add$",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var n in e)this.add(n,e[n],t)}},{key:"$",get:function(){var e=this;if(!this.__stateProxy){var t=Object.create(null);this.__stateProxy=new Proxy(t,{set:function(t,r,i){var o=n.__parseProp(r,e);return o.ctx.pub(o.name,i),!0},get:function(t,r){var i=n.__parseProp(r,e);return i.ctx.read(i.name)}})}return this.__stateProxy}},{key:"set$",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var n in e){var r=e[n],i=[String,Number,Boolean];(t||!i.includes(null==r?void 0:r.constructor)||this.$[n]!==r)&&(this.$[n]=r)}}},{key:"__ctxOwner",get:function(){return this.ctxOwner||this.hasAttribute(g.CTX_OWNER_ATTR)&&"false"!==this.getAttribute(g.CTX_OWNER_ATTR)}},{key:"__initDataCtx",value:function(){var e=this.constructor.__attrDesc;if(e)for(var t=0,n=Object.values(e);t<n.length;t++){var r=n[t];Object.keys(this.init$).includes(r)||(this.init$[r]="")}for(var i in this.init$)if(i.startsWith(g.EXT_DATA_CTX_PRFX))this.nodeCtx.add(i.replace(g.EXT_DATA_CTX_PRFX,""),this.init$[i],this.__ctxOwner);else if(i.includes(g.NAMED_DATA_CTX_SPLTR)){var o=i.split(g.NAMED_DATA_CTX_SPLTR),a=o[0].trim(),s=o[1].trim();if(a&&s){var l=m.getCtx(a,!1);l||(l=m.registerCtx({},a)),l.add(s,this.init$[i])}}else this.localCtx.add(i,this.init$[i]);for(var c in this.cssInit$)this.bindCssData(c,this.cssInit$[c]);this.__dataCtxInitialized=!0}},{key:"connectedCallback",value:function(){var e,t=this;if(this.isConnected){if(this.__disconnectTimeout&&window.clearTimeout(this.__disconnectTimeout),!this.connectedOnce){var n=null==(e=this.getAttribute(g.CTX_NAME_ATTR))?void 0:e.trim();if(n&&this.style.setProperty(g.CSS_CTX_PROP,"'".concat(n,"'")),this.__initDataCtx(),this[g.SET_LATER_KEY]){for(var r in this[g.SET_LATER_KEY])w(this,r,this[g.SET_LATER_KEY][r]);delete this[g.SET_LATER_KEY]}this.initChildren=(0,c.Z)(this.childNodes);for(var i=0,o=A;i<o.length;i++){var a=o[i];this.addTemplateProcessor(a)}if(this.pauseRender)this.__initCallback();else if(this.constructor.__rootStylesLink){var s=this.getRootNode();if(!s)return;if(null==s?void 0:s.querySelector("link[".concat(g.ROOT_STYLE_ATTR_NAME,'="').concat(this.constructor.is,'"]')))return void this.render();var l=this.constructor.__rootStylesLink.cloneNode(!0);l.setAttribute(g.ROOT_STYLE_ATTR_NAME,this.constructor.is),l.onload=function(){t.render()},s.nodeType===Node.DOCUMENT_NODE?s.head.appendChild(l):s.prepend(l)}else this.render()}this.connectedOnce=!0}}},{key:"destroyCallback",value:function(){}},{key:"disconnectedCallback",value:function(){var e=this;this.connectedOnce&&(this.dropCssDataCache(),this.readyToDestroy&&(this.__disconnectTimeout&&window.clearTimeout(this.__disconnectTimeout),this.__disconnectTimeout=window.setTimeout((function(){e.destroyCallback();var t,n=(0,a.Z)(e.allSubs);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.remove(),e.allSubs.delete(r)}}catch(l){n.e(l)}finally{n.f()}var i,o=(0,a.Z)(e.tplProcessors);try{for(o.s();!(i=o.n()).done;){var s=i.value;e.tplProcessors.delete(s)}}catch(l){o.e(l)}finally{o.f()}null==L||L.delete(e.updateCssData),(null==L?void 0:L.size)||(null==I||I.disconnect(),I=null,L=null)}),100)))}},{key:"attributeChangedCallback",value:function(e,t,n){var r;if(t!==n){var i=null==(r=this.constructor.__attrDesc)?void 0:r[e];i?this.__dataCtxInitialized?this.$[i]=n:this.init$[i]=n:this[e]=n}}},{key:"getCssData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.__cssDataCache||(this.__cssDataCache=Object.create(null)),!Object.keys(this.__cssDataCache).includes(e)){this.__computedStyle||(this.__computedStyle=window.getComputedStyle(this));var n=this.__computedStyle.getPropertyValue(e).trim();try{this.__cssDataCache[e]=S(n)}catch(r){!t&&console.warn("CSS Data error: ".concat(e)),this.__cssDataCache[e]=null}}return this.__cssDataCache[e]}},{key:"__extractCssName",value:function(e){return e.split("--").map((function(e,t){return 0===t?"":e})).join("--")}},{key:"__initStyleAttrObserver",value:function(){L||(L=new Set),L.add(this.updateCssData),I||(I=new MutationObserver((function(e){"attributes"===e[0].type&&L.forEach((function(e){e()}))}))).observe(document,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style"]})}},{key:"bindCssData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.__boundCssProps||(this.__boundCssProps=new Set),this.__boundCssProps.add(e);var n=this.getCssData(this.__extractCssName(e),!0);null===n&&(n=t),this.add(e,n),this.__initStyleAttrObserver()}},{key:"dropCssDataCache",value:function(){this.__cssDataCache=null,this.__computedStyle=null}},{key:"defineAccessor",value:function(e,t,n){var r=this,i="__"+e;this[i]=this[e],Object.defineProperty(this,e,{set:function(e){r[i]=e,n?window.setTimeout((function(){null==t||t(e)})):null==t||t(e)},get:function(){return r[i]}}),this[e]=this[i]}}],[{key:"__parseProp",value:function(e,t){var n,r;if(e.startsWith(g.EXT_DATA_CTX_PRFX))n=t.nodeCtx,r=e.replace(g.EXT_DATA_CTX_PRFX,"");else if(e.includes(g.NAMED_DATA_CTX_SPLTR)){var i=e.split(g.NAMED_DATA_CTX_SPLTR);n=m.getCtx(i[0]),r=i[1]}else n=t.localCtx,r=e;return{ctx:n,name:r}}},{key:"reg",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e||(M++,e="".concat(g.AUTO_TAG_PRFX,"-").concat(M)),this.__tag=e;var n=window.customElements.get(e);n?t||n===this||console.warn(['Element with tag name "'.concat(e,'" already registered.'),"You're trying to override it with another class \"".concat(this.name,'".'),"This is most likely a mistake.","New element will not be registered."].join("\n")):window.customElements.define(e,t?function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,u.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n)}(this):this)}},{key:"is",get:function(){return this.__tag||this.reg(),this.__tag}},{key:"bindAttributes",value:function(e){this.observedAttributes=Object.keys(e),this.__attrDesc=e}},{key:"shadowStyles",set:function(e){var t=new Blob([e],{type:"text/css"});this.__shadowStylesUrl=URL.createObjectURL(t)}},{key:"rootStyles",set:function(e){if(!this.__rootStylesLink){var t=new Blob([e],{type:"text/css"}),n=URL.createObjectURL(t),r=document.createElement("link");r.href=n,r.rel="stylesheet",this.__rootStylesLink=r}}}]),n}((0,o.Z)(HTMLElement)),O=$;p(O,"template");var U=function(){function e(){(0,u.Z)(this,e)}return(0,d.Z)(e,null,[{key:"_print",value:function(e){console.warn(e)}},{key:"setDefaultTitle",value:function(e){this.defaultTitle=e}},{key:"setRoutingMap",value:function(e){for(var t in Object.assign(this.appMap,e),this.appMap)this.defaultRoute||!0!==this.appMap[t].default?this.errorRoute||!0!==this.appMap[t].error||(this.errorRoute=t):this.defaultRoute=t}},{key:"routingEventName",get:function(){return this.__routingEventName||"sym-on-route"},set:function(e){this.__routingEventName=e}},{key:"readAddressBar",value:function(){var e={route:null,options:{}};return window.location.search.split(this.separator).forEach((function(t){if(t.includes("?"))e.route=t.replace("?","");else if(t.includes("=")){var n=t.split("=");e.options[n[0]]=decodeURI(n[1])}else e.options[t]=!0})),e}},{key:"notify",value:function(){var t=this.readAddressBar(),n=this.appMap[t.route];if(n&&n.title&&(document.title=n.title),null===t.route&&this.defaultRoute)this.applyRoute(this.defaultRoute);else if(n||!this.errorRoute)if(n||!this.defaultRoute)if(n){var r=new CustomEvent(e.routingEventName,{detail:{route:t.route,options:Object.assign(n||{},t.options)}});window.dispatchEvent(r)}else this._print('Route "'.concat(t.route,'" not found...'));else this.applyRoute(this.defaultRoute);else this.applyRoute(this.errorRoute)}},{key:"reflect",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.appMap[e];if(n){var r="?"+e;for(var i in t)!0===t[i]?r+=this.separator+i:r+=this.separator+i+"=".concat(t[i]);var o=n.title||this.defaultTitle||"";window.history.pushState(null,o,r),document.title=o}else this._print("Wrong route: "+e)}},{key:"applyRoute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.reflect(e,t),this.notify()}},{key:"setSeparator",value:function(e){this._separator=e}},{key:"separator",get:function(){return this._separator||"&"}},{key:"createRouterData",value:function(t,n){var r=this;this.setRoutingMap(n);var i=m.registerCtx({route:null,options:null,title:null},t);return window.addEventListener(this.routingEventName,(function(e){var t;i.multiPub({route:e.detail.route,options:e.detail.options,title:(null==(t=e.detail.options)?void 0:t.title)||r.defaultTitle||""})})),e.notify(),this.initPopstateListener(),i}},{key:"initPopstateListener",value:function(){var e=this;this.__onPopstate||(this.__onPopstate=function(){e.notify()},window.addEventListener("popstate",this.__onPopstate))}},{key:"removePopstateListener",value:function(){window.removeEventListener("popstate",this.__onPopstate),this.__onPopstate=null}}]),e}();function R(e,t){for(var n in t)n.includes("-")?e.style.setProperty(n,t[n]):e.style[n]=t[n]}function P(e,t){for(var n in t)t[n].constructor===Boolean?t[n]?e.setAttribute(n,""):e.removeAttribute(n):e.setAttribute(n,t[n])}function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{tag:"div"},t=document.createElement(e.tag);if(e.attributes&&P(t,e.attributes),e.styles&&R(t,e.styles),e.properties)for(var n in e.properties)t[n]=e.properties[n];return e.processors&&e.processors.forEach((function(e){e(t)})),e.children&&e.children.forEach((function(e){var n=N(e);t.appendChild(n)})),t}U.appMap=Object.create(null);var F="idb-store-ready",B="symbiote-db",D=function(){function e(t,n){var i=this;(0,u.Z)(this,e),this.name=t,this.storeName=n,this.version=1,this.request=window.indexedDB.open(this.name,this.version),this.request.onupgradeneeded=function(e){i.db=e.target.result,i.objStore=i.db.createObjectStore(n,{keyPath:"_key"}),i.objStore.transaction.oncomplete=function(e){i._notifyWhenReady(e)}},this.request.onsuccess=function(e){i.db=e.target.result,i._notifyWhenReady(e)},this.request.onerror=function(e){console.error(e)},this._subscriptionsMap={},this._updateHandler=function(e){e.key===i.name&&i._subscriptionsMap[e.newValue]&&i._subscriptionsMap[e.newValue].forEach(function(){var t=(0,r.Z)(f.mark((function t(n){return f.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=n,t.next=3,i.read(e.newValue);case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},this._localUpdateHandler=function(e){i._updateHandler(e.detail)},window.addEventListener("storage",this._updateHandler),window.addEventListener(this._updEventName,this._localUpdateHandler)}return(0,d.Z)(e,[{key:"_notifyWhenReady",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;window.dispatchEvent(new CustomEvent(F,{detail:{dbName:this.name,storeName:this.storeName,event:e}}))}},{key:"_updEventName",get:function(){return"symbiote-idb-update_"+this.name}},{key:"_getUpdateEvent",value:function(e){return new CustomEvent(this._updEventName,{detail:{key:this.name,newValue:e}})}},{key:"_notifySubscribers",value:function(e){window.localStorage.removeItem(this.name),window.localStorage.setItem(this.name,e),window.dispatchEvent(this._getUpdateEvent(e))}},{key:"read",value:function(e){var t=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).get(e);return new Promise((function(n,r){t.onsuccess=function(t){var r;(null==(r=t.target.result)?void 0:r._value)?n(t.target.result._value):(n(null),console.warn('IDB: cannot read "'.concat(e,'"')))},t.onerror=function(e){r(e)}}))}},{key:"write",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i={_key:e,_value:t},o=this.db.transaction(this.storeName,"readwrite"),a=o.objectStore(this.storeName).put(i);return new Promise((function(t,i){a.onsuccess=function(i){r||n._notifySubscribers(e),t(i.target.result)},a.onerror=function(e){i(e)}}))}},{key:"delete",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.db.transaction(this.storeName,"readwrite"),i=r.objectStore(this.storeName).delete(e);return new Promise((function(r,o){i.onsuccess=function(i){n||t._notifySubscribers(e),r(i)},i.onerror=function(e){o(e)}}))}},{key:"getAll",value:function(){var e=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).getAll();return new Promise((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n.map((function(e){return e._value})))},e.onerror=function(e){n(e)}}))}},{key:"subscribe",value:function(e,t){var n=this;this._subscriptionsMap[e]||(this._subscriptionsMap[e]=new Set);var r=this._subscriptionsMap[e];return r.add(t),{remove:function(){r.delete(t),r.size||delete n._subscriptionsMap[e]}}}},{key:"stop",value:function(){window.removeEventListener("storage",this._updateHandler),this._subscriptionsMap=null,V.clear(this.name)}}]),e}(),V=function(){function e(){(0,u.Z)(this,e)}return(0,d.Z)(e,null,[{key:"readyEventName",get:function(){return F}},{key:"open",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"store",n=e+"/"+t;return this._reg[n]||(this._reg[n]=new D(e,t)),this._reg[n]}},{key:"clear",value:function(e){for(var t in window.indexedDB.deleteDatabase(e),this._reg)t.split("/")[0]===e&&delete this._reg[t]}}]),e}();p(V,"_reg",Object.create(null));var z=n(1120);function j(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,z.Z)(e)););return e}function H(){return H="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=j(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},H.apply(this,arguments)}var q=n(4942),K=Object.freeze({FILE_ADDED:"file-added",FILE_REMOVED:"file-removed",FILE_UPLOAD_START:"file-upload-start",FILE_UPLOAD_PROGRESS:"file-upload-progress",FILE_UPLOAD_SUCCESS:"file-upload-success",FILE_UPLOAD_FAILED:"file-upload-failed",FILE_URL_CHANGED:"file-url-changed",MODAL_OPEN:"modal-open",MODAL_CLOSE:"modal-close",DONE_CLICK:"done-click",UPLOAD_CLICK:"upload-click",ACTIVITY_CHANGE:"activity-change",COMMON_UPLOAD_START:"common-upload-start",COMMON_UPLOAD_PROGRESS:"common-upload-progress",COMMON_UPLOAD_SUCCESS:"common-upload-success",COMMON_UPLOAD_FAILED:"common-upload-failed",CHANGE:"change",GROUP_CREATED:"group-created"}),G=function(){function e(t){(0,u.Z)(this,e),(0,q.Z)(this,"_timeoutStore",new Map),(0,q.Z)(this,"_targets",new Set),(0,q.Z)(this,"_debugPrint",null),this._debugPrint=t}return(0,d.Z)(e,[{key:"bindTarget",value:function(e){this._targets.add(e)}},{key:"unbindTarget",value:function(e){this._targets.delete(e)}},{key:"_dispatch",value:function(e,t){var n,r,i=(0,a.Z)(this._targets);try{for(i.s();!(r=i.n()).done;){r.value.dispatchEvent(new CustomEvent(e,{detail:t}))}}catch(o){i.e(o)}finally{i.f()}null===(n=this._debugPrint)||void 0===n||n.call(this,(function(){var n=t&&"object"===typeof t?(0,h.Z)({},t):t;return['event "'.concat(e,'"'),n]}))}},{key:"emit",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.debounce;if("number"===typeof i||i){this._timeoutStore.has(e)&&window.clearTimeout(this._timeoutStore.get(e));var o="number"===typeof i?i:20,a=window.setTimeout((function(){n._dispatch(e,"function"===typeof t?t():t),n._timeoutStore.delete(e)}),o);this._timeoutStore.set(e,a)}else this._dispatch(e,"function"===typeof t?t():t)}}]),e}();function W(e,t){var n,r=function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];clearTimeout(n),n=setTimeout((function(){return e.apply(void 0,i)}),t)};return r.cancel=function(){clearTimeout(n)},r}var X="--uploadcare-blocks-window-height",Y=function(){function e(){(0,u.Z)(this,e)}return(0,d.Z)(e,null,[{key:"registerClient",value:function(e){0===this.clientsRegistry.size&&this.attachTracker(),this.clientsRegistry.add(e)}},{key:"unregisterClient",value:function(e){this.clientsRegistry.delete(e),0===this.clientsRegistry.size&&this.detachTracker()}},{key:"attachTracker",value:function(){window.addEventListener("resize",this.flush,{passive:!0,capture:!0}),this.flush()}},{key:"detachTracker",value:function(){window.removeEventListener("resize",this.flush,{capture:!0}),document.documentElement.style.removeProperty(X)}}]),e}();(0,q.Z)(Y,"clientsRegistry",new Set),(0,q.Z)(Y,"flush",W((function(){document.documentElement.style.setProperty(X,"".concat(window.innerHeight,"px"))}),100));var J=function(e,t){return new Intl.PluralRules(e).select(t)},Q=function(e){return e},ee="{{",te="}}",ne="plural:";function re(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.openToken,i=void 0===r?ee:r,o=n.closeToken,a=void 0===o?te:o,s=n.transform,l=void 0===s?Q:s;for(var c in t){var u,d=null===(u=t[c])||void 0===u?void 0:u.toString();e=e.replaceAll(i+c+a,"string"===typeof d?l(d):d)}return e}function ie(e){for(var t=[],n=e.indexOf(ee);-1!==n;){var r=e.indexOf(te,n),i=e.substring(n+2,r);if(i.startsWith(ne)){var o=e.substring(n+2,r).replace(ne,""),a=o.substring(0,o.indexOf("(")),s=o.substring(o.indexOf("(")+1,o.indexOf(")"));t.push({variable:i,pluralKey:a,countVariable:s})}n=e.indexOf(ee,r)}return t}var oe=n(4506),ae=n(9439);function se(e){return"[object Object]"===Object.prototype.toString.call(e)}var le=/\W|_/g;function ce(e){return e.split(le).map((function(e,t){return e.charAt(0)[t>0?"toUpperCase":"toLowerCase"]()+e.slice(1)})).join("")}function ue(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ignoreKeys:[]},n=t.ignoreKeys;return Array.isArray(e)?e.map((function(e){return de(e,{ignoreKeys:n})})):e}function de(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ignoreKeys:[]},n=t.ignoreKeys;if(Array.isArray(e))return ue(e,{ignoreKeys:n});if(!se(e))return e;for(var r={},i=0,o=Object.keys(e);i<o.length;i++){var a=o[i],s=e[a];n.includes(a)?r[a]=s:(se(s)?s=de(s,{ignoreKeys:n}):Array.isArray(s)&&(s=ue(s,{ignoreKeys:n})),r[ce(a)]=s)}return r}var he=function(e){return new Promise((function(t){return setTimeout(t,e)}))};function fe(e){var t=e.libraryName,n=e.libraryVersion,r=e.userAgent,i=e.publicKey,o=void 0===i?"":i,a=e.integration,s=void 0===a?"":a,l="JavaScript";if("string"===typeof r)return r;if("function"===typeof r)return r({publicKey:o,libraryName:t,libraryVersion:n,languageName:l,integration:s});var c=[t,n,o].filter(Boolean).join("/"),u=[l,s].filter(Boolean).join("; ");return"".concat(c," (").concat(u,")")}var ve={factor:2,time:100};var pe=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,u.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n)}((0,o.Z)(Error)),me=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){var r;return(0,u.Z)(this,n),r=t.call(this),(0,q.Z)((0,i.Z)(r),"originalProgressEvent",void 0),r.name="NetworkError",r.message="Network error",Object.setPrototypeOf((0,i.Z)(r),n.prototype),r.originalProgressEvent=e,r}return(0,d.Z)(n)}(pe),ge=function(e,t){e&&(e.aborted?Promise.resolve().then(t):e.addEventListener("abort",(function(){return t()}),{once:!0}))},ye=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Request canceled";return(0,u.Z)(this,n),e=t.call(this,r),(0,q.Z)((0,i.Z)(e),"isCancel",!0),e.name="CancelError",Object.setPrototypeOf((0,i.Z)(e),n.prototype),e}return(0,d.Z)(n)}(pe),be=function(e){var t=e.check,n=e.interval,r=void 0===n?500:n,i=e.timeout,o=e.signal;return new Promise((function(e,n){var a,s;ge(o,(function(){a&&clearTimeout(a),n(new ye("Poll cancelled"))})),i&&(s=setTimeout((function(){a&&clearTimeout(a),n(new ye("Timed out"))}),i));a=setTimeout((function i(){try{Promise.resolve(t(o)).then((function(t){t?(s&&clearTimeout(s),e(t)):a=setTimeout(i,r)})).catch((function(e){s&&clearTimeout(s),n(e)}))}catch(l){s&&clearTimeout(s),n(l)}}),0)}))},_e={baseCDN:"https://ucarecdn.com",baseURL:"https://upload.uploadcare.com",maxContentLength:52428800,retryThrottledRequestMaxTimes:1,retryNetworkErrorMaxTimes:3,multipartMinFileSize:26214400,multipartChunkSize:5242880,multipartMinLastPartSize:1048576,maxConcurrentRequests:4,pollingTimeoutMilliseconds:1e4,pusherKey:"79ae88bd931ea68464d9"},we="application/octet-stream",ke="original",xe=function(e){var t=e.method,n=e.url,r=e.data,i=e.headers,o=void 0===i?{}:i,a=e.signal,s=e.onProgress;return new Promise((function(e,i){var l=new XMLHttpRequest,c=(null===t||void 0===t?void 0:t.toUpperCase())||"GET",u=!1;l.open(c,n,!0),o&&Object.entries(o).forEach((function(e){var t=(0,ae.Z)(e,2),n=t[0],r=t[1];"undefined"!==typeof r&&!Array.isArray(r)&&l.setRequestHeader(n,r)})),l.responseType="text",ge(a,(function(){u=!0,l.abort(),i(new ye)})),l.onload=function(){if(200!=l.status)i(new Error("Error ".concat(l.status,": ").concat(l.statusText)));else{var t={method:c,url:n,data:r,headers:o||void 0,signal:a,onProgress:s},u=l.getAllResponseHeaders().trim().split(/[\r\n]+/),d={};u.forEach((function(e){var t=e.split(": "),n=t.shift(),r=t.join(": ");n&&"undefined"!==typeof n&&(d[n]=r)}));var h=l.response,f=l.status;e({request:t,data:h,headers:d,status:f})}},l.onerror=function(e){u||i(new me(e))},s&&"function"===typeof s&&(l.upload.onprogress=function(e){e.lengthComputable?s({isComputable:!0,value:e.loaded/e.total}):s({isComputable:!1})}),r?l.send(r):l.send()}))};var Ce=function(e){return e},Ae=function(e){return"undefined"!==typeof Blob&&e instanceof Blob},Ze=function(e){return"undefined"!==typeof File&&e instanceof File},Ee=function(e){return!!e&&"object"===typeof e&&!Array.isArray(e)&&"uri"in e&&"string"===typeof e.uri},Te=function(e){return Ae(e)||Ze(e)||Ee(e)};function Se(e,t,n){if(Array.isArray(n)){var r,i=(0,a.Z)(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;Se(e,"".concat(t,"[]"),o)}}catch(g){i.e(g)}finally{i.f()}}else if(function(e){return!!e&&"object"===typeof e&&"data"in e&&Te(e.data)}(n)){var s=n.name,l=n.contentType,u=Ce(n.data,s,null!==l&&void 0!==l?l:we),d=function(e){var t=e.name;return t?[t]:[]}({name:s,contentType:l});e.push([t,u].concat((0,c.Z)(d)))}else if(function(e){return!!e&&"object"===typeof e&&!Array.isArray(e)}(n))for(var h=0,f=Object.entries(n);h<f.length;h++){var v=(0,ae.Z)(f[h],2),p=v[0],m=v[1];"undefined"!==typeof m&&e.push(["".concat(t,"[").concat(p,"]"),String(m)])}else(function(e){return"string"===typeof e||"number"===typeof e||"undefined"===typeof e})(n)&&n&&e.push([t,n.toString()])}function Me(e){var t,n=new FormData,r=function(e){for(var t=[],n=0,r=Object.entries(e);n<r.length;n++){var i=(0,ae.Z)(r[n],2);Se(t,i[0],i[1])}return t}(e),i=(0,a.Z)(r);try{for(i.s();!(t=i.n()).done;){var o=t.value,s=(0,oe.Z)(o),l=s[0],u=s[1],d=s.slice(2);n.append.apply(n,[l,u].concat((0,c.Z)(d)))}}catch(h){i.e(h)}finally{i.f()}return n}var Ie=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e,r,o,a,s){var l;return(0,u.Z)(this,n),l=t.call(this),(0,q.Z)((0,i.Z)(l),"code",void 0),(0,q.Z)((0,i.Z)(l),"request",void 0),(0,q.Z)((0,i.Z)(l),"response",void 0),(0,q.Z)((0,i.Z)(l),"headers",void 0),l.name="UploadError",l.message=e,l.code=r,l.request=o,l.response=a,l.headers=s,Object.setPrototypeOf((0,i.Z)(l),n.prototype),l}return(0,d.Z)(n)}(pe),Le=function(e,t,n){var r=new URL(e);return r.pathname=(r.pathname+t).replace("//","/"),n&&(r.search=function(e){for(var t=new URLSearchParams,n=function(){var e=(0,ae.Z)(i[r],2),n=e[0],o=e[1];o&&"object"===typeof o&&!Array.isArray(o)?Object.entries(o).filter((function(e){var t;return null!==(t=e[1])&&void 0!==t&&t})).forEach((function(e){return t.set("".concat(n,"[").concat(e[0],"]"),String(e[1]))})):Array.isArray(o)?o.forEach((function(e){t.append("".concat(n,"[]"),e)})):"string"===typeof o&&o?t.set(n,o):"number"===typeof o&&t.set(n,o.toString())},r=0,i=Object.entries(e);r<i.length;r++)n();return t.toString()}(n)),r.toString()};function $e(e){return fe((0,h.Z)({libraryName:"UploadcareUploadClient",libraryVersion:"6.14.1"},e))}function Oe(e,t){var n=t.retryThrottledRequestMaxTimes,r=t.retryNetworkErrorMaxTimes;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ve,n=0;function r(e){var i=Math.round(t.time*Math.pow(t.factor,n));return e({attempt:n,retry:function(t){return he(null!==t&&void 0!==t?t:i).then((function(){return n+=1,r(e)}))}})}return r(e)}((function(t){var i=t.attempt,o=t.retry;return e().catch((function(e){if("response"in e&&"RequestThrottledError"===(null===e||void 0===e?void 0:e.code)&&i<n)return o(function(e){var t=(e||{}).headers;if(!t||"string"!==typeof t["retry-after"])return 15e3;var n=parseInt(t["retry-after"],10);return Number.isFinite(n)?1e3*n:15e3}(e));if(e instanceof me&&i<r)return o(1e3*(i+1));throw e}))}))}var Ue,Re,Pe=function(e){var t="";return(Ae(e)||Ze(e)||Ee(e))&&(t=e.type),t||we},Ne=function(e){var t="";return Ze(e)&&e.name?t=e.name:Ae(e)?t="":Ee(e)&&e.name&&(t=e.name),t||ke};function Fe(e){return"undefined"===typeof e||"auto"===e?"auto":e?"1":"0"}function Be(e,t){var n=t.publicKey,r=t.fileName,i=t.contentType,o=t.baseURL,a=void 0===o?_e.baseURL:o,s=t.secureSignature,l=t.secureExpire,c=t.store,u=t.signal,d=t.onProgress,h=t.source,f=void 0===h?"local":h,v=t.integration,p=t.userAgent,m=t.retryThrottledRequestMaxTimes,g=void 0===m?_e.retryThrottledRequestMaxTimes:m,y=t.retryNetworkErrorMaxTimes,b=void 0===y?_e.retryNetworkErrorMaxTimes:y,_=t.metadata;return Oe((function(){return xe({method:"POST",url:Le(a,"/base/",{jsonerrors:1}),headers:{"X-UC-User-Agent":$e({publicKey:n,integration:v,userAgent:p})},data:Me({file:{data:e,name:r||Ne(e),contentType:i||Pe(e)},UPLOADCARE_PUB_KEY:n,UPLOADCARE_STORE:Fe(c),signature:s,expire:l,source:f,metadata:_}),signal:u,onProgress:d}).then((function(e){var t=e.data,n=e.headers,r=e.request,i=de(JSON.parse(t));if("error"in i)throw new Ie(i.error.content,i.error.errorCode,r,i,n);return i}))}),{retryNetworkErrorMaxTimes:b,retryThrottledRequestMaxTimes:g})}function De(e,t){var n=t.publicKey,r=t.baseURL,i=void 0===r?_e.baseURL:r,o=t.store,a=t.fileName,s=t.checkForUrlDuplicates,l=t.saveUrlForRecurrentUploads,c=t.secureSignature,u=t.secureExpire,d=t.source,h=void 0===d?"url":d,f=t.signal,v=t.integration,p=t.userAgent,m=t.retryThrottledRequestMaxTimes,g=void 0===m?_e.retryThrottledRequestMaxTimes:m,y=t.retryNetworkErrorMaxTimes,b=void 0===y?_e.retryNetworkErrorMaxTimes:y,_=t.metadata;return Oe((function(){return xe({method:"POST",headers:{"X-UC-User-Agent":$e({publicKey:n,integration:v,userAgent:p})},url:Le(i,"/from_url/",{jsonerrors:1,pub_key:n,source_url:e,store:Fe(o),filename:a,check_URL_duplicates:s?1:void 0,save_URL_duplicates:l?1:void 0,signature:c,expire:u,source:h,metadata:_}),signal:f}).then((function(e){var t=e.data,n=e.headers,r=e.request,i=de(JSON.parse(t));if("error"in i)throw new Ie(i.error.content,i.error.errorCode,r,i,n);return i}))}),{retryNetworkErrorMaxTimes:b,retryThrottledRequestMaxTimes:g})}!function(e){e.Token="token",e.FileInfo="file_info"}(Ue||(Ue={})),function(e){e.Unknown="unknown",e.Waiting="waiting",e.Progress="progress",e.Error="error",e.Success="success"}(Re||(Re={}));var Ve=function(e){return"status"in e&&e.status===Re.Error};function ze(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.publicKey,r=t.baseURL,i=void 0===r?_e.baseURL:r,o=t.signal,a=t.integration,s=t.userAgent,l=t.retryThrottledRequestMaxTimes,c=void 0===l?_e.retryThrottledRequestMaxTimes:l,u=t.retryNetworkErrorMaxTimes,d=void 0===u?_e.retryNetworkErrorMaxTimes:u;return Oe((function(){return xe({method:"GET",headers:n?{"X-UC-User-Agent":$e({publicKey:n,integration:a,userAgent:s})}:void 0,url:Le(i,"/from_url/status/",{jsonerrors:1,token:e}),signal:o}).then((function(e){var t=e.data,n=e.headers,r=e.request,i=de(JSON.parse(t));if("error"in i&&!Ve(i))throw new Ie(i.error.content,i.error.errorCode,r,i,n);return i}))}),{retryNetworkErrorMaxTimes:d,retryThrottledRequestMaxTimes:c})}function je(e,t){var n=t.publicKey,r=t.baseURL,i=void 0===r?_e.baseURL:r,o=t.jsonpCallback,a=t.secureSignature,s=t.secureExpire,l=t.signal,c=t.source,u=t.integration,d=t.userAgent,h=t.retryThrottledRequestMaxTimes,f=void 0===h?_e.retryThrottledRequestMaxTimes:h,v=t.retryNetworkErrorMaxTimes;return Oe((function(){return xe({method:"POST",headers:{"X-UC-User-Agent":$e({publicKey:n,integration:u,userAgent:d})},url:Le(i,"/group/",{jsonerrors:1}),data:Me({files:e,callback:o,pub_key:n,signature:a,expire:s,source:c}),signal:l}).then((function(e){var t=e.data,n=e.headers,r=e.request,i=de(JSON.parse(t));if("error"in i)throw new Ie(i.error.content,i.error.errorCode,r,i,n);return i}))}),{retryNetworkErrorMaxTimes:void 0===v?_e.retryNetworkErrorMaxTimes:v,retryThrottledRequestMaxTimes:f})}function He(e,t){var n=t.publicKey,r=t.baseURL,i=void 0===r?_e.baseURL:r,o=t.signal,a=t.source,s=t.integration,l=t.userAgent,c=t.retryThrottledRequestMaxTimes,u=void 0===c?_e.retryThrottledRequestMaxTimes:c,d=t.retryNetworkErrorMaxTimes;return Oe((function(){return xe({method:"GET",headers:{"X-UC-User-Agent":$e({publicKey:n,integration:s,userAgent:l})},url:Le(i,"/info/",{jsonerrors:1,pub_key:n,file_id:e,source:a}),signal:o}).then((function(e){var t=e.data,n=e.headers,r=e.request,i=de(JSON.parse(t));if("error"in i)throw new Ie(i.error.content,i.error.errorCode,r,i,n);return i}))}),{retryThrottledRequestMaxTimes:u,retryNetworkErrorMaxTimes:void 0===d?_e.retryNetworkErrorMaxTimes:d})}function qe(e,t){var n=t.publicKey,r=t.contentType,i=t.fileName,o=t.multipartChunkSize,a=void 0===o?_e.multipartChunkSize:o,s=t.baseURL,l=void 0===s?"":s,c=t.secureSignature,u=t.secureExpire,d=t.store,h=t.signal,f=t.source,v=void 0===f?"local":f,p=t.integration,m=t.userAgent,g=t.retryThrottledRequestMaxTimes,y=void 0===g?_e.retryThrottledRequestMaxTimes:g,b=t.retryNetworkErrorMaxTimes,_=void 0===b?_e.retryNetworkErrorMaxTimes:b,w=t.metadata;return Oe((function(){return xe({method:"POST",url:Le(l,"/multipart/start/",{jsonerrors:1}),headers:{"X-UC-User-Agent":$e({publicKey:n,integration:p,userAgent:m})},data:Me({filename:i||ke,size:e,content_type:r||we,part_size:a,UPLOADCARE_STORE:Fe(d),UPLOADCARE_PUB_KEY:n,signature:c,expire:u,source:v,metadata:w}),signal:h}).then((function(e){var t=e.data,n=e.headers,r=e.request,i=de(JSON.parse(t));if("error"in i)throw new Ie(i.error.content,i.error.errorCode,r,i,n);return i.parts=Object.keys(i.parts).map((function(e){return i.parts[Number(e)]})),i}))}),{retryThrottledRequestMaxTimes:y,retryNetworkErrorMaxTimes:_})}function Ke(e,t,n){var r=n.contentType,i=n.signal,o=n.onProgress,a=n.retryThrottledRequestMaxTimes,s=void 0===a?_e.retryThrottledRequestMaxTimes:a,l=n.retryNetworkErrorMaxTimes;return Oe((function(){return xe({method:"PUT",url:t,data:e,onProgress:o,signal:i,headers:{"Content-Type":r||we}}).then((function(e){return o&&o({isComputable:!0,value:1}),e})).then((function(e){return{code:e.status}}))}),{retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:void 0===l?_e.retryNetworkErrorMaxTimes:l})}function Ge(e,t){var n=t.publicKey,r=t.baseURL,i=void 0===r?_e.baseURL:r,o=t.source,a=void 0===o?"local":o,s=t.signal,l=t.integration,c=t.userAgent,u=t.retryThrottledRequestMaxTimes,d=void 0===u?_e.retryThrottledRequestMaxTimes:u,h=t.retryNetworkErrorMaxTimes;return Oe((function(){return xe({method:"POST",url:Le(i,"/multipart/complete/",{jsonerrors:1}),headers:{"X-UC-User-Agent":$e({publicKey:n,integration:l,userAgent:c})},data:Me({uuid:e,UPLOADCARE_PUB_KEY:n,source:a}),signal:s}).then((function(e){var t=e.data,n=e.headers,r=e.request,i=de(JSON.parse(t));if("error"in i)throw new Ie(i.error.content,i.error.errorCode,r,i,n);return i}))}),{retryThrottledRequestMaxTimes:d,retryNetworkErrorMaxTimes:void 0===h?_e.retryNetworkErrorMaxTimes:h})}function We(e,t){var n=t.publicKey,r=t.baseURL,i=t.source,o=t.integration,a=t.userAgent,s=t.retryThrottledRequestMaxTimes,l=t.retryNetworkErrorMaxTimes,c=t.signal,u=t.onProgress;return be({check:function(t){return He(e,{publicKey:n,baseURL:r,signal:t,source:i,integration:o,userAgent:a,retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:l}).then((function(e){return e.isReady?e:(u&&u({isComputable:!0,value:1}),!1)}))},signal:c})}function Xe(e){return"defaultEffects"in e}var Ye=(0,d.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.baseCDN,i=void 0===r?_e.baseCDN:r,o=n.fileName;(0,u.Z)(this,e),(0,q.Z)(this,"uuid",void 0),(0,q.Z)(this,"name",null),(0,q.Z)(this,"size",null),(0,q.Z)(this,"isStored",null),(0,q.Z)(this,"isImage",null),(0,q.Z)(this,"mimeType",null),(0,q.Z)(this,"cdnUrl",null),(0,q.Z)(this,"s3Url",null),(0,q.Z)(this,"originalFilename",null),(0,q.Z)(this,"imageInfo",null),(0,q.Z)(this,"videoInfo",null),(0,q.Z)(this,"contentInfo",null),(0,q.Z)(this,"metadata",null),(0,q.Z)(this,"s3Bucket",null),(0,q.Z)(this,"defaultEffects",null);var a=t.uuid,s=t.s3Bucket,l=Le(i,"".concat(a,"/")),c=s?Le("https://".concat(s,".s3.amazonaws.com/"),"".concat(a,"/").concat(t.filename)):null;this.uuid=a,this.name=o||t.filename,this.size=t.size,this.isStored=t.isStored,this.isImage=t.isImage,this.mimeType=t.mimeType,this.cdnUrl=l,this.originalFilename=t.originalFilename,this.imageInfo=t.imageInfo,this.videoInfo=t.videoInfo,this.contentInfo=t.contentInfo,this.metadata=t.metadata||null,this.s3Bucket=s||null,this.s3Url=c,Xe(t)&&(this.defaultEffects=t.defaultEffects)})),Je=function(e,t){var n=t.publicKey,r=t.fileName,i=t.baseURL,o=t.secureSignature,a=t.secureExpire,s=t.store,l=t.contentType,c=t.signal,u=t.onProgress,d=t.source,h=t.integration,f=t.userAgent,v=t.retryThrottledRequestMaxTimes,p=t.retryNetworkErrorMaxTimes,m=t.baseCDN,g=t.metadata;return Be(e,{publicKey:n,fileName:r,contentType:l,baseURL:i,secureSignature:o,secureExpire:a,store:s,signal:c,onProgress:u,source:d,integration:h,userAgent:f,retryThrottledRequestMaxTimes:v,retryNetworkErrorMaxTimes:p,metadata:g}).then((function(e){return We(e.file,{publicKey:n,baseURL:i,source:d,integration:h,userAgent:f,retryThrottledRequestMaxTimes:v,retryNetworkErrorMaxTimes:p,onProgress:u,signal:c})})).then((function(e){return new Ye(e,{baseCDN:m})}))},Qe=function(e,t){var n=t.publicKey,r=t.fileName,i=t.baseURL,o=t.signal,a=t.onProgress,s=t.source,l=t.integration,c=t.userAgent,u=t.retryThrottledRequestMaxTimes,d=t.retryNetworkErrorMaxTimes,h=t.baseCDN;return He(e,{publicKey:n,baseURL:i,signal:o,source:s,integration:l,userAgent:c,retryThrottledRequestMaxTimes:u,retryNetworkErrorMaxTimes:d}).then((function(e){return new Ye(e,{baseCDN:h,fileName:r})})).then((function(e){return a&&a({isComputable:!0,value:1}),e}))},et=window.WebSocket,tt=function(){function e(){(0,u.Z)(this,e),(0,q.Z)(this,"events",Object.create({}))}return(0,d.Z)(e,[{key:"emit",value:function(e,t){var n;null===(n=this.events[e])||void 0===n||n.forEach((function(e){return e(t)}))}},{key:"on",value:function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)}},{key:"off",value:function(e,t){this.events[e]=t?this.events[e].filter((function(e){return e!==t})):[]}}]),e}(),nt=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e4;(0,u.Z)(this,e),(0,q.Z)(this,"key",void 0),(0,q.Z)(this,"disconnectTime",void 0),(0,q.Z)(this,"ws",void 0),(0,q.Z)(this,"queue",[]),(0,q.Z)(this,"isConnected",!1),(0,q.Z)(this,"subscribers",0),(0,q.Z)(this,"emmitter",new tt),(0,q.Z)(this,"disconnectTimeoutId",null),this.key=t,this.disconnectTime=n}return(0,d.Z)(e,[{key:"connect",value:function(){var e=this;if(this.disconnectTimeoutId&&clearTimeout(this.disconnectTimeoutId),!this.isConnected&&!this.ws){var t="wss://ws.pusherapp.com/app/".concat(this.key,"?protocol=5&client=js&version=1.12.2");this.ws=new et(t),this.ws.addEventListener("error",(function(t){e.emmitter.emit("error",new Error(t.message))})),this.emmitter.on("connected",(function(){e.isConnected=!0,e.queue.forEach((function(t){return e.send(t.event,t.data)})),e.queue=[]})),this.ws.addEventListener("message",(function(t){var n=JSON.parse(t.data.toString());switch(n.event){case"pusher:connection_established":e.emmitter.emit("connected",void 0);break;case"pusher:ping":e.send("pusher:pong",{});break;case"progress":case"success":case"fail":e.emmitter.emit(n.channel,function(e,t){return"success"===e?(0,h.Z)({status:Re.Success},t):"progress"===e?(0,h.Z)({status:Re.Progress},t):(0,h.Z)({status:Re.Error},t)}(n.event,JSON.parse(n.data)))}}))}}},{key:"disconnect",value:function(){var e=this,t=function(){var t;null===(t=e.ws)||void 0===t||t.close(),e.ws=void 0,e.isConnected=!1};this.disconnectTime?this.disconnectTimeoutId=setTimeout((function(){t()}),this.disconnectTime):t()}},{key:"send",value:function(e,t){var n,r=JSON.stringify({event:e,data:t});null===(n=this.ws)||void 0===n||n.send(r)}},{key:"subscribe",value:function(e,t){this.subscribers+=1,this.connect();var n="task-status-".concat(e),r={event:"pusher:subscribe",data:{channel:n}};this.emmitter.on(n,t),this.isConnected?this.send(r.event,r.data):this.queue.push(r)}},{key:"unsubscribe",value:function(e){this.subscribers-=1;var t="task-status-".concat(e),n={event:"pusher:unsubscribe",data:{channel:t}};this.emmitter.off(t),this.isConnected?this.send(n.event,n.data):this.queue=this.queue.filter((function(e){return e.data.channel!==t})),0===this.subscribers&&this.disconnect()}},{key:"onError",value:function(e){var t=this;return this.emmitter.on("error",e),function(){return t.emmitter.off("error",e)}}}]),e}(),rt=null,it=function(e){if(!rt){var t="undefined"===typeof window?0:3e4;rt=new nt(e,t)}return rt};var ot=function(e,t){var n=t.publicKey,r=t.fileName,i=t.baseURL,o=t.baseCDN,a=t.checkForUrlDuplicates,s=t.saveUrlForRecurrentUploads,l=t.secureSignature,c=t.secureExpire,u=t.store,d=t.signal,h=t.onProgress,f=t.source,v=t.integration,p=t.userAgent,m=t.retryThrottledRequestMaxTimes,g=t.pusherKey,y=void 0===g?_e.pusherKey:g,b=t.metadata;return Promise.resolve(function(e){it(e).connect()}(y)).then((function(){return De(e,{publicKey:n,fileName:r,baseURL:i,checkForUrlDuplicates:a,saveUrlForRecurrentUploads:s,secureSignature:l,secureExpire:c,store:u,signal:d,source:f,integration:v,userAgent:p,retryThrottledRequestMaxTimes:m,metadata:b})})).catch((function(e){var t=it(y);return null===t||void 0===t||t.disconnect(),Promise.reject(e)})).then((function(e){return e.type===Ue.FileInfo?e:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).signal,n=null,r=null,i=e.map((function(){return new AbortController})),o=function(e){return function(){r=e,i.forEach((function(t,n){return n!==e&&t.abort()}))}};return ge(t,(function(){i.forEach((function(e){return e.abort()}))})),Promise.all(e.map((function(e,t){var r=o(t);return Promise.resolve().then((function(){return e({stopRace:r,signal:i[t].signal})})).then((function(e){return r(),e})).catch((function(e){return n=e,null}))}))).then((function(e){if(null===r)throw n;return e[r]}))}([function(t){var r=t.signal;return function(e){var t=e.token,n=e.publicKey,r=e.baseURL,i=e.integration,o=e.userAgent,a=e.retryThrottledRequestMaxTimes,s=e.retryNetworkErrorMaxTimes,l=e.onProgress,c=e.signal;return be({check:function(e){return ze(t,{publicKey:n,baseURL:r,integration:i,userAgent:o,retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:s,signal:e}).then((function(e){switch(e.status){case Re.Error:return new Ie(e.error,e.errorCode);case Re.Waiting:return!1;case Re.Unknown:return new Ie('Token "'.concat(t,'" was not found.'));case Re.Progress:return l&&("unknown"===e.total?l({isComputable:!1}):l({isComputable:!0,value:e.done/e.total})),!1;case Re.Success:return l&&l({isComputable:!0,value:e.done/e.total}),e;default:throw new Error("Unknown status")}}))},signal:c})}({token:e.token,publicKey:n,baseURL:i,integration:v,userAgent:p,retryThrottledRequestMaxTimes:m,onProgress:h,signal:r})},function(t){var n=t.signal;return function(e){var t=e.token,n=e.pusherKey,r=e.signal,i=e.onProgress;return new Promise((function(e,o){var a=it(n),s=a.onError(o),l=function(){s(),a.unsubscribe(t)};ge(r,(function(){l(),o(new ye("pusher cancelled"))})),a.subscribe(t,(function(t){switch(t.status){case Re.Progress:i&&("unknown"===t.total?i({isComputable:!1}):i({isComputable:!0,value:t.done/t.total}));break;case Re.Success:l(),i&&i({isComputable:!0,value:t.done/t.total}),e(t);break;case Re.Error:l(),o(new Ie(t.msg,t.error_code))}}))}))}({token:e.token,pusherKey:y,signal:n,onProgress:h})}],{signal:d})})).then((function(e){if(e instanceof Ie)throw e;return e})).then((function(e){return We(e.uuid,{publicKey:n,baseURL:i,integration:v,userAgent:p,retryThrottledRequestMaxTimes:m,onProgress:h,signal:d})})).then((function(e){return new Ye(e,{baseCDN:o})}))},at=new WeakMap,st=function(){var e=(0,r.Z)(f.mark((function e(t){var n;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!at.has(t)){e.next=2;break}return e.abrupt("return",at.get(t));case 2:return e.next=4,fetch(t.uri).then((function(e){return e.blob()}));case 4:return n=e.sent,at.set(t,n),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),lt=function(){var e=(0,r.Z)(f.mark((function e(t){var n;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ze(t)&&!Ae(t)){e.next=2;break}return e.abrupt("return",t.size);case 2:if(!Ee(t)){e.next=7;break}return e.next=5,st(t);case 5:return n=e.sent,e.abrupt("return",n.size);case 7:throw new Error("Unknown file type. Cannot determine file size.");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ct=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_e.multipartMinFileSize;return e>=t},ut=function(e){var t=new RegExp("[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}");return!Te(e)&&t.test(e)},dt=function(e){var t=new RegExp("^(?:\\w+:)?\\/\\/([^\\s\\.]+\\.\\S{2}|localhost[\\:?\\d]*)\\S*$");return!Te(e)&&t.test(e)},ht=function(e,t){return new Promise((function(n,r){for(var i=[],o=!1,a=t.length,s=(0,c.Z)(t),l=function e(){var l=t.length-s.length,c=s.shift();c&&c().then((function(t){o||(i[l]=t,(a-=1)?e():n(i))})).catch((function(e){o=!0,r(e)}))},u=0;u<e;u++)l()}))},ft=function(e,t,n,r){var i=r*t,o=Math.min(i+r,n);return e.slice(i,o)},vt=function(){var e=(0,r.Z)(f.mark((function e(t,n,r){return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(function(e){return ft(t,e,n,r)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),pt=function(e,t,n){return Ke(e,t,{publicKey:n.publicKey,contentType:n.contentType,onProgress:n.onProgress,signal:n.signal,integration:n.integration,retryThrottledRequestMaxTimes:n.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:n.retryNetworkErrorMaxTimes})},mt=function(){var e=(0,r.Z)(f.mark((function e(t,n){var i,o,a,s,l,c,u,d,h,v,p,m,g,y,b,_,w,k,x,C,A,Z,E,T;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.publicKey,o=n.fileName,a=n.fileSize,s=n.baseURL,l=n.secureSignature,c=n.secureExpire,u=n.store,d=n.signal,h=n.onProgress,v=n.source,p=n.integration,m=n.userAgent,g=n.retryThrottledRequestMaxTimes,y=n.retryNetworkErrorMaxTimes,b=n.contentType,_=n.multipartChunkSize,w=void 0===_?_e.multipartChunkSize:_,k=n.maxConcurrentRequests,x=void 0===k?_e.maxConcurrentRequests:k,C=n.baseCDN,A=n.metadata,null===a||void 0===a){e.next=5;break}e.t0=a,e.next=8;break;case 5:return e.next=7,lt(t);case 7:e.t0=e.sent;case 8:return Z=e.t0,T=function(e,t){if(h){E||(E=Array(e).fill(0));return function(n){var r;n.isComputable&&(E[t]=n.value,h({isComputable:!0,value:(r=E,r.reduce((function(e,t){return e+t}),0)/e)}))}}},b||(b=Pe(t)),e.abrupt("return",qe(Z,{publicKey:i,contentType:b,fileName:o||Ne(t),baseURL:s,secureSignature:l,secureExpire:c,store:u,signal:d,source:v,integration:p,userAgent:m,retryThrottledRequestMaxTimes:g,retryNetworkErrorMaxTimes:y,metadata:A}).then(function(){var e=(0,r.Z)(f.mark((function e(n){var r,o,a;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.uuid,o=n.parts,e.next=3,vt(t,Z,w);case 3:return a=e.sent,e.abrupt("return",Promise.all([r,ht(x,o.map((function(e,t){return function(){return pt(a(t),e,{publicKey:i,contentType:b,onProgress:T(o.length,t),signal:d,integration:p,retryThrottledRequestMaxTimes:g,retryNetworkErrorMaxTimes:y})}})))]));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){return Ge((0,ae.Z)(e,1)[0],{publicKey:i,baseURL:s,source:v,integration:p,userAgent:m,retryThrottledRequestMaxTimes:g,retryNetworkErrorMaxTimes:y})})).then((function(e){return e.isReady?e:We(e.uuid,{publicKey:i,baseURL:s,source:v,integration:p,userAgent:m,retryThrottledRequestMaxTimes:g,retryNetworkErrorMaxTimes:y,onProgress:h,signal:d})})).then((function(e){return new Ye(e,{baseCDN:C})})));case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function gt(e,t){return yt.apply(this,arguments)}function yt(){return(yt=(0,r.Z)(f.mark((function e(t,n){var r,i,o,a,s,l,c,u,d,h,v,p,m,g,y,b,_,w,k,x,C,A,Z,E,T;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.publicKey,i=n.fileName,o=n.baseURL,a=void 0===o?_e.baseURL:o,s=n.secureSignature,l=n.secureExpire,c=n.store,u=n.signal,d=n.onProgress,h=n.source,v=n.integration,p=n.userAgent,m=n.retryThrottledRequestMaxTimes,g=n.retryNetworkErrorMaxTimes,y=n.contentType,b=n.multipartMinFileSize,_=n.multipartChunkSize,w=n.maxConcurrentRequests,k=n.baseCDN,x=void 0===k?_e.baseCDN:k,C=n.checkForUrlDuplicates,A=n.saveUrlForRecurrentUploads,Z=n.pusherKey,E=n.metadata,!Te(t)){e.next=8;break}return e.next=4,lt(t);case 4:if(T=e.sent,!ct(T,b)){e.next=7;break}return e.abrupt("return",mt(t,{publicKey:r,contentType:y,multipartChunkSize:_,fileSize:T,fileName:i,baseURL:a,secureSignature:s,secureExpire:l,store:c,signal:u,onProgress:d,source:h,integration:v,userAgent:p,maxConcurrentRequests:w,retryThrottledRequestMaxTimes:m,retryNetworkErrorMaxTimes:g,baseCDN:x,metadata:E}));case 7:return e.abrupt("return",Je(t,{publicKey:r,fileName:i,contentType:y,baseURL:a,secureSignature:s,secureExpire:l,store:c,signal:u,onProgress:d,source:h,integration:v,userAgent:p,retryThrottledRequestMaxTimes:m,retryNetworkErrorMaxTimes:g,baseCDN:x,metadata:E}));case 8:if(!dt(t)){e.next=10;break}return e.abrupt("return",ot(t,{publicKey:r,fileName:i,baseURL:a,baseCDN:x,checkForUrlDuplicates:C,saveUrlForRecurrentUploads:A,secureSignature:s,secureExpire:l,store:c,signal:u,onProgress:d,source:h,integration:v,userAgent:p,retryThrottledRequestMaxTimes:m,retryNetworkErrorMaxTimes:g,pusherKey:Z,metadata:E}));case 10:if(!ut(t)){e.next=12;break}return e.abrupt("return",Qe(t,{publicKey:r,fileName:i,baseURL:a,signal:u,onProgress:d,source:h,integration:v,userAgent:p,retryThrottledRequestMaxTimes:m,retryNetworkErrorMaxTimes:g,baseCDN:x}));case 12:throw new TypeError('File uploading from "'.concat(t,'" is not supported'));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var bt=(0,d.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.baseCDN,i=void 0===r?_e.baseCDN:r;(0,u.Z)(this,e),(0,q.Z)(this,"uuid",void 0),(0,q.Z)(this,"filesCount",void 0),(0,q.Z)(this,"totalSize",void 0),(0,q.Z)(this,"isStored",void 0),(0,q.Z)(this,"isImage",void 0),(0,q.Z)(this,"cdnUrl",void 0),(0,q.Z)(this,"files",void 0),(0,q.Z)(this,"createdAt",void 0),(0,q.Z)(this,"storedAt",null),this.uuid=t.id,this.filesCount=t.filesCount;var o=t.files.filter(Boolean);this.totalSize=Object.values(o).reduce((function(e,t){return e+t.size}),0),this.isStored=!!t.datetimeStored,this.isImage=!!Object.values(o).filter((function(e){return e.isImage})).length,this.cdnUrl=t.cdnUrl,this.files=o.map((function(e){return new Ye(e,{baseCDN:i})})),this.createdAt=t.datetimeCreated,this.storedAt=t.datetimeStored}));function _t(e,t){var n,r=t.publicKey,i=t.fileName,o=t.baseURL,s=void 0===o?_e.baseURL:o,l=t.secureSignature,c=t.secureExpire,u=t.store,d=t.signal,h=t.onProgress,f=t.source,v=t.integration,p=t.userAgent,m=t.retryThrottledRequestMaxTimes,g=t.retryNetworkErrorMaxTimes,y=t.contentType,b=t.multipartChunkSize,_=void 0===b?_e.multipartChunkSize:b,w=t.baseCDN,k=void 0===w?_e.baseCDN:w,x=t.checkForUrlDuplicates,C=t.saveUrlForRecurrentUploads,A=t.jsonpCallback;if(!function(e){var t,n=(0,a.Z)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!Te(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}(e)&&!function(e){var t,n=(0,a.Z)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!dt(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}(e)&&!function(e){var t,n=(0,a.Z)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!ut(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}(e))throw new TypeError('Group uploading from "'.concat(e,'" is not supported'));var Z=!0,E=e.length,T=function(e,t){if(h){n||(n=Array(e).fill(0));return function(r){if(!r.isComputable||!Z)return Z=!1,void h({isComputable:!1});var i;n[t]=r.value,h({isComputable:!0,value:(i=n,i.reduce((function(e,t){return e+t}))/e)})}}};return Promise.all(e.map((function(e,t){return Te(e)||dt(e)?gt(e,{publicKey:r,fileName:i,baseURL:s,secureSignature:l,secureExpire:c,store:u,signal:d,onProgress:T(E,t),source:f,integration:v,userAgent:p,retryThrottledRequestMaxTimes:m,retryNetworkErrorMaxTimes:g,contentType:y,multipartChunkSize:_,baseCDN:k,checkForUrlDuplicates:x,saveUrlForRecurrentUploads:C}).then((function(e){return e.uuid})):e}))).then((function(e){return je(e,{publicKey:r,baseURL:s,jsonpCallback:A,secureSignature:l,secureExpire:c,signal:d,source:f,integration:v,userAgent:p,retryThrottledRequestMaxTimes:m,retryNetworkErrorMaxTimes:g}).then((function(e){return new bt(e,{baseCDN:k})})).then((function(e){return h&&h({isComputable:!0,value:1}),e}))}))}var wt=function(){function e(t){(0,u.Z)(this,e),(0,q.Z)(this,"_concurrency",1),(0,q.Z)(this,"_pending",[]),(0,q.Z)(this,"_running",0),(0,q.Z)(this,"_resolvers",new Map),(0,q.Z)(this,"_rejectors",new Map),this._concurrency=t}return(0,d.Z)(e,[{key:"_run",value:function(){for(var e=this,t=this._concurrency-this._running,n=function(t){var n=e._pending.shift();if(!n)return{v:void 0};var r=e._resolvers.get(n),i=e._rejectors.get(n);if(!r||!i)throw new Error("Unexpected behavior: resolver or rejector is undefined");e._running+=1,n().finally((function(){e._resolvers.delete(n),e._rejectors.delete(n),e._running-=1,e._run()})).then((function(e){return r(e)})).catch((function(e){return i(e)}))},r=0;r<t;r++){var i=n();if("object"===typeof i)return i.v}}},{key:"add",value:function(e){var t=this;return new Promise((function(n,r){t._resolvers.set(e,n),t._rejectors.set(e,r),t._pending.push(e),t._run()}))}},{key:"pending",get:function(){return this._pending.length}},{key:"running",get:function(){return this._running}},{key:"concurrency",get:function(){return this._concurrency},set:function(e){this._concurrency=e,this._run()}}]),e}(),kt=function(e){return(0,h.Z)((0,h.Z)({},{}),{},{"*currentActivity":"","*currentActivityParams":{},"*history":[],"*historyBack":null,"*closeModal":function(){e.set$({"*modalActive":!1,"*currentActivity":""})}})},xt=function(e){return(0,h.Z)((0,h.Z)({},kt(e)),{},{"*commonProgress":0,"*uploadList":[],"*focusedEntry":null,"*uploadMetadata":null,"*uploadQueue":new wt(1),"*uploadCollection":null,"*collectionErrors":[],"*collectionState":null,"*groupInfo":null,"*uploadTrigger":new Set})},Ct={"locale-id":"en","social-source-lang":"en","upload-file":"Upload file","upload-files":"Upload files","choose-file":"Choose file","choose-files":"Choose files","drop-files-here":"Drop files here","select-file-source":"Select file source",selected:"Selected",upload:"Upload","add-more":"Add more",cancel:"Cancel","start-from-cancel":"Cancel",clear:"Clear","camera-shot":"Shot","upload-url":"Import","upload-url-placeholder":"Paste link here","edit-image":"Edit image","edit-detail":"Details",back:"Back",done:"Done",ok:"Ok","remove-from-list":"Remove",no:"No",yes:"Yes","confirm-your-action":"Confirm your action","are-you-sure":"Are you sure?","selected-count":"Selected:","upload-error":"Upload error","validation-error":"Validation error","no-files":"No files selected",browse:"Browse","not-uploaded-yet":"Not uploaded yet...",file__one:"file",file__other:"files",error__one:"error",error__other:"errors","header-uploading":"Uploading {{count}} {{plural:file(count)}}","header-failed":"{{count}} {{plural:error(count)}}","header-succeed":"{{count}} {{plural:file(count)}} uploaded","header-total":"{{count}} {{plural:file(count)}} selected","src-type-local":"From device","src-type-from-url":"From link","src-type-camera":"Camera","src-type-draw":"Draw","src-type-facebook":"Facebook","src-type-dropbox":"Dropbox","src-type-gdrive":"Google Drive","src-type-gphotos":"Google Photos","src-type-instagram":"Instagram","src-type-flickr":"Flickr","src-type-vk":"VK","src-type-evernote":"Evernote","src-type-box":"Box","src-type-onedrive":"Onedrive","src-type-huddle":"Huddle","src-type-other":"Other","caption-from-url":"Import from link","caption-camera":"Camera","caption-draw":"Draw","caption-edit-file":"Edit file","file-no-name":"No name...","toggle-fullscreen":"Toggle fullscreen","toggle-guides":"Toggle guides",rotate:"Rotate","flip-vertical":"Flip vertical","flip-horizontal":"Flip horizontal",apply:"Apply",brightness:"Brightness",contrast:"Contrast",saturation:"Saturation",exposure:"Exposure",gamma:"Gamma",vibrance:"Vibrance",warmth:"Warmth",enhance:"Enhance",original:"Original",resize:"Resize image",crop:"Crop","select-color":"Select color",text:"Text",draw:"Draw","cancel-edit":"Cancel edit","tab-view":"Preview","tab-details":"Details","file-name":"Name","file-size":"Size","cdn-url":"CDN URL","file-size-unknown":"Unknown","camera-permissions-denied":"Camera access denied","camera-permissions-prompt":"Please allow access to the camera","camera-permissions-request":"Request access","files-count-limit-error-title":"Files count limit overflow","files-count-limit-error-too-few":"You\u2019ve chosen {{total}} {{plural:file(total)}}. At least {{min}} {{plural:file(min)}} required.","files-count-limit-error-too-many":"You\u2019ve chosen too many files. {{max}} {{plural:file(max)}} is maximum.","files-max-size-limit-error":"File is too big. Max file size is {{maxFileSize}}.","has-validation-errors":"File validation error ocurred. Please, check your files before upload.","images-only-accepted":"Only image files are accepted.","file-type-not-allowed":"Uploading of these file types is not allowed.","some-files-were-not-uploaded":"Some files were not uploaded."},At=new Map,Zt=new Map,Et=function(e,t){At.has(e)&&console.log("Locale ".concat(e," is already defined. Overwriting...")),At.set(e,(0,h.Z)((0,h.Z)({},Ct),t))},Tt=function(e,t){"function"===typeof t?function(e,t){Zt.set(e,t)}(e,t):Et(e,t)},St=function(){var e=(0,r.Z)(f.mark((function e(t){var n,r;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(At.has(t)){e.next=8;break}if(Zt.has(t)){e.next=3;break}throw new Error("Locale ".concat(t," is not defined"));case 3:return n=Zt.get(t),e.next=6,n();case 6:r=e.sent,Et(t,r);case 8:return e.abrupt("return",At.get(t));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Tt("en",Ct);var Mt=function(e){return"*l10n/".concat(e)},It=function(){function e(t){var n=this;(0,u.Z)(this,e),(0,q.Z)(this,"_blockInstance",null),(0,q.Z)(this,"_localeName",""),(0,q.Z)(this,"_callbacks",new Set),(0,q.Z)(this,"_boundBlocks",new Map),this._blockInstance=t;for(var i=0,o=Object.entries(Ct);i<o.length;i++){var s=(0,ae.Z)(o[i],2),l=s[0],c=s[1];this._blockInstance.add(Mt(l),c,!1)}setTimeout((function(){t.subConfigValue("localeName",function(){var e=(0,r.Z)(f.mark((function e(t){var r,i,o,s,l,c,u,d,h,v,p;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n._blockInstance&&t){e.next=2;break}return e.abrupt("return");case 2:return n._localeName=t,e.next=5,St(t);case 5:if(i=e.sent,"en"===t||n._localeName===t){e.next=8;break}return e.abrupt("return");case 8:for(o=null===(r=n._blockInstance.cfg.localeDefinitionOverride)||void 0===r?void 0:r[t],s=0,l=Object.entries(i);s<l.length;s++){c=(0,ae.Z)(l[s],2),u=c[0],d=c[1],h=null===o||void 0===o?void 0:o[u],n._blockInstance.add(Mt(u),null!==h&&void 0!==h?h:d,!0),v=(0,a.Z)(n._callbacks);try{for(v.s();!(p=v.n()).done;)(0,p.value)()}catch(f){v.e(f)}finally{v.f()}}case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.subConfigValue("localeDefinitionOverride",(function(e){if(e){var t=e[n._localeName];if(t)for(var r=0,i=Object.entries(t);r<i.length;r++){var o,s=(0,ae.Z)(i[r],2),l=s[0],c=s[1];null===(o=n._blockInstance)||void 0===o||o.add(Mt(l),c,!0);var u,d=(0,a.Z)(n._callbacks);try{for(d.s();!(u=d.n()).done;){(0,u.value)()}}catch(h){d.e(h)}finally{d.f()}}}}))}))}return(0,d.Z)(e,[{key:"onLocaleChange",value:function(e){var t=this,n=W(e,0);return this._callbacks.add(n),function(){t._callbacks.delete(n)}}},{key:"bindL10n",value:function(e,t,n){var r,i,o;e.$[t]=n(),this._boundBlocks.has(e)||this._boundBlocks.set(e,new Map),null===(r=this._boundBlocks.get(e))||void 0===r||null===(i=r.get(t))||void 0===i||i();var a=this.onLocaleChange((function(){e.$[t]=n()}));null===(o=this._boundBlocks.get(e))||void 0===o||o.set(t,a)}},{key:"destroyL10nBindings",value:function(e){var t=this._boundBlocks.get(e);if(t){var n,r=(0,a.Z)(t.values());try{for(r.s();!(n=r.n()).done;){(0,n.value)()}}catch(i){r.e(i)}finally{r.f()}this._boundBlocks.delete(e)}}},{key:"destroy",value:function(){this._callbacks.clear()}}]),e}();function Lt(e,t){(0,c.Z)(e.querySelectorAll("[l10n]")).forEach((function(e){var n=e.getAttribute("l10n");if(n){var r="textContent",i=!1;if(n.includes(":")){var o=n.split(":");r=o[0],n=o[1],r.startsWith("@")&&(r=r.slice(1),i=!0)}var a=n;t.has(a)&&t.sub(a,(function(n){if(n){t.l10nProcessorSubs.has(a)||t.l10nProcessorSubs.set(a,new Set);var i=t.l10nProcessorSubs.get(a);null===i||void 0===i||i.forEach((function(e){e.remove(),i.delete(e),t.allSubs.delete(e)}));var o=Mt(n).replace("*","");t.nodeCtx.has(o)||t.nodeCtx.add(o,n);var s=t.nodeCtx.sub(o,(function(){e[r]=t.l10n(n)}));null===i||void 0===i||i.add(s),t.allSubs.add(s),e.removeAttribute("l10n")}}));var s=Mt(n);t.has(s)||t.add(s,""),t.sub(s,(function(){i?e.setAttribute(r,t.l10n(n)):e[r]=t.l10n(n)})),e.removeAttribute("l10n")}}))}var $t=function(e){return"*cfg/".concat(e)},Ot=function(e){if("string"!==typeof e||!e)return"";var t=e.trim();return t.startsWith("-/")?t=t.slice(2):t.startsWith("/")&&(t=t.slice(1)),t.endsWith("/")&&(t=t.slice(0,t.length-1)),t},Ut=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return"string"===typeof e&&e})).map((function(e){return Ot(e)})).join("/-/")},Rt=function(){var e=Ut.apply(void 0,arguments);return e?"-/".concat(e,"/"):""};function Pt(e){var t=new URL(e),n=t.pathname+t.search+t.hash,r=n.lastIndexOf("http"),i=n.lastIndexOf("/"),o="";return r>=0?o=n.slice(r):i>=0&&(o=n.slice(i+1)),o}function Nt(e){var t=new URL(e).pathname,n=t.indexOf("/"),r=t.indexOf("/",n+1);return t.substring(n+1,r)}function Ft(e){var t=Bt(e),n=new URL(t),r=n.pathname.indexOf("/-/");return-1===r?[]:n.pathname.substring(r).split("/-/").filter(Boolean).map((function(e){return Ot(e)}))}function Bt(e){var t=new URL(e),n=Pt(e),r=Dt(n)?Vt(n).pathname:n;return t.pathname=t.pathname.replace(r,""),t.search="",t.hash="",t.toString()}function Dt(e){return e.startsWith("http")}function Vt(e){var t=new URL(e);return{pathname:t.origin+t.pathname||"",search:t.search||"",hash:t.hash||""}}var zt=function(e,t,n){var r=new URL(Bt(e));if(n=n||Pt(e),r.pathname.startsWith("//")&&(r.pathname=r.pathname.replace("//","/")),Dt(n)){var i=Vt(n);r.pathname=r.pathname+(t||"")+(i.pathname||""),r.search=i.search,r.hash=i.hash}else r.pathname=r.pathname+(t||"")+(n||"");return r.toString()},jt=function(e,t){var n=new URL(e);return n.pathname=t+"/",n.toString()},Ht=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";return e.trim().split(t).map((function(e){return e.trim()})).filter((function(e){return e.length>0}))},qt=Object.freeze({brightness:0,exposure:0,gamma:100,contrast:0,saturation:0,vibrance:0,warmth:0,enhance:0,filter:0,rotate:0,mirror:!1,flip:!1,crop:void 0}),Kt=["enhance","brightness","exposure","gamma","contrast","saturation","vibrance","warmth","filter","mirror","flip","rotate","crop"];function Gt(e){return Ut.apply(void 0,(0,c.Z)(Kt.filter((function(t){return"undefined"!==typeof e[t]&&null!==e[t]})).map((function(t){return function(e,t){if("number"===typeof t){var n=t;return qt[e]!==n?"".concat(e,"/").concat(n):""}if("boolean"===typeof t){var r=t;return qt[e]!==r?"".concat(e):""}if("filter"===e&&t){var i=t.name,o=t.amount;return qt.filter===o?"":"".concat(e,"/").concat(i,"/").concat(o)}if("crop"===e&&t){var a=t.dimensions,s=t.coords;return"".concat(e,"/").concat(a.join("x"),"/").concat(s.join(","))}return""}(t,e[t])})).filter((function(e){return!!e}))))}var Wt=Ut("format/auto","progressive/yes"),Xt=function(e){var t=(0,ae.Z)(e,1)[0];return"undefined"!==typeof t?Number(t):void 0},Yt=function(){return!0},Jt=Object.freeze({enhance:Xt,brightness:Xt,exposure:Xt,gamma:Xt,contrast:Xt,saturation:Xt,vibrance:Xt,warmth:Xt,filter:function(e){var t=(0,ae.Z)(e,2),n=t[0],r=t[1];return{name:n,amount:"undefined"!==typeof r?Number(r):100}},mirror:Yt,flip:Yt,rotate:Xt,crop:function(e){var t=(0,ae.Z)(e,2),n=t[0],r=t[1];if(!/\d+x\d+/.test(n)||!/\d+,\d+/.test(r))throw new Error("Crop by aspect ratio, percentage or alignment shortcuts is not supported.");return{dimensions:Ht(n,"x").map(Number),coords:Ht(r).map(Number)}}});function Qt(e){var t,n={},r=(0,a.Z)(e);try{for(r.s();!(t=r.n()).done;){var i=t.value,o=i.split("/"),s=(0,oe.Z)(o),l=s[0],c=s.slice(1);if(Kt.includes(l)){var u=l,d=Jt[u];try{var h=d(c);n[u]=h}catch(f){console.warn(['Failed to parse URL operation "'.concat(i,'". It will be ignored.'),f instanceof Error?'Error message: "'.concat(f.message,'"'):f,"If you need this functionality, please feel free to open an issue at https://github.com/uploadcare/blocks/issues/new"].join("\n"))}}}}catch(f){r.e(f)}finally{r.f()}return n}var en=Object.freeze({CROP:"crop",TUNING:"tuning",FILTERS:"filters"}),tn=[en.CROP,en.TUNING,en.FILTERS],nn=["brightness","exposure","gamma","contrast","saturation","vibrance","warmth","enhance"],rn=["adaris","briaril","calarel","carris","cynarel","cyren","elmet","elonni","enzana","erydark","fenralan","ferand","galen","gavin","gethriel","iorill","iothari","iselva","jadis","lavra","misiara","namala","nerion","nethari","pamaya","sarnar","sedis","sewen","sorahel","sorlen","tarian","thellassan","varriel","varven","vevera","virkas","yedis","yllara","zatvel","zevcen"],on=["rotate","mirror","flip"],an=Object.freeze({brightness:{zero:qt.brightness,range:[-100,100],keypointsNumber:2},exposure:{zero:qt.exposure,range:[-500,500],keypointsNumber:2},gamma:{zero:qt.gamma,range:[0,1e3],keypointsNumber:2},contrast:{zero:qt.contrast,range:[-100,500],keypointsNumber:2},saturation:{zero:qt.saturation,range:[-100,500],keypointsNumber:1},vibrance:{zero:qt.vibrance,range:[-100,500],keypointsNumber:1},warmth:{zero:qt.warmth,range:[-100,100],keypointsNumber:1},enhance:{zero:qt.enhance,range:[0,100],keypointsNumber:1},filter:{zero:qt.filter,range:[0,100],keypointsNumber:1}}),sn=function(e){return e?e.join(","):""},ln={pubkey:"",multiple:!0,multipleMin:0,multipleMax:Number.MAX_SAFE_INTEGER,confirmUpload:!1,imgOnly:!1,accept:"",externalSourcesPreferredTypes:"",store:"auto",cameraMirror:!1,cameraCapture:"",sourceList:"local, url, camera, dropbox, gdrive",cloudImageEditorTabs:sn(tn),maxLocalFileSizeBytes:0,thumbSize:76,showEmptyList:!1,useLocalImageEditor:!1,useCloudImageEditor:!0,removeCopyright:!1,cropPreset:"",imageShrink:"",modalScrollLock:!0,modalBackdropStrokes:!1,sourceListWrap:!0,remoteTabSessionKey:"",cdnCname:"https://ucarecdn.com",baseUrl:"https://upload.uploadcare.com",socialBaseUrl:"https://social.uploadcare.com",secureSignature:"",secureExpire:"",secureDeliveryProxy:"",retryThrottledRequestMaxTimes:1,multipartMinFileSize:26214400,multipartChunkSize:5242880,maxConcurrentRequests:10,multipartMaxConcurrentRequests:4,multipartMaxAttempts:3,checkForUrlDuplicates:!1,saveUrlForRecurrentUploads:!1,groupOutput:!1,userAgentIntegration:"",debug:!1,metadata:null,localeName:"en",localeDefinitionOverride:null,iconHrefResolver:null},cn="lr-",un=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;return(0,u.Z)(this,n),e=t.call(this),(0,q.Z)((0,i.Z)(e),"requireCtxName",!1),(0,q.Z)((0,i.Z)(e),"allowCustomTemplate",!0),(0,q.Z)((0,i.Z)(e),"activityType",null),(0,q.Z)((0,i.Z)(e),"init$",{}),e.l10nProcessorSubs=new Map,e.addTemplateProcessor(Lt),e}return(0,d.Z)(n,[{key:"l10n",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return"";var n,r=this.$[Mt(e)]||e,i=ie(r),o=(0,a.Z)(i);try{for(o.s();!(n=o.n()).done;){var s=n.value;t[s.variable]=this.pluralize(s.pluralKey,Number(t[s.countVariable]))}}catch(c){o.e(c)}finally{o.f()}var l=re(r,t);return l}},{key:"pluralize",value:function(e,t){var n=this.l10n("locale-id")||"en",r=J(n,t);return this.l10n("".concat(e,"__").concat(r))}},{key:"bindL10n",value:function(e,t){var n;null===(n=this.localeManager)||void 0===n||n.bindL10n(this,e,t)}},{key:"emit",value:function(e,t,n){var r=this.has("*eventEmitter")&&this.$["*eventEmitter"];r&&r.emit(e,t,n)}},{key:"hasBlockInCtx",value:function(e){var t,n=this.$["*blocksRegistry"],r=(0,a.Z)(n);try{for(r.s();!(t=r.n()).done;){if(e(t.value))return!0}}catch(i){r.e(i)}finally{r.f()}return!1}},{key:"setOrAddState",value:function(e,t){this.add$((0,q.Z)({},e,t),!0)}},{key:"setActivity",value:function(e){this.hasBlockInCtx((function(t){return t.activityType===e}))?this.$["*currentActivity"]=e:console.warn('Activity type "'.concat(e,'" not found in the context'))}},{key:"connectedCallback",value:function(){var e=this,t=this.constructor.className;t&&this.classList.toggle("".concat(cn).concat(t),!0),this.hasAttribute("retpl")&&(this.constructor.template=null,this.processInnerHtml=!0),this.requireCtxName?function(e){var t=e.element,n=e.attribute,r=e.onSuccess,i=e.onTimeout,o=e.timeout,a=void 0===o?300:o,s=t.getAttribute(n);if(null===s){var l=new MutationObserver((function(e){var t=e[e.length-1];u(t)}));l.observe(t,{attributes:!0,attributeFilter:[n]});var c=setTimeout((function(){l.disconnect(),i()}),a),u=function(e){var i=t.getAttribute(n);"attributes"===e.type&&e.attributeName===n&&null!==i&&(clearTimeout(c),l.disconnect(),r(i))}}else r(s)}({element:this,attribute:"ctx-name",onSuccess:function(){H((0,z.Z)(n.prototype),"connectedCallback",e).call(e)},onTimeout:function(){console.error("Attribute `ctx-name` is required and it is not set.")}}):H((0,z.Z)(n.prototype),"connectedCallback",this).call(this),Y.registerClient(this)}},{key:"disconnectedCallback",value:function(){H((0,z.Z)(n.prototype),"disconnectedCallback",this).call(this),Y.unregisterClient(this)}},{key:"initCallback",value:function(){var e=this;this.has("*blocksRegistry")||this.add("*blocksRegistry",new Set),this.$["*blocksRegistry"].add(this),this.has("*eventEmitter")||this.add("*eventEmitter",new G(this.debugPrint.bind(this))),this.has("*localeManager")||this.add("*localeManager",new It(this)),this.sub(Mt("locale-id"),(function(t){e.style.direction=function(e){var t,n=new Intl.Locale(e),r="ltr";return"function"===typeof n.getTextInfo&&n.getTextInfo().direction?r=n.getTextInfo().direction:"textInfo"in n&&null!==(t=n.textInfo)&&void 0!==t&&t.direction&&(r=n.textInfo.direction),r}(t)}))}},{key:"localeManager",get:function(){return this.has("*localeManager")?this.$["*localeManager"]:null}},{key:"destroyCallback",value:function(){var e,t=this,n=this.$["*blocksRegistry"];n.delete(this),null===(e=this.localeManager)||void 0===e||e.destroyL10nBindings(this),this.l10nProcessorSubs=new Map,m.deleteCtx(this),0===n.size&&setTimeout((function(){t.destroyCtxCallback()}),0)}},{key:"destroyCtxCallback",value:function(){var e;m.deleteCtx(this.ctxName),null===(e=this.localeManager)||void 0===e||e.destroy()}},{key:"fileSizeFmt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=["B","KB","MB","GB","TB"];if(0===e)return"0 ".concat(n[0]);var r=1024,i=t<0?0:t,o=Math.floor(Math.log(e)/Math.log(r));return parseFloat((e/Math.pow(r,o)).toFixed(i))+" "+n[o]}},{key:"proxyUrl",value:function(e){var t=this.cfg.secureDeliveryProxy;return t?re(t,{previewUrl:e},{transform:function(e){return window.encodeURIComponent(e)}}):e}},{key:"cfg",get:function(){var e=this;if(!this.__cfgProxy){var t=Object.create(null);this.__cfgProxy=new Proxy(t,{set:function(t,n,r){if("string"!==typeof n)return!1;var i=$t(n);return e.has(i)||e.add(i,ln[n]),e.$[i]=r,!0},get:function(t,n){var r=$t(n);return e.has(r)||e.add(r,ln[n]),e.$[$t(n)]}})}return this.__cfgProxy}},{key:"subConfigValue",value:function(e,t){var n=$t(e);this.has(n)||this.add(n,ln[e]),this.sub(n,t)}},{key:"debugPrint",value:function(){var e;if(this.cfg.debug){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n;if("function"===typeof(null===n||void 0===n?void 0:n[0])){var o=n[0];i=o()}(e=console).log.apply(e,["[".concat(this.ctxName,"]")].concat((0,c.Z)(i)))}}}],[{key:"reg",value:function(e){e?H((0,z.Z)(n),"reg",this).call(this,e.startsWith(cn)?e:cn+e):H((0,z.Z)(n),"reg",this).call(this)}}]),n}(O);(0,q.Z)(un,"StateConsumerScope",null),(0,q.Z)(un,"className","");var dn="active",hn="___ACTIVITY_IS_ACTIVE___",fn=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;(0,u.Z)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,q.Z)((0,i.Z)(e),"historyTracked",!1),(0,q.Z)((0,i.Z)(e),"init$",kt((0,i.Z)(e))),(0,q.Z)((0,i.Z)(e),"_debouncedHistoryFlush",W(e._historyFlush.bind((0,i.Z)(e)),10)),e}return(0,d.Z)(n,[{key:"_deactivate",value:function(){var e,t=n._activityCallbacks.get(this);this[hn]=!1,this.removeAttribute(dn),null===t||void 0===t||null===(e=t.deactivateCallback)||void 0===e||e.call(t)}},{key:"_activate",value:function(){var e,t=n._activityCallbacks.get(this);this.$["*historyBack"]=this.historyBack.bind(this),this[hn]=!0,this.setAttribute(dn,""),null===t||void 0===t||null===(e=t.activateCallback)||void 0===e||e.call(t),this._debouncedHistoryFlush(),this.emit(K.ACTIVITY_CHANGE,{activity:this.activityType})}},{key:"initCallback",value:function(){var e=this;H((0,z.Z)(n.prototype),"initCallback",this).call(this),this.hasAttribute("current-activity")&&this.sub("*currentActivity",(function(t){e.setAttribute("current-activity",t)})),this.activityType&&(this.hasAttribute("activity")||this.setAttribute("activity",this.activityType),this.sub("*currentActivity",(function(t){e.activityType!==t&&e[hn]?e._deactivate():e.activityType!==t||e[hn]||e._activate(),t||(e.$["*history"]=[])})),this.has("*modalActive")&&this.sub("*modalActive",(function(t){t||e.activityType!==e.$["*currentActivity"]||(e.$["*currentActivity"]=null)})))}},{key:"_historyFlush",value:function(){var e=this.$["*history"];e&&(e.length>10&&(e=e.slice(e.length-11,e.length-1)),this.historyTracked&&e[e.length-1]!==this.activityType&&e.push(this.activityType),this.$["*history"]=e)}},{key:"_isActivityRegistered",value:function(){return this.activityType&&n._activityCallbacks.has(this)}},{key:"isActivityActive",get:function(){return this[hn]}},{key:"couldOpenActivity",get:function(){return!0}},{key:"registerActivity",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.onActivate,i=t.onDeactivate;n._activityCallbacks.set(this,{activateCallback:r,deactivateCallback:i})}},{key:"unregisterActivity",value:function(){this.isActivityActive&&this._deactivate(),n._activityCallbacks.delete(this)}},{key:"destroyCallback",value:function(){H((0,z.Z)(n.prototype),"destroyCallback",this).call(this),this._isActivityRegistered()&&this.unregisterActivity();var e=this.$["*currentActivity"],t=this.$["*blocksRegistry"];!!(0,c.Z)(t).find((function(t){return t instanceof n&&t.activityType===e}))||(this.$["*currentActivity"]=null)}},{key:"activityKey",get:function(){return this.ctxName+this.activityType}},{key:"activityParams",get:function(){return this.$["*currentActivityParams"]}},{key:"initActivity",get:function(){return this.getCssData("--cfg-init-activity")}},{key:"doneActivity",get:function(){return this.getCssData("--cfg-done-activity")}},{key:"historyBack",value:function(){var e=this.$["*history"];if(e){for(var t=e.pop();t===this.activityType;)t=e.pop();var n=!!t;if(t){var r,i=this.$["*blocksRegistry"],o=(0,c.Z)(i).find((function(e){return e.activityType===t}));n=null!==(r=null===o||void 0===o?void 0:o.couldOpenActivity)&&void 0!==r&&r}t=n?t:void 0,this.$["*currentActivity"]=t,this.$["*history"]=e,t||this.setOrAddState("*modalActive",!1)}}}]),n}(un);(0,q.Z)(fn,"_activityCallbacks",new Map),fn.activities=Object.freeze({START_FROM:"start-from",CAMERA:"camera",DRAW:"draw",UPLOAD_LIST:"upload-list",URL:"url",CONFIRMATION:"confirmation",CLOUD_IMG_EDIT:"cloud-image-edit",EXTERNAL:"external",DETAILS:"details"});var vn=n(4925),pn=1.5,mn=100/3,gn=["direction"];function yn(e,t){for(var n in t)e.setAttributeNS(null,n,t[n].toString())}function bn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=document.createElementNS("http://www.w3.org/2000/svg",e);return yn(n,t),n}function _n(e,t,n){var r=e.x,i=e.y,o=e.width,a=e.height,s=t.includes("w")?0:1,l=t.includes("n")?0:1,c=[-1,1][s],u=[-1,1][l],d=[r+s*o+pn*c,i+l*a+pn*u-24*n*u],h=[r+s*o+pn*c,i+l*a+pn*u],f=[r+s*o-24*n*c+pn*c,i+l*a+pn*u];return{d:"M ".concat(d[0]," ").concat(d[1]," L ").concat(h[0]," ").concat(h[1]," L ").concat(f[0]," ").concat(f[1]),center:h}}function wn(e,t,n){var r,i,o=e.x,a=e.y,s=e.width,l=e.height,c=["n","s"].includes(t)?.5:{w:0,e:1}[t],u=["w","e"].includes(t)?.5:{n:0,s:1}[t],d=[-1,1][c],h=[-1,1][u];return["n","s"].includes(t)?(r=[o+c*s-34*n/2,a+u*l+pn*h],i=[o+c*s+34*n/2,a+u*l+pn*h]):(r=[o+c*s+pn*d,a+u*l-34*n/2],i=[o+c*s+pn*d,a+u*l+34*n/2]),{d:"M ".concat(r[0]," ").concat(r[1]," L ").concat(i[0]," ").concat(i[1]),center:[i[0]-(i[0]-r[0])/2,i[1]-(i[1]-r[1])/2]}}function kn(e,t){var n=e.x,r=e.y;return e.x<t.x?n=t.x:e.x+e.width>t.x+t.width&&(n=t.x+t.width-e.width),e.y<t.y?r=t.y:e.y+e.height>t.y+t.height&&(r=t.y+t.height-e.height),(0,h.Z)((0,h.Z)({},e),{},{x:n,y:r})}function xn(e){var t=e.direction,n=(0,vn.Z)(e,gn);switch(t){case"n":return function(e){var t=e.rect,n=e.delta,r=e.aspectRatio,i=e.imageBox,o=(0,ae.Z)(n,2)[1],a=t.y,s=t.width,l=t.height;a+=o,l-=o,r&&(s=l*r);var c=t.x+t.width/2-s/2;return a<=i.y&&(a=i.y,l=t.y+t.height-a,r&&(s=l*r,c=t.x+t.width/2-s/2)),c<=i.x&&(c=i.x,a=t.y+t.height-l),c+s>=i.x+i.width&&(c=Math.max(i.x,i.x+i.width-s),s=i.x+i.width-c,r&&(l=s/r),a=t.y+t.height-l),l<1&&(l=1,r&&(s=l*r,c=t.x+t.width/2-s/2),a=t.y+t.height-l),s<1&&(s=1,r&&(l=s/r,c=t.x+t.width/2-s/2),a=t.y+t.height-l),{x:c,y:a,width:s,height:l}}(n);case"w":return function(e){var t=e.rect,n=e.delta,r=e.aspectRatio,i=e.imageBox,o=(0,ae.Z)(n,1)[0],a=t.x,s=t.width,l=t.height;a+=o,s-=o,r&&(l=s/r);var c=t.y+t.height/2-l/2;return a<=i.x&&(a=i.x,s=t.x+t.width-a,r&&(l=s/r,c=t.y+t.height/2-l/2)),c<=i.y&&(c=i.y,a=t.x+t.width-s),c+l>=i.y+i.height&&(c=Math.max(i.y,i.y+i.height-l),l=i.y+i.height-c,r&&(s=l*r),a=t.x+t.width-s),l<1&&(l=1,r&&(s=l*r),c=t.y+t.height/2-l/2,a=t.x+t.width-s),s<1&&(s=1,r&&(l=s/r),c=t.y+t.height/2-l/2,a=t.x+t.width-s),{x:a,y:c,width:s,height:l}}(n);case"s":return function(e){var t=e.rect,n=e.delta,r=e.aspectRatio,i=e.imageBox,o=(0,ae.Z)(n,2)[1],a=t.y,s=t.width,l=t.height;l+=o,r&&(s=l*r);var c=t.x+t.width/2-s/2;return a+l>=i.y+i.height&&(l=i.y+i.height-a,r&&(s=l*r),c=t.x+t.width/2-s/2),c<=i.x&&(c=i.x,a=t.y),c+s>=i.x+i.width&&(c=Math.max(i.x,i.x+i.width-s),s=i.x+i.width-c,r&&(l=s/r),a=t.y),l<1&&(l=1,r&&(s=l*r),c=t.x+t.width/2-s/2),s<1&&(s=1,r&&(l=s/r),c=t.x+t.width/2-s/2),{x:c,y:a,width:s,height:l}}(n);case"e":return function(e){var t=e.rect,n=e.delta,r=e.aspectRatio,i=e.imageBox,o=(0,ae.Z)(n,1)[0],a=t.x,s=t.width,l=t.height;s+=o,r&&(l=s/r);var c=t.y+t.height/2-l/2;return a+s>=i.x+i.width&&(s=i.x+i.width-a,r&&(l=s/r),c=t.y+t.height/2-l/2),c<=i.y&&(c=i.y,a=t.x),c+l>=i.y+i.height&&(c=Math.max(i.y,i.y+i.height-l),l=i.y+i.height-c,r&&(s=l*r),a=t.x),l<1&&(l=1,r&&(s=l*r),c=t.y+t.height/2-l/2),s<1&&(s=1,r&&(l=s/r),c=t.y+t.height/2-l/2),{x:a,y:c,width:s,height:l}}(n);case"nw":return function(e){var t=e.rect,n=e.delta,r=e.aspectRatio,i=e.imageBox,o=(0,ae.Z)(n,2),a=o[0],s=o[1],l=t.x,c=t.y,u=t.width,d=t.height;return l+a<i.x&&(a=i.x-l),c+s<i.y&&(s=i.y-c),l+=a,u-=a,c+=s,d-=s,r&&Math.abs(u/d)>r?(d+=s=u/r-d,(c-=s)<=i.y&&(u=(d-=i.y-c)*r,l=t.x+t.width-u,c=i.y)):r&&(u+=a=d*r-u,(l-=a)<=i.x&&(d=(u-=i.x-l)/r,l=i.x,c=t.y+t.height-d)),d<1&&(d=1,r&&(u=d*r),l=t.x+t.width-u,c=t.y+t.height-d),u<1&&(u=1,r&&(d=u/r),l=t.x+t.width-u,c=t.y+t.height-d),{x:l,y:c,width:u,height:d}}(n);case"ne":return function(e){var t=e.rect,n=e.delta,r=e.aspectRatio,i=e.imageBox,o=(0,ae.Z)(n,2),a=o[0],s=o[1],l=t.x,c=t.y,u=t.width,d=t.height;return l+u+a>i.x+i.width&&(a=i.x+i.width-l-u),c+s<i.y&&(s=i.y-c),u+=a,c+=s,d-=s,r&&Math.abs(u/d)>r?(d+=s=u/r-d,(c-=s)<=i.y&&(u=(d-=i.y-c)*r,l=t.x,c=i.y)):r&&l+(u+=a=d*r-u)>=i.x+i.width&&(d=(u=i.x+i.width-l)/r,l=i.x+i.width-u,c=t.y+t.height-d),d<1&&(d=1,r&&(u=d*r),c=t.y+t.height-d),u<1&&(u=1,r&&(d=u/r),c=t.y+t.height-d),{x:l,y:c,width:u,height:d}}(n);case"sw":return function(e){var t=e.rect,n=e.delta,r=e.aspectRatio,i=e.imageBox,o=(0,ae.Z)(n,2),a=o[0],s=o[1],l=t.x,c=t.y,u=t.width,d=t.height;return l+a<i.x&&(a=i.x-l),c+d+s>i.y+i.height&&(s=i.y+i.height-c-d),l+=a,u-=a,d+=s,r&&Math.abs(u/d)>r?c+(d+=s=u/r-d)>=i.y+i.height&&(u=(d=i.y+i.height-c)*r,l=t.x+t.width-u,c=i.y+i.height-d):r&&(u+=a=d*r-u,(l-=a)<=i.x&&(d=(u-=i.x-l)/r,l=i.x,c=t.y)),d<1&&(d=1,r&&(u=d*r),l=t.x+t.width-u),u<1&&(u=1,r&&(d=u/r),l=t.x+t.width-u),{x:l,y:c,width:u,height:d}}(n);case"se":return function(e){var t=e.rect,n=e.delta,r=e.aspectRatio,i=e.imageBox,o=(0,ae.Z)(n,2),a=o[0],s=o[1],l=t.x,c=t.y,u=t.width,d=t.height;return l+u+a>i.x+i.width&&(a=i.x+i.width-l-u),c+d+s>i.y+i.height&&(s=i.y+i.height-c-d),u+=a,d+=s,r&&Math.abs(u/d)>r?c+(d+=s=u/r-d)>=i.y+i.height&&(u=(d=i.y+i.height-c)*r,l=t.x,c=i.y+i.height-d):r&&l+(u+=a=d*r-u)>=i.x+i.width&&(d=(u=i.x+i.width-l)/r,l=i.x+i.width-u,c=t.y),d<1&&(d=1,r&&(u=d*r)),u<1&&(u=1,r&&(d=u/r)),{x:l,y:c,width:u,height:d}}(n);default:return n.rect}}function Cn(e,t){var n=e.width,r=e.height,i=t/90%2!==0;return{width:i?r:n,height:i?n:r}}function An(e,t,n){var r,i;e/t>n?(r=Math.round(t*n),i=t):(r=e,i=Math.round(e/n));var o=Math.round((e-r)/2),a=Math.round((t-i)/2);return o+r>e&&(r=e-o),a+i>t&&(i=t-a),{x:o,y:a,width:r,height:i}}function Zn(e){return{x:Math.round(e.x),y:Math.round(e.y),width:Math.round(e.width),height:Math.round(e.height)}}function En(e,t,n){return Math.min(Math.max(e,t),n)}var Tn=function(e){if(!e)return[];var t=e.split(":").map(Number),n=(0,ae.Z)(t,2),r=n[0],i=n[1];if(Number.isFinite(r)&&Number.isFinite(i))return[{type:"aspect-ratio",width:r,height:i}];console.error("Invalid crop preset: ".concat(e))},Sn=Object.freeze({LOCAL:"local",DROP_AREA:"drop-area",URL_TAB:"url-tab",CAMERA:"camera",EXTERNAL:"external",API:"js-api"}),Mn="blocks",In="0.40.0";function Ln(e){return fe((0,h.Z)((0,h.Z)({},e),{},{libraryName:Mn,libraryVersion:In}))}var $n=["type","message"],On=function(e){var t=e.type,n=e.message,r=(0,vn.Z)(e,$n);return(0,h.Z)({type:t,message:n},r)},Un=On,Rn=On,Pn=["image/*","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/avif","image/avif-sequence",".heif",".heifs",".heic",".heics",".avif",".avifs"],Nn=function(e){return e?e.filter((function(e){return"string"===typeof e})).map((function(e){return Ht(e)})).flat():[]},Fn=function(e,t){return t.some((function(t){return t.endsWith("*")?(t=t.replace("*",""),e.startsWith(t)):e===t}))},Bn=function(e){var t=null===e||void 0===e?void 0:e.type;return!!t&&Fn(t,Pn)},Dn=1e3,Vn=Object.freeze({AUTO:"auto",BYTE:"byte",KB:"kb",MB:"mb",GB:"gb",TB:"tb",PB:"pb"}),zn=function(e){return Math.ceil(100*e)/100},jn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vn.AUTO,n=t===Vn.AUTO;if(t===Vn.BYTE||n&&e<Math.pow(Dn,1)){var r=J("en-US",e),i={one:"byte",other:"bytes"}[r];return"".concat(e," ").concat(i)}return t===Vn.KB||n&&e<Math.pow(Dn,2)?"".concat(zn(e/Math.pow(Dn,1))," KB"):t===Vn.MB||n&&e<Math.pow(Dn,3)?"".concat(zn(e/Math.pow(Dn,2))," MB"):t===Vn.GB||n&&e<Math.pow(Dn,4)?"".concat(zn(e/Math.pow(Dn,3))," GB"):t===Vn.TB||n&&e<Math.pow(Dn,5)?"".concat(zn(e/Math.pow(Dn,4))," TB"):"".concat(zn(e/Math.pow(Dn,5))," PB")},Hn=new Set;function qn(e){Hn.has(e)||(Hn.add(e),console.warn(e))}var Kn="[Typed State] Wrong property name: ",Gn=function(){function e(t,n){(0,u.Z)(this,e),this.__typedSchema=t,this.__ctxId=n||_.generate(),this.__schema=Object.keys(t).reduce((function(e,n){return e[n]=t[n].value,e}),{}),this.__data=m.registerCtx(this.__schema,this.__ctxId)}return(0,d.Z)(e,[{key:"uid",get:function(){return this.__ctxId}},{key:"setValue",value:function(e,t){if(this.__typedSchema.hasOwnProperty(e)){var n=this.__typedSchema[e];(null===t||void 0===t?void 0:t.constructor)===n.type||t instanceof n.type||n.nullable&&null===t?this.__data.pub(e,t):console.warn("[Typed State] Wrong property type: "+e)}else console.warn(Kn+e)}},{key:"setMultipleValues",value:function(e){for(var t in e)this.setValue(t,e[t])}},{key:"getValue",value:function(e){if(this.__typedSchema.hasOwnProperty(e))return this.__data.read(e);console.warn(Kn+e)}},{key:"subscribe",value:function(e,t){return this.__data.sub(e,t)}},{key:"remove",value:function(){m.deleteCtx(this.__ctxId)}}]),e}(),Wn=function(){function e(t){var n=this;(0,u.Z)(this,e),this.__typedSchema=t.typedSchema,this.__ctxId=t.ctxName||_.generate(),this.__data=m.registerCtx({},this.__ctxId),this.__watchList=t.watchList||[],this.__subsMap=Object.create(null),this.__propertyObservers=new Set,this.__collectionObservers=new Set,this.__items=new Set,this.__removed=new Set,this.__added=new Set;var r=Object.create(null);this.__notifyObservers=function(e,t){n.__observeTimeout&&window.clearTimeout(n.__observeTimeout),r[e]||(r[e]=new Set),r[e].add(t),n.__observeTimeout=window.setTimeout((function(){0!==Object.keys(r).length&&(n.__propertyObservers.forEach((function(e){e((0,h.Z)({},r))})),r=Object.create(null))}))}}return(0,d.Z)(e,[{key:"notify",value:function(){var e=this;this.__notifyTimeout&&window.clearTimeout(this.__notifyTimeout),this.__notifyTimeout=window.setTimeout((function(){var t=new Set(e.__added),n=new Set(e.__removed);e.__added.clear(),e.__removed.clear();var r,i=(0,a.Z)(e.__collectionObservers);try{for(i.s();!(r=i.n()).done;){var o=r.value;null===o||void 0===o||o((0,c.Z)(e.__items),t,n)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"observeCollection",value:function(e){var t=this;return this.__collectionObservers.add(e),this.__items.size>0&&this.notify(),function(){t.unobserveCollection(e)}}},{key:"unobserveCollection",value:function(e){var t;null===(t=this.__collectionObservers)||void 0===t||t.delete(e)}},{key:"add",value:function(e){var t=this,n=new Gn(this.__typedSchema);for(var r in e)n.setValue(r,e[r]);return this.__items.add(n.uid),this.notify(),this.__data.add(n.uid,n),this.__added.add(n),this.__watchList.forEach((function(e){t.__subsMap[n.uid]||(t.__subsMap[n.uid]=[]),t.__subsMap[n.uid].push(n.subscribe(e,(function(){t.__notifyObservers(e,n.uid)})))})),n.uid}},{key:"read",value:function(e){return this.__data.read(e)}},{key:"readProp",value:function(e,t){return this.read(e).getValue(t)}},{key:"publishProp",value:function(e,t,n){this.read(e).setValue(t,n)}},{key:"remove",value:function(e){this.__removed.add(this.__data.read(e)),this.__items.delete(e),this.notify(),this.__data.pub(e,null),delete this.__subsMap[e]}},{key:"clearAll",value:function(){var e=this;this.__items.forEach((function(t){e.remove(t)}))}},{key:"observeProperties",value:function(e){var t=this;return this.__propertyObservers.add(e),function(){t.unobserveProperties(e)}}},{key:"unobserveProperties",value:function(e){var t;null===(t=this.__propertyObservers)||void 0===t||t.delete(e)}},{key:"findItems",value:function(e){var t=this,n=[];return this.__items.forEach((function(r){var i=t.read(r);e(i)&&n.push(r)})),n}},{key:"items",value:function(){return(0,c.Z)(this.__items)}},{key:"size",get:function(){return this.__items.size}},{key:"destroy",value:function(){for(var e in m.deleteCtx(this.__ctxId),this.__propertyObservers=null,this.__collectionObservers=null,this.__subsMap)this.__subsMap[e].forEach((function(e){e.remove()})),delete this.__subsMap[e]}}]),e}(),Xn=function(e){var t=new Map;return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=JSON.stringify(r);if(t.has(o))return t.get(o);var a=e.apply(void 0,r);return t.set(o,a),a}};function Yn(e){for(var t={progress:function(){return e.$["*commonProgress"]},errors:function(){return e.$["*collectionErrors"]},group:function(){return e.$["*groupInfo"]},totalCount:function(){return e.uploadCollection.size},failedCount:function(){return n.failedEntries.length},successCount:function(){return n.successEntries.length},uploadingCount:function(){return n.uploadingEntries.length},status:function(){var e=n.isFailed?"failed":n.isUploading?"uploading":n.isSuccess?"success":"idle";return e},isSuccess:function(){return 0===n.errors.length&&n.successEntries.length===n.allEntries.length},isUploading:function(){return n.allEntries.some((function(e){return"uploading"===e.status}))},isFailed:function(){return n.errors.length>0||n.failedEntries.length>0},allEntries:function(){return e.getOutputData()},successEntries:function(){return n.allEntries.filter((function(e){return"success"===e.status}))},failedEntries:function(){return n.allEntries.filter((function(e){return"failed"===e.status}))},uploadingEntries:function(){return n.allEntries.filter((function(e){return"uploading"===e.status}))},idleEntries:function(){return n.allEntries.filter((function(e){return"idle"===e.status}))}},n={},r=function(e){var t=!1;return setTimeout((function(){t=!0}),0),function(n){return function(){return t&&qn(e),n.apply(void 0,arguments)}}}("You're trying to access the OutputCollectionState asynchronously. In this case, the data you retrieve will be newer than it was when the OutputCollectionState was created or when the event was dispatched. If you want to retain the state at a specific moment in time, you should use the spread operator like this: `{...outputCollectionState}` or `{...e.detail}`"),i=0,o=Object.entries(t);i<o.length;i++){var a=(0,ae.Z)(o[i],2),s=a[0],l=a[1],c=s,u=Xn(r(l));Object.defineProperty(n,c,{get:u,enumerable:!0})}return n}var Jn=Object.freeze({file:{type:File,value:null},externalUrl:{type:String,value:null},fileName:{type:String,value:null,nullable:!0},fileSize:{type:Number,value:null,nullable:!0},lastModified:{type:Number,value:Date.now()},uploadProgress:{type:Number,value:0},uuid:{type:String,value:null},isImage:{type:Boolean,value:!1},mimeType:{type:String,value:null,nullable:!0},ctxName:{type:String,value:null},cdnUrl:{type:String,value:null},cdnUrlModifiers:{type:String,value:null},fileInfo:{type:Ye,value:null},isUploading:{type:Boolean,value:!1},abortController:{type:AbortController,value:null,nullable:!0},thumbUrl:{type:String,value:null,nullable:!0},silent:{type:Boolean,value:!1},source:{type:String,value:!1,nullable:!0},fullPath:{type:String,value:null,nullable:!0},metadata:{type:Object,value:null,nullable:!0},errors:{type:Array,value:[]},uploadError:{type:Error,value:null,nullable:!0},isRemoved:{type:Boolean,value:!1}}),Qn=new RegExp("^/?(".concat(/[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}/i.source,")(?:/(-/(?:[^/]+/)+)?([^/]*))?$"),"i"),er=function(e){var t=e.url,n=e.cdnBase,r=new URL(n),i=new URL(t);if(r.host!==i.host)return null;var o=Qn.exec(i.pathname),a=(0,ae.Z)(o,4);return{uuid:a[1],cdnUrlModifiers:a[2]||"",filename:a[3]||null}},tr=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;(0,u.Z)(this,n);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s)),(0,q.Z)((0,i.Z)(e),"couldBeCtxOwner",!1),(0,q.Z)((0,i.Z)(e),"isCtxOwner",!1),(0,q.Z)((0,i.Z)(e),"init$",xt((0,i.Z)(e))),(0,q.Z)((0,i.Z)(e),"__initialUploadMetadata",null),(0,q.Z)((0,i.Z)(e),"_fileValidators",[e._validateIsImage.bind((0,i.Z)(e)),e._validateFileType.bind((0,i.Z)(e)),e._validateMaxSizeLimit.bind((0,i.Z)(e)),e._validateUploadError.bind((0,i.Z)(e))]),(0,q.Z)((0,i.Z)(e),"_collectionValidators",[function(t){var n=t.size,r=e.cfg.multiple?e.cfg.multipleMin:0,i=e.cfg.multiple?e.cfg.multipleMax:1;if(r&&n<r){var o=e.l10n("files-count-limit-error-too-few",{min:r,max:i,total:n});return Rn({type:"TOO_FEW_FILES",message:o,total:n,min:r,max:i})}if(i&&n>i){var a=e.l10n("files-count-limit-error-too-many",{min:r,max:i,total:n});return Rn({type:"TOO_MANY_FILES",message:a,total:n,min:r,max:i})}},function(t){if(t.items().some((function(e){return t.readProp(e,"errors").length>0})))return Rn({type:"SOME_FILES_HAS_ERRORS",message:e.l10n("some-files-were-not-uploaded")})}]),(0,q.Z)((0,i.Z)(e),"uploadAll",(function(){var t=e.uploadCollection.items().filter((function(t){var n=e.uploadCollection.read(t);return!n.getValue("isRemoved")&&!n.getValue("isUploading")&&!n.getValue("fileInfo")}));0!==t.length&&(e.$["*uploadTrigger"]=new Set(t),e.emit(K.COMMON_UPLOAD_START,e.getOutputCollectionState()))})),(0,q.Z)((0,i.Z)(e),"_flushOutputItems",W((0,r.Z)(f.mark((function t(){var n;return f.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.getOutputData().length===e.uploadCollection.size){t.next=3;break}return t.abrupt("return");case 3:n=e.getOutputCollectionState(),e.$["*collectionState"]=n,e.emit(K.CHANGE,(function(){return e.getOutputCollectionState()}),{debounce:!0}),e.cfg.groupOutput&&n.totalCount>0&&"success"===n.status&&e._createGroup(n);case 7:case"end":return t.stop()}}),t)}))),300)),(0,q.Z)((0,i.Z)(e),"_handleCollectionUpdate",(function(t,n,r){(n.size||r.size)&&(e.$["*groupInfo"]=null),e._runFileValidators(),e._runCollectionValidators();var i,o=(0,a.Z)(n);try{for(o.s();!(i=o.n()).done;){var s=i.value;s.getValue("silent")||e.emit(K.FILE_ADDED,e.getOutputItem(s.uid))}}catch(h){o.e(h)}finally{o.f()}var l,c=(0,a.Z)(r);try{for(c.s();!(l=c.n()).done;){var u,d=l.value;e.$["*uploadTrigger"].delete(d.uid),null===(u=d.getValue("abortController"))||void 0===u||u.abort(),d.setMultipleValues({isRemoved:!0,abortController:null,isUploading:!1,uploadProgress:0}),URL.revokeObjectURL(null===d||void 0===d?void 0:d.getValue("thumbUrl")),e.emit(K.FILE_REMOVED,e.getOutputItem(d.uid))}}catch(h){c.e(h)}finally{c.f()}e.$["*uploadList"]=t.map((function(e){return{uid:e}})),e._flushCommonUploadProgress(),e._flushOutputItems()})),(0,q.Z)((0,i.Z)(e),"_handleCollectionPropertiesUpdate",(function(t){e._flushOutputItems();var n=e.uploadCollection,r=(0,c.Z)(new Set(Object.entries(t).filter((function(e){var t=(0,ae.Z)(e,1)[0];return["uploadError","fileInfo"].includes(t)})).map((function(e){var t=(0,ae.Z)(e,2)[1];return(0,c.Z)(t)})).flat()));if(r.length>0&&setTimeout((function(){e._runFileValidators(r)})),t.uploadProgress){var i,o=(0,a.Z)(t.uploadProgress);try{for(o.s();!(i=o.n()).done;){var s=i.value,l=m.getCtx(s).store,u=l.isUploading,d=l.silent;u&&!d&&e.emit(K.FILE_UPLOAD_PROGRESS,e.getOutputItem(s))}}catch(S){o.e(S)}finally{o.f()}e._flushCommonUploadProgress()}if(t.isUploading){var h,f=(0,a.Z)(t.isUploading);try{for(f.s();!(h=f.n()).done;){var v=h.value,p=m.getCtx(v).store,g=p.isUploading,y=p.silent;g&&!y&&e.emit(K.FILE_UPLOAD_START,e.getOutputItem(v))}}catch(S){f.e(S)}finally{f.f()}}if(t.fileInfo){var b,_=(0,a.Z)(t.fileInfo);try{for(_.s();!(b=_.n()).done;){var w=b.value,k=m.getCtx(w).store,x=k.fileInfo,C=k.silent;x&&!C&&e.emit(K.FILE_UPLOAD_SUCCESS,e.getOutputItem(w))}}catch(S){_.e(S)}finally{_.f()}e.cfg.cropPreset&&e.setInitialCrop();var A=n.findItems((function(e){return!!e.getValue("fileInfo")}));0===n.findItems((function(e){return e.getValue("errors").length>0})).length&&n.size===A.length&&e.emit(K.COMMON_UPLOAD_SUCCESS,e.getOutputCollectionState())}if(t.errors){var Z,E=(0,a.Z)(t.errors);try{for(E.s();!(Z=E.n()).done;){var T=Z.value;m.getCtx(T).store.errors.length>0&&(e.emit(K.FILE_UPLOAD_FAILED,e.getOutputItem(T)),e.emit(K.COMMON_UPLOAD_FAILED,(function(){return e.getOutputCollectionState()}),{debounce:!0}))}}catch(S){E.e(S)}finally{E.f()}}t.cdnUrl&&((0,c.Z)(t.cdnUrl).filter((function(t){var n;return!(null===(n=e.uploadCollection.read(t))||void 0===n||!n.getValue("cdnUrl"))})).forEach((function(t){e.emit(K.FILE_URL_CHANGED,e.getOutputItem(t))})),e.$["*groupInfo"]=null)})),(0,q.Z)((0,i.Z)(e),"_flushCommonUploadProgress",(function(){var t=0,n=e.$["*uploadTrigger"],r=(0,c.Z)(n).filter((function(t){return!!e.uploadCollection.read(t)}));r.forEach((function(n){var r=e.uploadCollection.readProp(n,"uploadProgress");t+=r}));var i=r.length?Math.round(t/r.length):0;e.$["*commonProgress"]!==i&&(e.$["*commonProgress"]=i,e.emit(K.COMMON_UPLOAD_PROGRESS,e.getOutputCollectionState()))})),e}return(0,d.Z)(n,[{key:"setUploadMetadata",value:function(e){qn("setUploadMetadata is deprecated. Use `metadata` instance property on `lr-config` block instead. See migration guide: https://uploadcare.com/docs/file-uploader/migration-to-0.25.0/"),this.connectedOnce?this.$["*uploadMetadata"]=e:this.__initialUploadMetadata=e}},{key:"hasCtxOwner",get:function(){var e=this;return this.hasBlockInCtx((function(t){return t instanceof n&&(t.isCtxOwner&&t.isConnected&&t!==e)}))}},{key:"initCallback",value:function(){if(H((0,z.Z)(n.prototype),"initCallback",this).call(this),!this.$["*uploadCollection"]){var e=new Wn({typedSchema:Jn,watchList:["uploadProgress","uploadError","fileInfo","errors","cdnUrl","isUploading"]});this.$["*uploadCollection"]=e}!this.hasCtxOwner&&this.couldBeCtxOwner&&this.initCtxOwner()}},{key:"destroyCtxCallback",value:function(){var e,t;null===(e=this._unobserveCollectionProperties)||void 0===e||e.call(this),null===(t=this._unobserveCollection)||void 0===t||t.call(this),this.uploadCollection.destroy(),this.$["*uploadCollection"]=null,H((0,z.Z)(n.prototype),"destroyCtxCallback",this).call(this)}},{key:"initCtxOwner",value:function(){var e=this;this.isCtxOwner=!0,this._unobserveCollection=this.uploadCollection.observeCollection(this._handleCollectionUpdate),this._unobserveCollectionProperties=this.uploadCollection.observeProperties(this._handleCollectionPropertiesUpdate);var t=function(){e._runFileValidators(),e._runCollectionValidators()};this.subConfigValue("maxLocalFileSizeBytes",t),this.subConfigValue("multipleMin",t),this.subConfigValue("multipleMax",t),this.subConfigValue("multiple",t),this.subConfigValue("imgOnly",t),this.subConfigValue("accept",t),this.subConfigValue("maxConcurrentRequests",(function(t){e.$["*uploadQueue"].concurrency=Number(t)||1})),this.__initialUploadMetadata&&(this.$["*uploadMetadata"]=this.__initialUploadMetadata)}},{key:"addFileFromUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.silent,r=t.fileName,i=t.source,o=this.uploadCollection.add({externalUrl:e,fileName:null!==r&&void 0!==r?r:null,silent:null!==n&&void 0!==n&&n,source:null!==i&&void 0!==i?i:Sn.API});return this.getOutputItem(o)}},{key:"addFileFromUuid",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.silent,r=t.fileName,i=t.source,o=this.uploadCollection.add({uuid:e,fileName:null!==r&&void 0!==r?r:null,silent:null!==n&&void 0!==n&&n,source:null!==i&&void 0!==i?i:Sn.API});return this.getOutputItem(o)}},{key:"addFileFromCdnUrl",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.silent,i=n.fileName,o=n.source,a=er({url:e,cdnBase:this.cfg.cdnCname});if(!a)throw new Error("Invalid CDN URL");var s=this.uploadCollection.add({uuid:a.uuid,cdnUrl:e,cdnUrlModifiers:a.cdnUrlModifiers,fileName:null!==(t=null!==i&&void 0!==i?i:a.filename)&&void 0!==t?t:null,silent:null!==r&&void 0!==r&&r,source:null!==o&&void 0!==o?o:Sn.API});return this.getOutputItem(s)}},{key:"addFileFromObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.silent,r=t.fileName,i=t.source,o=t.fullPath,a=this.uploadCollection.add({file:e,isImage:Bn(e),mimeType:e.type,fileName:null!==r&&void 0!==r?r:e.name,fileSize:e.size,silent:null!==n&&void 0!==n&&n,source:null!==i&&void 0!==i?i:Sn.API,fullPath:null!==o&&void 0!==o?o:null});return this.getOutputItem(a)}},{key:"addFiles",value:function(e){var t=this;return console.warn("`addFiles` method is deprecated. Please use `addFileFromObject`, `addFileFromUrl` or `addFileFromUuid` instead."),e.map((function(e){var n=t.uploadCollection.add({file:e,isImage:Bn(e),mimeType:e.type,fileName:e.name,fileSize:e.size});return t.getOutputItem(n)}))}},{key:"removeFileByInternalId",value:function(e){if(!this.uploadCollection.read(e))throw new Error("File with internalId ".concat(e," not found"));this.uploadCollection.remove(e)}},{key:"removeAllFiles",value:function(){this.uploadCollection.clearAll()}},{key:"openSystemDialog",value:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=sn(Nn([null!==(e=this.cfg.accept)&&void 0!==e?e:""].concat((0,c.Z)(this.cfg.imgOnly?Pn:[]))));this.cfg.accept&&this.cfg.imgOnly&&console.warn("There could be a mistake.\nBoth `accept` and `imgOnly` parameters are set.\nThe value of `accept` will be concatenated with the internal image mime types list."),this.fileInput=document.createElement("input"),this.fileInput.type="file",this.fileInput.multiple=this.cfg.multiple,n.captureCamera?(this.fileInput.capture=this.cfg.cameraCapture,this.fileInput.accept="image/*"):this.fileInput.accept=r,this.fileInput.dispatchEvent(new MouseEvent("click")),this.fileInput.onchange=function(){(0,c.Z)(t.fileInput.files).forEach((function(e){return t.addFileFromObject(e,{source:n.captureCamera?Sn.CAMERA:Sn.LOCAL})})),t.$["*currentActivity"]=fn.activities.UPLOAD_LIST,t.setOrAddState("*modalActive",!0),t.fileInput.value="",t.fileInput=null}}},{key:"sourceList",get:function(){var e=[];return this.cfg.sourceList&&(e=Ht(this.cfg.sourceList)),e}},{key:"initFlow",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.uploadCollection.size>0&&!t)this.set$({"*currentActivity":fn.activities.UPLOAD_LIST}),this.setOrAddState("*modalActive",!0);else if(1===(null===(e=this.sourceList)||void 0===e?void 0:e.length)){var n=this.sourceList[0];if("local"===n)return this.$["*currentActivity"]=fn.activities.UPLOAD_LIST,void(null===this||void 0===this||this.openSystemDialog());var r=this.$["*blocksRegistry"],i=function(e){return"type"in e&&e.type===n},o=(0,c.Z)(r).find(i);null===o||void 0===o||o.activate(),this.$["*currentActivity"]&&this.setOrAddState("*modalActive",!0)}else this.set$({"*currentActivity":fn.activities.START_FROM}),this.setOrAddState("*modalActive",!0)}},{key:"doneFlow",value:function(){this.set$({"*currentActivity":this.doneActivity,"*history":this.doneActivity?[this.doneActivity]:[]}),this.$["*currentActivity"]||this.setOrAddState("*modalActive",!1)}},{key:"uploadCollection",get:function(){return this.$["*uploadCollection"]}},{key:"_validateFileType",value:function(e){var t=this.cfg.imgOnly,n=this.cfg.accept,r=Nn([].concat((0,c.Z)(t?Pn:[]),[n]));if(r.length){var i=e.mimeType,o=e.name;if(i&&o){var a=Fn(i,r),s=function(e,t){return t.some((function(t){return!!t.startsWith(".")&&e.toLowerCase().endsWith(t.toLowerCase())}))}(o,r);return a||s?void 0:Un({type:"FORBIDDEN_FILE_TYPE",message:this.l10n("file-type-not-allowed"),entry:e})}}}},{key:"_validateMaxSizeLimit",value:function(e){var t=this.cfg.maxLocalFileSizeBytes,n=e.size;if(t&&n&&n>t)return Un({type:"FILE_SIZE_EXCEEDED",message:this.l10n("files-max-size-limit-error",{maxFileSize:jn(t)}),entry:e})}},{key:"_validateUploadError",value:function(e,t){var n=null===t||void 0===t?void 0:t.getValue("uploadError");if(n){if(n instanceof Ie)return Un({type:"UPLOAD_ERROR",message:n.message,entry:e,error:n});if(n instanceof me)return Un({type:"NETWORK_ERROR",message:n.message,entry:e,error:n});var r=n instanceof Error?n:new Error("Unknown error",{cause:n});return Un({type:"UNKNOWN_ERROR",message:r.message,entry:e,error:r})}}},{key:"_validateIsImage",value:function(e){var t=this.cfg.imgOnly,n=e.isImage;if(t&&!n&&(e.fileInfo||!e.externalUrl)&&(e.fileInfo||e.mimeType))return Un({type:"NOT_AN_IMAGE",message:this.l10n("images-only-accepted"),entry:e})}},{key:"_runFileValidatorsForEntry",value:function(e){var t,n=this.getOutputItem(e.uid),r=[],i=(0,a.Z)(this._fileValidators);try{for(i.s();!(t=i.n()).done;){var o=(0,t.value)(n,e);o&&r.push(o)}}catch(s){i.e(s)}finally{i.f()}e.setValue("errors",r)}},{key:"_runFileValidators",value:function(e){var t,n=null!==e&&void 0!==e?e:this.uploadCollection.items(),r=(0,a.Z)(n);try{for(r.s();!(t=r.n()).done;){var i=t.value,o=this.uploadCollection.read(i);o&&this._runFileValidatorsForEntry(o)}}catch(s){r.e(s)}finally{r.f()}}},{key:"_runCollectionValidators",value:function(){var e,t=this,n=this.uploadCollection,r=[],i=(0,a.Z)(this._collectionValidators);try{for(i.s();!(e=i.n()).done;){var o=(0,e.value)(n);o&&(Array.isArray(o)?r.push.apply(r,(0,c.Z)(o)):r.push(o))}}catch(s){i.e(s)}finally{i.f()}this.$["*collectionErrors"]=r,r.length>0&&this.emit(K.COMMON_UPLOAD_FAILED,(function(){return t.getOutputCollectionState()}),{debounce:!0})}},{key:"_createGroup",value:function(){var e=(0,r.Z)(f.mark((function e(t){var n,r,i,o,a,s=this;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.getUploadClientOptions(),r=t.allEntries.map((function(e){return e.uuid+(e.cdnUrlModifiers?"/".concat(e.cdnUrlModifiers):"")})),i=new AbortController,e.next=5,_t(r,(0,h.Z)((0,h.Z)({},n),{},{signal:i.signal}));case 5:if(o=e.sent,this.$["*collectionState"]===t){e.next=9;break}return i.abort(),e.abrupt("return");case 9:this.$["*groupInfo"]=o,a=this.getOutputCollectionState(),this.emit(K.GROUP_CREATED,a),this.emit(K.CHANGE,(function(){return s.getOutputCollectionState()}),{debounce:!0}),this.$["*collectionState"]=a;case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setInitialCrop",value:function(){var e=this,t=Tn(this.cfg.cropPreset);if(t){var n,r=(0,ae.Z)(t,1)[0],i=this.uploadCollection.findItems((function(e){var t;return e.getValue("fileInfo")&&e.getValue("isImage")&&!(null!==(t=e.getValue("cdnUrlModifiers"))&&void 0!==t&&t.includes("/crop/"))})).map((function(t){return e.uploadCollection.read(t)})),o=(0,a.Z)(i);try{for(o.s();!(n=o.n()).done;){var s=n.value,l=s.getValue("fileInfo").imageInfo,c=An(l.width,l.height,r.width/r.height),u=Rt("crop/".concat(c.width,"x").concat(c.height,"/").concat(c.x,",").concat(c.y),"preview");s.setMultipleValues({cdnUrlModifiers:u,cdnUrl:zt(s.getValue("cdnUrl"),u)}),1===this.uploadCollection.size&&this.cfg.useCloudImageEditor&&this.hasBlockInCtx((function(e){return e.activityType===fn.activities.CLOUD_IMG_EDIT}))&&(this.$["*focusedEntry"]=s,this.$["*currentActivity"]=fn.activities.CLOUD_IMG_EDIT)}}catch(d){o.e(d)}finally{o.f()}}}},{key:"getMetadataFor",value:function(){var e=(0,r.Z)(f.mark((function e(t){var n,r,i,o;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!==typeof(r=null!==(n=this.cfg.metadata)&&void 0!==n?n:this.$["*uploadMetadata"])){e.next=7;break}return i=this.getOutputItem(t),e.next=5,r(i);case 5:return o=e.sent,e.abrupt("return",o);case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUploadClientOptions",value:function(){return{store:this.cfg.store,publicKey:this.cfg.pubkey,baseCDN:this.cfg.cdnCname,baseURL:this.cfg.baseUrl,userAgent:Ln,integration:this.cfg.userAgentIntegration,secureSignature:this.cfg.secureSignature,secureExpire:this.cfg.secureExpire,retryThrottledRequestMaxTimes:this.cfg.retryThrottledRequestMaxTimes,multipartMinFileSize:this.cfg.multipartMinFileSize,multipartChunkSize:this.cfg.multipartChunkSize,maxConcurrentRequests:this.cfg.multipartMaxConcurrentRequests,multipartMaxAttempts:this.cfg.multipartMaxAttempts,checkForUrlDuplicates:!!this.cfg.checkForUrlDuplicates,saveUrlForRecurrentUploads:!!this.cfg.saveUrlForRecurrentUploads}}},{key:"getOutputItem",value:function(e){var t,n,r,i,o,a,s,l,c,u,d=m.getCtx(e).store,h=d.fileInfo,f=d.isRemoved?"removed":d.errors.length>0?"failed":d.fileInfo?"success":d.isUploading?"uploading":"idle";return{uuid:null!==(t=null!==(n=null===h||void 0===h?void 0:h.uuid)&&void 0!==n?n:d.uuid)&&void 0!==t?t:null,internalId:e,name:null!==(r=null===h||void 0===h?void 0:h.originalFilename)&&void 0!==r?r:d.fileName,size:null!==(i=null===h||void 0===h?void 0:h.size)&&void 0!==i?i:d.fileSize,isImage:null!==(o=null===h||void 0===h?void 0:h.isImage)&&void 0!==o?o:d.isImage,mimeType:null!==(a=null===h||void 0===h?void 0:h.mimeType)&&void 0!==a?a:d.mimeType,file:d.file,externalUrl:d.externalUrl,cdnUrlModifiers:d.cdnUrlModifiers,cdnUrl:null!==(s=null!==(l=d.cdnUrl)&&void 0!==l?l:null===h||void 0===h?void 0:h.cdnUrl)&&void 0!==s?s:null,fullPath:d.fullPath,uploadProgress:d.uploadProgress,fileInfo:null!==h&&void 0!==h?h:null,metadata:null!==(c=null!==(u=d.metadata)&&void 0!==u?u:null===h||void 0===h?void 0:h.metadata)&&void 0!==c?c:null,isSuccess:"success"===f,isUploading:"uploading"===f,isFailed:"failed"===f,isRemoved:"removed"===f,errors:d.errors,status:f}}},{key:"getOutputData",value:function(e){var t=this;return(e?this.uploadCollection.findItems(e):this.uploadCollection.items()).map((function(e){return t.getOutputItem(e)}))}},{key:"getOutputCollectionState",value:function(){return Yn(this)}}]),n}(fn);tr.extSrcList=Object.freeze({FACEBOOK:"facebook",DROPBOX:"dropbox",GDRIVE:"gdrive",GPHOTOS:"gphotos",INSTAGRAM:"instagram",FLICKR:"flickr",VK:"vk",EVERNOTE:"evernote",BOX:"box",ONEDRIVE:"onedrive",HUDDLE:"huddle"}),tr.sourceTypes=Object.freeze((0,h.Z)({LOCAL:"local",URL:"url",CAMERA:"camera",DRAW:"draw"},tr.extSrcList));var nr=function(e){var t;return null===(t=e.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g))||void 0===t?void 0:t.map((function(e){return e.toLowerCase()})).join("-")},rr=function(e){return String(e)},ir=function(e){var t=Number(e);if(Number.isNaN(t))throw new Error('Invalid number: "'.concat(e,'"'));return t},or=function(e){if("undefined"===typeof e||null===e)return!1;if("boolean"===typeof e)return e;if("true"===e)return!0;if(""===e)return!0;if("false"===e)return!1;throw new Error('Invalid boolean: "'.concat(e,'"'))},ar={pubkey:rr,multiple:or,multipleMin:ir,multipleMax:ir,confirmUpload:or,imgOnly:or,accept:rr,externalSourcesPreferredTypes:rr,store:function(e){return"auto"===e?e:or(e)},cameraMirror:or,cameraCapture:function(e){var t=rr(e);if("user"!==t&&"environment"!==t&&""!==t)throw new Error('Invalid "cameraCapture" value: "'.concat(t,'"'));return t},sourceList:rr,maxLocalFileSizeBytes:ir,thumbSize:ir,showEmptyList:or,useLocalImageEditor:or,useCloudImageEditor:or,cloudImageEditorTabs:rr,removeCopyright:or,cropPreset:rr,imageShrink:rr,modalScrollLock:or,modalBackdropStrokes:or,sourceListWrap:or,remoteTabSessionKey:rr,cdnCname:rr,baseUrl:rr,socialBaseUrl:rr,secureSignature:rr,secureExpire:rr,secureDeliveryProxy:rr,retryThrottledRequestMaxTimes:ir,multipartMinFileSize:ir,multipartChunkSize:ir,maxConcurrentRequests:ir,multipartMaxConcurrentRequests:ir,multipartMaxAttempts:ir,checkForUrlDuplicates:or,saveUrlForRecurrentUploads:or,groupOutput:or,userAgentIntegration:rr,debug:or,localeName:rr,metadata:function(e){if("object"===typeof e&&!Array.isArray(e))return e;if("function"===typeof e)return e;throw new Error("Invalid metadata value. Must be an object or function.")},localeDefinitionOverride:function(e){if("object"===typeof e)return e;throw new Error("Invalid localeDefinitionOverride value. Must be an object.")},iconHrefResolver:function(e){if("function"===typeof e)return e;throw new Error("Invalid function value. Must be a function.")}},sr=(0,c.Z)(new Set(["debug"].concat((0,c.Z)(Object.keys(ln))))),lr=["metadata","localeDefinitionOverride","iconHrefResolver"],cr=sr.filter((function(e){return!function(e){return lr.includes(e)}(e)})),ur=(0,h.Z)((0,h.Z)({},Object.fromEntries(cr.map((function(e){return[nr(e),e]})))),Object.fromEntries(cr.map((function(e){return[e.toLowerCase(),e]})))),dr=(0,h.Z)((0,h.Z)({},Object.fromEntries(cr.map((function(e){return[nr(e),$t(e)]})))),Object.fromEntries(cr.map((function(e){return[e.toLowerCase(),$t(e)]})))),hr=function(e){return"__"+e},fr=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;return(0,u.Z)(this,n),e=t.call(this),(0,q.Z)((0,i.Z)(e),"requireCtxName",!0),e.init$=(0,h.Z)((0,h.Z)({},e.init$),Object.fromEntries(Object.entries(ln).map((function(e){var t=(0,ae.Z)(e,2),n=t[0],r=t[1];return[$t(n),r]})))),e}return(0,d.Z)(n,[{key:"_flushValueToAttribute",value:function(e,t){if(cr.includes(e)){var n,r=(0,c.Z)(new Set([nr(e),e.toLowerCase()])),i=(0,a.Z)(r);try{for(i.s();!(n=i.n()).done;){var o=n.value;"undefined"===typeof t||null===t?this.removeAttribute(o):this.getAttribute(o)!==t.toString()&&this.setAttribute(o,t.toString())}}catch(s){i.e(s)}finally{i.f()}}}},{key:"_flushValueToState",value:function(e,t){this.$[$t(e)]!==t&&(this.$[$t(e)]="undefined"===typeof t||null===t?ln[e]:t)}},{key:"_setValue",value:function(e,t){var n=this,r=function(e,t){if("undefined"!==typeof t&&null!==t)try{return ar[e](t)}catch(n){return console.error('Invalid value for config key "'.concat(e,'".'),n),ln[e]}}(e,t),i=hr(e);n[i]!==r&&(this._assertSameValueDifferentReference(e,n[i],r),n[i]=r,this._flushValueToAttribute(e,r),this._flushValueToState(e,r),this.debugPrint('[lr-config] "'.concat(e,'"'),r))}},{key:"_getValue",value:function(e){return this[hr(e)]}},{key:"_assertSameValueDifferentReference",value:function(e,t,n){this.cfg.debug&&n!==t&&"object"===typeof n&&"object"===typeof t&&JSON.stringify(n)===JSON.stringify(t)&&(console.warn('[lr-config] Option "'.concat(e,'" value is the same as the previous one but the reference is different')),console.warn("[lr-config] You should avoid changing the reference of the object to prevent unnecessary calculations"),console.warn('[lr-config] "'.concat(e,'" previous value:'),t),console.warn('[lr-config] "'.concat(e,'" new value:'),n))}},{key:"initCallback",value:function(){var e=this;H((0,z.Z)(n.prototype),"initCallback",this).call(this);var t,r=this,i=(0,a.Z)(cr);try{var o=function(){var n=t.value;e.sub($t(n),(function(t){e._setValue(n,t)}),!1)};for(i.s();!(t=i.n()).done;)o()}catch(u){i.e(u)}finally{i.f()}var s,l=(0,a.Z)(sr);try{var c=function(){var t,n=s.value,i=null!==(t=r[n])&&void 0!==t?t:e.$[$t(n)];i!==ln[n]&&e._setValue(n,i),Object.defineProperty(e,n,{set:function(t){e._setValue(n,t)},get:function(){return e._getValue(n)}})};for(l.s();!(s=l.n()).done;)c()}catch(u){l.e(u)}finally{l.f()}}},{key:"attributeChangedCallback",value:function(e,t,n){if(t!==n){this[ur[e]]=n}}}]),n}(un);fr.bindAttributes(dr);var vr,pr=(0,a.Z)(sr);try{for(pr.s();!(vr=pr.n()).done;){var mr=vr.value;fr.prototype[mr]=void 0}}catch(Yo){pr.e(Yo)}finally{pr.f()}var gr=fr,yr=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.call(this)).init$=(0,h.Z)((0,h.Z)({},e.init$),{},{name:"",href:"",title:""}),e}return(0,d.Z)(n,[{key:"initCallback",value:function(){var e=this;H((0,z.Z)(n.prototype),"initCallback",this).call(this),this.sub("name",(function(t){if(t){var n="#uc-icon-".concat(t);e.subConfigValue("iconHrefResolver",(function(r){if(r){var i=r(t);n=null!==i&&void 0!==i?i:n}e.$.href=n}))}}))}}]),n}(un);yr.template='\n  <svg ref="svg" xmlns="http://www.w3.org/2000/svg">\n    <title>{{title}}</title>\n    <use set="@href: href;"></use>\n  </svg>\n',yr.bindAttributes({name:"name",title:"title"});var br=Object.freeze({"dev-mode":{},pubkey:{},uuid:{},src:{},lazy:{default:1},intersection:{},breakpoints:{},"cdn-cname":{default:"https://ucarecdn.com"},"proxy-cname":{},"secure-delivery-proxy":{},"hi-res-support":{default:1},"ultra-res-support":{},format:{},"cdn-operations":{},progressive:{},quality:{},"is-background-for":{},"is-preview-blur":{default:1}}),_r="--lr-img-",wr="unresolved",kr=!window.location.host.trim()||window.location.host.includes(":")||window.location.hostname.includes("localhost"),xr=Object.freeze({PREVIEW:"PREVIEW",MAIN:"MAIN"}),Cr=Object.create(null);for(var Ar in br){var Zr;Cr[_r+Ar]=(null===(Zr=br[Ar])||void 0===Zr?void 0:Zr.default)||""}var Er=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;(0,u.Z)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,q.Z)((0,i.Z)(e),"cssInit$",Cr),e}return(0,d.Z)(n,[{key:"$$",value:function(e){return this.$[_r+e]}},{key:"set$$",value:function(e){for(var t in e)this.$[_r+t]=e[t]}},{key:"sub$$",value:function(e,t){this.sub(_r+e,(function(e){null!==e&&""!==e&&t(e)}))}},{key:"analyticsParams",value:function(){return"-/@clib/".concat(Mn,"/").concat(In,"/lr-img/")}},{key:"initAttributes",value:function(e){(0,c.Z)(this.attributes).forEach((function(t){br[t.name]||e.setAttribute(t.name,t.value)}))}},{key:"initIntersection",value:function(e,t){var n=this;this._isnObserver=new IntersectionObserver((function(r){r.forEach((function(r){r.isIntersecting&&(t(),n._isnObserver.unobserve(e))}))}),{root:null,rootMargin:"0px"}),this._isnObserver.observe(e),this._observed||(this._observed=new Set),this._observed.add(e)}},{key:"destroyCallback",value:function(){var e=this;H((0,z.Z)(n.prototype),"destroyCallback",this).call(this),this._isnObserver&&(this._observed.forEach((function(t){e._isnObserver.unobserve(t)})),this._isnObserver=null),m.deleteCtx(this)}},{key:"attributeChangedCallback",value:function(e,t,n){var r=this;window.setTimeout((function(){r.$[_r+e]=n}))}}],[{key:"observedAttributes",get:function(){return Object.keys(br)}}]),n}(O),Tr=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;(0,u.Z)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,q.Z)((0,i.Z)(e),"_img",new Image),(0,q.Z)((0,i.Z)(e),"_imgPreview",new Image),e}return(0,d.Z)(n,[{key:"_fmtAbs",value:function(e){return!e.includes("//")&&!kr&&(e=new URL(e,document.baseURI).href),e}},{key:"_validateSize",value:function(e){if(""!==(null===e||void 0===e?void 0:e.trim())){var t=e.match(/\d+/)[0],n=e.match(/[a-zA-Z]+/)[0],r=parseInt(t,10);if(Number(r)>5e3&&this.hasFormatJPG)return 5e3+n;if(Number(r)>3e3&&!this.hasFormatJPG)return 3e3+n}return e}},{key:"_getCdnModifiers",value:function(e,t){var n={format:this.$$("format"),quality:this.$$("quality"),resize:this._validateSize(e),blur:t,"cdn-operations":this.$$("cdn-operations"),analytics:this.analyticsParams()};return Rt.apply(void 0,(0,c.Z)(function(e){return Object.entries(e).filter((function(e){var t=(0,ae.Z)(e,2),n=(t[0],t[1]);return void 0!==n&&""!==n})).map((function(e){var t=(0,ae.Z)(e,2),n=t[0],r=t[1];return"cdn-operations"===n||"analytics"===n?r:"".concat(n,"/").concat(r)}))}(n)))}},{key:"_getUrlBase",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(this.$$("src").startsWith("data:")||this.$$("src").startsWith("blob:"))return this.$$("src");if(kr&&this.$$("src")&&!this.$$("src").includes("//"))return this._proxyUrl(this.$$("src"));var n=this._getCdnModifiers(e,t);return this.$$("src").startsWith(this.$$("cdn-cname"))?zt(this.$$("src"),n):this.$$("cdn-cname")&&this.$$("uuid")||this.$$("uuid")?this._proxyUrl(zt(jt(this.$$("cdn-cname"),this.$$("uuid")),n)):this.$$("proxy-cname")?this._proxyUrl(zt(this.$$("proxy-cname"),n,this._fmtAbs(this.$$("src")))):this.$$("pubkey")?this._proxyUrl(zt("https://".concat(this.$$("pubkey"),".ucr.io/"),n,this._fmtAbs(this.$$("src")))):void 0}},{key:"_proxyUrl",value:function(e){return this.$$("secure-delivery-proxy")?re(this.$$("secure-delivery-proxy"),{previewUrl:e},{transform:function(e){return window.encodeURIComponent(e)}}):e}},{key:"_getElSize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.getBoundingClientRect(),i=t*Math.round(r.width),o=n?"":t*Math.round(r.height);return i||o?"".concat(i||"","x").concat(o||""):null}},{key:"_setupEventProxy",value:function(e){for(var t=this,n=function(e){e.stopPropagation();var n=new Event(e.type,e);t.dispatchEvent(n)},r=0,i=["load","error"];r<i.length;r++){var o=i[r];e.addEventListener(o,n)}}},{key:"img",get:function(){return this.hasPreviewImage||(this._setupConfigForImage({elNode:this._img}),this.appendChild(this._img)),this._img}},{key:"currentImg",get:function(){return this.hasPreviewImage?{type:xr.PREVIEW,img:this._imgPreview}:{type:xr.MAIN,img:this.img}}},{key:"hasPreviewImage",get:function(){return this.$$("is-preview-blur")}},{key:"bgSelector",get:function(){return this.$$("is-background-for")}},{key:"breakpoints",get:function(){if(this.$$("breakpoints")){var e=Ht(this.$$("breakpoints"));return t=e.map((function(e){return parseInt(e,10)})),(0,c.Z)(new Set(t))}return null;var t}},{key:"hasFormatJPG",get:function(){return"jpeg"===this.$$("format").toLowerCase()}},{key:"renderBg",value:function(e){var t=new Set;t.add('url("'.concat(this._getUrlBase(this._getElSize(e)),'") 1x')),this.$$("hi-res-support")&&t.add('url("'.concat(this._getUrlBase(this._getElSize(e,2)),'") ').concat(2,"x")),this.$$("ultra-res-support")&&t.add('url("'.concat(this._getUrlBase(this._getElSize(e,3)),'") ').concat(3,"x"));var n="image-set(".concat((0,c.Z)(t).join(", "),")");e.style.setProperty("background-image",n),e.style.setProperty("background-image","-webkit-"+n)}},{key:"getSrcset",value:function(){var e=this,t=new Set;return this.breakpoints?this.breakpoints.forEach((function(n){t.add(e._getUrlBase(n+"x")+" ".concat(e._validateSize(n+"w"))),e.$$("hi-res-support")&&t.add(e._getUrlBase(2*n+"x")+" ".concat(e._validateSize(2*n+"w"))),e.$$("ultra-res-support")&&t.add(e._getUrlBase(3*n+"x")+" ".concat(e._validateSize(3*n+"w")))})):(t.add(this._getUrlBase(this._getElSize(this.currentImg.img))+" 1x"),this.$$("hi-res-support")&&t.add(this._getUrlBase(this._getElSize(this.currentImg.img,2))+" 2x"),this.$$("ultra-res-support")&&t.add(this._getUrlBase(this._getElSize(this.currentImg.img,3))+" 3x")),(0,c.Z)(t).join()}},{key:"getSrc",value:function(){return this._getUrlBase()}},{key:"srcUrlPreview",get:function(){return this._getUrlBase("100x","100")}},{key:"renderBackground",value:function(){var e=this;(0,c.Z)(document.querySelectorAll(this.bgSelector)).forEach((function(t){e.$$("intersection")?e.initIntersection(t,(function(){e.renderBg(t)})):e.renderBg(t)}))}},{key:"_appendURL",value:function(e){var t=e.elNode,n=e.src,r=e.srcset;n&&(t.src=n),r&&(t.srcset=r)}},{key:"_setupConfigForImage",value:function(e){var t=e.elNode;this._setupEventProxy(t),this.initAttributes(t)}},{key:"loaderImage",value:function(e){var t=this,n=e.src,r=e.srcset,i=e.elNode;return new Promise((function(e,o){t._setupConfigForImage({elNode:i}),i.setAttribute(wr,""),i.addEventListener("load",(function(){i.removeAttribute(wr),e(i)})),i.addEventListener("error",(function(){o(!1)})),t._appendURL({elNode:i,src:n,srcset:r})}))}},{key:"renderImage",value:function(){var e=(0,r.Z)(f.mark((function e(){var t,n,i=this;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.$$("intersection")){e.next=4;break}return this.hasPreviewImage&&(this._setupConfigForImage({elNode:this._imgPreview}),this.appendChild(this._imgPreview)),this.initIntersection(this.currentImg.img,(0,r.Z)(f.mark((function e(){var t;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.hasPreviewImage&&(i._imgPreview.src=i.srcUrlPreview),e.prev=1,e.next=4,i.loaderImage({src:i.getSrc(),srcset:i.getSrcset(),elNode:i._img});case 4:if(!i.hasPreviewImage){e.next=7;break}return e.next=7,i._imgPreview.remove();case 7:i.appendChild(i._img),e.next=16;break;case 10:if(e.prev=10,e.t0=e.catch(1),!i.hasPreviewImage){e.next=15;break}return e.next=15,null===(t=i._imgPreview)||void 0===t?void 0:t.remove();case 15:i.appendChild(i._img);case 16:case"end":return e.stop()}}),e,null,[[1,10]])})))),e.abrupt("return");case 4:if(e.prev=4,!this.hasPreviewImage){e.next=9;break}return e.next=8,this.loaderImage({src:this.srcUrlPreview,elNode:this._imgPreview});case 8:this.appendChild(this._imgPreview);case 9:return e.next=11,this.loaderImage({src:this.getSrc(),srcset:this.getSrcset(),elNode:this._img});case 11:if(!this.hasPreviewImage){e.next=14;break}return e.next=14,null===(t=this._imgPreview)||void 0===t?void 0:t.remove();case 14:this.appendChild(this._img),e.next=23;break;case 17:if(e.prev=17,e.t0=e.catch(4),!this.hasPreviewImage){e.next=22;break}return e.next=22,null===(n=this._imgPreview)||void 0===n?void 0:n.remove();case 22:this.appendChild(this._img);case 23:case"end":return e.stop()}}),e,this,[[4,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){this.bgSelector?this.renderBackground():this.renderImage()}}]),n}(Er),Sr=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,u.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"initCallback",value:function(){var e=this;H((0,z.Z)(n.prototype),"initCallback",this).call(this),this.sub$$("src",(function(){e.init()})),this.sub$$("uuid",(function(){e.init()})),this.sub$$("lazy",(function(t){e.$$("is-background-for")||e.$$("is-preview-blur")||(e.img.loading=t?"lazy":"eager")}))}}]),n}(Tr),Mr=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;return(0,u.Z)(this,n),e=t.call(this),(0,q.Z)((0,i.Z)(e),"couldBeCtxOwner",!0),e.init$=(0,h.Z)((0,h.Z)({},e.init$),{},{withDropZone:!0,onClick:function(){e.initFlow()},"button-text":""}),e}return(0,d.Z)(n,[{key:"initCallback",value:function(){var e=this;H((0,z.Z)(n.prototype),"initCallback",this).call(this),this.defineAccessor("dropzone",(function(t){"undefined"!==typeof t&&(e.$.withDropZone=or(t))})),this.subConfigValue("multiple",(function(t){e.$["button-text"]=t?"upload-files":"upload-file"}))}}]),n}(tr);Mr.template='\n  <lr-drop-area set="@disabled: !withDropZone">\n    <button type="button" set="onclick: onClick">\n      <lr-icon name="upload"></lr-icon>\n      <span l10n="button-text"></span>\n      <slot></slot>\n      <div class="visual-drop-area" l10n="drop-files-here"></div>\n    </button>\n  </lr-drop-area>\n',Mr.bindAttributes({dropzone:null});var Ir=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;(0,u.Z)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,q.Z)((0,i.Z)(e),"historyTracked",!0),(0,q.Z)((0,i.Z)(e),"activityType","start-from"),e}return(0,d.Z)(n,[{key:"initCallback",value:function(){H((0,z.Z)(n.prototype),"initCallback",this).call(this),this.registerActivity(this.activityType)}}]),n}(fn);function Lr(e){for(var t=[],n=[],r=function(r){var i,o,s=e.items[r];if(!s)return"continue";if("file"===s.kind){var l=s.type;if("function"===typeof s.webkitGetAsEntry||"function"===typeof s.getAsEntry){var u="function"===typeof s.webkitGetAsEntry?s.webkitGetAsEntry():s.getAsEntry();return n.push((i=u,o=l,new Promise((function(e){var t=0,n=[],r=function(r){r||(console.warn("Unexpectedly received empty content entry",{scope:"drag-and-drop"}),e(null)),r.isFile?(t++,r.file((function(i){t--;var a=new File([i],i.name,{type:i.type||o});n.push({type:"file",file:a,fullPath:r.fullPath}),0===t&&e(n)}))):r.isDirectory&&s(r.createReader())},s=function(i){t++,i.readEntries((function(i){t--;var o,s=(0,a.Z)(i);try{for(s.s();!(o=s.n()).done;){var l=o.value;r(l)}}catch(Yo){s.e(Yo)}finally{s.f()}0===t&&e(n)}))};r(i)}))).then((function(e){e&&t.push.apply(t,(0,c.Z)(e))}))),"continue"}var d=s.getAsFile();d&&n.push(function(e){return new Promise((function(t){"function"!==typeof window.FileReader&&t(!1);try{var n=new FileReader;n.onerror=function(){t(!0)};var r=function(e){"loadend"!==e.type&&n.abort(),t(!1)};n.onloadend=r,n.onprogress=r,n.readAsDataURL(e)}catch(Yo){t(!1)}}))}(d).then((function(e){e||t.push({type:"file",file:d})})))}else"string"===s.kind&&s.type.match("^text/uri-list")&&n.push(new Promise((function(e){s.getAsString((function(n){t.push({type:"url",url:n}),e(void 0)}))})))},i=0;i<e.items.length;i++)r(i);return Promise.all(n).then((function(){return t}))}Ir.template=' <div class="content"><slot></slot></div> ';var $r={ACTIVE:0,INACTIVE:1,NEAR:2,OVER:3},Or=["focus"],Ur=new Map;function Rr(e){var t,n=0,i=document.body,o=new Set,a=$r.INACTIVE,s=function(t){e.shouldIgnore()&&t!==$r.INACTIVE||(a!==t&&o.forEach((function(e){return e(t)})),a=t)},l=function(){return n>0};t=function(t){return e.onChange(t)},o.add(t);var u=function(){n=0,s($r.INACTIVE)},d=function(){n+=1,a===$r.INACTIVE&&s($r.ACTIVE)},h=function(){n-=1,l()||s($r.INACTIVE)},v=function(e){e.preventDefault(),n=0,s($r.INACTIVE)},p=function(t){if(!e.shouldIgnore()){l()||(n+=1);var r=[t.x,t.y],i=e.element.getBoundingClientRect(),o=Math.floor(function(e,t){var n=Math.max(Math.min(e[0],t.x+t.width),t.x),r=Math.max(Math.min(e[1],t.y+t.height),t.y);return Math.sqrt((e[0]-n)*(e[0]-n)+(e[1]-r)*(e[1]-r))}(r,i)),a=o<100,u=t.composedPath().includes(e.element);Ur.set(e.element,o);var d=Math.min.apply(Math,(0,c.Z)(Ur.values()))===o;u&&d?(t.preventDefault(),s($r.OVER)):s(a&&d?$r.NEAR:$r.ACTIVE)}},m=function(){var t=(0,r.Z)(f.mark((function t(n){var r;return f.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.shouldIgnore()){t.next=2;break}return t.abrupt("return");case 2:return n.preventDefault(),t.next=5,Lr(n.dataTransfer);case 5:r=t.sent,e.onItems(r),s($r.INACTIVE);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return i.addEventListener("drop",v),i.addEventListener("dragleave",h),i.addEventListener("dragenter",d),i.addEventListener("dragover",p),e.element.addEventListener("drop",m),Or.forEach((function(e){window.addEventListener(e,u)})),function(){Ur.delete(e.element),i.removeEventListener("drop",v),i.removeEventListener("dragleave",h),i.removeEventListener("dragenter",d),i.removeEventListener("dragover",p),e.element.removeEventListener("drop",m),Or.forEach((function(e){window.removeEventListener(e,u)}))}}var Pr="lr-drop-area",Nr="".concat(Pr,"/registry"),Fr=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.call(this)).init$=(0,h.Z)((0,h.Z)({},e.init$),{},(0,q.Z)({state:$r.INACTIVE,withIcon:!1,isClickable:!1,isFullscreen:!1,isEnabled:!0,isVisible:!0,text:""},Nr,null)),e}return(0,d.Z)(n,[{key:"isActive",value:function(){if(!this.$.isEnabled)return!1;var e=this.getBoundingClientRect(),t=e.width>0&&e.height>0,n=e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth),r=window.getComputedStyle(this),i="hidden"!==r.visibility&&"none"!==r.display;return t&&i&&n}},{key:"initCallback",value:function(){var e=this;H((0,z.Z)(n.prototype),"initCallback",this).call(this),this.bindL10n("text",(function(){return e.l10n("drop-files-here")})),this.$[Nr]||(this.$[Nr]=new Set),this.$[Nr].add(this),this.defineAccessor("disabled",(function(t){e.set$({isEnabled:!or(t)})})),this.defineAccessor("clickable",(function(t){e.set$({isClickable:or(t)})})),this.defineAccessor("with-icon",(function(t){e.set$({withIcon:or(t)})})),this.defineAccessor("fullscreen",(function(t){e.set$({isFullscreen:or(t)})})),this.defineAccessor("text",(function(t){"string"===typeof t?e.bindL10n("text",(function(){return e.l10n(t)||t})):e.bindL10n("text",(function(){return e.l10n("drop-files-here")}))})),this._destroyDropzone=Rr({element:this,shouldIgnore:function(){return e._shouldIgnore()},onChange:function(t){e.$.state=t},onItems:function(t){t.length&&(t.forEach((function(t){"url"===t.type?e.addFileFromUrl(t.url,{source:Sn.DROP_AREA}):"file"===t.type&&e.addFileFromObject(t.file,{source:Sn.DROP_AREA,fullPath:t.fullPath})})),e.uploadCollection.size&&(e.set$({"*currentActivity":fn.activities.UPLOAD_LIST}),e.setOrAddState("*modalActive",!0)))}});var t=this.ref["content-wrapper"];t&&(this._destroyContentWrapperDropzone=Rr({element:t,onChange:function(e){var n,r=null===(n=Object.entries($r).find((function(t){return(0,ae.Z)(t,2)[1]===e})))||void 0===n?void 0:n[0].toLowerCase();r&&t.setAttribute("drag-state",r)},onItems:function(){},shouldIgnore:function(){return e._shouldIgnore()}})),this.sub("state",(function(t){var n,r=null===(n=Object.entries($r).find((function(e){return(0,ae.Z)(e,2)[1]===t})))||void 0===n?void 0:n[0].toLowerCase();r&&e.setAttribute("drag-state",r)})),this.subConfigValue("sourceList",(function(t){var n=Ht(t);e.$.isEnabled=n.includes(tr.sourceTypes.LOCAL),e.$.isVisible=e.$.isEnabled||!e.querySelector("[data-default-slot]")})),this.sub("isVisible",(function(t){e.toggleAttribute("hidden",!t)})),this.sub("isClickable",(function(t){e.toggleAttribute("clickable",t)})),this.$.isClickable&&(this._onAreaClicked=function(){e.openSystemDialog()},this.addEventListener("click",this._onAreaClicked))}},{key:"_shouldIgnore",value:function(){var e=this;return!this.$.isEnabled||(!this._couldHandleFiles()||!!this.$.isFullscreen&&(0,c.Z)(this.$[Nr]).filter((function(t){return t!==e})).filter((function(e){return e.isActive()})).length>0)}},{key:"_couldHandleFiles",value:function(){var e=this.cfg.multiple,t=this.cfg.multipleMax,n=this.uploadCollection.size;return!(e&&t&&n>=t)&&!(!e&&n>0)}},{key:"destroyCallback",value:function(){var e,t;H((0,z.Z)(n.prototype),"destroyCallback",this).call(this);var r=this.$[Nr];r&&(r.delete(this),0===r.size&&m.deleteCtx(Pr)),null===(e=this._destroyDropzone)||void 0===e||e.call(this),null===(t=this._destroyContentWrapperDropzone)||void 0===t||t.call(this),this._onAreaClicked&&this.removeEventListener("click",this._onAreaClicked)}}]),n}(tr);Fr.template='\n  <slot>\n    <div data-default-slot hidden></div>\n    <div ref="content-wrapper" class="content-wrapper" set="@hidden: !isVisible">\n      <div class="icon-container" set="@hidden: !withIcon">\n        <lr-icon name="default"></lr-icon>\n        <lr-icon name="arrow-down"></lr-icon>\n      </div>\n      <span class="text">{{text}}</span>\n    </div>\n  </slot>\n',Fr.bindAttributes({"with-icon":null,clickable:null,text:null,fullscreen:null,disabled:null});var Br=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;return(0,u.Z)(this,n),e=t.call(this),(0,q.Z)((0,i.Z)(e),"couldBeCtxOwner",!0),(0,q.Z)((0,i.Z)(e),"type",void 0),(0,q.Z)((0,i.Z)(e),"_registeredTypes",{}),e.init$=(0,h.Z)((0,h.Z)({},e.init$),{},{iconName:"default","src-type":""}),e}return(0,d.Z)(n,[{key:"initTypes",value:function(){var e=this;this.registerType({type:tr.sourceTypes.LOCAL,activate:function(){return e.openSystemDialog(),!1}}),this.registerType({type:tr.sourceTypes.URL,activity:fn.activities.URL,textKey:"from-url"}),this.registerType({type:tr.sourceTypes.CAMERA,activity:fn.activities.CAMERA,activate:function(){var t="capture"in document.createElement("input");return t&&e.openSystemDialog({captureCamera:!0}),!t}}),this.registerType({type:"draw",activity:fn.activities.DRAW,icon:"edit-draw"});for(var t=0,n=Object.values(tr.extSrcList);t<n.length;t++){var r=n[t];this.registerType({type:r,activity:fn.activities.EXTERNAL,activityParams:{externalSourceType:r}})}}},{key:"initCallback",value:function(){var e=this;H((0,z.Z)(n.prototype),"initCallback",this).call(this),this.initTypes(),this.setAttribute("role","button"),this.defineAccessor("type",(function(t){t&&e.applyType(t)}))}},{key:"registerType",value:function(e){this._registeredTypes[e.type]=e}},{key:"getType",value:function(e){return this._registeredTypes[e]}},{key:"activate",value:function(){if(this.type){var e=this._registeredTypes[this.type],t=e.activity,n=e.activate,r=e.activityParams,i=void 0===r?{}:r;(n?n():!!t)&&this.set$({"*currentActivityParams":i,"*currentActivity":t})}}},{key:"applyType",value:function(e){var t=this,n=this._registeredTypes[e];if(n){var r=n.textKey,i=void 0===r?e:r,o=n.icon,a=void 0===o?e:o;this.$["src-type"]="".concat("src-type-").concat(i),this.$.iconName=a,this.onclick=function(){t.activate()}}else console.warn("Unsupported source type: "+e)}}]),n}(tr);Br.template='\n  <lr-icon set="@name: iconName"></lr-icon>\n  <div class="txt" l10n="src-type"></div>\n',Br.bindAttributes({type:null});var Dr=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,u.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"initCallback",value:function(){var e=this;H((0,z.Z)(n.prototype),"initCallback",this).call(this),this.subConfigValue("sourceList",(function(t){var n=Ht(t),r="";n.forEach((function(e){r+='<lr-source-btn type="'.concat(e,'"></lr-source-btn>')})),e.cfg.sourceListWrap?e.innerHTML=r:e.outerHTML=r}))}}]),n}(un),Vr=function(){var e=[];return{stack:e,promiseReadJpegChunks:function(t){return new Promise((function(n,r){var i=2,o=function(e,t){var n=new FileReader;n.addEventListener("load",(function(){t(new DataView(n.result))})),n.addEventListener("error",(function(e){r("Reader error: ".concat(e))})),n.readAsArrayBuffer(e)},a=function(){return o(t.slice(i,i+128),(function(e){var t,n,r;for(t=n=0,r=e.byteLength;r>=0?n<r:n>r;t=r>=0?++n:--n)if(255===e.getUint8(t)){i+=t;break}s()}))},s=function(){var s=i;return o(t.slice(i,i+=4),(function(l){if(4===l.byteLength&&255===l.getUint8(0)){var c=l.getUint8(1);if(218!==c){var u=l.getUint16(2)-2;return o(t.slice(i,i+=u),(function(t){t.byteLength===u?(e.push({startPos:s,length:u,marker:c,view:t}),a()):r("Corrupted")}))}n(!0)}else r("Corrupted")}))};FileReader&&DataView||r("Not Support"),o(t.slice(0,2),(function(e){65496!==e.getUint16(0)&&r("Not jpeg"),a()}))}))}}},zr=function(){var e=(0,r.Z)(f.mark((function e(t){var n,r,i,o;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],r=Vr(),i=r.promiseReadJpegChunks,o=r.stack,e.next=4,i(t);case 4:return o.forEach((function(e){var t=e.marker,r=e.view;226===t&&1229144927===r.getUint32(0)&&1347571526===r.getUint32(4)&&1229735168===r.getUint32(8)&&n.push(r)})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),jr=function(){var e=(0,r.Z)(f.mark((function e(t,n,r){var i,o,s,l,c,u,d,h,v,p,m,g;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[],o=[],s=Vr(),l=s.promiseReadJpegChunks,c=s.stack,e.next=5,l(t);case 5:c.forEach((function(e){if(e.marker===n)return i.push(e.startPos),o.push(e.length)})),u=[t.slice(0,2)],d=(0,a.Z)(r);try{for(d.s();!(h=d.n()).done;)v=h.value,(p=new DataView(new ArrayBuffer(4))).setUint16(0,65280+n),p.setUint16(2,v.byteLength+2),u.push(p.buffer),u.push(v)}catch(Yo){d.e(Yo)}finally{d.f()}for(m=2,g=0;g<i.length;g++)i[g]>m&&u.push(t.slice(m,i[g])),m=i[g]+o[g]+4;return u.push(t.slice(m,t.size)),e.abrupt("return",new Blob(u,{type:t.type}));case 13:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Hr=function(e,t){return jr(e,226,t.map((function(e){return e.buffer})))},qr=function(){var e=(0,r.Z)(f.mark((function e(t){return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Hr(t,[]);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),new Error("Failed to strip ICC profile: ".concat(e.t0));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),Kr=function(e,t,n){return new Promise((function(r,i){e.toBlob((function(e){e?r(e):i("Failed to convert canvas to blob")}),t,n),e.width=e.height=1}))},Gr=function(){var e=document.createElement("canvas"),t=e.getContext("2d");return{canvas:e,ctx:t}},Wr=function(e){var t=Gr(),n=t.ctx,r=t.canvas;r.width=r.height=50,n.drawImage(e,0,0,50,50);var i=n.getImageData(0,0,50,50).data;r.width=r.height=1;for(var o=3;o<i.length;o+=4)if(i[o]<254)return!0;return!1},Xr=function(){var e=(0,r.Z)(f.mark((function e(t){var n,r,i,o;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,r=Vr(),i=r.promiseReadJpegChunks,o=r.stack,e.next=4,i(t);case 4:return o.forEach((function(e){var t=e.marker,r=e.view;!n&&225===t&&r.byteLength>=14&&1165519206===r.getUint32(0)&&0===r.getUint16(4)&&(n=r)})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Yr=void 0,Jr=function(e,t){!function(e,t){var n,r,i,o;if(e&&!(e.byteLength<14)&&1165519206===e.getUint32(0)&&0===e.getUint16(4)){if(18761===e.getUint16(6))r=!0;else{if(19789!==e.getUint16(6))return;r=!1}if(42===e.getUint16(8,r))for(i=8+e.getUint32(10,r),n=0,o=e.getUint16(i-2,r);o>=0?n<o:n>o;o>=0?++n:--n){if(e.byteLength<i+10)return;274===e.getUint16(i,r)&&t(i+8,r),i+=12}}}(e,(function(n,r){return e.setUint16(n,t,r)}))},Qr=function(){var e=(0,r.Z)(f.mark((function e(t,n,r){return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r&&Jr(n,1),e.abrupt("return",jr(t,225,[n.buffer]));case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),ei=function(e){return function(e,t){return new Promise((function(n,r){t&&(e.src=t),e.complete?n(e):(e.addEventListener("load",(function(){n(e)})),e.addEventListener("error",(function(){r(new Error("Failed to load image. Probably not an image."))})))}))}(new Image,e)},ti=[1,3],ni=[192,193,194,195,197,198,199,201,202,203,205,206,207],ri={squareSide:[Math.floor(Math.sqrt(5e6)),4096,8192,11180,10836,11402,14188,16384],dimension:[4096,8192,16384,32767,65535]},ii=function(){var e=(0,r.Z)(f.mark((function e(t){var n,r,i,o;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!1,r=Vr(),i=r.promiseReadJpegChunks,o=r.stack,e.next=4,i(t).then((function(){return o.forEach((function(e){var t=e.marker,r=e.view;if(!n&&ni.indexOf(t)>=0){var i=r.getUint8(5);ti.indexOf(i)<0&&(n=!0)}})),n})).catch((function(){return n}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oi=function(e,t){var n={};return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=t(i,n);return a in n?n[a]:n[a]=e.apply(void 0,i)}},ai=function(e,t){for(var n=(0,ae.Z)(e,1)[0],r=Object.keys(t).map((function(e){return parseInt(e,10)})).sort((function(e,t){return e-t})),i=0;i<r.length;i++){var o=r[i],a=!!t[o];if(o>n&&a)return o;if(o<n&&!a)return o}return n},si=55,li=110,ci=165,ui=255,di="rgba(".concat(si,", ").concat(li,", ").concat(ci,", ").concat(ui/255,")"),hi=function(e,t){try{var n=[e-1,t-1,1,1],r=Gr(),i=r.canvas,o=r.ctx;i.width=1,i.height=1;var a=Gr(),s=a.canvas,l=a.ctx;s.width=e,s.height=t,l&&(l.fillStyle=di,l.fillRect.apply(l,n),o.drawImage(s,e-1,t-1,1,1,0,0,1,1));var c=o&&o.getImageData(0,0,1,1).data,u=!1;return c&&(u=c[0]===si&&c[1]===li&&c[2]===ci&&c[3]===ui),s.width=s.height=1,u}catch(d){return console.error("Failed to test for max canvas size of ".concat(e,"x").concat(t,".")),!1}};function fi(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return new Promise((function(t){setTimeout((function(){var r=e.apply(void 0,n);t(r)}),0)}))}}var vi=fi(oi(hi,ai)),pi=fi(oi(hi,ai)),mi=function(){var e=(0,r.Z)(f.mark((function e(t,n){var r,i,o,a,s,l;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ri.squareSide.find((function(e){return e*e>=t*n})),i=ri.dimension.find((function(e){return e>=t&&e>=n})),r&&i){e.next=4;break}throw new Error("Not supported");case 4:return e.next=6,Promise.all([vi(r,r),pi(i,1)]);case 6:if(o=e.sent,a=(0,ae.Z)(o,2),s=a[0],l=a[1],!s||!l){e.next=14;break}return e.abrupt("return",!0);case 14:throw new Error("Not supported");case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),gi=function(){var e=(0,r.Z)(f.mark((function e(t,n,r){var i,o,a;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=Gr(),o=i.ctx,(a=i.canvas).width=n,a.height=r,o.imageSmoothingQuality="high",o.drawImage(t,0,0,n,r),t instanceof HTMLImageElement&&(t.src="//:0"),t instanceof HTMLCanvasElement&&(t.width=t.height=1),e.abrupt("return",a);case 11:throw e.prev=11,e.t0=e.catch(0),new Error("Canvas resize error",{cause:e.t0});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n,r){return e.apply(this,arguments)}}(),yi=function(e){var t=e.img,n=function(e){var t=e.sourceW,n=e.targetW,r=e.targetH,i=e.step,o=[],a=n,s=r;do{o.push([a,s]),a=Math.round(a/i),s=Math.round(s/i)}while(a<t*i);return o.reverse()}({sourceW:e.sourceW,targetW:e.targetW,targetH:e.targetH,step:e.step});return n.reduce((function(e,t){var n=(0,ae.Z)(t,2),r=n[0],i=n[1];return e.then((function(e){return mi(r,i).then((function(){return gi(e,r,i)})).catch((function(){return e}))}))}),Promise.resolve(t))},bi=navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform),_i=.71,wi=function(e,t){if(e.width*_i*e.height*_i<t.size)throw new Error("Not required");var n=e.width,r=e.height,i=n/r,o=Math.floor(Math.sqrt(t.size*i)),a=Math.floor(t.size/Math.sqrt(t.size*i));return mi(o,a).then((function(){return"imageSmoothingQuality"in Gr().ctx&&!(/iPad|iPhone|iPod/.test(navigator.platform)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform))&&!bi?function(e){var t=e.img,n=e.targetW,r=e.targetH;return gi(t,n,r)}({img:e,targetW:o,targetH:a}):yi({img:e,sourceW:n,targetW:o,targetH:a,step:_i})})).catch((function(){return Promise.reject("Not supported")}))},ki=function(){var e=(0,r.Z)(f.mark((function e(t,n){var r,i,o,a,s,l,c,u,d,h,v,p,m,g,y,b;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ii(t);case 3:if(!e.sent){e.next=6;break}throw new Error("Should skipped");case 6:return e.next=8,Promise.allSettled([Xr(t),new Promise((function(e){if(void 0!==Yr)e(Yr);else{var t=new Image;t.addEventListener("load",(function(){Yr=t.naturalWidth<t.naturalHeight,t.src="//:0",e(Yr)})),t.src="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k="}})),zr(t)]);case 8:return r=e.sent,i=r.some((function(e){return"rejected"===e.status})),o=!i,a=(0,ae.Z)(r,3),s=a[0],l=a[1],c=a[2],e.next=14,qr(t).catch((function(){return t}));case 14:return u=e.sent,e.next=17,ei(URL.createObjectURL(u));case 17:return d=e.sent,URL.revokeObjectURL(d.src),e.next=21,wi(d,n);case 21:return h=e.sent,v="image/jpeg",p=(null===n||void 0===n?void 0:n.quality)||.8,!o&&Wr(h)&&(v="image/png",p=void 0),e.next=27,Kr(h,v,p);case 27:if(m=e.sent,!o||"fulfilled"!==s.status||!s.value){e.next=34;break}return g=s.value,y="fulfilled"===l.status&&l.value,e.next=33,Qr(m,g,y);case 33:m=e.sent;case 34:if(!(o&&"fulfilled"===c.status&&c.value.length>0)){e.next=38;break}return e.next=37,Hr(m,c.value);case 37:m=e.sent;case 38:return e.abrupt("return",m);case 41:throw e.prev=41,e.t0=e.catch(0),e.t0 instanceof Error&&(b=e.t0.message),"string"===typeof e.t0&&(b=e.t0),new Error("Failed to shrink image. ".concat(b?'Message: "'.concat(b,'".'):""),{cause:e.t0});case 46:case"end":return e.stop()}}),e,null,[[0,41]])})));return function(t,n){return e.apply(this,arguments)}}();function xi(e){var t=new Blob([e],{type:"image/svg+xml"});return URL.createObjectURL(t)}function Ci(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"hsl(209, 21%, 65%)",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32;return xi('\n  <svg width="'.concat(t,'" height="').concat(n,'" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path fill="currentColor" fill-rule="evenodd" fill="').concat(e,'" d="M9.68848 8.70068C9.68848 8.42454 9.91233 8.20068 10.1885 8.20068H15.0885C15.2211 8.20068 15.3483 8.25336 15.442 8.34713L20.342 13.2471C20.4358 13.3409 20.4885 13.4681 20.4885 13.6007V21.3007C20.4885 21.5768 20.2646 21.8007 19.9885 21.8007H10.1885C9.91233 21.8007 9.68848 21.5768 9.68848 21.3007V8.70068ZM10.6885 9.20068V20.8007H19.4885V14.1007L15.0885 14.1007C14.8123 14.1007 14.5885 13.8768 14.5885 13.6007L14.5885 9.20068H10.6885ZM15.5885 9.90779L18.7814 13.1007L15.5885 13.1007L15.5885 9.90779Z"/>\n  </svg>\n  '))}function Ai(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40;if("image/svg+xml"===e.type)return URL.createObjectURL(e);var n=document.createElement("canvas"),r=n.getContext("2d"),i=new Image,o=new Promise((function(e,o){i.onload=function(){var a=i.height/i.width;a>1?(n.width=t,n.height=t*a):(n.height=t,n.width=t/a),r.fillStyle="rgb(240, 240, 240)",r.fillRect(0,0,n.width,n.height),r.drawImage(i,0,0,n.width,n.height),n.toBlob((function(t){if(t){var n=URL.createObjectURL(t);e(n)}else o()}))},i.onerror=function(e){o(e)}}));return i.src=URL.createObjectURL(e),o}var Zi=/^([0-9]+)x([0-9]+)(?:\s+(\d{1,2}|100)%)?$/i,Ei=Object.freeze({FINISHED:Symbol(0),FAILED:Symbol(1),UPLOADING:Symbol(2),IDLE:Symbol(3)}),Ti=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;return(0,u.Z)(this,n),e=t.call(this),(0,q.Z)((0,i.Z)(e),"couldBeCtxOwner",!0),(0,q.Z)((0,i.Z)(e),"pauseRender",!0),(0,q.Z)((0,i.Z)(e),"_entrySubs",new Set),(0,q.Z)((0,i.Z)(e),"_entry",null),(0,q.Z)((0,i.Z)(e),"_isIntersecting",!1),(0,q.Z)((0,i.Z)(e),"_debouncedGenerateThumb",W(e._generateThumbnail.bind((0,i.Z)(e)),100)),(0,q.Z)((0,i.Z)(e),"_debouncedCalculateState",W(e._calculateState.bind((0,i.Z)(e)),100)),(0,q.Z)((0,i.Z)(e),"_renderedOnce",!1),e.init$=(0,h.Z)((0,h.Z)({},e.init$),{},{uid:"",itemName:"",errorText:"",thumbUrl:"",progressValue:0,progressVisible:!1,badgeIcon:"",isFinished:!1,isFailed:!1,isUploading:!1,isFocused:!1,isEditable:!1,state:Ei.IDLE,onEdit:function(){e.set$({"*focusedEntry":e._entry}),e.hasBlockInCtx((function(e){return e.activityType===fn.activities.DETAILS}))?e.$["*currentActivity"]=fn.activities.DETAILS:e.$["*currentActivity"]=fn.activities.CLOUD_IMG_EDIT},onRemove:function(){e.uploadCollection.remove(e.$.uid)},onUpload:function(){e.upload()}}),e}return(0,d.Z)(n,[{key:"_reset",value:function(){var e,t=(0,a.Z)(this._entrySubs);try{for(t.s();!(e=t.n()).done;){e.value.remove()}}catch(Yo){t.e(Yo)}finally{t.f()}this._debouncedGenerateThumb.cancel(),this._debouncedCalculateState.cancel(),this._entrySubs=new Set,this._entry=null}},{key:"_observerCallback",value:function(e){var t=(0,ae.Z)(e,1)[0];this._isIntersecting=t.isIntersecting,t.isIntersecting&&!this._renderedOnce&&(this.render(),this._renderedOnce=!0),0===t.intersectionRatio?this._debouncedGenerateThumb.cancel():this._debouncedGenerateThumb()}},{key:"_calculateState",value:function(){if(this._entry){var e=this._entry,t=Ei.IDLE;e.getValue("errors").length>0?t=Ei.FAILED:e.getValue("isUploading")?t=Ei.UPLOADING:e.getValue("fileInfo")&&(t=Ei.FINISHED),this.$.state=t}}},{key:"_generateThumbnail",value:function(){var e=(0,r.Z)(f.mark((function e(){var t,n,r,i,o,a,s,l;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._entry){e.next=2;break}return e.abrupt("return");case 2:if(!(n=this._entry).getValue("fileInfo")||!n.getValue("isImage")){e.next=9;break}return r=this.cfg.thumbSize,i=this.proxyUrl(zt(jt(this.cfg.cdnCname,this._entry.getValue("uuid")),Rt(n.getValue("cdnUrlModifiers"),"scale_crop/".concat(r,"x").concat(r,"/center")))),(o=n.getValue("thumbUrl"))!==i&&(n.setValue("thumbUrl",i),(null===o||void 0===o?void 0:o.startsWith("blob:"))&&URL.revokeObjectURL(o)),e.abrupt("return");case 9:if(!n.getValue("thumbUrl")){e.next=11;break}return e.abrupt("return");case 11:if(null===(t=n.getValue("file"))||void 0===t||!t.type.includes("image")){e.next=25;break}return e.prev=12,e.next=15,Ai(n.getValue("file"),this.cfg.thumbSize);case 15:a=e.sent,n.setValue("thumbUrl",a),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(12),s=window.getComputedStyle(this).getPropertyValue("--clr-generic-file-icon"),n.setValue("thumbUrl",Ci(s));case 23:e.next=27;break;case 25:l=window.getComputedStyle(this).getPropertyValue("--clr-generic-file-icon"),n.setValue("thumbUrl",Ci(l));case 27:case"end":return e.stop()}}),e,this,[[12,19]])})));return function(){return e.apply(this,arguments)}}()},{key:"_subEntry",value:function(e,t){var n=this,r=this._entry.subscribe(e,(function(e){n.isConnected&&t(e)}));this._entrySubs.add(r)}},{key:"_handleEntryId",value:function(e){var t,n=this;this._reset();var r=null===(t=this.uploadCollection)||void 0===t?void 0:t.read(e);this._entry=r,r&&(this._subEntry("uploadProgress",(function(e){n.$.progressValue=e})),this._subEntry("fileName",(function(e){n.$.itemName=e||r.getValue("externalUrl")||n.l10n("file-no-name"),n._debouncedCalculateState()})),this._subEntry("externalUrl",(function(e){n.$.itemName=r.getValue("fileName")||e||n.l10n("file-no-name")})),this._subEntry("fileInfo",(function(e){n._debouncedCalculateState(),e&&n._isIntersecting&&n._debouncedGenerateThumb()})),this._subEntry("cdnUrlModifiers",(function(){n._isIntersecting&&n._debouncedGenerateThumb()})),this._subEntry("thumbUrl",(function(e){n.$.thumbUrl=e?"url(".concat(e,")"):""})),this._subEntry("errors",(function(){return n._debouncedCalculateState()})),this._subEntry("isUploading",(function(){return n._debouncedCalculateState()})),this._subEntry("fileSize",(function(){return n._debouncedCalculateState()})),this._subEntry("mimeType",(function(){return n._debouncedCalculateState()})),this._subEntry("isImage",(function(){return n._debouncedCalculateState()})),this._isIntersecting&&this._debouncedGenerateThumb())}},{key:"initCallback",value:function(){var e=this;H((0,z.Z)(n.prototype),"initCallback",this).call(this),this.sub("uid",(function(t){e._handleEntryId(t)})),this.sub("state",(function(t){e._handleState(t)})),this.subConfigValue("useCloudImageEditor",(function(){return e._debouncedCalculateState()})),this.onclick=function(){n.activeInstances.forEach((function(t){t===e?t.setAttribute("focused",""):t.removeAttribute("focused")}))},this.sub("*uploadTrigger",(function(t){t.has(e._entry.uid)&&setTimeout((function(){return e.isConnected&&e.upload()}))})),n.activeInstances.add(this)}},{key:"_handleState",value:function(e){var t,n,r,i;e===Ei.FAILED?this.$.badgeIcon="badge-error":e===Ei.FINISHED&&(this.$.badgeIcon="badge-success"),e===Ei.UPLOADING?this.$.isFocused=!1:this.$.progressValue=0,this.set$({isFailed:e===Ei.FAILED,isUploading:e===Ei.UPLOADING,isFinished:e===Ei.FINISHED,progressVisible:e===Ei.UPLOADING,isEditable:this.cfg.useCloudImageEditor&&(null===(t=this._entry)||void 0===t?void 0:t.getValue("isImage"))&&(null===(n=this._entry)||void 0===n?void 0:n.getValue("cdnUrl")),errorText:null===(r=this._entry.getValue("errors"))||void 0===r||null===(i=r[0])||void 0===i?void 0:i.message})}},{key:"destroyCallback",value:function(){H((0,z.Z)(n.prototype),"destroyCallback",this).call(this),n.activeInstances.delete(this),this._reset()}},{key:"connectedCallback",value:function(){H((0,z.Z)(n.prototype),"connectedCallback",this).call(this),this._observer=new window.IntersectionObserver(this._observerCallback.bind(this),{root:this.parentElement,rootMargin:"50% 0px 50% 0px",threshold:[0,1]}),this._observer.observe(this)}},{key:"disconnectedCallback",value:function(){var e;H((0,z.Z)(n.prototype),"disconnectedCallback",this).call(this),this._debouncedGenerateThumb.cancel(),null===(e=this._observer)||void 0===e||e.disconnect()}},{key:"_settingsOfShrink",value:function(){return function(e){var t=Zi.exec(null===e||void 0===e?void 0:e.toLocaleLowerCase())||[];if(!t.length)return!1;var n=t[1]*t[2];return n>268435456?(console.warn("Shrinked size can not be larger than ".concat(Math.floor(268.435456),"MP. ")+"You have set ".concat(t[1],"x").concat(t[2]," (")+"".concat(Math.ceil(n/1e3/100)/10,"MP).")),!1):{quality:t[3]?t[3]/100:void 0,size:n}}(this.cfg.imageShrink)}},{key:"_processShrink",value:function(e){return ki(e,this._settingsOfShrink())}},{key:"upload",value:function(){var e=(0,r.Z)(f.mark((function e(){var t,n,i,o,a,s,l,c,u,d,v=this;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._entry,this.uploadCollection.read(t.uid)){e.next=3;break}return e.abrupt("return");case 3:if(!(t.getValue("fileInfo")||t.getValue("isUploading")||t.getValue("errors").length>0)){e.next=5;break}return e.abrupt("return");case 5:if(!((n=this.cfg.multiple?this.cfg.multipleMax:1)&&this.uploadCollection.size>n)){e.next=8;break}return e.abrupt("return");case 8:return this._debouncedCalculateState(),t.setValue("isUploading",!0),t.setValue("errors",[]),e.prev=11,c=new AbortController,t.setValue("abortController",c),u=function(){var e=(0,r.Z)(f.mark((function e(){var n,r,i,o;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.getValue("file"))||!v.cfg.imageShrink){e.next=5;break}return e.next=4,v._processShrink(n).catch((function(){return n}));case 4:n=e.sent;case 5:return r=n||t.getValue("externalUrl")||t.getValue("uuid"),i=v.getUploadClientOptions(),e.t0=h.Z,e.t1=(0,h.Z)({},i),e.t2={},e.t3=t.getValue("fileName"),e.t4=t.getValue("source"),e.t5=function(e){if(e.isComputable){var n=100*e.value;t.setValue("uploadProgress",n)}},e.t6=c.signal,e.next=16,v.getMetadataFor(t.uid);case 16:return e.t7=e.sent,e.t8={fileName:e.t3,source:e.t4,onProgress:e.t5,signal:e.t6,metadata:e.t7},o=(0,e.t0)(e.t1,e.t2,e.t8),v.debugPrint("upload options",r,o),e.abrupt("return",gt(r,o));case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=17,this.$["*uploadQueue"].add(u);case 17:d=e.sent,t.setMultipleValues({fileInfo:d,isUploading:!1,fileName:d.originalFilename,fileSize:d.size,isImage:d.isImage,mimeType:null!==(i=null===(o=d.contentInfo)||void 0===o||null===(a=o.mime)||void 0===a?void 0:a.mime)&&void 0!==i?i:d.mimeType,uuid:d.uuid,cdnUrl:null!==(s=t.getValue("cdnUrl"))&&void 0!==s?s:d.cdnUrl,cdnUrlModifiers:null!==(l=t.getValue("cdnUrlModifiers"))&&void 0!==l?l:"",uploadProgress:100}),t===this._entry&&this._debouncedCalculateState(),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(11),e.t0 instanceof ye&&e.t0.isCancel?t.setMultipleValues({isUploading:!1,uploadProgress:0}):t.setMultipleValues({isUploading:!1,uploadProgress:0,uploadError:e.t0}),t===this._entry&&this._debouncedCalculateState();case 26:case"end":return e.stop()}}),e,this,[[11,22]])})));return function(){return e.apply(this,arguments)}}()}]),n}(tr);Ti.template='\n  <div class="inner" set="@finished: isFinished; @uploading: isUploading; @failed: isFailed; @focused: isFocused">\n    <div class="thumb" set="style.backgroundImage: thumbUrl">\n      <div class="badge">\n        <lr-icon set="@name: badgeIcon"></lr-icon>\n      </div>\n    </div>\n    <div class="file-name-wrapper">\n      <span class="file-name" set="@title: itemName">{{itemName}}</span>\n      <span class="file-error" set="@hidden: !errorText">{{errorText}}</span>\n    </div>\n    <div class="file-actions">\n      <button type="button" class="edit-btn mini-btn" set="onclick: onEdit; @hidden: !isEditable">\n        <lr-icon name="edit-file"></lr-icon>\n      </button>\n      <button type="button" class="remove-btn mini-btn" set="onclick: onRemove;">\n        <lr-icon name="remove-file"></lr-icon>\n      </button>\n      <button type="button" class="upload-btn mini-btn" set="onclick: onUpload;">\n        <lr-icon name="upload"></lr-icon>\n      </button>\n    </div>\n    <lr-progress-bar class="progress-bar" set="value: progressValue; visible: progressVisible;"> </lr-progress-bar>\n  </div>\n',Ti.activeInstances=new Set;var Si=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;return(0,u.Z)(this,n),e=t.call(this),(0,q.Z)((0,i.Z)(e),"_handleBackdropClick",(function(){e._closeDialog()})),(0,q.Z)((0,i.Z)(e),"_closeDialog",(function(){e.setOrAddState("*modalActive",!1)})),(0,q.Z)((0,i.Z)(e),"_handleDialogClose",(function(){e._closeDialog()})),(0,q.Z)((0,i.Z)(e),"_handleDialogMouseDown",(function(t){e._mouseDownTarget=t.target})),(0,q.Z)((0,i.Z)(e),"_handleDialogMouseUp",(function(t){t.target===e.ref.dialog&&t.target===e._mouseDownTarget&&e._closeDialog()})),e.init$=(0,h.Z)((0,h.Z)({},e.init$),{},{"*modalActive":!1,isOpen:!1,closeClicked:e._handleDialogClose}),e}return(0,d.Z)(n,[{key:"show",value:function(){this.ref.dialog.showModal?this.ref.dialog.showModal():this.ref.dialog.setAttribute("open","")}},{key:"hide",value:function(){this.ref.dialog.close?this.ref.dialog.close():this.ref.dialog.removeAttribute("open")}},{key:"initCallback",value:function(){var e=this;if(H((0,z.Z)(n.prototype),"initCallback",this).call(this),"function"===typeof HTMLDialogElement)this.ref.dialog.addEventListener("close",this._handleDialogClose),this.ref.dialog.addEventListener("mousedown",this._handleDialogMouseDown),this.ref.dialog.addEventListener("mouseup",this._handleDialogMouseUp);else{this.setAttribute("dialog-fallback","");var t=document.createElement("div");t.className="backdrop",this.appendChild(t),t.addEventListener("click",this._handleBackdropClick)}this.sub("*modalActive",(function(t){e.$.isOpen!==t&&(e.$.isOpen=t),t&&e.cfg.modalScrollLock?document.body.style.overflow="hidden":document.body.style.overflow=""})),this.subConfigValue("modalBackdropStrokes",(function(t){t?e.setAttribute("strokes",""):e.removeAttribute("strokes")})),this.sub("isOpen",(function(t){t?e.show():e.hide()}))}},{key:"destroyCallback",value:function(){H((0,z.Z)(n.prototype),"destroyCallback",this).call(this),document.body.style.overflow="",this._mouseDownTarget=void 0,this.ref.dialog.removeEventListener("close",this._handleDialogClose),this.ref.dialog.removeEventListener("mousedown",this._handleDialogMouseDown),this.ref.dialog.removeEventListener("mouseup",this._handleDialogMouseUp)}}]),n}(un);(0,q.Z)(Si,"StateConsumerScope","modal"),Si.template='\n  <dialog ref="dialog">\n    <slot></slot>\n  </dialog>\n';var Mi=function(e,t){var n,r,i,o=function(){for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];n?(clearTimeout(r),r=setTimeout((function(){Date.now()-i>=t&&(e.apply(void 0,a),i=Date.now())}),Math.max(t-(Date.now()-i),0))):(e.apply(void 0,a),i=Date.now(),n=!0)};return Object.defineProperty(o,"cancel",{configurable:!1,writable:!1,enumerable:!1,value:function(){clearTimeout(r)}}),o},Ii=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;return(0,u.Z)(this,n),e=t.call(this),(0,q.Z)((0,i.Z)(e),"couldBeCtxOwner",!0),(0,q.Z)((0,i.Z)(e),"historyTracked",!0),(0,q.Z)((0,i.Z)(e),"activityType",fn.activities.UPLOAD_LIST),(0,q.Z)((0,i.Z)(e),"_throttledHandleCollectionUpdate",Mi((function(){e.isConnected&&(e._updateUploadsState(),e.couldOpenActivity||e.$["*currentActivity"]!==e.activityType||e.historyBack())}),300)),e.init$=(0,h.Z)((0,h.Z)({},e.init$),{},{doneBtnVisible:!1,doneBtnEnabled:!1,uploadBtnVisible:!1,addMoreBtnVisible:!1,addMoreBtnEnabled:!1,headerText:"",commonErrorMessage:"",hasFiles:!1,onAdd:function(){e.initFlow(!0)},onUpload:function(){e.emit(K.UPLOAD_CLICK),e.uploadAll(),e._throttledHandleCollectionUpdate()},onDone:function(){e.emit(K.DONE_CLICK,e.getOutputCollectionState()),e.doneFlow()},onCancel:function(){e.uploadCollection.clearAll()}}),e}return(0,d.Z)(n,[{key:"_updateUploadsState",value:function(){var e=this,t=this.getOutputCollectionState(),n={total:t.totalCount,succeed:t.successCount,uploading:t.uploadingCount,failed:t.failedCount},r=!t.errors.some((function(e){return"TOO_MANY_FILES"===e.type||"TOO_FEW_FILES"===e.type})),i=t.errors.some((function(e){return"TOO_MANY_FILES"===e.type})),o=t.totalCount===(this.cfg.multiple?this.cfg.multipleMax:1),a=!1,s=!1,l=!1;n.total-n.succeed-n.uploading-n.failed>0&&r?a=!0:(s=!0,l=n.total===n.succeed&&r&&0===n.failed),this.set$({doneBtnVisible:s,doneBtnEnabled:l,uploadBtnVisible:a,addMoreBtnEnabled:0===n.total||!i&&!o,addMoreBtnVisible:!o||this.cfg.multiple}),this.bindL10n("headerText",(function(){return e._getHeaderText(n)}))}},{key:"_getHeaderText",value:function(e){var t=this,n=function(n){var r=e[n];return t.l10n("header-".concat(n),{count:r})};return e.uploading>0?n("uploading"):e.failed>0?n("failed"):e.succeed>0?n("succeed"):n("total")}},{key:"couldOpenActivity",get:function(){return this.cfg.showEmptyList||this.uploadCollection.size>0}},{key:"initCallback",value:function(){var e=this;H((0,z.Z)(n.prototype),"initCallback",this).call(this),this.registerActivity(this.activityType),this.subConfigValue("multiple",this._throttledHandleCollectionUpdate),this.subConfigValue("multipleMin",this._throttledHandleCollectionUpdate),this.subConfigValue("multipleMax",this._throttledHandleCollectionUpdate),this.sub("*currentActivity",(function(t){e.couldOpenActivity||t!==e.activityType||(e.$["*currentActivity"]=e.initActivity)})),this.uploadCollection.observeProperties(this._throttledHandleCollectionUpdate),this.sub("*uploadList",(function(t){e._throttledHandleCollectionUpdate(),e.set$({hasFiles:t.length>0}),e.cfg.confirmUpload||e.uploadAll()}),!1),this.sub("*collectionErrors",(function(t){var n=t.filter((function(e){return"SOME_FILES_HAS_ERRORS"!==e.type}))[0];n?e.set$({commonErrorMessage:n.message}):e.set$({commonErrorMessage:null})}))}},{key:"destroyCallback",value:function(){H((0,z.Z)(n.prototype),"destroyCallback",this).call(this),this.uploadCollection.unobserveProperties(this._throttledHandleCollectionUpdate)}}]),n}(tr);Ii.template='\n  <lr-activity-header>\n    <span class="header-text">{{headerText}}</span>\n    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">\n      <lr-icon name="close"></lr-icon>\n    </button>\n  </lr-activity-header>\n\n  <div class="no-files" set="@hidden: hasFiles">\n    <slot name="empty"><span l10n="no-files"></span></slot>\n  </div>\n\n  <div class="files" repeat="*uploadList" repeat-item-tag="lr-file-item"></div>\n\n  <div class="common-error" set="@hidden: !commonErrorMessage; textContent: commonErrorMessage;"></div>\n\n  <div class="toolbar">\n    <button type="button" class="cancel-btn secondary-btn" set="onclick: onCancel;" l10n="clear"></button>\n    <div class="toolbar-spacer"></div>\n    <button\n      type="button"\n      class="add-more-btn secondary-btn"\n      set="onclick: onAdd; @disabled: !addMoreBtnEnabled; @hidden: !addMoreBtnVisible"\n    >\n      <lr-icon name="add"></lr-icon><span l10n="add-more"></span>\n    </button>\n    <button\n      type="button"\n      class="upload-btn primary-btn"\n      set="@hidden: !uploadBtnVisible; onclick: onUpload;"\n      l10n="upload"\n    ></button>\n    <button\n      type="button"\n      class="done-btn primary-btn"\n      set="@hidden: !doneBtnVisible; onclick: onDone;  @disabled: !doneBtnEnabled"\n      l10n="done"\n    ></button>\n  </div>\n\n  <lr-drop-area ghost></lr-drop-area>\n';var Li=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;(0,u.Z)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,q.Z)((0,i.Z)(e),"couldBeCtxOwner",!0),(0,q.Z)((0,i.Z)(e),"activityType",fn.activities.URL),(0,q.Z)((0,i.Z)(e),"init$",(0,h.Z)((0,h.Z)({},e.init$),{},{importDisabled:!0,onUpload:function(t){t.preventDefault();var n=e.ref.input.value;e.addFileFromUrl(n,{source:Sn.URL_TAB}),e.$["*currentActivity"]=fn.activities.UPLOAD_LIST},onCancel:function(){e.historyBack()},onInput:function(t){var n=t.target.value;e.set$({importDisabled:!n})}})),e}return(0,d.Z)(n,[{key:"initCallback",value:function(){var e=this;H((0,z.Z)(n.prototype),"initCallback",this).call(this),this.registerActivity(this.activityType,{onActivate:function(){e.ref.input.value="",e.ref.input.focus()}})}}]),n}(tr);Li.template='\n  <lr-activity-header>\n    <button type="button" class="mini-btn" set="onclick: *historyBack">\n      <lr-icon name="back"></lr-icon>\n    </button>\n    <div>\n      <lr-icon name="url"></lr-icon>\n      <span l10n="caption-from-url"></span>\n    </div>\n    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">\n      <lr-icon name="close"></lr-icon>\n    </button>\n  </lr-activity-header>\n  <form class="content">\n    <input placeholder="https://" class="url-input" type="text" ref="input" set="oninput: onInput" />\n    <button\n      type="submit"\n      class="url-upload-btn primary-btn"\n      set="onclick: onUpload; @disabled: importDisabled"\n      l10n="upload-url"\n    ></button>\n  </form>\n';var $i=function(){return"undefined"!==typeof navigator.permissions},Oi=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;(0,u.Z)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,q.Z)((0,i.Z)(e),"couldBeCtxOwner",!0),(0,q.Z)((0,i.Z)(e),"activityType",fn.activities.CAMERA),(0,q.Z)((0,i.Z)(e),"_unsubPermissions",null),(0,q.Z)((0,i.Z)(e),"init$",(0,h.Z)((0,h.Z)({},e.init$),{},{video:null,videoTransformCss:null,shotBtnDisabled:!0,videoHidden:!0,messageHidden:!0,requestBtnHidden:$i(),cameraSelectOptions:null,cameraSelectHidden:!0,l10nMessage:"",onCameraSelectChange:function(t){e._selectedCameraId=t.target.value,e._capture()},onCancel:function(){e.historyBack()},onShot:function(){e._shot()},onRequestPermissions:function(){e._capture()}})),(0,q.Z)((0,i.Z)(e),"_onActivate",(function(){$i()&&e._subscribePermissions(),e._capture()})),(0,q.Z)((0,i.Z)(e),"_onDeactivate",(function(){e._unsubPermissions&&e._unsubPermissions(),e._stopCapture()})),(0,q.Z)((0,i.Z)(e),"_handlePermissionsChange",(function(){e._capture()})),(0,q.Z)((0,i.Z)(e),"_setPermissionsState",W((function(t){e.classList.toggle("initialized","granted"===t),"granted"===t?e.set$({videoHidden:!1,shotBtnDisabled:!1,messageHidden:!0}):"prompt"===t?(e.$.l10nMessage="camera-permissions-prompt",e.set$({videoHidden:!0,shotBtnDisabled:!0,messageHidden:!1}),e._stopCapture()):(e.$.l10nMessage="camera-permissions-denied",e.set$({videoHidden:!0,shotBtnDisabled:!0,messageHidden:!1}),e._stopCapture())}),300)),e}return(0,d.Z)(n,[{key:"_subscribePermissions",value:function(){var e=(0,r.Z)(f.mark((function e(){return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.permissions.query({name:"camera"});case 3:e.sent.addEventListener("change",this._handlePermissionsChange),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Failed to use permissions API. Fallback to manual request mode.",e.t0),this._capture();case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"_capture",value:function(){var e=(0,r.Z)(f.mark((function e(){var t,n,r=this;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={video:{width:{ideal:1920},height:{ideal:1080},frameRate:{ideal:30}},audio:!1},this._selectedCameraId&&(t.video.deviceId={exact:this._selectedCameraId}),this._canvas=document.createElement("canvas"),this._ctx=this._canvas.getContext("2d"),e.prev=4,this._setPermissionsState("prompt"),e.next=8,navigator.mediaDevices.getUserMedia(t);case 8:(n=e.sent).addEventListener("inactive",(function(){r._setPermissionsState("denied")})),this.$.video=n,this._capturing=!0,this._setPermissionsState("granted"),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(4),this._setPermissionsState("denied"),console.error("Failed to capture camera",e.t0);case 19:case"end":return e.stop()}}),e,this,[[4,15]])})));return function(){return e.apply(this,arguments)}}()},{key:"_stopCapture",value:function(){var e;this._capturing&&(null===(e=this.$.video)||void 0===e||e.getTracks()[0].stop(),this.$.video=null,this._capturing=!1)}},{key:"_shot",value:function(){var e=this;this._canvas.height=this.ref.video.videoHeight,this._canvas.width=this.ref.video.videoWidth,this._ctx.drawImage(this.ref.video,0,0);var t=Date.now(),n="camera-".concat(t,".jpeg"),r="image/jpeg";this._canvas.toBlob((function(i){var o=new File([i],n,{lastModified:t,type:r});e.addFileFromObject(o,{source:Sn.CAMERA}),e.set$({"*currentActivity":fn.activities.UPLOAD_LIST})}),r)}},{key:"initCallback",value:function(){var e=(0,r.Z)(f.mark((function e(){var t,r,i,o=this;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H((0,z.Z)(n.prototype),"initCallback",this).call(this),this.registerActivity(this.activityType,{onActivate:this._onActivate,onDeactivate:this._onDeactivate}),this.subConfigValue("cameraMirror",(function(e){o.$.videoTransformCss=e?"scaleX(-1)":null})),e.prev=3,e.next=6,navigator.mediaDevices.enumerateDevices();case 6:r=e.sent,(i=r.filter((function(e){return"videoinput"===e.kind})).map((function(e,t){return{text:e.label.trim()||"".concat(o.l10n("caption-camera")," ").concat(t+1),value:e.deviceId}}))).length>1&&(this.$.cameraSelectOptions=i,this.$.cameraSelectHidden=!1),this._selectedCameraId=null===(t=i[0])||void 0===t?void 0:t.value,e.next=14;break;case 12:e.prev=12,e.t0=e.catch(3);case 14:case"end":return e.stop()}}),e,this,[[3,12]])})));return function(){return e.apply(this,arguments)}}()}]),n}(tr);Oi.template='\n  <lr-activity-header>\n    <button type="button" class="mini-btn" set="onclick: *historyBack">\n      <lr-icon name="back"></lr-icon>\n    </button>\n    <div set="@hidden: !cameraSelectHidden">\n      <lr-icon name="camera"></lr-icon>\n      <span l10n="caption-camera"></span>\n    </div>\n    <lr-select\n      class="camera-select"\n      set="$.options: cameraSelectOptions; @hidden: cameraSelectHidden; onchange: onCameraSelectChange"\n    >\n    </lr-select>\n    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">\n      <lr-icon name="close"></lr-icon>\n    </button>\n  </lr-activity-header>\n  <div class="content">\n    <video\n      autoplay\n      playsinline\n      set="srcObject: video; style.transform: videoTransformCss; @hidden: videoHidden"\n      ref="video"\n    ></video>\n    <div class="message-box" set="@hidden: messageHidden">\n      <span l10n="l10nMessage"></span>\n      <button\n        type="button"\n        set="onclick: onRequestPermissions; @hidden: requestBtnHidden"\n        l10n="camera-permissions-request"\n      ></button>\n    </div>\n    <button type="button" class="shot-btn" set="onclick: onShot; @disabled: shotBtnDisabled">\n      <lr-icon name="camera"></lr-icon>\n    </button>\n  </div>\n';var Ui=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;(0,u.Z)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,q.Z)((0,i.Z)(e),"requireCtxName",!0),e}return(0,d.Z)(n,[{key:"initCallback",value:function(){H((0,z.Z)(n.prototype),"initCallback",this).call(this),this.$["*eventEmitter"].bindTarget(this)}},{key:"destroyCallback",value:function(){H((0,z.Z)(n.prototype),"destroyCallback",this).call(this),this.$["*eventEmitter"].unbindTarget(this)}}]),n}(tr);Ui.EventType=K;var Ri=Ui,Pi=function(){function e(){(0,u.Z)(this,e),(0,q.Z)(this,"captionL10nStr","confirm-your-action"),(0,q.Z)(this,"messageL10Str","are-you-sure"),(0,q.Z)(this,"confirmL10nStr","yes"),(0,q.Z)(this,"denyL10nStr","no")}return(0,d.Z)(e,[{key:"confirmAction",value:function(){console.log("Confirmed")}},{key:"denyAction",value:function(){this.historyBack()}}]),e}(),Ni=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;(0,u.Z)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,q.Z)((0,i.Z)(e),"activityType",fn.activities.CONFIRMATION),(0,q.Z)((0,i.Z)(e),"_defaults",new Pi),(0,q.Z)((0,i.Z)(e),"init$",(0,h.Z)((0,h.Z)({},e.init$),{},{activityCaption:"",messageTxt:"",confirmBtnTxt:"",denyBtnTxt:"","*confirmation":null,onConfirm:e._defaults.confirmAction,onDeny:e._defaults.denyAction.bind((0,i.Z)(e))})),e}return(0,d.Z)(n,[{key:"initCallback",value:function(){var e=this;H((0,z.Z)(n.prototype),"initCallback",this).call(this),this.set$({messageTxt:this.l10n(this._defaults.messageL10Str),confirmBtnTxt:this.l10n(this._defaults.confirmL10nStr),denyBtnTxt:this.l10n(this._defaults.denyL10nStr)}),this.sub("*confirmation",(function(t){t&&e.set$({"*currentActivity":fn.activities.CONFIRMATION,activityCaption:e.l10n(t.captionL10nStr),messageTxt:e.l10n(t.messageL10Str),confirmBtnTxt:e.l10n(t.confirmL10nStr),denyBtnTxt:e.l10n(t.denyL10nStr),onDeny:function(){t.denyAction()},onConfirm:function(){t.confirmAction()}})}))}}]),n}(fn);Ni.template='\n  <lr-activity-header>\n    <button type="button" class="mini-btn" set="onclick: *historyBack">\n      <lr-icon name="back"></lr-icon>\n    </button>\n    <span>{{activityCaption}}</span>\n    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">\n      <lr-icon name="close"></lr-icon>\n    </button>\n  </lr-activity-header>\n\n  <div class="message">{{messageTxt}}</div>\n  <div class="toolbar">\n    <button type="button" class="deny-btn secondary-btn" set="onclick: onDeny">{{denyBtnTxt}}</button>\n    <button type="button" class="confirm-btn primary-btn" set="onclick: onConfirm">{{confirmBtnTxt}}</button>\n  </div>\n';var Fi=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;(0,u.Z)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,q.Z)((0,i.Z)(e),"init$",(0,h.Z)((0,h.Z)({},e.init$),{},{visible:!1,value:0,"*commonProgress":0})),e}return(0,d.Z)(n,[{key:"initCallback",value:function(){var e=this;H((0,z.Z)(n.prototype),"initCallback",this).call(this),this._unobserveCollection=this.uploadCollection.observeProperties((function(){var t=e.uploadCollection.items().some((function(t){return e.uploadCollection.read(t).getValue("isUploading")}));e.$.visible=t})),this.sub("visible",(function(t){t?e.setAttribute("active",""):e.removeAttribute("active")})),this.sub("*commonProgress",(function(t){e.$.value=t}))}},{key:"destroyCallback",value:function(){var e;H((0,z.Z)(n.prototype),"destroyCallback",this).call(this),null===(e=this._unobserveCollection)||void 0===e||e.call(this)}}]),n}(tr);Fi.template=' <lr-progress-bar set="visible: visible; value: value"></lr-progress-bar> ';var Bi=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;(0,u.Z)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,q.Z)((0,i.Z)(e),"_value",0),(0,q.Z)((0,i.Z)(e),"init$",(0,h.Z)((0,h.Z)({},e.init$),{},{width:0,opacity:0})),e}return(0,d.Z)(n,[{key:"initCallback",value:function(){var e=this;H((0,z.Z)(n.prototype),"initCallback",this).call(this),this.defineAccessor("value",(function(t){if(void 0!==t){var n=e._value;e._value=t,0===t&&n>0?e.ref.line.addEventListener("transitionend",(function(){e.style.setProperty("--l-width",e._value.toString())})):e.style.setProperty("--l-width",e._value.toString())}})),this.defineAccessor("visible",(function(t){e.ref.line.classList.toggle("progress--hidden",!t)}))}}]),n}(un);Bi.template=' <div ref="line" class="progress"></div> ';var Di="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",Vi=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;return(0,u.Z)(this,n),e=t.call(this),(0,q.Z)((0,i.Z)(e),"init$",(0,h.Z)((0,h.Z)({},e.init$),{},{checkerboard:!1,src:Di})),e}return(0,d.Z)(n,[{key:"initCallback",value:function(){var e=this;H((0,z.Z)(n.prototype),"initCallback",this).call(this),this.sub("checkerboard",(function(){e.style.backgroundImage=e.hasAttribute("checkerboard")?"url(".concat(function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rgba(0, 0, 0, .1)";return xi('<svg height="20" width="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">\n    <rect x="0" y="0" width="20" height="20" fill="'.concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#fff",'" />\n    <rect x="0" y="0" width="10" height="10" fill="').concat(e,'" />\n    <rect x="10" y="10" width="10" height="10" fill="').concat(e,'" />\n  </svg>'))}(),")"):"unset"}))}},{key:"destroyCallback",value:function(){H((0,z.Z)(n.prototype),"destroyCallback",this).call(this),URL.revokeObjectURL(this._lastObjectUrl)}},{key:"setImage",value:function(e){this.$.src=e.src}},{key:"setImageFile",value:function(e){var t=URL.createObjectURL(e);this.$.src=t,this._lastObjectUrl=t}},{key:"setImageUrl",value:function(e){this.$.src=e}},{key:"clear",value:function(){URL.revokeObjectURL(this._lastObjectUrl),this.$.src=Di}}]),n}(un);function zi(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){if("string"===typeof t)return e[t]=!0,e;for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];e[i]=t[i]}return e}),{})}function ji(){var e=zi.apply(void 0,arguments);return Object.keys(e).reduce((function(t,n){return e[n]&&t.push(n),t}),[]).join(" ")}Vi.template=' <lr-img class="img-view" ref="img" set="@src: src; style.aa: src;" /> ',Vi.bindAttributes({checkerboard:"checkerboard"});var Hi=function(e){if(!e)return tn;var t,n=(t=e,t?t.split(",").map((function(e){return e.trim()})):[]).filter((function(e){return tn.includes(e)}));return 0===n.length?tn:n};var qi="\n  ".concat("<svg width='0' height='0' style='position:absolute'><symbol viewBox='0 0 20 20' id='uc-icon-brightness' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M15 10a5 5 0 0 1-5 5m5-5a5 5 0 0 0-5-5m5 5h-5m0 5a5 5 0 0 1 0-10m0 10V5m0 15v-3M2.93 2.929 5.05 5.05M0 10h3m-.07 7.071 2.12-2.121M10 0v3m7.07 14.071-2.12-2.121M20 10h-3m.07-7.071L14.95 5.05m-.626 2.45H10m4.324 5H10'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-closeMax' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='m3 3 14 14m0-14L3 17'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-contrast' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M2 10a8 8 0 1 0 16 0 8 8 0 1 0-16 0m8-8v16m8-8h-8m7.598 2.5H10m6.24 2.5H10m7.6-7.5H10M16.242 5H10'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-crop' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M20 14H7.005C6.45 14 6 13.55 6 12.995V0M0 6h13.067c.515 0 .933.418.933.933V20M14.5.4 13 2l1.5 1.6M13 2h2a3 3 0 0 1 3 3v2M5.5 19.6 7 18l-1.5-1.6M7 18H5a3 3 0 0 1-3-3v-2'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-done' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='m1 10.632 5.684 5.684L19 4'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-enhance' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M19 13h-2m0 0a4 4 0 0 1-4-4m4 4a4 4 0 0 0-4 4m0-8V7m0 2a4 4 0 0 1-4 4m-2 0h2m0 0a4 4 0 0 1 4 4m0 0v2M8 8.5H6.5m0 0a2 2 0 0 1-2-2m2 2a2 2 0 0 0-2 2m0-4V5m0 1.5a2 2 0 0 1-2 2M1 8.5h1.5m0 0a2 2 0 0 1 2 2m0 0V12M12 3h-1m0 0a1 1 0 0 1-1-1m1 1a1 1 0 0 0-1 1m0-2V1m0 1a1 1 0 0 1-1 1M8 3h1m0 0a1 1 0 0 1 1 1m0 0v1'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-exposure' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M10 20v-3M2.93 2.929 5.05 5.05M0 10h3m-.07 7.071 2.12-2.121M10 0v3m7.07 14.071-2.12-2.121M20 10h-3m.07-7.071L14.95 5.05M5 10a5 5 0 1 0 10 0 5 5 0 1 0-10 0'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-filters' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M4.5 6.5a5.5 5.5 0 1 0 11 0 5.5 5.5 0 1 0-11 0m-3.5 6a5.5 5.5 0 1 0 11 0 5.5 5.5 0 1 0-11 0m7 0a5.5 5.5 0 1 0 11 0 5.5 5.5 0 1 0-11 0'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-flip' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M19.6 5 18 3.5 16.4 5m3.2 10L18 16.5 16.4 15M18 3.523v12.954M3.3 8.5h10.654c.301 0 .415-.395.159-.554L3.459 1.286A.3.3 0 0 0 3 1.542V8.2a.3.3 0 0 0 .3.3zm0 3h10.654c.301 0 .415.395.159.554l-10.654 6.66A.3.3 0 0 1 3 18.458v-6.66a.3.3 0 0 1 .3-.3z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-gamma' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M17 3C9 6 2.5 11.5 2.5 17.5m0 0h1m-1 0v-1m14 1h1m-3 0h1m-3 0h1m-3 0h1m-3 0h1m-3 0h1m-3 0h1m-3-14v-1m0 3v-1m0 3v-1m0 3v-1m0 3v-1m0 3v-1m0 3v-1'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-mirror' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M5 .4 3.5 2 5 3.6M15 .4 16.5 2 15 3.6M3.52 2h12.957M8.5 16.7V6.046c0-.301-.394-.415-.554-.159L1.287 16.541a.3.3 0 0 0 .255.459H8.2a.3.3 0 0 0 .3-.3zm3 0V6.046c0-.301.395-.415.555-.159l6.659 10.654a.3.3 0 0 1-.255.459H11.8a.3.3 0 0 1-.3-.3z'/></symbol><symbol viewBox='0 0 40 40' id='uc-icon-original' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M0 40 40 0'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-rotate' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M13.5.4 12 2l1.5 1.6M12.023 2H14.4A3.6 3.6 0 0 1 18 5.6V8M4 17h9a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-sad' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M2 17c4.418-4 11.582-4 16 0M16.5 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-11 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-saturation' xmlns='http://www.w3.org/2000/svg'><defs><linearGradient id='ouc-icon-id__a' x1='10.001' y1='1' x2='10.001' y2='19' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient></defs><circle cx='10.001' cy='10' r='9' transform='rotate(90 10 10)' fill='url(#ouc-icon-id__a)'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-slider' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M0 10h11m0 0a2 2 0 1 0 4 0m-4 0a2 2 0 1 1 4 0m0 0h5'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-tuning' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M8 10h11M1 10h4M1 4.5h11m3 0h4m-18 11h11m3 0h4m-7-11a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0M5 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0m7 5.5a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-vibrance' xmlns='http://www.w3.org/2000/svg'><path d='M2.125 5.64A8.96 8.96 0 0 0 1.001 10a8.96 8.96 0 0 0 1.124 4.36V5.64z' fill='url(#ruc-icon-id__a)'/><path d='M2.875 15.499V4.502a9.053 9.053 0 0 1 1.75-1.72v14.437a9.05 9.05 0 0 1-1.75-1.72z' fill='url(#ruc-icon-id__b)'/><path d='M5.375 17.722c.548.33 1.134.601 1.75.809V1.469a8.956 8.956 0 0 0-1.75.81v15.443z' fill='url(#ruc-icon-id__c)'/><path d='M7.875 1.253v17.495c.564.136 1.15.22 1.75.244V1.008a9 9 0 0 0-1.75.245z' fill='url(#ruc-icon-id__d)'/><path d='M10.375 1.008v17.984a9 9 0 0 0 1.75-.244V1.252a9 9 0 0 0-1.75-.244z' fill='url(#ruc-icon-id__e)'/><path d='M12.875 1.469V18.53a8.957 8.957 0 0 0 1.75-.808V2.277a8.957 8.957 0 0 0-1.75-.808z' fill='url(#ruc-icon-id__f)'/><path d='M15.375 2.78v14.44a9.053 9.053 0 0 0 1.75-1.72v-11a9.054 9.054 0 0 0-1.75-1.72z' fill='url(#ruc-icon-id__g)'/><path d='M17.875 5.638v8.724A8.959 8.959 0 0 0 19.001 10a8.96 8.96 0 0 0-1.126-4.362z' fill='url(#ruc-icon-id__h)'/><defs><linearGradient id='ruc-icon-id__a' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='ruc-icon-id__b' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='ruc-icon-id__c' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='ruc-icon-id__d' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='ruc-icon-id__e' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='ruc-icon-id__f' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='ruc-icon-id__g' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='ruc-icon-id__h' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient></defs></symbol><symbol viewBox='0 0 20 20' id='uc-icon-warmth' xmlns='http://www.w3.org/2000/svg'><path d='m7.5 13.05.429.42.171-.175v-.244h-.6zm5 0h-.6v.245l.172.175.428-.42zM8.1 3.5c0-1.05.85-1.9 1.9-1.9V.4a3.1 3.1 0 0 0-3.1 3.1h1.2zm0 9.55V3.5H6.9v9.55h1.2zm-1 2.45c0-.79.315-1.506.829-2.03l-.858-.84A4.088 4.088 0 0 0 5.9 15.5h1.2zm2.9 2.9a2.9 2.9 0 0 1-2.9-2.9H5.9a4.1 4.1 0 0 0 4.1 4.1v-1.2zm2.9-2.9a2.9 2.9 0 0 1-2.9 2.9v1.2a4.1 4.1 0 0 0 4.1-4.1h-1.2zm-.829-2.03c.514.524.829 1.24.829 2.03h1.2c0-1.117-.447-2.13-1.171-2.87l-.858.84zM11.9 3.5v9.55h1.2V3.5h-1.2zM10 1.6c1.05 0 1.9.85 1.9 1.9h1.2A3.1 3.1 0 0 0 10 .4v1.2z' fill='currentColor'/><path d='M10 14V8' stroke='currentColor' stroke-width='1.2' stroke-linecap='round'/><path d='M14 3h3m-3 3h3m-3 3h3m-8 6.5a1 1 0 1 0 2 0 1 1 0 1 0-2 0' stroke='currentColor' stroke-width='1.2'/></symbol></svg>",'\n  <div class="wrapper wrapper_desktop">\n    <lr-presence-toggle class="network_problems_splash" set="visible: presence.networkProblems;">\n      <div class="network_problems_content">\n        <div class="network_problems_icon">\n          <lr-icon name="sad"></lr-icon>\n        </div>\n        <div class="network_problems_text">Network error</div>\n      </div>\n      <div class="network_problems_footer">\n        <lr-btn-ui theme="primary" text="Retry" set="onclick: *on.retryNetwork"></lr-btn-ui>\n      </div>\n    </lr-presence-toggle>\n    <div class="viewport">\n      <div class="file_type_outer">\n        <div class="file_type">{{fileType}}</div>\n      </div>\n      <div class="image_container" ref="img-container-el">\n        <img src="').concat(Di,'" class="image image_visible_from_editor" ref="img-el" />\n        <lr-editor-image-cropper ref="cropper-el"></lr-editor-image-cropper>\n        <lr-editor-image-fader ref="fader-el"></lr-editor-image-fader>\n      </div>\n      <div class="info_pan">{{msg}}</div>\n    </div>\n    <div class="toolbar">\n      <lr-line-loader-ui set="active: showLoader"></lr-line-loader-ui>\n      <div class="toolbar_content toolbar_content__editor">\n        <lr-editor-toolbar></lr-editor-toolbar>\n      </div>\n    </div>\n  </div>\n'),Ki=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e,r;return(0,u.Z)(this,n),e=t.call(this),(0,q.Z)((0,i.Z)(e),"ctxOwner",!0),(0,q.Z)((0,i.Z)(e),"_debouncedShowLoader",W(e._showLoader.bind((0,i.Z)(e)),300)),e.init$=(0,h.Z)((0,h.Z)({},e.init$),(r=(0,i.Z)(e),{"*originalUrl":null,"*faderEl":null,"*cropperEl":null,"*imgEl":null,"*imgContainerEl":null,"*networkProblems":!1,"*imageSize":null,"*editorTransformations":{},"*cropPresetList":[],"*tabList":tn,"*tabId":en.CROP,entry:null,extension:null,editorMode:!1,modalCaption:"",isImage:!1,msg:"",src:Di,fileType:"",showLoader:!1,uuid:null,cdnUrl:null,cropPreset:"",tabs:sn(tn),"presence.networkProblems":!1,"presence.modalCaption":!0,"presence.editorToolbar":!1,"presence.viewerToolbar":!0,"*on.retryNetwork":function(){var e,t=r.querySelectorAll("img"),n=(0,a.Z)(t);try{for(n.s();!(e=n.n()).done;){var i=e.value,o=i.src;i.src=Di,i.src=o}}catch(Yo){n.e(Yo)}finally{n.f()}r.$["*networkProblems"]=!1},"*on.apply":function(e){if(e){var t=r.$["*originalUrl"],n=Rt(Gt(e),"preview"),i={originalUrl:t,cdnUrlModifiers:n,cdnUrl:zt(t,n),transformations:e};r.dispatchEvent(new CustomEvent("apply",{detail:i,bubbles:!0,composed:!0})),r.remove()}},"*on.cancel":function(){r.remove(),r.dispatchEvent(new CustomEvent("cancel",{bubbles:!0,composed:!0}))}})),e}return(0,d.Z)(n,[{key:"_showLoader",value:function(e){this.$.showLoader=e}},{key:"_waitForSize",value:function(){var e=this;return new Promise((function(t,n){var r=setTimeout((function(){n(new Error("[cloud-image-editor] timeout waiting for non-zero container size"))}),3e3),i=new ResizeObserver((function(e){var n=(0,ae.Z)(e,1)[0];n.contentRect.width>0&&n.contentRect.height>0&&(t(),clearTimeout(r),i.disconnect())}));i.observe(e)}))}},{key:"initCallback",value:function(){H((0,z.Z)(n.prototype),"initCallback",this).call(this),this.$["*faderEl"]=this.ref["fader-el"],this.$["*cropperEl"]=this.ref["cropper-el"],this.$["*imgContainerEl"]=this.ref["img-container-el"],this.initEditor()}},{key:"updateImage",value:function(){var e=(0,r.Z)(f.mark((function e(){var t,n,r,i,o,a,s,l,c;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isConnected){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this._waitForSize();case 4:if(!this.$.cdnUrl){e.next=15;break}if(t=Nt(this.$.cdnUrl),(n=jt(this.$.cdnUrl,t))!==this.$["*originalUrl"]){e.next=9;break}return e.abrupt("return");case 9:this.$["*originalUrl"]=n,r=Ft(this.$.cdnUrl),i=Qt(r),this.$["*editorTransformations"]=i,e.next=24;break;case 15:if(!this.$.uuid){e.next=23;break}if((o=jt(this.cfg.cdnCname,this.$.uuid))!==this.$["*originalUrl"]){e.next=19;break}return e.abrupt("return");case 19:this.$["*originalUrl"]=o,this.$["*editorTransformations"]={},e.next=24;break;case 23:throw new Error("No UUID nor CDN URL provided");case 24:return this.$["*tabId"]===en.CROP?this.$["*cropperEl"].deactivate({reset:!0}):this.$["*faderEl"].deactivate(),e.prev=25,a=zt(this.$["*originalUrl"],Rt("json")),e.next=29,fetch(a).then((function(e){return e.json()}));case 29:s=e.sent,l=s.width,c=s.height,this.$["*imageSize"]={width:l,height:c},this.$["*tabId"]===en.CROP?this.$["*cropperEl"].activate(this.$["*imageSize"]):this.$["*faderEl"].activate({url:this.$["*originalUrl"]}),e.next=38;break;case 35:e.prev=35,e.t0=e.catch(25),e.t0&&console.error("Failed to load image info",e.t0);case 38:case"end":return e.stop()}}),e,this,[[25,35]])})));return function(){return e.apply(this,arguments)}}()},{key:"initEditor",value:function(){var e=(0,r.Z)(f.mark((function e(){var t=this;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._waitForSize();case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),this.isConnected&&console.error(e.t0.message),e.abrupt("return");case 9:this.ref["img-el"].addEventListener("load",(function(){t._imgLoading=!1,t._debouncedShowLoader(!1),t.$.src!==Di&&(t.$["*networkProblems"]=!1)})),this.ref["img-el"].addEventListener("error",(function(){t._imgLoading=!1,t._debouncedShowLoader(!1),t.$["*networkProblems"]=!0})),this.sub("src",(function(e){var n=t.ref["img-el"];n.src!==e&&(t._imgLoading=!0,n.src=e||Di)})),this.sub("cropPreset",(function(e){t.$["*cropPresetList"]=Tn(e)})),this.sub("tabs",(function(e){t.$["*tabList"]=Hi(e)})),this.sub("*tabId",(function(e){t.ref["img-el"].className=ji("image",{image_hidden_to_cropper:e===en.CROP,image_hidden_effects:e!==en.CROP})})),this.classList.add("editor_ON"),this.sub("*networkProblems",(function(e){t.$["presence.networkProblems"]=e,t.$["presence.modalCaption"]=!e})),this.sub("*editorTransformations",(function(e){if(0!==Object.keys(e).length){var n=t.$["*originalUrl"],r=Rt(Gt(e),"preview"),i={originalUrl:n,cdnUrlModifiers:r,cdnUrl:zt(n,r),transformations:e};t.dispatchEvent(new CustomEvent("change",{detail:i,bubbles:!0,composed:!0}))}}),!1),this.sub("uuid",(function(e){return e&&t.updateImage()})),this.sub("cdnUrl",(function(e){return e&&t.updateImage()}));case 20:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),n}(un);(0,q.Z)(Ki,"className","cloud-image-editor"),Ki.template=qi,Ki.bindAttributes({uuid:"uuid","cdn-url":"cdnUrl","crop-preset":"cropPreset",tabs:"tabs"});var Gi=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.call(this)).init$=(0,h.Z)((0,h.Z)({},e.init$),{},{dragging:!1}),e._handlePointerUp=e._handlePointerUp_.bind((0,i.Z)(e)),e._handlePointerMove=e._handlePointerMove_.bind((0,i.Z)(e)),e._handleSvgPointerMove=e._handleSvgPointerMove_.bind((0,i.Z)(e)),e}return(0,d.Z)(n,[{key:"_shouldThumbBeDisabled",value:function(e){var t=this.$["*imageBox"];if(t){if(""===e&&t.height<=1&&t.width<=1)return!0;var n=t.height<=1&&(e.includes("n")||e.includes("s")),r=t.width<=1&&(e.includes("e")||e.includes("w"));return n||r}}},{key:"_createBackdrop",value:function(){var e=this.$["*cropBox"];if(e){var t=e.x,n=e.y,r=e.width,i=e.height,o=this.ref["svg-el"],a=bn("mask",{id:"backdrop-mask"}),s=bn("rect",{x:0,y:0,width:"100%",height:"100%",fill:"white"}),l=bn("rect",{x:t,y:n,width:r,height:i,fill:"black"});a.appendChild(s),a.appendChild(l);var c=bn("rect",{x:0,y:0,width:"100%",height:"100%",fill:"var(--color-image-background)","fill-opacity":.85,mask:"url(#backdrop-mask)"});o.appendChild(c),o.appendChild(a),this._backdropMask=a,this._backdropMaskInner=l}}},{key:"_resizeBackdrop",value:function(){var e=this;this._backdropMask&&(this._backdropMask.style.display="none",window.requestAnimationFrame((function(){e._backdropMask&&(e._backdropMask.style.display="block")})))}},{key:"_updateBackdrop",value:function(){var e=this.$["*cropBox"];if(e){var t=e.x,n=e.y,r=e.width,i=e.height;this._backdropMaskInner&&yn(this._backdropMaskInner,{x:t,y:n,width:r,height:i})}}},{key:"_updateFrame",value:function(){var e=this.$["*cropBox"];if(e&&this._frameGuides&&this._frameThumbs){for(var t=0,n=Object.values(this._frameThumbs);t<n.length;t++){var r=n[t],i=r.direction,o=r.pathNode,a=r.interactionNode,s=r.groupNode,l=""===i,c=2===i.length,u=e.x,d=e.y,h=e.width,f=e.height;if(l){yn(a,{x:u+h/3,y:d+f/3,width:h/3,height:f/3})}else{var v=En(Math.min(h,f)/82/2,0,1),p=c?_n(e,i,v):wn(e,i,v),m=p.d,g=p.center,y=Math.max(24*En(Math.min(h,f)/24/3,0,1),6);yn(a,{x:g[0]-y,y:g[1]-y,width:2*y,height:2*y}),yn(o,{d:m})}var b=this._shouldThumbBeDisabled(i);s.setAttribute("class",ji("thumb",{"thumb--hidden":b,"thumb--visible":!b}))}yn(this._frameGuides,{x:e.x-.5,y:e.y-.5,width:e.width+1,height:e.height+1})}}},{key:"_createThumbs",value:function(){for(var e={},t=0;t<3;t++)for(var n=0;n<3;n++){var r="".concat(["n","","s"][t]).concat(["w","","e"][n]),i=bn("g");i.classList.add("thumb"),i.setAttribute("with-effects","");var o=bn("rect",{fill:"transparent"}),a=bn("path",{stroke:"currentColor",fill:"none","stroke-width":3});i.appendChild(a),i.appendChild(o),e[r]={direction:r,pathNode:a,interactionNode:o,groupNode:i},o.addEventListener("pointerdown",this._handlePointerDown.bind(this,r))}return e}},{key:"_createGuides",value:function(){var e=bn("svg"),t=bn("rect",{x:0,y:0,width:"100%",height:"100%",fill:"none",stroke:"#000000","stroke-width":1,"stroke-opacity":.5});e.appendChild(t);for(var n=1;n<=2;n++){var r=bn("line",{x1:"".concat(mn*n,"%"),y1:"0%",x2:"".concat(mn*n,"%"),y2:"100%",stroke:"#000000","stroke-width":1,"stroke-opacity":.3});e.appendChild(r)}for(var i=1;i<=2;i++){var o=bn("line",{x1:"0%",y1:"".concat(mn*i,"%"),x2:"100%",y2:"".concat(mn*i,"%"),stroke:"#000000","stroke-width":1,"stroke-opacity":.3});e.appendChild(o)}return e.classList.add("guides","guides--semi-hidden"),e}},{key:"_createFrame",value:function(){var e=this.ref["svg-el"],t=document.createDocumentFragment(),n=this._createGuides();t.appendChild(n);for(var r=this._createThumbs(),i=0,o=Object.values(r);i<o.length;i++){var a=o[i].groupNode;t.appendChild(a)}e.appendChild(t),this._frameThumbs=r,this._frameGuides=n}},{key:"_handlePointerDown",value:function(e,t){if(this._frameThumbs){var n=this._frameThumbs[e];if(!this._shouldThumbBeDisabled(e)){var r=this.$["*cropBox"],i=this.ref["svg-el"].getBoundingClientRect(),o=i.x,a=i.y,s=t.x-o,l=t.y-a;this.$.dragging=!0,this._draggingThumb=n,this._dragStartPoint=[s,l],this._dragStartCrop=(0,h.Z)({},r)}}}},{key:"_handlePointerUp_",value:function(e){this._updateCursor(),this.$.dragging&&(e.stopPropagation(),e.preventDefault(),this.$.dragging=!1)}},{key:"_handlePointerMove_",value:function(e){if(this.$.dragging&&this._dragStartPoint&&this._draggingThumb){e.stopPropagation(),e.preventDefault();var t=this.ref["svg-el"].getBoundingClientRect(),n=t.x,r=t.y,i=e.x-n,o=e.y-r,a=i-this._dragStartPoint[0],s=o-this._dragStartPoint[1],l=this._draggingThumb.direction,c=this._calcCropBox(l,[a,s]);c&&(this.$["*cropBox"]=c)}}},{key:"_calcCropBox",value:function(e,t){var n,r,i=(0,ae.Z)(t,2),o=i[0],a=i[1],s=this.$["*imageBox"],l=null!==(n=this._dragStartCrop)&&void 0!==n?n:this.$["*cropBox"],c=null===(r=this.$["*cropPresetList"])||void 0===r?void 0:r[0],u=c?c.width/c.height:void 0;if(l=""===e?function(e){var t=e.rect,n=(0,ae.Z)(e.delta,2),r=n[0],i=n[1],o=e.imageBox;return kn((0,h.Z)((0,h.Z)({},t),{},{x:t.x+r,y:t.y+i}),o)}({rect:l,delta:[o,a],imageBox:s}):xn({rect:l,delta:[o,a],direction:e,aspectRatio:u,imageBox:s}),Object.values(l).every((function(e){return Number.isFinite(e)&&e>=0})))return kn(Zn(l),this.$["*imageBox"]);console.error("CropFrame is trying to create invalid rectangle",{payload:l})}},{key:"_handleSvgPointerMove_",value:function(e){var t=this;if(this._frameThumbs){var n=Object.values(this._frameThumbs).find((function(n){if(t._shouldThumbBeDisabled(n.direction))return!1;var r=n.interactionNode.getBoundingClientRect(),i=function(e,t){var n=(0,ae.Z)(t,2),r=n[0],i=n[1];return e.x<=r&&r<=e.x+e.width&&e.y<=i&&i<=e.y+e.height}({x:r.x,y:r.y,width:r.width,height:r.height},[e.x,e.y]);return i}));this._hoverThumb=n,this._updateCursor()}}},{key:"_updateCursor",value:function(){var e,t=this._hoverThumb;this.ref["svg-el"].style.cursor=t?""===(e=t.direction)?"move":["e","w"].includes(e)?"ew-resize":["n","s"].includes(e)?"ns-resize":["nw","se"].includes(e)?"nwse-resize":"nesw-resize":"initial"}},{key:"_render",value:function(){this._updateBackdrop(),this._updateFrame()}},{key:"toggleThumbs",value:function(e){this._frameThumbs&&Object.values(this._frameThumbs).map((function(e){return e.groupNode})).forEach((function(t){t.setAttribute("class",ji("thumb",{"thumb--hidden":!e,"thumb--visible":e}))}))}},{key:"initCallback",value:function(){var e=this;H((0,z.Z)(n.prototype),"initCallback",this).call(this),this._createBackdrop(),this._createFrame(),this.sub("*imageBox",(function(){e._resizeBackdrop(),window.requestAnimationFrame((function(){e._render()}))})),this.sub("*cropBox",(function(t){t&&(e._guidesHidden=t.height<=1||t.width<=1,window.requestAnimationFrame((function(){e._render()})))})),this.sub("dragging",(function(t){e._frameGuides&&e._frameGuides.setAttribute("class",ji({"guides--hidden":e._guidesHidden,"guides--visible":!e._guidesHidden&&t,"guides--semi-hidden":!e._guidesHidden&&!t}))})),this.ref["svg-el"].addEventListener("pointermove",this._handleSvgPointerMove,!0),document.addEventListener("pointermove",this._handlePointerMove,!0),document.addEventListener("pointerup",this._handlePointerUp,!0)}},{key:"destroyCallback",value:function(){H((0,z.Z)(n.prototype),"destroyCallback",this).call(this),document.removeEventListener("pointermove",this._handlePointerMove),document.removeEventListener("pointerup",this._handlePointerUp)}}]),n}(un);Gi.template=' <svg class="svg" ref="svg-el" xmlns="http://www.w3.org/2000/svg"></svg> ';var Wi=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;(0,u.Z)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,q.Z)((0,i.Z)(e),"init$",(0,h.Z)((0,h.Z)({},e.init$),{},{active:!1,title:"",icon:"","on.click":null})),e}return(0,d.Z)(n,[{key:"initCallback",value:function(){var e=this;H((0,z.Z)(n.prototype),"initCallback",this).call(this),this._titleEl=this.ref["title-el"],this._iconEl=this.ref["icon-el"],this.setAttribute("role","button"),-1===this.tabIndex&&(this.tabIndex=0),this.sub("title",(function(t){e._titleEl&&(e._titleEl.style.display=t?"block":"none")})),this.sub("active",(function(t){e.className=ji({active:t,not_active:!t})})),this.sub("on.click",(function(t){e.onclick=t}))}}]),n}(un);Wi.template='\n  <div class="before"></div>\n  <lr-icon set="@name: icon;"></lr-icon>\n  <div class="title" ref="title-el">{{title}}</div>\n';var Xi=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,u.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"initCallback",value:function(){var e=this;H((0,z.Z)(n.prototype),"initCallback",this).call(this),this.defineAccessor("operation",(function(t){t&&(e._operation=t,e.$.icon=t)})),this.$["on.click"]=function(t){var n=e.$["*cropperEl"].getValue(e._operation),r=function(e,t){return"rotate"===e?function(e){var t=e+90;return t>=360?0:t}(t):["mirror","flip"].includes(e)?!t:null}(e._operation,n);e.$["*cropperEl"].setValue(e._operation,r)}}}]),n}(Wi),Yi="filter",Ji="color_operation",Qi="original",eo=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;(0,u.Z)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,q.Z)((0,i.Z)(e),"init$",(0,h.Z)((0,h.Z)({},e.init$),{},{disabled:!1,min:0,max:100,value:0,defaultValue:0,zero:0,"on.input":function(t){e.$["*faderEl"].set(t),e.$.value=t}})),e}return(0,d.Z)(n,[{key:"setOperation",value:function(e,t){this._controlType="filter"===e?Yi:Ji,this._operation=e,this._iconName=e,this._title=e.toUpperCase(),this._filter=t,this._initializeValues(),this.$["*faderEl"].activate({url:this.$["*originalUrl"],operation:this._operation,value:this._filter===Qi?void 0:this.$.value,filter:this._filter===Qi?void 0:this._filter,fromViewer:!1})}},{key:"_initializeValues",value:function(){var e=an[this._operation],t=e.range,n=e.zero,r=(0,ae.Z)(t,2),i=r[0],o=r[1];this.$.min=i,this.$.max=o,this.$.zero=n;var a=this.$["*editorTransformations"][this._operation];if(this._controlType===Yi){var s=o;if(a){var l=a.name,c=a.amount;s=l===this._filter?c:o}this.$.value=s,this.$.defaultValue=s}if(this._controlType===Ji){var u="undefined"!==typeof a?a:n;this.$.value=u,this.$.defaultValue=u}}},{key:"apply",value:function(){var e;e=this._controlType===Yi?this._filter===Qi?null:{name:this._filter,amount:this.$.value}:this.$.value;var t=(0,h.Z)((0,h.Z)({},this.$["*editorTransformations"]),{},(0,q.Z)({},this._operation,e));this.$["*editorTransformations"]=t}},{key:"cancel",value:function(){this.$["*faderEl"].deactivate({hide:!1})}},{key:"initCallback",value:function(){var e=this;H((0,z.Z)(n.prototype),"initCallback",this).call(this),this.sub("*originalUrl",(function(t){e._originalUrl=t})),this.sub("value",(function(t){var n="".concat(e._filter||e._operation," ").concat(t);e.$["*operationTooltip"]=n}))}}]),n}(un);function to(e){var t=new Image;return{promise:new Promise((function(n,r){t.src=e,t.onload=n,t.onerror=r})),image:t,cancel:function(){0===t.naturalWidth&&(t.src=Di)}}}function no(e){var t,n=[],r=(0,a.Z)(e);try{for(r.s();!(t=r.n()).done;){var i=to(t.value);n.push(i)}}catch(Yo){r.e(Yo)}finally{r.f()}var o=n.map((function(e){return e.image})),s=Promise.allSettled(n.map((function(e){return e.promise})));return{promise:s,images:o,cancel:function(){n.forEach((function(e){e.cancel()}))}}}eo.template='\n  <lr-slider-ui\n    ref="slider-el"\n    set="disabled: disabled; min: min; max: max; defaultValue: defaultValue; zero: zero; onInput: on.input;"\n  ></lr-slider-ui>\n';var ro=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;(0,u.Z)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,q.Z)((0,i.Z)(e),"init$",(0,h.Z)((0,h.Z)({},e.init$),{},{active:!1,title:"",icon:"",isOriginal:!1,iconSize:"20","on.click":null})),e}return(0,d.Z)(n,[{key:"_previewSrc",value:function(){var e=parseInt(window.getComputedStyle(this).getPropertyValue("--l-base-min-width"),10),t=window.devicePixelRatio,n=Math.ceil(t*e),r=t>=2?"lightest":"normal",i=(0,h.Z)({},this.$["*editorTransformations"]);return i[this._operation]=this._filter!==Qi?{name:this._filter,amount:100}:void 0,zt(this._originalUrl,Rt(Wt,Gt(i),"quality/".concat(r),"scale_crop/".concat(n,"x").concat(n,"/center")))}},{key:"_observerCallback",value:function(e,t){var n=this;if(e[0].isIntersecting){var r=this.proxyUrl(this._previewSrc()),i=this.ref["preview-el"],o=to(r),a=o.promise,s=o.cancel;this._cancelPreload=s,a.catch((function(e){n.$["*networkProblems"]=!0,console.error("Failed to load image",{error:e})})).finally((function(){i.style.backgroundImage="url(".concat(r,")"),i.setAttribute("loaded",""),t.unobserve(n)}))}else this._cancelPreload&&this._cancelPreload()}},{key:"initCallback",value:function(){var e=this;H((0,z.Z)(n.prototype),"initCallback",this).call(this),this.$["on.click"]=function(t){e.$.active?e.$.isOriginal||(e.$["*sliderEl"].setOperation(e._operation,e._filter),e.$["*showSlider"]=!0):(e.$["*sliderEl"].setOperation(e._operation,e._filter),e.$["*sliderEl"].apply()),e.$["*currentFilter"]=e._filter},this.defineAccessor("filter",(function(t){e._operation="filter",e._filter=t,e.$.isOriginal=t===Qi,e.$.icon=e.$.isOriginal?"original":"slider"})),this._observer=new window.IntersectionObserver(this._observerCallback.bind(this),{threshold:[0,1]});var t=this.$["*originalUrl"];this._originalUrl=t,this.$.isOriginal?this.ref["icon-el"].classList.add("original-icon"):this._observer.observe(this),this.sub("*currentFilter",(function(t){e.$.active=t&&t===e._filter})),this.sub("isOriginal",(function(t){e.$.iconSize=t?40:20})),this.sub("active",(function(t){if(!e.$.isOriginal){e.ref["icon-el"].style.opacity=t?"1":"0";var n=e.ref["preview-el"];t?n.style.opacity="0":n.style.backgroundImage&&(n.style.opacity="1")}})),this.sub("*networkProblems",(function(t){if(!t){var n=e.proxyUrl(e._previewSrc()),r=e.ref["preview-el"];r.style.backgroundImage&&(r.style.backgroundImage="none",r.style.backgroundImage="url(".concat(n,")"))}}))}},{key:"destroyCallback",value:function(){var e;H((0,z.Z)(n.prototype),"destroyCallback",this).call(this),null===(e=this._observer)||void 0===e||e.disconnect(),this._cancelPreload&&this._cancelPreload()}}]),n}(Wi);ro.template='\n  <div class="before"></div>\n  <div class="preview" ref="preview-el"></div>\n  <lr-icon ref="icon-el" set="@name: icon; @size: iconSize;"></lr-icon>\n';var io=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;(0,u.Z)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,q.Z)((0,i.Z)(e),"_operation",""),e}return(0,d.Z)(n,[{key:"initCallback",value:function(){var e=this;H((0,z.Z)(n.prototype),"initCallback",this).call(this),this.$["on.click"]=function(t){e.$["*sliderEl"].setOperation(e._operation),e.$["*showSlider"]=!0,e.$["*currentOperation"]=e._operation},this.defineAccessor("operation",(function(t){t&&(e._operation=t,e.$.icon=t,e.bindL10n("title",(function(){return e.l10n(t)})))})),this.sub("*editorTransformations",(function(t){if(e._operation){var n=an[e._operation].zero,r=t[e._operation],i="undefined"!==typeof r&&r!==n;e.$.active=i}}))}}]),n}(Wi);function oo(e,t,n){var r=window.devicePixelRatio,i=Math.min(Math.ceil(t*r),3e3),o=r>=2?"lightest":"normal";return zt(e,Rt(Wt,Gt(n),"quality/".concat(o),"stretch/off/-/resize/".concat(i,"x")))}var ao=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;return(0,u.Z)(this,n),e=t.call(this),(0,q.Z)((0,i.Z)(e),"ctxOwner",!0),e.init$=(0,h.Z)((0,h.Z)({},e.init$),{},{image:null,"*padding":20,"*operations":{rotate:0,mirror:!1,flip:!1},"*imageBox":{x:0,y:0,width:0,height:0},"*cropBox":{x:0,y:0,width:0,height:0}}),e._commitDebounced=W(e._commit.bind((0,i.Z)(e)),300),e._handleResizeThrottled=Mi(e._handleResize.bind((0,i.Z)(e)),100),e._imageSize={width:0,height:0},e}return(0,d.Z)(n,[{key:"_handleResize",value:function(){this.isConnected&&this._isActive&&(this._initCanvas(),this._syncTransformations(),this._alignImage(),this._alignCrop(),this._draw())}},{key:"_syncTransformations",value:function(){var e=function(e,t){var n,r={},i=(0,a.Z)(t);try{for(i.s();!(n=i.n()).done;){var o=n.value,s=e[o];(e.hasOwnProperty(o)||void 0!==s)&&(r[o]=s)}}catch(Yo){i.e(Yo)}finally{i.f()}return r}(this.$["*editorTransformations"],Object.keys(this.$["*operations"])),t=(0,h.Z)((0,h.Z)({},this.$["*operations"]),e);this.$["*operations"]=t}},{key:"_initCanvas",value:function(){var e=this.ref["canvas-el"],t=e.getContext("2d"),n=this.offsetWidth,r=this.offsetHeight,i=window.devicePixelRatio;e.style.width="".concat(n,"px"),e.style.height="".concat(r,"px"),e.width=n*i,e.height=r*i,null===t||void 0===t||t.scale(i,i),this._canvas=e,this._ctx=t}},{key:"_alignImage",value:function(){if(this._isActive&&this.$.image){var e,t=this.$.image,n=this.$["*padding"],r=this.$["*operations"].rotate,i=this.offsetWidth,o=this.offsetHeight,a=Cn({width:t.naturalWidth,height:t.naturalHeight},r);if(a.width>i-2*n||a.height>o-2*n){var s=a.width/a.height;if(s>i/o){var l=i-2*n,c=l/s;e={x:0+n,y:n+(o-2*n)/2-c/2,width:l,height:c}}else{var u=o-2*n,d=u*s;e={x:n+(i-2*n)/2-d/2,y:0+n,width:d,height:u}}}else{var h=a.width,f=a.height;e={x:n+(i-2*n)/2-h/2,y:n+(o-2*n)/2-f/2,width:h,height:f}}this.$["*imageBox"]=Zn(e)}}},{key:"_alignCrop",value:function(){var e,t=this.$["*cropBox"],n=this.$["*imageBox"],r=this.$["*operations"].rotate,i=this.$["*editorTransformations"].crop,o=this.$["*imageBox"],a=o.width,s=o.x,l=o.y;if(i){var c=(0,ae.Z)(i.dimensions,2),u=c[0],d=c[1],h=(0,ae.Z)(i.coords,2),f=h[0],v=h[1],p=a/Cn(this._imageSize,r).width;t=kn(Zn({x:s+f*p,y:l+v*p,width:u*p,height:d*p}),this.$["*imageBox"])}var m,g,y,b,_=null===(e=this.$["*cropPresetList"])||void 0===e?void 0:e[0],w=_?_.width/_.height:void 0;if(b=n,!((y=t).x>=b.x&&y.y>=b.y&&y.x+y.width<=b.x+b.width&&y.y+y.height<=b.y+b.height)||w&&(m=t,g=w,!(Math.abs(m.width/m.height-g)<.1))){var k=n.width/n.height,x=n.width,C=n.height;w&&(k>w?x=Math.min(n.height*w,n.width):C=Math.min(n.width/w,n.height)),t={x:n.x+n.width/2-x/2,y:n.y+n.height/2-C/2,width:x,height:C}}this.$["*cropBox"]=kn(Zn(t),this.$["*imageBox"])}},{key:"_drawImage",value:function(){var e=this._ctx;if(e){var t=this.$.image,n=this.$["*imageBox"],r=this.$["*operations"],i=r.mirror,o=r.flip,a=r.rotate,s=Cn({width:n.width,height:n.height},a);e.save(),e.translate(n.x+n.width/2,n.y+n.height/2),e.rotate(a*Math.PI*-1/180),e.scale(i?-1:1,o?-1:1),e.drawImage(t,-s.width/2,-s.height/2,s.width,s.height),e.restore()}}},{key:"_draw",value:function(){if(this._isActive&&this.$.image&&this._canvas&&this._ctx){var e=this._canvas;this._ctx.clearRect(0,0,e.width,e.height),this._drawImage()}}},{key:"_animateIn",value:function(e){var t=this,n=e.fromViewer;this.$.image&&(this.ref["frame-el"].toggleThumbs(!0),this._transitionToImage(),setTimeout((function(){t.className=ji({active_from_viewer:n,active_from_editor:!n,inactive_to_editor:!1})})))}},{key:"_getCropDimensions",value:function(){var e=this.$["*cropBox"],t=this.$["*imageBox"],n=this.$["*operations"].rotate,r=t.width,i=t.height,o=Cn(this._imageSize,n),a=o.width,s=o.height,l=e.width,c=e.height,u=r/a,d=i/s;return[En(Math.round(l/u),1,a),En(Math.round(c/d),1,s)]}},{key:"_getCropTransformation",value:function(){var e=this.$["*cropBox"],t=this.$["*imageBox"],n=this.$["*operations"].rotate,r=t.width,i=t.height,o=t.x,a=t.y,s=Cn(this._imageSize,n),l=s.width,u=s.height,d=e.x,h=e.y,f=r/l,v=i/u,p=this._getCropDimensions(),m={dimensions:p,coords:[En(Math.round((d-o)/f),0,l-p[0]),En(Math.round((h-a)/v),0,u-p[1])]};if(function(e){return!e||[function(e){var t=e.dimensions,n=e.coords;return[].concat((0,c.Z)(t),(0,c.Z)(n)).every((function(e){return Number.isInteger(e)&&Number.isFinite(e)}))},function(e){var t=e.dimensions,n=e.coords;return t.every((function(e){return e>0}))&&n.every((function(e){return e>=0}))}].every((function(t){return t(e)}))}(m)){if(p[0]!==l||p[1]!==u)return m}else console.error("Cropper is trying to create invalid crop object",{payload:m})}},{key:"_commit",value:function(){if(this.isConnected&&this._imageSize){var e=this.$["*operations"],t=e.rotate,n=e.mirror,r=e.flip,i=this._getCropTransformation(),o=this.$["*editorTransformations"],a=(0,h.Z)((0,h.Z)({},o),{},{crop:i,rotate:t,mirror:n,flip:r});this.$["*editorTransformations"]=a}}},{key:"setValue",value:function(e,t){this.$["*operations"]=(0,h.Z)((0,h.Z)({},this.$["*operations"]),{},(0,q.Z)({},e,t)),this._isActive&&(this._alignImage(),this._alignCrop(),this._draw())}},{key:"getValue",value:function(e){return this.$["*operations"][e]}},{key:"activate",value:function(){var e=(0,r.Z)(f.mark((function e(t){var n,r,i=this,o=arguments;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:{},r=n.fromViewer,!this._isActive){e.next=3;break}return e.abrupt("return");case 3:return this._isActive=!0,this._imageSize=t,this.removeEventListener("transitionend",this._reset),e.prev=6,e.next=9,this._waitForImage(this.$["*originalUrl"],this.$["*editorTransformations"]);case 9:this.$.image=e.sent,this._syncTransformations(),this._animateIn({fromViewer:r}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(6),console.error("Failed to activate cropper",{error:e.t0});case 17:this._observer=new ResizeObserver((function(e){var t=(0,ae.Z)(e,1)[0];t.contentRect.width>0&&t.contentRect.height>0&&i._isActive&&i.$.image&&i._handleResizeThrottled()})),this._observer.observe(this);case 19:case"end":return e.stop()}}),e,this,[[6,14]])})));return function(t){return e.apply(this,arguments)}}()},{key:"deactivate",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.reset,r=void 0!==n&&n;this._isActive&&(!r&&this._commit(),this._isActive=!1,this._transitionToCrop(),this.className=ji({active_from_viewer:!1,active_from_editor:!1,inactive_to_editor:!0}),this.ref["frame-el"].toggleThumbs(!1),this.addEventListener("transitionend",this._reset,{once:!0}),null===(e=this._observer)||void 0===e||e.disconnect())}},{key:"_transitionToCrop",value:function(){var e=this._getCropDimensions(),t=Math.min(this.offsetWidth,e[0])/this.$["*cropBox"].width,n=Math.min(this.offsetHeight,e[1])/this.$["*cropBox"].height,r=Math.min(t,n),i=this.$["*cropBox"].x+this.$["*cropBox"].width/2,o=this.$["*cropBox"].y+this.$["*cropBox"].height/2;this.style.transform="scale(".concat(r,") translate(").concat((this.offsetWidth/2-i)/r,"px, ").concat((this.offsetHeight/2-o)/r,"px)"),this.style.transformOrigin="".concat(i,"px ").concat(o,"px")}},{key:"_transitionToImage",value:function(){var e=this.$["*cropBox"].x+this.$["*cropBox"].width/2,t=this.$["*cropBox"].y+this.$["*cropBox"].height/2;this.style.transform="scale(1)",this.style.transformOrigin="".concat(e,"px ").concat(t,"px")}},{key:"_reset",value:function(){this._isActive||(this.$.image=null)}},{key:"_waitForImage",value:function(e,t){var n=this,r=this.offsetWidth;t=(0,h.Z)((0,h.Z)({},t),{},{crop:void 0,rotate:void 0,flip:void 0,mirror:void 0});var i=this.proxyUrl(oo(e,r,t)),o=to(i),a=o.promise,s=o.cancel,l=o.image,c=this._handleImageLoading(i);return l.addEventListener("load",c,{once:!0}),l.addEventListener("error",c,{once:!0}),this._cancelPreload&&this._cancelPreload(),this._cancelPreload=s,a.then((function(){return l})).catch((function(e){return console.error("Failed to load image",{error:e}),n.$["*networkProblems"]=!0,Promise.resolve(l)}))}},{key:"_handleImageLoading",value:function(e){var t=this,n="crop",r=this.$["*loadingOperations"];return r.get(n)||r.set(n,new Map),r.get(n).get(e)||(r.set(n,r.get(n).set(e,!0)),this.$["*loadingOperations"]=r),function(){var i;null!==r&&void 0!==r&&null!==(i=r.get(n))&&void 0!==i&&i.has(e)&&(r.get(n).delete(e),t.$["*loadingOperations"]=r)}}},{key:"initCallback",value:function(){var e=this;H((0,z.Z)(n.prototype),"initCallback",this).call(this),this.sub("*imageBox",(function(){e._draw()})),this.sub("*cropBox",(function(){e.$.image&&e._commitDebounced()})),this.sub("*cropPresetList",(function(){e._alignCrop()})),setTimeout((function(){e.sub("*networkProblems",(function(t){t||e._isActive&&e.activate(e._imageSize,{fromViewer:!1})}))}),0)}},{key:"destroyCallback",value:function(){var e;H((0,z.Z)(n.prototype),"destroyCallback",this).call(this),null===(e=this._observer)||void 0===e||e.disconnect()}}]),n}(un);function so(e,t,n){for(var r=Array(n),i=--n;i>=0;i--)r[i]=Math.ceil((i*t+(n-i)*e)/n);return r}function lo(e,t,n){var r,i=(r=e,r.reduce((function(e,t,n){return n<r.length-1?[].concat((0,c.Z)(e),[[t,r[n+1]]]):e}),[])).find((function(e){var n=(0,ae.Z)(e,2),r=n[0],i=n[1];return r<=t&&t<=i}));return e.map((function(e){var r=Math.abs(i[0]-i[1]),o=Math.abs(t-i[0])/r;return i[0]===e?t>n?1:1-o:i[1]===e?t>=n?o:1:0}))}function co(e,t){var n=an[e].keypointsNumber,r=an[e],i=r.range,o=r.zero;return(0,c.Z)(new Set([].concat((0,c.Z)(so(i[0],o,n+1)),(0,c.Z)(so(o,i[1],n+1)),[o,t]))).sort((function(e,t){return e-t}))}ao.template='\n  <canvas class="canvas" ref="canvas-el"></canvas>\n  <lr-crop-frame ref="frame-el"></lr-crop-frame>\n';var uo=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.call(this))._isActive=!1,e._hidden=!0,e._addKeypointDebounced=W(e._addKeypoint.bind((0,i.Z)(e)),600),e.classList.add("inactive_to_cropper"),e}return(0,d.Z)(n,[{key:"_handleImageLoading",value:function(e){var t=this,n=this._operation,r=this.$["*loadingOperations"];return r.get(n)||r.set(n,new Map),r.get(n).get(e)||(r.set(n,r.get(n).set(e,!0)),this.$["*loadingOperations"]=r),function(){var i;null!==r&&void 0!==r&&null!==(i=r.get(n))&&void 0!==i&&i.has(e)&&(r.get(n).delete(e),t.$["*loadingOperations"]=r)}}},{key:"_flush",value:function(){var e=this;window.cancelAnimationFrame(this._raf),this._raf=window.requestAnimationFrame((function(){var t,n=(0,a.Z)(e._keypoints);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.image;i&&(i.style.opacity=r.opacity.toString(),i.style.zIndex=r.zIndex.toString())}}catch(Yo){n.e(Yo)}finally{n.f()}}))}},{key:"_imageSrc",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url,n=void 0===t?this._url:t,r=e.filter,i=void 0===r?this._filter:r,o=e.operation,a=e.value,s=(0,h.Z)({},this._transformations);o&&(s[o]=i?{name:i,amount:a}:a);var l=this.offsetWidth;return this.proxyUrl(oo(n,l,s))}},{key:"_constructKeypoint",value:function(e,t){return{src:this._imageSrc({operation:e,value:t}),image:null,opacity:0,zIndex:0,value:t}}},{key:"_isSame",value:function(e,t){return this._operation===e&&this._filter===t}},{key:"_addKeypoint",value:function(e,t,n){var r=this,i=function(){return!r._isSame(e,t)||r._value!==n||!!r._keypoints.find((function(e){return e.value===n}))};if(!i()){var o=this._constructKeypoint(e,n),a=new Image;a.src=o.src;var s=this._handleImageLoading(o.src);a.addEventListener("load",s,{once:!0}),a.addEventListener("error",s,{once:!0}),o.image=a,a.classList.add("fader-image"),a.addEventListener("load",(function(){if(!i()){var t=r._keypoints,s=t.findIndex((function(e){return e.value>n})),l=s<t.length?t[s].image:null;!r._container||l&&!r._container.contains(l)||(t.splice(s,0,o),r._container.insertBefore(a,l),r._update(e,n))}}),{once:!0}),a.addEventListener("error",(function(){r.$["*networkProblems"]=!0}),{once:!0})}}},{key:"set",value:function(e){e="string"===typeof e?parseInt(e,10):e,this._update(this._operation,e),this._addKeypointDebounced(this._operation,this._filter,e)}},{key:"_update",value:function(e,t){this._operation=e,this._value=t;for(var n=an[e].zero,r=this._keypoints.map((function(e){return e.value})),i=lo(r,t,n),o=function(e,t){return e.map((function(n,r){return n<t?e.length-r:r}))}(r,n),a=0,s=Object.entries(this._keypoints);a<s.length;a++){var l=(0,ae.Z)(s[a],2),c=l[0],u=l[1];u.opacity=i[c],u.zIndex=o[c]}this._flush()}},{key:"_createPreviewImage",value:function(){var e=new Image;return e.classList.add("fader-image","fader-image--preview"),e.style.opacity="0",e}},{key:"_initNodes",value:function(){var e=(0,r.Z)(f.mark((function e(){var t,n,r,i,o,a,s,l,c,u=this;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.createDocumentFragment(),this._previewImage=this._previewImage||this._createPreviewImage(),!this.contains(this._previewImage)&&t.appendChild(this._previewImage),n=document.createElement("div"),t.appendChild(n),r=this._keypoints.map((function(e){return e.src})),i=no(r),o=i.images,a=i.promise,s=i.cancel,o.forEach((function(e){var t=u._handleImageLoading(e.src);e.addEventListener("load",t),e.addEventListener("error",t)})),this._cancelLastImages=function(){s(),u._cancelLastImages=void 0},l=this._operation,c=this._filter,e.next=13,a;case 13:this._isActive&&this._isSame(l,c)&&(this._container&&this._container.remove(),this._container=n,this._keypoints.forEach((function(e,t){var n=o[t];n.classList.add("fader-image"),e.image=n,u._container.appendChild(n)})),this.appendChild(t),this._flush());case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setTransformations",value:function(e){var t=this;if(this._transformations=e,this._previewImage){var n=this._imageSrc(),r=this._handleImageLoading(n);this._previewImage.src=n,this._previewImage.addEventListener("load",r,{once:!0}),this._previewImage.addEventListener("error",r,{once:!0}),this._previewImage.style.opacity="1",this._previewImage.addEventListener("error",(function(){t.$["*networkProblems"]=!0}),{once:!0})}}},{key:"preload",value:function(e){var t=this,n=e.url,r=e.filter,i=e.operation,o=e.value;this._cancelBatchPreload&&this._cancelBatchPreload();var a=no(co(i,o).map((function(e){return t._imageSrc({url:n,filter:r,operation:i,value:e})}))).cancel;this._cancelBatchPreload=a}},{key:"_setOriginalSrc",value:function(e){var t=this,n=this._previewImage||this._createPreviewImage();if(!this.contains(n)&&this.appendChild(n),this._previewImage=n,n.src===e)return n.style.opacity="1",n.style.transform="scale(1)",void(this.className=ji({active_from_viewer:this._fromViewer,active_from_cropper:!this._fromViewer,inactive_to_cropper:!1}));n.style.opacity="0";var r=this._handleImageLoading(e);n.addEventListener("error",r,{once:!0}),n.src=e,n.addEventListener("load",(function(){r(),n&&(n.style.opacity="1",n.style.transform="scale(1)",t.className=ji({active_from_viewer:t._fromViewer,active_from_cropper:!t._fromViewer,inactive_to_cropper:!1}))}),{once:!0}),n.addEventListener("error",(function(){t.$["*networkProblems"]=!0}),{once:!0})}},{key:"activate",value:function(e){var t=this,n=e.url,r=e.operation,i=e.value,o=e.filter,a=e.fromViewer;if(this._isActive=!0,this._hidden=!1,this._url=n,this._operation=r||"initial",this._value=i,this._filter=o,this._fromViewer=a,"number"!==typeof i&&!o){var s=this._imageSrc({operation:r,value:i});return this._setOriginalSrc(s),void(this._container&&this._container.remove())}this._keypoints=co(r,i).map((function(e){return t._constructKeypoint(r,e)})),this._update(r,i),this._initNodes()}},{key:"deactivate",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.hide,r=void 0===n||n;this._isActive=!1,this._cancelLastImages&&this._cancelLastImages(),this._cancelBatchPreload&&this._cancelBatchPreload(),r&&!this._hidden?(this._hidden=!0,this._previewImage&&(this._previewImage.style.transform="scale(1)"),this.className=ji({active_from_viewer:!1,active_from_cropper:!1,inactive_to_cropper:!0}),this.addEventListener("transitionend",(function(){e._container&&e._container.remove()}),{once:!0})):this._container&&this._container.remove()}}]),n}(un),ho=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,u.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"initCallback",value:function(){var e=this;H((0,z.Z)(n.prototype),"initCallback",this).call(this),this.addEventListener("wheel",(function(t){t.preventDefault();var n=t.deltaY,r=t.deltaX;Math.abs(r)>1?e.scrollLeft+=r:e.scrollLeft+=n}))}}]),n}(un);ho.template=" <slot></slot> ";var fo=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;return(0,u.Z)(this,n),e=t.call(this),(0,q.Z)((0,i.Z)(e),"_updateInfoTooltip",W((function(){var t,n=e.$["*editorTransformations"],r=e.$["*currentOperation"],i="",o=!1;if(e.$["*tabId"]===en.FILTERS)if(o=!0,e.$["*currentFilter"]&&(null===n||void 0===n||null===(t=n.filter)||void 0===t?void 0:t.name)===e.$["*currentFilter"]){var a,s=(null===n||void 0===n||null===(a=n.filter)||void 0===a?void 0:a.amount)||100;i=e.$["*currentFilter"]+" "+s}else i=e.l10n(Qi);else if(e.$["*tabId"]===en.TUNING&&r){o=!0;var l=(null===n||void 0===n?void 0:n[r])||an[r].zero;i=e.l10n(r)+" "+l}o&&(e.$["*operationTooltip"]=i),e.ref["tooltip-el"].classList.toggle("info-tooltip_visible",o)}),0)),e.init$=(0,h.Z)((0,h.Z)({},e.init$),{},{"*sliderEl":null,"*loadingOperations":new Map,"*showSlider":!1,"*currentFilter":Qi,"*currentOperation":null,showLoader:!1,filters:rn,colorOperations:nn,cropOperations:on,"*operationTooltip":null,"presence.mainToolbar":!0,"presence.subToolbar":!1,"presence.tabToggles":!0,"presence.tabContent.crop":!1,"presence.tabContent.tuning":!1,"presence.tabContent.filters":!1,"presence.tabToggle.crop":!0,"presence.tabToggle.tuning":!0,"presence.tabToggle.filters":!0,"presence.subTopToolbarStyles":{hidden:"sub-toolbar--top-hidden",visible:"sub-toolbar--visible"},"presence.subBottomToolbarStyles":{hidden:"sub-toolbar--bottom-hidden",visible:"sub-toolbar--visible"},"presence.tabContentStyles":{hidden:"tab-content--hidden",visible:"tab-content--visible"},"presence.tabToggleStyles":{hidden:"tab-toggle--hidden",visible:"tab-toggle--visible"},"presence.tabTogglesStyles":{hidden:"tab-toggles--hidden",visible:"tab-toggles--visible"},"on.cancel":function(){e._cancelPreload&&e._cancelPreload(),e.$["*on.cancel"]()},"on.apply":function(){e.$["*on.apply"](e.$["*editorTransformations"])},"on.applySlider":function(){e.ref["slider-el"].apply(),e._onSliderClose()},"on.cancelSlider":function(){e.ref["slider-el"].cancel(),e._onSliderClose()},"on.clickTab":function(t){var n=t.currentTarget.getAttribute("data-id");n&&e._activateTab(n,{fromViewer:!1})}}),e._debouncedShowLoader=W(e._showLoader.bind((0,i.Z)(e)),500),e}return(0,d.Z)(n,[{key:"_onSliderClose",value:function(){this.$["*showSlider"]=!1,this.$["*tabId"]===en.TUNING&&this.ref["tooltip-el"].classList.toggle("info-tooltip_visible",!1)}},{key:"_createOperationControl",value:function(e){var t=new io;return t.operation=e,t}},{key:"_createFilterControl",value:function(e){var t=new ro;return t.filter=e,t}},{key:"_createToggleControl",value:function(e){var t=new Xi;return t.operation=e,t}},{key:"_renderControlsList",value:function(e){var t=this,n=this.ref["controls-list-".concat(e)],r=document.createDocumentFragment();e===en.CROP?this.$.cropOperations.forEach((function(e){var n=t._createToggleControl(e);r.appendChild(n)})):e===en.FILTERS?[Qi].concat((0,c.Z)(this.$.filters)).forEach((function(e){var n=t._createFilterControl(e);r.appendChild(n)})):e===en.TUNING&&this.$.colorOperations.forEach((function(e){var n=t._createOperationControl(e);r.appendChild(n)})),(0,c.Z)(r.children).forEach((function(e,t){t===r.childNodes.length-1&&e.classList.add("controls-list_last-item")})),n.innerHTML="",n.appendChild(r)}},{key:"_activateTab",value:function(e,t){var n=t.fromViewer;this.$["*tabId"]=e,e===en.CROP?(this.$["*faderEl"].deactivate(),this.$["*cropperEl"].activate(this.$["*imageSize"],{fromViewer:n})):(this.$["*faderEl"].activate({url:this.$["*originalUrl"],fromViewer:n}),this.$["*cropperEl"].deactivate());var r,i=(0,a.Z)(tn);try{for(i.s();!(r=i.n()).done;){var o=r.value,s=o===e;this.ref["tab-toggle-".concat(o)].active=s,s?(this._renderControlsList(e),this._syncTabIndicator()):this._unmountTabControls(o),this.$["presence.tabContent.".concat(o)]=s}}catch(Yo){i.e(Yo)}finally{i.f()}}},{key:"_unmountTabControls",value:function(e){var t=this.ref["controls-list-".concat(e)];t&&(t.innerHTML="")}},{key:"_syncTabIndicator",value:function(){var e=this.ref["tab-toggle-".concat(this.$["*tabId"])];this.ref["tabs-indicator"].style.transform="translateX(".concat(e.offsetLeft,"px)")}},{key:"_preloadEditedImage",value:function(){var e=this;if(this.$["*imgContainerEl"]&&this.$["*originalUrl"]){var t=this.$["*imgContainerEl"].offsetWidth,n=this.proxyUrl(oo(this.$["*originalUrl"],t,this.$["*editorTransformations"]));this._cancelPreload&&this._cancelPreload();var r=no([n]).cancel;this._cancelPreload=function(){r(),e._cancelPreload=void 0}}}},{key:"_showLoader",value:function(e){this.$.showLoader=e}},{key:"initCallback",value:function(){var e=this;H((0,z.Z)(n.prototype),"initCallback",this).call(this),this.$["*sliderEl"]=this.ref["slider-el"],this.sub("*imageSize",(function(t){t&&setTimeout((function(){e._activateTab(e.$["*tabId"],{fromViewer:!0})}),0)})),this.sub("*editorTransformations",(function(t){var n,r=null===t||void 0===t||null===(n=t.filter)||void 0===n?void 0:n.name;e.$["*currentFilter"]!==r&&(e.$["*currentFilter"]=r)})),this.sub("*currentFilter",(function(){e._updateInfoTooltip()})),this.sub("*currentOperation",(function(){e._updateInfoTooltip()})),this.sub("*tabId",(function(){e._updateInfoTooltip()})),this.sub("*originalUrl",(function(){e.$["*faderEl"]&&e.$["*faderEl"].deactivate()})),this.sub("*editorTransformations",(function(t){e._preloadEditedImage(),e.$["*faderEl"]&&e.$["*faderEl"].setTransformations(t)})),this.sub("*loadingOperations",(function(t){var n,r=!1,i=(0,a.Z)(t.entries());try{for(i.s();!(n=i.n()).done;){var o=(0,ae.Z)(n.value,2)[1];if(r)break;var s,l=(0,a.Z)(o.entries());try{for(l.s();!(s=l.n()).done;){if((0,ae.Z)(s.value,2)[1]){r=!0;break}}}catch(Yo){l.e(Yo)}finally{l.f()}}}catch(Yo){i.e(Yo)}finally{i.f()}e._debouncedShowLoader(r)})),this.sub("*showSlider",(function(t){e.$["presence.subToolbar"]=t,e.$["presence.mainToolbar"]=!t})),this.sub("*tabList",(function(t){e.$["presence.tabToggles"]=t.length>1;var n,r=(0,a.Z)(tn);try{for(r.s();!(n=r.n()).done;){var i=n.value;e.$["presence.tabToggle.".concat(i)]=t.includes(i),e.ref["tab-toggle-".concat(i)].style.gridColumn=t.indexOf(i)+1}}catch(Yo){r.e(Yo)}finally{r.f()}t.includes(e.$["*tabId"])||e._activateTab(t[0],{fromViewer:!1})})),this._updateInfoTooltip()}}]),n}(un);fo.template='\n  <lr-line-loader-ui set="active: showLoader"></lr-line-loader-ui>\n  <div class="info-tooltip_container">\n    <div class="info-tooltip_wrapper">\n      <div ref="tooltip-el" class="info-tooltip info-tooltip_hidden">{{*operationTooltip}}</div>\n    </div>\n  </div>\n  <div class="toolbar-container">\n    <lr-presence-toggle class="sub-toolbar" set="visible: presence.mainToolbar; styles: presence.subTopToolbarStyles">\n      <div class="tab-content-row">'.concat(tn.map((function(e){return'\n    <lr-presence-toggle class="tab-content" set="visible: presence.tabContent.'.concat(e,'; styles: presence.tabContentStyles">\n      <lr-editor-scroller hidden-scrollbar>\n        <div class="controls-list_align">\n          <div class="controls-list_inner" ref="controls-list-').concat(e,'"></div>\n        </div>\n      </lr-editor-scroller>\n    </lr-presence-toggle>\n  ')})).join(""),'</div>\n      <div class="controls-row">\n        <lr-btn-ui theme="boring" icon="closeMax" set="onclick: on.cancel"> </lr-btn-ui>\n        <lr-presence-toggle class="tab-toggles" set="visible: presence.tabToggles; styles: presence.tabTogglesStyles">\n          <div ref="tabs-indicator" class="tab-toggles_indicator"></div>\n          ').concat(tn.map((function(e){return'\n    <lr-presence-toggle class="tab-toggle" set="visible: presence.tabToggle.'.concat(e,'; styles: presence.tabToggleStyles;">\n      <lr-btn-ui\n        theme="boring"\n        ref="tab-toggle-').concat(e,'"\n        data-id="').concat(e,'"\n        icon="').concat(e,'"\n        tabindex="0"\n        set="onclick: on.clickTab;"\n      >\n      </lr-btn-ui>\n    </lr-presence-toggle>\n  ')})).join(""),'\n        </lr-presence-toggle>\n        <lr-btn-ui theme="primary" icon="done" set="onclick: on.apply"> </lr-btn-ui>\n      </div>\n    </lr-presence-toggle>\n    <lr-presence-toggle class="sub-toolbar" set="visible: presence.subToolbar; styles: presence.subBottomToolbarStyles">\n      <div class="slider">\n        <lr-editor-slider ref="slider-el"></lr-editor-slider>\n      </div>\n      <div class="controls-row">\n        <lr-btn-ui theme="boring" set="onclick: on.cancelSlider;" l10n="@text:cancel"> </lr-btn-ui>\n        <lr-btn-ui theme="primary" set="onclick: on.applySlider;" l10n="@text:apply"> </lr-btn-ui>\n      </div>\n    </lr-presence-toggle>\n  </div>\n');var vo=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.call(this))._iconReversed=!1,e._iconSingle=!1,e._iconHidden=!1,e.init$=(0,h.Z)((0,h.Z)({},e.init$),{},{text:"",icon:"",iconCss:e._iconCss(),theme:null}),e.defineAccessor("active",(function(t){t?e.setAttribute("active",""):e.removeAttribute("active")})),e}return(0,d.Z)(n,[{key:"_iconCss",value:function(){return ji("icon",{icon_left:!this._iconReversed,icon_right:this._iconReversed,icon_hidden:this._iconHidden,icon_single:this._iconSingle})}},{key:"initCallback",value:function(){var e=this;H((0,z.Z)(n.prototype),"initCallback",this).call(this),this.sub("icon",(function(t){e._iconSingle=!e.$.text,e._iconHidden=!t,e.$.iconCss=e._iconCss()})),this.sub("theme",(function(t){"custom"!==t&&(e.className=t)})),this.sub("text",(function(t){e._iconSingle=!1})),this.setAttribute("role","button"),-1===this.tabIndex&&(this.tabIndex=0),this.hasAttribute("theme")||this.setAttribute("theme","default")}},{key:"reverse",set:function(e){this.hasAttribute("reverse")?(this.style.flexDirection="row-reverse",this._iconReversed=!0):(this._iconReversed=!1,this.style.flexDirection=null)}}]),n}(un);vo.bindAttributes({text:"text",icon:"icon",reverse:"reverse",theme:"theme"}),vo.template='\n  <lr-icon set="className: iconCss; @name: icon; @hidden: !icon"></lr-icon>\n  <div class="text">{{text}}</div>\n';var po=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.call(this))._active=!1,e._handleTransitionEndRight=function(){var t=e.ref["line-el"];t.style.transition="initial",t.style.opacity="0",t.style.transform="translateX(-101%)",e._active&&e._start()},e}return(0,d.Z)(n,[{key:"initCallback",value:function(){var e=this;H((0,z.Z)(n.prototype),"initCallback",this).call(this),this.defineAccessor("active",(function(t){"boolean"===typeof t&&(t?e._start():e._stop())}))}},{key:"_start",value:function(){this._active=!0;var e=this.getBoundingClientRect().width,t=this.ref["line-el"];t.style.transition="transform 1s",t.style.opacity="1",t.style.transform="translateX(".concat(e,"px)"),t.addEventListener("transitionend",this._handleTransitionEndRight,{once:!0})}},{key:"_stop",value:function(){this._active=!1}}]),n}(un);po.template='\n  <div class="inner">\n    <div class="line" ref="line-el"></div>\n  </div>\n';var mo="transition",go="visible",yo="hidden",bo=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.call(this))._visible=!1,e._visibleStyle=go,e._hiddenStyle=yo,e._externalTransitions=!1,e.defineAccessor("styles",(function(t){t&&(e._externalTransitions=!0,e._visibleStyle=t.visible,e._hiddenStyle=t.hidden)})),e.defineAccessor("visible",(function(t){"boolean"===typeof t&&(e._visible=t,e._handleVisible())})),e}return(0,d.Z)(n,[{key:"_handleVisible",value:function(){var e;this.style.visibility=this._visible?"inherit":"hidden",function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=zi.apply(void 0,n),o=0,a=Object.keys(i);o<a.length;o++){var s=a[o];e.classList.toggle(s,i[s])}}(this,(e={},(0,q.Z)(e,mo,!this._externalTransitions),(0,q.Z)(e,this._visibleStyle,this._visible),(0,q.Z)(e,this._hiddenStyle,!this._visible),e)),this.setAttribute("aria-hidden",this._visible?"false":"true")}},{key:"initCallback",value:function(){var e=this;H((0,z.Z)(n.prototype),"initCallback",this).call(this),this.setAttribute("hidden",""),this._externalTransitions||this.classList.add(mo),this._handleVisible(),setTimeout((function(){return e.removeAttribute("hidden")}),0)}}]),n}(un);bo.template=" <slot></slot> ";var _o=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;return(0,u.Z)(this,n),e=t.call(this),(0,q.Z)((0,i.Z)(e),"init$",(0,h.Z)((0,h.Z)({},e.init$),{},{disabled:!1,min:0,max:100,onInput:null,onChange:null,defaultValue:null,"on.sliderInput":function(){var t=parseInt(e.ref["input-el"].value,10);e._updateValue(t),e.$.onInput&&e.$.onInput(t)},"on.sliderChange":function(){var t=parseInt(e.ref["input-el"].value,10);e.$.onChange&&e.$.onChange(t)}})),e.setAttribute("with-effects",""),e}return(0,d.Z)(n,[{key:"initCallback",value:function(){var e=this;H((0,z.Z)(n.prototype),"initCallback",this).call(this),this.defineAccessor("disabled",(function(t){e.$.disabled=t})),this.defineAccessor("min",(function(t){e.$.min=t})),this.defineAccessor("max",(function(t){e.$.max=t})),this.defineAccessor("defaultValue",(function(t){e.$.defaultValue=t,e.ref["input-el"].value=t,e._updateValue(t)})),this.defineAccessor("zero",(function(t){e._zero=t})),this.defineAccessor("onInput",(function(t){t&&(e.$.onInput=t)})),this.defineAccessor("onChange",(function(t){t&&(e.$.onChange=t)})),this._updateSteps(),this._observer=new ResizeObserver((function(){e._updateSteps();var t=parseInt(e.ref["input-el"].value,10);e._updateValue(t)})),this._observer.observe(this),this._thumbSize=parseInt(window.getComputedStyle(this).getPropertyValue("--l-thumb-size"),10),setTimeout((function(){var t=parseInt(e.ref["input-el"].value,10);e._updateValue(t)}),0),this.sub("disabled",(function(t){var n=e.ref["input-el"];t?n.setAttribute("disabled","disabled"):n.removeAttribute("disabled")}));var t=this.ref["input-el"];t.addEventListener("focus",(function(){e.style.setProperty("--color-effect","var(--hover-color-rgb)")})),t.addEventListener("blur",(function(){e.style.setProperty("--color-effect","var(--idle-color-rgb)")}))}},{key:"_updateValue",value:function(e){var t=this;this._updateZeroDot(e);var n=this.getBoundingClientRect().width,r=100/(this.$.max-this.$.min)*(e-this.$.min)*(n-this._thumbSize)/100;window.requestAnimationFrame((function(){t.ref["thumb-el"].style.transform="translateX(".concat(r,"px)")}))}},{key:"_updateZeroDot",value:function(e){var t=this;if(this._zeroDotEl){e===this._zero?this._zeroDotEl.style.opacity="0":this._zeroDotEl.style.opacity="0.2";var n=this.getBoundingClientRect().width,r=100/(this.$.max-this.$.min)*(this._zero-this.$.min)*(n-this._thumbSize)/100;window.requestAnimationFrame((function(){t._zeroDotEl.style.transform="translateX(".concat(r,"px)")}))}}},{key:"_updateSteps",value:function(){var e=this.ref["steps-el"],t=e.getBoundingClientRect().width,n=Math.ceil(t/2),r=Math.ceil(n/15)-2;if(this._stepsCount!==r){var i=document.createDocumentFragment(),o=document.createElement("div"),a=document.createElement("div");o.className="minor-step",a.className="border-step",i.appendChild(a);for(var s=0;s<r;s++)i.appendChild(o.cloneNode());i.appendChild(a.cloneNode());for(var l=0;l<r;l++)i.appendChild(o.cloneNode());i.appendChild(a.cloneNode());var c=document.createElement("div");c.className="zero-dot",i.appendChild(c),this._zeroDotEl=c,e.innerHTML="",e.appendChild(i),this._stepsCount=r}}},{key:"destroyCallback",value:function(){var e;null===(e=this._observer)||void 0===e||e.disconnect()}}]),n}(un);_o.template='\n  <div class="steps" ref="steps-el"></div>\n  <div ref="thumb-el" class="thumb"></div>\n  <input\n    class="input"\n    type="range"\n    ref="input-el"\n    tabindex="0"\n    set="oninput: on.sliderInput; onchange: on.sliderChange; @min: min; @max: max; @value: defaultValue;"\n  />\n';var wo=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;return(0,u.Z)(this,n),e=t.call(this),(0,q.Z)((0,i.Z)(e),"couldBeCtxOwner",!0),(0,q.Z)((0,i.Z)(e),"activityType",fn.activities.CLOUD_IMG_EDIT),e.init$=(0,h.Z)((0,h.Z)({},e.init$),{},{cdnUrl:null}),e}return(0,d.Z)(n,[{key:"initCallback",value:function(){var e=this;H((0,z.Z)(n.prototype),"initCallback",this).call(this),this.registerActivity(this.activityType,{onActivate:function(){return e.mountEditor()},onDeactivate:function(){return e.unmountEditor()}}),this.sub("*focusedEntry",(function(t){t&&(e.entry=t,e.entry.subscribe("cdnUrl",(function(t){t&&(e.$.cdnUrl=t)})))})),this.subConfigValue("cropPreset",(function(t){e._instance&&e._instance.getAttribute("crop-preset")!==t&&e._instance.setAttribute("crop-preset",t)})),this.subConfigValue("cloudImageEditorTabs",(function(t){e._instance&&e._instance.getAttribute("tabs")!==t&&e._instance.setAttribute("tabs",t)}))}},{key:"handleApply",value:function(e){if(this.entry){var t=e.detail;this.entry.setMultipleValues({cdnUrl:t.cdnUrl,cdnUrlModifiers:t.cdnUrlModifiers}),this.historyBack()}}},{key:"handleCancel",value:function(){this.historyBack()}},{key:"mountEditor",value:function(){var e=this,t=new Ki,n=this.$.cdnUrl,r=this.cfg.cropPreset,i=this.cfg.cloudImageEditorTabs;t.setAttribute("ctx-name",this.ctxName),t.setAttribute("cdn-url",n),r&&t.setAttribute("crop-preset",r),i&&t.setAttribute("tabs",i),t.addEventListener("apply",(function(t){var n=t;e.handleApply(n),e.debugPrint('editor event "apply"',n.detail)})),t.addEventListener("cancel",(function(t){var n=t;e.handleCancel(),e.debugPrint('editor event "cancel"',n.detail)})),t.addEventListener("change",(function(t){var n=t;e.debugPrint('editor event "change"',n.detail)})),this.innerHTML="",this.appendChild(t),this._mounted=!0,this._instance=t}},{key:"unmountEditor",value:function(){this._instance=void 0,this.innerHTML=""}}]),n}(tr),ko=function(e){return e.replace(/[\\-\\[]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},xo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"i",n=e.split("*").map(ko);return new RegExp("^"+n.join(".+")+"$",t)};function Co(e){var t=e.textColor,n=e.backgroundColor,r=e.linkColor,i=e.linkColorHover,o=e.shadeColor,a="solid 1px ".concat(o);return function(e){var t=Object.keys(e).reduce((function(t,n){var r=e[n],i=Object.keys(r).reduce((function(e,t){var n=r[t];return e+"".concat(t,": ").concat(n,";")}),"");return t+"".concat(n,"{").concat(i,"}")}),"");return t}({body:{color:t,"background-color":n},".side-bar":{background:"inherit","border-right":a},".main-content":{background:"inherit"},".main-content-header":{background:"inherit"},".main-content-footer":{background:"inherit"},".list-table-row":{color:"inherit"},".list-table-row:hover":{background:o},".list-table-row .list-table-cell-a, .list-table-row .list-table-cell-b":{"border-top":a},".list-table-body .list-items":{"border-bottom":a},".bread-crumbs a":{color:r},".bread-crumbs a:hover":{color:i},".main-content.loading":{background:"".concat(n," url(/static/images/loading_spinner.gif) center no-repeat"),"background-size":"25px 25px"},".list-icons-item":{"background-color":o},".source-gdrive .side-bar-menu a, .source-gphotos .side-bar-menu a":{color:r},".source-gdrive .side-bar-menu a, .source-gphotos .side-bar-menu a:hover":{color:i},".side-bar-menu a":{color:r},".side-bar-menu a:hover":{color:i},".source-gdrive .side-bar-menu .current, .source-gdrive .side-bar-menu a:hover, .source-gphotos .side-bar-menu .current, .source-gphotos .side-bar-menu a:hover":{color:i},".source-vk .side-bar-menu a":{color:r},".source-vk .side-bar-menu a:hover":{color:i,background:"none"}})}var Ao={};window.addEventListener("message",(function(e){var t,n;try{n=JSON.parse(e.data)}catch(Yo){return}if((null===(t=n)||void 0===t?void 0:t.type)in Ao){var r,i=Ao[n.type],o=(0,a.Z)(i);try{for(o.s();!(r=o.n()).done;){var s=(0,ae.Z)(r.value,2),l=s[0],c=s[1];e.source===l&&c(n)}}catch(Yo){o.e(Yo)}finally{o.f()}}}));var Zo=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;return(0,u.Z)(this,n),e=t.call(this),(0,q.Z)((0,i.Z)(e),"couldBeCtxOwner",!0),(0,q.Z)((0,i.Z)(e),"activityType",fn.activities.EXTERNAL),(0,q.Z)((0,i.Z)(e),"_iframe",null),e.init$=(0,h.Z)((0,h.Z)({},e.init$),{},{activityIcon:"",activityCaption:"",selectedList:[],counter:0,multiple:!1,onDone:function(){var t,n=(0,a.Z)(e.$.selectedList);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=e.extractUrlFromMessage(r),o=r.filename,s=e.activityParams.externalSourceType;e.addFileFromUrl(i,{fileName:o,source:s})}}catch(Yo){n.e(Yo)}finally{n.f()}e.$["*currentActivity"]=fn.activities.UPLOAD_LIST},onCancel:function(){e.historyBack()}}),e}return(0,d.Z)(n,[{key:"initCallback",value:function(){var e=this;H((0,z.Z)(n.prototype),"initCallback",this).call(this),this.registerActivity(this.activityType,{onActivate:function(){var t=e.activityParams.externalSourceType;e.set$({activityCaption:"".concat(null===t||void 0===t?void 0:t[0].toUpperCase()).concat(null===t||void 0===t?void 0:t.slice(1)),activityIcon:t}),e.mountIframe()}}),this.sub("*currentActivity",(function(t){t!==e.activityType&&e.unmountIframe()})),this.sub("selectedList",(function(t){e.$.counter=t.length})),this.subConfigValue("multiple",(function(t){e.$.multiple=t}))}},{key:"extractUrlFromMessage",value:function(e){if(e.alternatives){var t,n=Ht(this.cfg.externalSourcesPreferredTypes),r=(0,a.Z)(n);try{for(r.s();!(t=r.n()).done;)for(var i=t.value,o=xo(i),s=0,l=Object.entries(e.alternatives);s<l.length;s++){var c=(0,ae.Z)(l[s],2),u=c[0],d=c[1];if(o.test(u))return d}}catch(Yo){r.e(Yo)}finally{r.f()}}return e.url}},{key:"sendMessage",value:function(e){var t,n;null===(t=this._iframe)||void 0===t||null===(n=t.contentWindow)||void 0===n||n.postMessage(JSON.stringify(e),"*")}},{key:"handleFileSelected",value:function(){var e=(0,r.Z)(f.mark((function e(t){return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.$.multiple||!this.$.selectedList.length){e.next=2;break}return e.abrupt("return");case 2:this.$.selectedList=[].concat((0,c.Z)(this.$.selectedList),[t]),this.$.multiple||this.$.onDone();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleIframeLoad",value:function(){this.applyStyles()}},{key:"getCssValue",value:function(e){return window.getComputedStyle(this).getPropertyValue(e).trim()}},{key:"applyStyles",value:function(){var e={backgroundColor:this.getCssValue("--clr-background-light"),textColor:this.getCssValue("--clr-txt"),shadeColor:this.getCssValue("--clr-shade-lv1"),linkColor:"#157cfc",linkColorHover:"#3891ff"};this.sendMessage({type:"embed-css",style:Co(e)})}},{key:"remoteUrl",value:function(){var e,t,n=this.cfg,r=n.pubkey,i=n.remoteTabSessionKey,o=n.socialBaseUrl,a=this.activityParams.externalSourceType,s={lang:(null===(e=this.l10n("social-source-lang"))||void 0===e||null===(t=e.split("-"))||void 0===t?void 0:t[0])||"en",public_key:r,images_only:(!1).toString(),pass_window_open:!1,session_key:i},l=new URL("/window3/".concat(a),o);return l.search=function(e){for(var t=[],n=0,r=Object.entries(e);n<r.length;n++){var i=(0,ae.Z)(r[n],2),o=i[0],a=i[1];void 0===a||null===a||"string"===typeof a&&0===a.length||t.push("".concat(o,"=").concat(encodeURIComponent(a)))}return t.join("&")}(s),l.toString()}},{key:"mountIframe",value:function(){var e,t,n,r=N({tag:"iframe",attributes:{src:this.remoteUrl(),marginheight:0,marginwidth:0,frameborder:0,allowTransparency:!0}});r.addEventListener("load",this.handleIframeLoad.bind(this)),this.ref.iframeWrapper.innerHTML="",this.ref.iframeWrapper.appendChild(r),e="file-selected",t=r.contentWindow,n=this.handleFileSelected.bind(this),e in Ao||(Ao[e]=[]),Ao[e].push([t,n]),this._iframe=r,this.$.selectedList=[]}},{key:"unmountIframe",value:function(){var e,t;this._iframe&&(e="file-selected",t=this._iframe.contentWindow,e in Ao&&(Ao[e]=Ao[e].filter((function(e){return e[0]!==t})))),this.ref.iframeWrapper.innerHTML="",this._iframe=null,this.$.selectedList=[],this.$.counter=0}}]),n}(tr);Zo.template='\n  <lr-activity-header>\n    <button type="button" class="mini-btn" set="onclick: *historyBack">\n      <lr-icon name="back"></lr-icon>\n    </button>\n    <div>\n      <lr-icon set="@name: activityIcon"></lr-icon>\n      <span>{{activityCaption}}</span>\n    </div>\n    <button type="button" class="mini-btn close-btn" set="onclick: *historyBack">\n      <lr-icon name="close"></lr-icon>\n    </button>\n  </lr-activity-header>\n  <div class="content">\n    <div ref="iframeWrapper" class="iframe-wrapper"></div>\n    <div class="toolbar">\n      <button type="button" class="cancel-btn secondary-btn" set="onclick: onCancel" l10n="cancel"></button>\n      <div></div>\n      <div set="@hidden: !multiple" class="selected-counter"><span l10n="selected-count"></span>{{counter}}</div>\n      <button type="button" class="done-btn primary-btn" set="onclick: onDone; @disabled: !counter">\n        <lr-icon name="check"></lr-icon>\n      </button>\n    </div>\n  </div>\n';var Eo=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,u.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"setCurrentTab",value:function(e){if(e){var t=(0,c.Z)(this.ref.context.querySelectorAll("[tab-ctx]"));for(var n in t.forEach((function(t){t.getAttribute("tab-ctx")===e?t.removeAttribute("hidden"):t.setAttribute("hidden","")})),this._tabMap)n===e?this._tabMap[n].setAttribute("current",""):this._tabMap[n].removeAttribute("current")}}},{key:"initCallback",value:function(){var e=this;H((0,z.Z)(n.prototype),"initCallback",this).call(this),this._tabMap={},this.defineAccessor("tab-list",(function(t){t&&Ht(t).forEach((function(t){var n=N({tag:"div",attributes:{class:"tab"},properties:{onclick:function(){e.setCurrentTab(t)}}});n.textContent=e.l10n(t),e.ref.row.appendChild(n),e._tabMap[t]=n}))})),this.defineAccessor("default",(function(t){e.setCurrentTab(t)})),this.hasAttribute("default")||this.setCurrentTab(Object.keys(this._tabMap)[0])}}]),n}(un);Eo.bindAttributes({"tab-list":null,default:null}),Eo.template='\n  <div ref="row" class="tabs-row"></div>\n  <div ref="context" class="tabs-context">\n    <slot></slot>\n  </div>\n';var To=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;(0,u.Z)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,q.Z)((0,i.Z)(e),"requireCtxName",!0),e}return(0,d.Z)(n,[{key:"_createValidationInput",value:function(){var e=document.createElement("input");return e.type="text",e.name=this.ctxName,e.required=this.cfg.multipleMin>0,e.tabIndex=-1,R(e,{opacity:0,height:0,width:0}),e}},{key:"initCallback",value:function(){var e=this;H((0,z.Z)(n.prototype),"initCallback",this).call(this),this._validationInputElement=this._createValidationInput(),this.appendChild(this._validationInputElement),this.sub("*collectionState",(function(t){if(e._dynamicInputsContainer||(e._dynamicInputsContainer=document.createElement("div"),e.appendChild(e._dynamicInputsContainer)),!e._validationInputElement){var n=e._createValidationInput();e.appendChild(n),e._validationInputElement=n}if(e._dynamicInputsContainer.innerHTML="","uploading"===t.status||"idle"===t.status)return e._validationInputElement.value="",void e._validationInputElement.setCustomValidity("");if("failed"===t.status){var r,i=null===(r=t.errors[0])||void 0===r?void 0:r.message;return e._validationInputElement.value="",void e._validationInputElement.setCustomValidity(i)}var o=t.group?t.group:null;if(o)return e._validationInputElement.value=o.cdnUrl,void e._validationInputElement.setCustomValidity("");var s=t.allEntries.map((function(e){return e.cdnUrl}));if(!e.cfg.multiple&&1===s.length)return e._validationInputElement.value=s[0],void e._validationInputElement.setCustomValidity("");e._validationInputElement.remove(),e._validationInputElement=null;var l,c=new DocumentFragment,u=(0,a.Z)(s);try{for(u.s();!(l=u.n()).done;){var d=l.value,h=document.createElement("input");h.type="hidden",h.name="".concat(e.ctxName,"[]"),h.value=d,c.appendChild(h)}}catch(Yo){u.e(Yo)}finally{u.f()}e._dynamicInputsContainer.replaceChildren(c)}),!1)}}]),n}(tr),So=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,u.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n)}(fn),Mo=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;(0,u.Z)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,q.Z)((0,i.Z)(e),"init$",(0,h.Z)((0,h.Z)({},e.init$),{},{currentText:"",options:[],selectHtml:"",onSelect:function(t){var n;t.preventDefault(),t.stopPropagation(),e.value=e.ref.select.value,e.$.currentText=(null===(n=e.$.options.find((function(t){return t.value==e.value})))||void 0===n?void 0:n.text)||"",e.dispatchEvent(new Event("change"))}})),e}return(0,d.Z)(n,[{key:"initCallback",value:function(){var e=this;H((0,z.Z)(n.prototype),"initCallback",this).call(this),this.sub("options",(function(t){var n;e.$.currentText=(null===t||void 0===t||null===(n=t[0])||void 0===n?void 0:n.text)||"";var r="";null===t||void 0===t||t.forEach((function(e){r+='<option value="'.concat(e.value,'">').concat(e.text,"</option>")})),e.$.selectHtml=r}))}}]),n}(un);Mo.template='\n  <button>\n    {{currentText}}\n    <lr-icon name="select"></lr-icon>\n    <select ref="select" set="innerHTML: selectHtml; onchange: onSelect"></select>\n  </button>\n';var Io="play",Lo="pause",$o="fullscreen-on",Oo="fullscreen-off",Uo="unmute",Ro="mute",Po="captions",No="captions-off",Fo=function(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()},Bo=function(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},Do=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;(0,u.Z)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,q.Z)((0,i.Z)(e),"init$",(0,h.Z)((0,h.Z)({},e.init$),{},{src:"",ppIcon:Io,fsIcon:$o,volIcon:Uo,capIcon:No,totalTime:"00:00",currentTime:"00:00",progressCssWidth:"0",hasSubtitles:!1,volumeDisabled:!1,volumeValue:0,onPP:function(){e.togglePlay()},onFs:function(){e.toggleFullscreen()},onCap:function(){e.toggleCaptions()},onMute:function(){e.toggleSound()},onVolChange:function(t){var n=parseFloat(t.currentTarget.$.value);e.setVolume(n)},progressClicked:function(t){var n=e.progress.getBoundingClientRect();e._video.currentTime=e._video.duration*(t.offsetX/n.width)}})),e}return(0,d.Z)(n,[{key:"togglePlay",value:function(){this._video.paused||this._video.ended?this._video.play():this._video.pause()}},{key:"toggleFullscreen",value:function(){(document.fullscreenElement||document.webkitFullscreenElement)===this?Bo():Fo(this)}},{key:"toggleCaptions",value:function(){this.$.capIcon===No?(this.$.capIcon=Po,this._video.textTracks[0].mode="showing",window.localStorage.setItem(n.is+":captions","1")):(this.$.capIcon=No,this._video.textTracks[0].mode="hidden",window.localStorage.removeItem(n.is+":captions"))}},{key:"toggleSound",value:function(){this.$.volIcon===Uo?(this.$.volIcon=Ro,this.$.volumeDisabled=!0,this._video.muted=!0):(this.$.volIcon=Uo,this.$.volumeDisabled=!1,this._video.muted=!1)}},{key:"setVolume",value:function(e){window.localStorage.setItem(n.is+":volume",e);var t=e?e/100:0;this._video.volume=t}},{key:"progress",get:function(){return this.ref.progress}},{key:"_getUrl",value:function(e){return e.includes("/")?e:"https://ucarecdn.com/".concat(e,"/")}},{key:"_desc2attrs",value:function(e){var t=[];for(var n in e){var r="src"===n?this._getUrl(e[n]):e[n];t.push("".concat(n,'="').concat(r,'"'))}return t.join(" ")}},{key:"_timeFmt",value:function(e){var t=new Date(1e3*Math.round(e));return[t.getMinutes(),t.getSeconds()].map((function(e){return e<10?"0"+e:e})).join(":")}},{key:"_initTracks",value:function(){(0,c.Z)(this._video.textTracks).forEach((function(e){e.mode="hidden"})),window.localStorage.getItem(n.is+":captions")&&this.toggleCaptions()}},{key:"_castAttributes",value:function(){var e=this,t=["autoplay","loop","muted"];(0,c.Z)(this.attributes).forEach((function(n){t.includes(n.name)&&e._video.setAttribute(n.name,n.value)}))}},{key:"initCallback",value:function(){var e=this;H((0,z.Z)(n.prototype),"initCallback",this).call(this),this._video=this.ref.video,this._castAttributes(),this._video.addEventListener("play",(function(){e.$.ppIcon=Lo,e.setAttribute("playback","")})),this._video.addEventListener("pause",(function(){e.$.ppIcon=Io,e.removeAttribute("playback")})),this.addEventListener("fullscreenchange",(function(t){console.log(t),document.fullscreenElement===e?e.$.fsIcon=Oo:e.$.fsIcon=$o})),this.sub("src",(function(t){if(t){var n=e._getUrl(t);e._video.src=n}})),this.sub("video",function(){var t=(0,r.Z)(f.mark((function t(n){var r,i;return f.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,window.fetch(e._getUrl(n));case 4:return t.next=6,t.sent.json();case 6:(r=t.sent).poster&&(e._video.poster=e._getUrl(r.poster)),i="",null===r||void 0===r||r.sources.forEach((function(t){i+="<source ".concat(e._desc2attrs(t)," />")})),r.tracks&&(r.tracks.forEach((function(t){i+="<track ".concat(e._desc2attrs(t)," />")})),e.$.hasSubtitles=!0),e._video.innerHTML+=i,e._initTracks(),console.log(r);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this._video.addEventListener("loadedmetadata",(function(t){e.$.currentTime=e._timeFmt(e._video.currentTime),e.$.totalTime=e._timeFmt(e._video.duration)})),this._video.addEventListener("timeupdate",(function(t){var n=Math.round(e._video.currentTime/e._video.duration*100);e.$.progressCssWidth=n+"%",e.$.currentTime=e._timeFmt(e._video.currentTime)}));var t=window.localStorage.getItem(n.is+":volume");if(t){var i=parseFloat(t);this.setVolume(i),this.$.volumeValue=i}}}]),n}(un);Do.template='\n  <div class="video-wrapper">\n    <video ref="video" preload="metadata" crossorigin="anonymous"></video>\n  </div>\n\n  <div class="toolbar">\n    <div class="progress" ref="progress" set -onclick="progressClicked">\n      <div class="bar" set -style.width="progressCssWidth"></div>\n    </div>\n\n    <div class="tb-block">\n      <button set -onclick="onPP">\n        <lr-icon set -@name="ppIcon"></lr-icon>\n      </button>\n      <div class="timer">{{currentTime}} / {{totalTime}}</div>\n    </div>\n\n    <div class="tb-block">\n      <button set -onclick="onCap" -@hidden="!hasSubtitles">\n        <lr-icon set -@name="capIcon"></lr-icon>\n      </button>\n\n      <button set -onclick="onMute">\n        <lr-icon set -@name="volIcon"></lr-icon>\n      </button>\n\n      <lr-range type="range" set -onchange="onVolChange" -@disabled="volumeDisabled" -value="volumeValue"> </lr-range>\n\n      <button set -onclick="onFs">\n        <lr-icon set -@name="fsIcon"></lr-icon>\n      </button>\n    </div>\n  </div>\n',Do.bindAttributes({video:"video",src:"src"});var Vo=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,u.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"initCallback",value:function(){var e=this;H((0,z.Z)(n.prototype),"initCallback",this).call(this),this.subConfigValue("removeCopyright",(function(t){e.toggleAttribute("hidden",!!t)}))}}]),n}(un);(0,q.Z)(Vo,"template",'\n    <a\n      href="https://uploadcare.com/?utm_source=copyright&utm_medium=referral&utm_campaign=v4"\n      target="_blank noopener"\n      class="credits"\n      >Powered by Uploadcare</a\n    >\n  ');var zo=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;(0,u.Z)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,q.Z)((0,i.Z)(e),"requireCtxName",!0),(0,q.Z)((0,i.Z)(e),"init$",xt((0,i.Z)(e))),(0,q.Z)((0,i.Z)(e),"_template",null),e}return(0,d.Z)(n,null,[{key:"template",get:function(){return this._template},set:function(e){this._template="<svg width='0' height='0' style='position:absolute'><symbol viewBox='0 0 24 24' id='uc-icon-about' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M11.152 14.12v.1h1.523v-.1c.007-.409.053-.752.138-1.028.086-.277.22-.517.405-.72.188-.202.434-.397.735-.586.32-.191.593-.412.82-.66.232-.249.41-.531.533-.847.125-.32.187-.678.187-1.076 0-.579-.137-1.085-.41-1.518a2.717 2.717 0 0 0-1.14-1.018c-.49-.245-1.062-.367-1.715-.367-.597 0-1.142.114-1.636.34-.49.228-.884.564-1.182 1.008-.299.44-.46.98-.485 1.619h1.62c.024-.377.118-.684.282-.922a1.48 1.48 0 0 1 .617-.532c.25-.114.51-.17.784-.17.301 0 .575.063.82.191.248.124.447.302.597.533.149.23.223.504.223.82 0 .263-.05.502-.149.72a1.91 1.91 0 0 1-.405.574 3.48 3.48 0 0 1-.575.453 4.22 4.22 0 0 0-.847.66c-.234.242-.415.558-.543.949-.125.39-.19.916-.197 1.577Zm.053 3.03c.21.206.46.31.75.31.196 0 .374-.049.534-.144a1.1 1.1 0 0 0 .383-.384c.1-.163.15-.343.15-.538a1 1 0 0 0-.32-.746 1.019 1.019 0 0 0-.746-.314c-.291 0-.542.105-.751.314-.21.206-.314.455-.314.746 0 .295.104.547.314.756ZM24 12c0 6.627-5.373 12-12 12S0 18.627 0 12 5.373 0 12 0s12 5.373 12 12Zm-1.5 0c0 5.799-4.701 10.5-10.5 10.5S1.5 17.799 1.5 12 6.201 1.5 12 1.5 22.5 6.201 22.5 12Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-add' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M12.75 21a.75.75 0 0 1-1.5 0v-8.25H3a.75.75 0 0 1 0-1.5h8.25V3a.75.75 0 0 1 1.5 0v8.25H21a.75.75 0 0 1 0 1.5h-8.25V21Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-arrow-down' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M11.5 23.03a.75.75 0 0 0 .999 0l9.29-8.276a.75.75 0 0 0-.998-1.12l-8.042 7.164V1.53a.75.75 0 0 0-1.5 0v19.267l-8.04-7.163a.75.75 0 0 0-.998 1.12z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-back' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M20.251 12a.75.75 0 0 1-.75.75H6.067l5.72 5.85a.75.75 0 1 1-1.072 1.05L4.136 12.92a1.292 1.292 0 0 1 0-1.842l6.579-6.728a.75.75 0 1 1 1.072 1.048l-5.72 5.851H19.5a.75.75 0 0 1 .75.75Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-badge-error' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M13.6 18.4a1.6 1.6 0 1 1-3.2 0 1.6 1.6 0 0 1 3.2 0zM12 4.5A1.5 1.5 0 0 1 13.5 6v7a1.5 1.5 0 0 1-3 0V6A1.5 1.5 0 0 1 12 4.5z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-badge-success' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='m10.5 18.204 7.6-8.183a1.5 1.5 0 0 0-2.2-2.042l-5.4 5.817-2.4-2.586a1.5 1.5 0 1 0-2.2 2.041l4.6 4.953Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-box' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M1.01 4.148a.75.75 0 0 1 .75.75v4.348a4.437 4.437 0 0 1 2.988-1.153c1.734 0 3.23.992 3.978 2.438a4.478 4.478 0 0 1 3.978-2.438c2.49 0 4.488 2.044 4.488 4.543 0 2.5-1.999 4.544-4.488 4.544a4.478 4.478 0 0 1-3.978-2.438 4.478 4.478 0 0 1-3.978 2.438C2.26 17.18.26 15.135.26 12.636V4.898a.75.75 0 0 1 .75-.75Zm.75 8.488c0 1.692 1.348 3.044 2.988 3.044s2.989-1.352 2.989-3.044c0-1.691-1.349-3.043-2.989-3.043S1.76 10.945 1.76 12.636Zm10.944-3.043c-1.64 0-2.988 1.352-2.988 3.043 0 1.692 1.348 3.044 2.988 3.044s2.988-1.352 2.988-3.044c0-1.69-1.348-3.043-2.988-3.043Zm4.328-1.23a.75.75 0 0 1 1.052.128l2.333 2.983 2.333-2.983a.75.75 0 0 1 1.181.924l-2.562 3.277 2.562 3.276a.75.75 0 1 1-1.181.924l-2.333-2.983-2.333 2.983a.75.75 0 1 1-1.181-.924l2.562-3.276-2.562-3.277a.75.75 0 0 1 .129-1.052Z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-brightness' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M15 10a5 5 0 0 1-5 5m5-5a5 5 0 0 0-5-5m5 5h-5m0 5a5 5 0 0 1 0-10m0 10V5m0 15v-3M2.93 2.929 5.05 5.05M0 10h3m-.07 7.071 2.12-2.121M10 0v3m7.07 14.071-2.12-2.121M20 10h-3m.07-7.071L14.95 5.05m-.626 2.45H10m4.324 5H10'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-camera' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M7.65 2.55a.75.75 0 0 1 .6-.3h7.5a.75.75 0 0 1 .6.3l2.025 2.7H21a3 3 0 0 1 3 3v10.5a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V8.25a3 3 0 0 1 3-3h2.625zm.975 1.2L6.6 6.45a.75.75 0 0 1-.6.3H3a1.5 1.5 0 0 0-1.5 1.5v10.5a1.5 1.5 0 0 0 1.5 1.5h18a1.5 1.5 0 0 0 1.5-1.5V8.25a1.5 1.5 0 0 0-1.5-1.5h-3a.75.75 0 0 1-.6-.3l-2.025-2.7zm3.375 6a3.375 3.375 0 1 0 0 6.75 3.375 3.375 0 0 0 0-6.75zm-4.875 3.375a4.875 4.875 0 1 1 9.75 0 4.875 4.875 0 0 1-9.75 0z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-check' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10zm4.707-11.493L10.8 16.414l-3.507-3.507a1 1 0 1 1 1.414-1.414l2.093 2.093 4.493-4.493a1 1 0 1 1 1.414 1.414z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-close' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M4.604 4.604a.75.75 0 0 1 1.06 0L12 10.939l6.335-6.335a.75.75 0 1 1 1.061 1.06L13.061 12l6.335 6.335a.75.75 0 1 1-1.06 1.061L12 13.061l-6.335 6.335a.75.75 0 0 1-1.061-1.06L10.939 12 4.604 5.665a.75.75 0 0 1 0-1.061z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-closeMax' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='m3 3 14 14m0-14L3 17'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-collapse' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M3.116 12a.75.75 0 0 1 .75-.75h16.268a.75.75 0 0 1 0 1.5H3.866a.75.75 0 0 1-.75-.75Z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-contrast' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M2 10a8 8 0 1 0 16 0 8 8 0 1 0-16 0m8-8v16m8-8h-8m7.598 2.5H10m6.24 2.5H10m7.6-7.5H10M16.242 5H10'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-crop' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M20 14H7.005C6.45 14 6 13.55 6 12.995V0M0 6h13.067c.515 0 .933.418.933.933V20M14.5.4 13 2l1.5 1.6M13 2h2a3 3 0 0 1 3 3v2M5.5 19.6 7 18l-1.5-1.6M7 18H5a3 3 0 0 1-3-3v-2'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-default' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M11.501.392a.75.75 0 0 1 .998 0l6.704 5.972a.75.75 0 0 1-.998 1.12l-5.455-4.86v13.439a.75.75 0 0 1-1.5 0V2.625l-5.454 4.86a.75.75 0 1 1-.998-1.12zM.857 16.73a.75.75 0 0 1 .75.75v4.914h20.786v-4.914a.75.75 0 0 1 1.5 0v5.664a.75.75 0 0 1-.75.75H.857a.75.75 0 0 1-.75-.75v-5.664a.75.75 0 0 1 .75-.75z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-detail' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M5 3c-1.11 0-2 .89-2 2v14c0 1.11.89 2 2 2h14c1.11 0 2-.89 2-2V5c0-1.11-.89-2-2-2H5m0 2h14v14H5V5m2 2v2h10V7H7m0 4v2h10v-2H7m0 4v2h7v-2H7Z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-done' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='m1 10.632 5.684 5.684L19 4'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-dots' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M16 12a2 2 0 0 1 2-2 2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2m-6 0a2 2 0 0 1 2-2 2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2m-6 0a2 2 0 0 1 2-2 2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-dropbox' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M6.019 1.92a.75.75 0 0 1 .806 0L12 5.219l5.176-3.297a.75.75 0 0 1 .806 0l5.577 3.553a.75.75 0 0 1 0 1.265l-4.574 2.914 4.574 2.914a.75.75 0 0 1 0 1.265l-5.577 3.554a.75.75 0 0 1-.806 0L12 14.089l-5.175 3.297a.75.75 0 0 1-.806 0L.44 13.833a.75.75 0 0 1 0-1.266l4.575-2.914L.44 6.74a.75.75 0 0 1 0-1.265zm.403 8.616L2.24 13.2l4.182 2.664 4.181-2.664zm6.975 2.664 4.182 2.664L21.76 13.2l-4.181-2.664zm2.776-3.547L12 12.311 7.828 9.653 12 6.995zm1.406-.882 4.181-2.664-4.181-2.664-4.182 2.664zm-6.976-2.664L6.422 3.443 2.24 6.107 6.422 8.77zM5.791 18.544a.75.75 0 0 1 1.035-.23l5.175 3.297 5.175-3.297a.75.75 0 1 1 .806 1.265l-5.578 3.554a.75.75 0 0 1-.806 0L6.02 19.579a.75.75 0 0 1-.23-1.035z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-edit' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M3.964 14.48a1.123 1.123 0 0 0-.302.55l-1.134 5.103a1.123 1.123 0 0 0 1.339 1.34l5.103-1.135c.209-.046.4-.15.55-.302l8.051-8.05-5.557-5.557-8.05 8.05Zm9.465-9.466 5.557 5.557 2.02-2.02a1.684 1.684 0 0 0 0-2.382l-3.175-3.176a1.684 1.684 0 0 0-2.381 0l-2.021 2.021Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-edit-brightness' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M12 18a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-2.69L23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-edit-color' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M17.5 12a1.5 1.5 0 0 1-1.5-1.5A1.5 1.5 0 0 1 17.5 9a1.5 1.5 0 0 1 1.5 1.5 1.5 1.5 0 0 1-1.5 1.5m-3-4A1.5 1.5 0 0 1 13 6.5 1.5 1.5 0 0 1 14.5 5 1.5 1.5 0 0 1 16 6.5 1.5 1.5 0 0 1 14.5 8m-5 0A1.5 1.5 0 0 1 8 6.5 1.5 1.5 0 0 1 9.5 5 1.5 1.5 0 0 1 11 6.5 1.5 1.5 0 0 1 9.5 8m-3 4A1.5 1.5 0 0 1 5 10.5 1.5 1.5 0 0 1 6.5 9 1.5 1.5 0 0 1 8 10.5 1.5 1.5 0 0 1 6.5 12M12 3a9 9 0 0 0-9 9 9 9 0 0 0 9 9 1.5 1.5 0 0 0 1.5-1.5c0-.39-.15-.74-.39-1-.23-.27-.38-.62-.38-1a1.5 1.5 0 0 1 1.5-1.5H16a5 5 0 0 0 5-5c0-4.42-4.03-8-9-8Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-edit-contrast' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M12 20c-2.21 0-4.21-.9-5.66-2.34L17.66 6.34A8.014 8.014 0 0 1 20 12a8 8 0 0 1-8 8M6 8h2V6h1.5v2h2v1.5h-2v2H8v-2H6M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2m0 14h5v-1.5h-5V16Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-edit-crop' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M7 17V1H5v4H1v2h4v10a2 2 0 0 0 2 2h10v4h2v-4h4v-2m-6-2h2V7a2 2 0 0 0-2-2H9v2h8v8Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-edit-draw' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M21.88 2.163a3.739 3.739 0 0 0-5.597.195L7.72 12.525a4.824 4.824 0 0 0-4.208 1.449c-1.067 1.107-1.1 2.465-1.12 3.308l-.005.166c-.028.894-.086 1.463-.582 2.07l-.806.984.88.913c1.054 1.094 2.67 1.587 4.175 1.587 1.527 0 3.223-.506 4.446-1.775 1.147-1.19 1.613-2.82 1.396-4.368l9.797-8.888c1.67-1.515 1.756-4.18.187-5.808zM5.42 15.956a2.184 2.184 0 0 1 3.17 0 2.389 2.389 0 0 1 0 3.29c-.591.612-1.526.954-2.537.954-.523 0-.994-.09-1.384-.233.363-.916.396-1.776.416-2.43.032-1.045.072-1.308.335-1.581z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-edit-file' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M12.11 6a3.716 3.716 0 0 1 7.28 0h2.313a.75.75 0 0 1 0 1.5H19.39a3.716 3.716 0 0 1-7.278 0H2.297a.75.75 0 1 1 0-1.5zm3.64-1.465a2.215 2.215 0 1 0 0 4.43 2.215 2.215 0 0 0 0-4.43zM4.61 16.5a3.716 3.716 0 0 1 7.28 0h9.813a.75.75 0 0 1 0 1.5H11.89a3.716 3.716 0 0 1-7.278 0H2.297a.75.75 0 0 1 0-1.5zm3.64-1.465a2.215 2.215 0 1 0 0 4.43 2.215 2.215 0 0 0 0-4.43z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-edit-flip-h' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M15 21h2v-2h-2m4-10h2V7h-2M3 5v14c0 1.1.9 2 2 2h4v-2H5V5h4V3H5c-1.1 0-2 .9-2 2m16-2v2h2c0-1.1-.9-2-2-2m-8 20h2V1h-2m8 16h2v-2h-2M15 5h2V3h-2m4 10h2v-2h-2m0 10c1.1 0 2-.9 2-2h-2Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-edit-flip-v' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M3 15v2h2v-2m10 4v2h2v-2m2-16H5c-1.1 0-2 .9-2 2v4h2V5h14v4h2V5c0-1.1-.9-2-2-2m2 16h-2v2c1.1 0 2-.9 2-2M1 11v2h22v-2M7 19v2h2v-2m10-4v2h2v-2m-10 4v2h2v-2M3 19c0 1.1.9 2 2 2v-2Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-edit-guides' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='m1.39 18.36 1.77-1.76L4.58 18l1.06-1.05-1.42-1.41 1.42-1.42 2.47 2.48 1.06-1.06-2.47-2.48 1.41-1.41 1.42 1.41L10.59 12l-1.42-1.41 1.42-1.42 2.47 2.48 1.06-1.06-2.47-2.48 1.41-1.41 1.41 1.41 1.07-1.06-1.42-1.41 1.42-1.42L18 6.7l1.07-1.06-2.47-2.48 1.76-1.77 4.25 4.25L5.64 22.61l-4.25-4.25Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-edit-resize' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='m10.59 12 4-4H11V6h7v7h-2V9.41l-4 4V16h8V4H8v8h2.59M22 2v16H12v4H2V12h4V2h16M10 14H4v6h6v-6Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-edit-rotate' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='m16.89 15.5 1.42 1.39c.9-1.16 1.45-2.5 1.62-3.89h-2.02c-.14.87-.48 1.72-1.02 2.5M13 17.9v2.02c1.39-.17 2.74-.71 3.9-1.61l-1.44-1.44c-.75.54-1.59.89-2.46 1.03m6.93-6.9a7.906 7.906 0 0 0-1.62-3.89l-1.42 1.42c.54.75.88 1.6 1.02 2.47m-2.36-5.45L11 1v3.07C7.06 4.56 4 7.92 4 12s3.05 7.44 7 7.93v-2.02c-2.84-.48-5-2.94-5-5.91s2.16-5.43 5-5.91V10l4.55-4.45Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-edit-saturation' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M3 13a9 9 0 0 0 9 9c0-5-4.03-9-9-9m9-7.5A2.5 2.5 0 0 1 14.5 8a2.5 2.5 0 0 1-2.5 2.5A2.5 2.5 0 0 1 9.5 8 2.5 2.5 0 0 1 12 5.5m-6.4 4.75a2.5 2.5 0 0 0 2.5 2.5c.53 0 1.02-.17 1.4-.44v.19A2.5 2.5 0 0 0 12 15a2.5 2.5 0 0 0 2.5-2.5v-.19c.38.27.87.44 1.4.44a2.5 2.5 0 0 0 2.5-2.5c0-1-.59-1.85-1.43-2.25.84-.4 1.43-1.26 1.43-2.25a2.5 2.5 0 0 0-2.5-2.5c-.53 0-1.02.16-1.4.44V3.5A2.5 2.5 0 0 0 12 1a2.5 2.5 0 0 0-2.5 2.5v.19c-.38-.28-.87-.44-1.4-.44a2.5 2.5 0 0 0-2.5 2.5c0 .99.59 1.85 1.43 2.25-.84.4-1.43 1.25-1.43 2.25M12 22a9 9 0 0 0 9-9c-5 0-9 4-9 9Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-edit-text' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='m18.5 4 1.16 4.35-.96.26c-.45-.87-.91-1.74-1.44-2.18C16.73 6 16.11 6 15.5 6H13v10.5c0 .5 0 1 .33 1.25.34.25 1 .25 1.67.25v1H9v-1c.67 0 1.33 0 1.67-.25.33-.25.33-.75.33-1.25V6H8.5c-.61 0-1.23 0-1.76.43-.53.44-.99 1.31-1.44 2.18l-.96-.26L5.5 4h13Z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-enhance' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M19 13h-2m0 0a4 4 0 0 1-4-4m4 4a4 4 0 0 0-4 4m0-8V7m0 2a4 4 0 0 1-4 4m-2 0h2m0 0a4 4 0 0 1 4 4m0 0v2M8 8.5H6.5m0 0a2 2 0 0 1-2-2m2 2a2 2 0 0 0-2 2m0-4V5m0 1.5a2 2 0 0 1-2 2M1 8.5h1.5m0 0a2 2 0 0 1 2 2m0 0V12M12 3h-1m0 0a1 1 0 0 1-1-1m1 1a1 1 0 0 0-1 1m0-2V1m0 1a1 1 0 0 1-1 1M8 3h1m0 0a1 1 0 0 1 1 1m0 0v1'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-error' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M13 13h-2V7h2m0 10h-2v-2h2M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-evernote' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M9.804 2.27v-.048c.055-.263.313-.562.85-.562h.44c.142 0 .325.014.526.033.066.009.124.023.267.06l.13.032h.002c.319.079.515.275.644.482a1.461 1.461 0 0 1 .16.356l.004.012a.75.75 0 0 0 .603.577l1.191.207a1988.512 1988.512 0 0 0 2.332.402c.512.083 1.1.178 1.665.442.64.3 1.19.795 1.376 1.77.548 2.931.657 5.829.621 8a39.233 39.233 0 0 1-.125 2.602 17.518 17.518 0 0 1-.092.849.735.735 0 0 0-.024.112c-.378 2.705-1.269 3.796-2.04 4.27-.746.457-1.53.451-2.217.447h-.192c-.46 0-1.073-.23-1.581-.635-.518-.412-.763-.87-.763-1.217 0-.45.188-.688.355-.786.161-.095.436-.137.796.087a.75.75 0 1 0 .792-1.274c-.766-.476-1.64-.52-2.345-.108-.7.409-1.098 1.188-1.098 2.08 0 .996.634 1.84 1.329 2.392.704.56 1.638.96 2.515.96l.185.002c.667.009 1.874.025 3.007-.67 1.283-.786 2.314-2.358 2.733-5.276a4.213 4.213 0 0 0 .056-.335c.023-.184.051-.445.079-.772.055-.655.111-1.585.13-2.704.037-2.234-.074-5.239-.647-8.301v-.002c-.294-1.544-1.233-2.391-2.215-2.85-.777-.363-1.623-.496-2.129-.576a8.872 8.872 0 0 1-.25-.041l-.006-.001-1.99-.345-.761-.132a2.93 2.93 0 0 0-.182-.338A2.532 2.532 0 0 0 12.379.329l-.091-.023a3.967 3.967 0 0 0-.493-.103L11.769.2a7.846 7.846 0 0 0-.675-.04h-.44c-.733 0-1.368.284-1.795.742L2.416 7.431c-.468.428-.751 1.071-.751 1.81 0 .02 0 .041.003.062l.003.034c.017.21.038.468.096.796.107.715.275 1.47.391 1.994.029.13.055.245.075.342l.002.008c.258 1.141.641 1.94.978 2.466.168.263.323.456.444.589a2.808 2.808 0 0 0 .192.194c1.536 1.562 3.713 2.196 5.731 2.08.13-.005.35-.032.537-.073a2.627 2.627 0 0 0 .652-.24c.425-.26.75-.661.992-1.046.184-.294.342-.61.473-.915a3.8 3.8 0 0 0 .627.493 5.022 5.022 0 0 0 1.97.709l.023.002.018.003.11.016c.088.014.205.035.325.058l.056.014c.088.022.164.04.235.061a1.736 1.736 0 0 1 .145.048l.03.014c.765.34 1.302 1.09 1.302 1.871a.75.75 0 0 0 1.5 0c0-1.456-.964-2.69-2.18-3.235a3.595 3.595 0 0 0-.679-.217l-.063-.015a10.616 10.616 0 0 0-.606-.105l-.02-.003-.03-.003h-.002a3.542 3.542 0 0 1-1.331-.485c-.471-.298-.788-.692-.828-1.234a.75.75 0 0 0-1.48-.106l-.001.003-.004.017a8.23 8.23 0 0 1-.092.352 9.963 9.963 0 0 1-.298.892c-.132.34-.29.68-.47.966-.174.276-.339.454-.478.549a1.178 1.178 0 0 1-.221.072 1.949 1.949 0 0 1-.241.036h-.013l-.032.002c-1.684.1-3.423-.437-4.604-1.65a.746.746 0 0 0-.053-.05L4.84 14.6a1.348 1.348 0 0 1-.07-.073 2.99 2.99 0 0 1-.293-.392c-.242-.379-.558-1.014-.778-1.985a54.1 54.1 0 0 0-.083-.376 27.494 27.494 0 0 1-.367-1.872l-.003-.02a6.791 6.791 0 0 1-.08-.67c.004-.277.086-.475.2-.609l.067-.067a.63.63 0 0 1 .292-.145h.05c.18 0 1.095.055 2.013.115l1.207.08.534.037a.747.747 0 0 0 .052.002c.782 0 1.349-.206 1.759-.585l.005-.005c.553-.52.622-1.225.622-1.76V6.24l-.026-.565A774.97 774.97 0 0 1 9.885 4.4c-.042-.961-.081-1.939-.081-2.13ZM4.995 6.953a251.126 251.126 0 0 1 2.102.137l.508.035c.48-.004.646-.122.715-.185.07-.068.146-.209.147-.649l-.024-.548a791.69 791.69 0 0 1-.095-2.187L4.995 6.953Zm16.122 9.996Zm-5.479-5.323a.75.75 0 0 0 1.014.31 2.04 2.04 0 0 1 .304-.089 1.84 1.84 0 0 1 .544-.039c.215.023.321.06.37.085.033.016.039.026.047.04a.75.75 0 0 0 1.289-.767c-.337-.567-.906-.783-1.552-.85a3.334 3.334 0 0 0-1.002.062c-.27.056-.531.14-.705.234a.75.75 0 0 0-.31 1.014Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-expand' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='m12 8.337-8.47 8.47a.75.75 0 0 1-1.06-1.06l8.605-8.606a1.29 1.29 0 0 1 1.85 0l8.605 8.605a.75.75 0 1 1-1.06 1.06L12 8.338Z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-exposure' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M10 20v-3M2.93 2.929 5.05 5.05M0 10h3m-.07 7.071 2.12-2.121M10 0v3m7.07 14.071-2.12-2.121M20 10h-3m.07-7.071L14.95 5.05M5 10a5 5 0 1 0 10 0 5 5 0 1 0-10 0'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-external-source-placeholder' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M6.341 3.27a10.5 10.5 0 0 1 5.834-1.77.75.75 0 0 0 0-1.5 12 12 0 1 0 12 12 .75.75 0 0 0-1.5 0A10.5 10.5 0 1 1 6.34 3.27Zm14.145 1.48a.75.75 0 1 0-1.06-1.062L9.925 13.19V7.95a.75.75 0 1 0-1.5 0V15c0 .414.336.75.75.75h7.05a.75.75 0 0 0 0-1.5h-5.24l9.501-9.5Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-facebook' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M12 1.5C6.201 1.5 1.5 6.201 1.5 12c0 4.943 3.416 9.089 8.016 10.204v-6.108H7.383a.75.75 0 0 1-.75-.75v-3.281a.75.75 0 0 1 .75-.75h2.133V9.393c0-.958.225-2.511 1.38-3.65 1.194-1.177 3.174-1.718 6.254-1.056a.75.75 0 0 1 .592.733v2.754a.75.75 0 0 1-.75.75c-.692 0-1.203.026-1.584.082-.387.057-.578.137-.675.202-.109.073-.237.205-.237 1.029v1.078h2.39a.75.75 0 0 1 .742.866l-.516 3.281a.75.75 0 0 1-.74.634h-1.876v6.106C19.09 21.082 22.5 16.939 22.5 12c0-5.799-4.701-10.5-10.5-10.5zM0 12C0 5.373 5.373 0 12 0s12 5.373 12 12c0 5.995-4.395 10.961-10.138 11.856a.75.75 0 0 1-.866-.74v-7.77a.75.75 0 0 1 .75-.75h1.984l.28-1.781h-2.264a.75.75 0 0 1-.75-.75v-1.828c0-.829.089-1.729.9-2.274.363-.244.807-.37 1.293-.441a9.623 9.623 0 0 1 1.053-.086V6.04c-2.41-.405-3.645.132-4.293.771-.737.728-.933 1.793-.933 2.582v2.672a.75.75 0 0 1-.75.75H8.133v1.78h2.133a.75.75 0 0 1 .75.75v7.772a.75.75 0 0 1-.865.741C4.4 22.968 0 18 0 12z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-file' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M2.895 1.201c0-.473.383-.857.857-.857h8.4c.227 0 .445.09.606.251l8.4 8.4c.16.16.25.379.25.606v13.2a.857.857 0 0 1-.856.857h-16.8a.857.857 0 0 1-.857-.857zm1.714.857v19.886h15.085V10.458h-7.542a.857.857 0 0 1-.858-.857V2.058zm8.4 1.213 5.473 5.473H13.01z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-filters' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M4.5 6.5a5.5 5.5 0 1 0 11 0 5.5 5.5 0 1 0-11 0m-3.5 6a5.5 5.5 0 1 0 11 0 5.5 5.5 0 1 0-11 0m7 0a5.5 5.5 0 1 0 11 0 5.5 5.5 0 1 0-11 0'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-flickr' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M5.959 7.926c-2.298 0-4.14 1.834-4.14 4.073 0 2.241 1.842 4.075 4.14 4.075 2.302 0 4.145-1.834 4.145-4.075 0-2.238-1.843-4.073-4.145-4.073Zm-5.64 4.073c0-3.086 2.533-5.573 5.64-5.573 3.11 0 5.645 2.486 5.645 5.573 0 3.089-2.535 5.575-5.645 5.575-3.107 0-5.64-2.487-5.64-5.575Zm18.07-4.073c-2.301 0-4.144 1.835-4.144 4.073 0 2.24 1.843 4.075 4.145 4.075 2.299 0 4.141-1.834 4.141-4.075 0-2.239-1.842-4.073-4.141-4.073Zm-5.644 4.073c0-3.087 2.535-5.573 5.645-5.573 3.108 0 5.641 2.487 5.641 5.573 0 3.088-2.533 5.575-5.641 5.575-3.11 0-5.645-2.486-5.645-5.575Z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-flip' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M19.6 5 18 3.5 16.4 5m3.2 10L18 16.5 16.4 15M18 3.523v12.954M3.3 8.5h10.654c.301 0 .415-.395.159-.554L3.459 1.286A.3.3 0 0 0 3 1.542V8.2a.3.3 0 0 0 .3.3zm0 3h10.654c.301 0 .415.395.159.554l-10.654 6.66A.3.3 0 0 1 3 18.458v-6.66a.3.3 0 0 1 .3-.3z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-fullscreen' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M5 5h5v2H7v3H5V5m9 0h5v5h-2V7h-3V5m3 9h2v5h-5v-2h3v-3m-7 3v2H5v-5h2v3h3Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-fullscreen-exit' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M14 14h5v2h-3v3h-2v-5m-9 0h5v5H8v-3H5v-2m3-9h2v5H5V8h3V5m11 3v2h-5V5h2v3h3Z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-gamma' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M17 3C9 6 2.5 11.5 2.5 17.5m0 0h1m-1 0v-1m14 1h1m-3 0h1m-3 0h1m-3 0h1m-3 0h1m-3 0h1m-3 0h1m-3-14v-1m0 3v-1m0 3v-1m0 3v-1m0 3v-1m0 3v-1m0 3v-1'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-gdrive' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M7.736 1.818a.75.75 0 0 1 .647-.37h7.587a.75.75 0 0 1 .655.383l7.233 12.946a.75.75 0 0 1-.003.737l-3.794 6.66a.75.75 0 0 1-.651.378H4.59a.75.75 0 0 1-.651-.378l-3.794-6.66a.75.75 0 0 1 .005-.75zm.64 1.876L1.663 15.148l2.93 5.145 6.655-11.581zm3.736 6.526-2.398 4.173H14.5zm4.116 4.173h5.697L15.53 2.947H9.677zm5.685 1.5H8.852l-2.966 5.16h13.088z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-gphotos' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M12.51 0c-.702 0-1.272.57-1.272 1.273V7.35A6.381 6.381 0 0 0 0 11.489c0 .703.57 1.273 1.273 1.273H7.35A6.381 6.381 0 0 0 11.488 24c.704 0 1.274-.57 1.274-1.273V16.65A6.381 6.381 0 0 0 24 12.51c0-.703-.57-1.273-1.273-1.273H16.65A6.381 6.381 0 0 0 12.511 0Zm.252 11.232V1.53a4.857 4.857 0 0 1 0 9.702Zm-1.53.006H1.53a4.857 4.857 0 0 1 9.702 0Zm1.536 1.524a4.857 4.857 0 0 0 9.702 0h-9.702Zm-6.136 4.857c0-2.598 2.04-4.72 4.606-4.85v9.7a4.857 4.857 0 0 1-4.606-4.85Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-huddle' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M6.204 2.002c-.252.23-.357.486-.357.67V21.07c0 .15.084.505.313.812.208.28.499.477.929.477.519 0 .796-.174.956-.365.178-.212.286-.535.286-.924v-.013l.117-6.58c.004-1.725 1.419-3.883 3.867-3.883 1.33 0 2.332.581 2.987 1.364.637.762.95 1.717.95 2.526v6.47c0 .392.11.751.305.995.175.22.468.41 1.008.41.52 0 .816-.198 1.002-.437.207-.266.31-.633.31-.969V14.04c0-2.81-1.943-5.108-4.136-5.422a5.971 5.971 0 0 0-3.183.41c-.912.393-1.538.96-1.81 1.489a.75.75 0 0 1-1.417-.344v-7.5c0-.587-.47-1.031-1.242-1.031-.315 0-.638.136-.885.36ZM5.194.892A2.844 2.844 0 0 1 7.09.142c1.328 0 2.742.867 2.742 2.53v5.607a6.358 6.358 0 0 1 1.133-.629 7.47 7.47 0 0 1 3.989-.516c3.056.436 5.425 3.482 5.425 6.906v6.914c0 .602-.177 1.313-.627 1.89-.47.605-1.204 1.016-2.186 1.016-.96 0-1.698-.37-2.179-.973-.46-.575-.633-1.294-.633-1.933v-6.469c0-.456-.19-1.071-.602-1.563-.394-.471-.986-.827-1.836-.827-1.447 0-2.367 1.304-2.367 2.39v.014l-.117 6.58c-.001.64-.177 1.333-.637 1.881-.48.57-1.2.9-2.105.9-.995 0-1.7-.5-2.132-1.081-.41-.552-.61-1.217-.61-1.708V2.672c0-.707.366-1.341.847-1.78Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-info' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M11 9h2V7h-2m1 13c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0-18A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2m-1 15h2v-6h-2v6Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-instagram' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M6.225 12a5.775 5.775 0 1 1 11.55 0 5.775 5.775 0 0 1-11.55 0zM12 7.725a4.275 4.275 0 1 0 0 8.55 4.275 4.275 0 0 0 0-8.55zm6.425-.75a1.4 1.4 0 1 0 0-2.8 1.4 1.4 0 0 0 0 2.8zm-6.467-6.8h.084c2.152 0 3.823 0 5.152.132 1.35.134 2.427.41 3.362 1.013a7.15 7.15 0 0 1 2.124 2.124c.604.935.88 2.012 1.013 3.362.132 1.329.132 3 .132 5.152v.084c0 2.152 0 3.823-.132 5.152-.134 1.35-.41 2.427-1.013 3.362a7.15 7.15 0 0 1-2.124 2.124c-.935.604-2.012.88-3.362 1.013-1.329.132-3 .132-5.152.132h-.084c-2.152 0-3.824 0-5.153-.132-1.35-.134-2.427-.409-3.36-1.013a7.15 7.15 0 0 1-2.125-2.124C.716 19.62.44 18.544.307 17.194c-.132-1.329-.132-3-.132-5.152v-.084c0-2.152 0-3.823.132-5.152.133-1.35.409-2.427 1.013-3.362A7.15 7.15 0 0 1 3.444 1.32C4.378.716 5.456.44 6.805.307c1.33-.132 3-.132 5.153-.132zM6.953 1.799c-1.234.123-2.043.36-2.695.78A5.65 5.65 0 0 0 2.58 4.26c-.42.65-.657 1.46-.78 2.695C1.676 8.2 1.675 9.797 1.675 12s0 3.8.124 5.046c.123 1.235.36 2.044.78 2.696a5.649 5.649 0 0 0 1.68 1.678c.65.421 1.46.658 2.694.78 1.247.124 2.844.125 5.047.125s3.8 0 5.046-.124c1.235-.123 2.044-.36 2.695-.78a5.648 5.648 0 0 0 1.68-1.68c.42-.65.657-1.46.78-2.694.123-1.247.124-2.844.124-5.047s-.001-3.8-.125-5.046c-.122-1.235-.359-2.044-.78-2.695a5.65 5.65 0 0 0-1.679-1.68c-.651-.42-1.46-.657-2.695-.78-1.246-.123-2.843-.124-5.046-.124-2.203 0-3.8 0-5.047.124z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-local' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M3 3.75a1.5 1.5 0 0 0-1.5 1.5v13.5a1.5 1.5 0 0 0 1.5 1.5h18a1.5 1.5 0 0 0 1.5-1.5V9A1.5 1.5 0 0 0 21 7.5h-9a.75.75 0 0 1-.643-.364L9.325 3.75zm-3 1.5a3 3 0 0 1 3-3h6.75a.75.75 0 0 1 .643.364L12.425 6H21a3 3 0 0 1 3 3v9.75a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-mirror' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M5 .4 3.5 2 5 3.6M15 .4 16.5 2 15 3.6M3.52 2h12.957M8.5 16.7V6.046c0-.301-.394-.415-.554-.159L1.287 16.541a.3.3 0 0 0 .255.459H8.2a.3.3 0 0 0 .3-.3zm3 0V6.046c0-.301.395-.415.555-.159l6.659 10.654a.3.3 0 0 1-.255.459H11.8a.3.3 0 0 1-.3-.3z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-onedrive' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M13.616 4.147a7.689 7.689 0 0 0-7.642 3.285A6.299 6.299 0 0 0 1.455 17.3c.684.894 2.473 2.658 5.17 2.658h12.141c.95 0 1.882-.256 2.697-.743.815-.486 1.514-1.247 1.964-2.083a5.26 5.26 0 0 0-3.713-7.612 7.69 7.69 0 0 0-6.098-5.373ZM3.34 17.15c.674.63 1.761 1.308 3.284 1.308h12.142a3.76 3.76 0 0 0 2.915-1.383l-7.494-4.489L3.34 17.15Zm10.875-6.25 2.47-1.038a5.239 5.239 0 0 1 1.427-.389 6.19 6.19 0 0 0-10.3-1.952 6.338 6.338 0 0 1 2.118.813l4.285 2.567Zm4.55.033c-.512 0-1.019.104-1.489.307l-.006.003-1.414.594 6.521 3.906a3.76 3.76 0 0 0-3.357-4.8l-.254-.01ZM4.097 9.617A4.799 4.799 0 0 1 6.558 8.9c.9 0 1.84.25 2.587.713l3.4 2.037-10.17 4.28a4.799 4.799 0 0 1 1.721-6.312Z'/></symbol><symbol viewBox='0 0 40 40' id='uc-icon-original' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M0 40 40 0'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-remove' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M6.357 9.714c-.764 0-1.359.661-1.279 1.42l1.015 9.643c.069.655.62 1.152 1.279 1.152h9.256c.658 0 1.21-.497 1.279-1.151l1.015-9.643c.08-.76-.515-1.42-1.279-1.42zm.5-4.5v.322H4.286a1.286 1.286 0 0 0 0 2.571h15.428a1.286 1.286 0 1 0 0-2.571h-2.571v-.322A3.214 3.214 0 0 0 13.929 2H10.07a3.214 3.214 0 0 0-3.214 3.214zm7.072-.643c.355 0 .642.288.642.643v.322H9.43v-.322c0-.355.287-.643.642-.643z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-remove-file' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M11.955 3.3A2.969 2.969 0 0 0 8.998 6h5.914a2.97 2.97 0 0 0-2.957-2.7zM16.416 6a4.47 4.47 0 0 0-8.922 0h-2.32a.755.755 0 0 0-.111.008H3.075a.75.75 0 1 0 0 1.5h1.35V19.35a2.85 2.85 0 0 0 2.85 2.85h9.45a2.85 2.85 0 0 0 2.85-2.85V7.508h1.35a.75.75 0 0 0 0-1.5h-1.989A.754.754 0 0 0 18.825 6zM5.925 7.508V19.35a1.35 1.35 0 0 0 1.35 1.35h9.45a1.35 1.35 0 0 0 1.35-1.35V7.508z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-rotate' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M13.5.4 12 2l1.5 1.6M12.023 2H14.4A3.6 3.6 0 0 1 18 5.6V8M4 17h9a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-sad' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M2 17c4.418-4 11.582-4 16 0M16.5 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-11 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-saturation' xmlns='http://www.w3.org/2000/svg'><defs><linearGradient id='aouc-icon-id__a' x1='10.001' y1='1' x2='10.001' y2='19' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient></defs><circle cx='10.001' cy='10' r='9' transform='rotate(90 10 10)' fill='url(#aouc-icon-id__a)'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-select' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='m7 10 5 5 5-5H7Z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-slider' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M0 10h11m0 0a2 2 0 1 0 4 0m-4 0a2 2 0 1 1 4 0m0 0h5'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-trash-file' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M6.357 9.714c-.764 0-1.359.661-1.279 1.42l1.015 9.643c.069.655.62 1.152 1.279 1.152h9.256c.658 0 1.21-.497 1.279-1.151l1.015-9.643c.08-.76-.515-1.42-1.279-1.42zm.5-4.5v.322H4.286a1.286 1.286 0 0 0 0 2.571h15.428a1.286 1.286 0 1 0 0-2.571h-2.571v-.322A3.214 3.214 0 0 0 13.929 2H10.07a3.214 3.214 0 0 0-3.214 3.214zm7.072-.643c.355 0 .642.288.642.643v.322H9.43v-.322c0-.355.287-.643.642-.643z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-tuning' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M8 10h11M1 10h4M1 4.5h11m3 0h4m-18 11h11m3 0h4m-7-11a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0M5 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0m7 5.5a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-upload' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M11.501.392a.75.75 0 0 1 .998 0l6.704 5.972a.75.75 0 0 1-.998 1.12l-5.455-4.86v13.439a.75.75 0 0 1-1.5 0V2.625l-5.454 4.86a.75.75 0 1 1-.998-1.12zM.857 16.73a.75.75 0 0 1 .75.75v4.914h20.786v-4.914a.75.75 0 0 1 1.5 0v5.664a.75.75 0 0 1-.75.75H.857a.75.75 0 0 1-.75-.75v-5.664a.75.75 0 0 1 .75-.75z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-upload-error' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M13 13h-2V7h2m0 10h-2v-2h2M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-url' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M19.11 3.67c-1.71-1.709-4.578-1.682-6.408.148l-2.22 2.22a.75.75 0 0 1-1.062-1.06l2.222-2.221C14.018.381 17.836.276 20.17 2.61l1.22 1.22c2.335 2.334 2.23 6.153-.147 8.529l-2.22 2.22a.75.75 0 0 1-1.062-1.06l2.222-2.221c1.83-1.83 1.856-4.698.147-6.408zm-3.36 4.58a.75.75 0 0 1 0 1.06l-6.439 6.44a.75.75 0 0 1-1.06-1.06l6.439-6.44a.75.75 0 0 1 1.06 0zM6.04 9.42a.75.75 0 0 1 0 1.061l-2.222 2.222c-1.83 1.83-1.856 4.698-.147 6.407l1.22 1.22c1.71 1.71 4.578 1.683 6.408-.147l2.221-2.221a.75.75 0 1 1 1.06 1.06l-2.22 2.222c-2.377 2.376-6.195 2.481-8.53.147l-1.22-1.22c-2.334-2.334-2.228-6.153.148-8.53l2.221-2.22a.75.75 0 0 1 1.06 0z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-vibrance' xmlns='http://www.w3.org/2000/svg'><path d='M2.125 5.64A8.96 8.96 0 0 0 1.001 10a8.96 8.96 0 0 0 1.124 4.36V5.64z' fill='url(#aruc-icon-id__a)'/><path d='M2.875 15.499V4.502a9.053 9.053 0 0 1 1.75-1.72v14.437a9.05 9.05 0 0 1-1.75-1.72z' fill='url(#aruc-icon-id__b)'/><path d='M5.375 17.722c.548.33 1.134.601 1.75.809V1.469a8.956 8.956 0 0 0-1.75.81v15.443z' fill='url(#aruc-icon-id__c)'/><path d='M7.875 1.253v17.495c.564.136 1.15.22 1.75.244V1.008a9 9 0 0 0-1.75.245z' fill='url(#aruc-icon-id__d)'/><path d='M10.375 1.008v17.984a9 9 0 0 0 1.75-.244V1.252a9 9 0 0 0-1.75-.244z' fill='url(#aruc-icon-id__e)'/><path d='M12.875 1.469V18.53a8.957 8.957 0 0 0 1.75-.808V2.277a8.957 8.957 0 0 0-1.75-.808z' fill='url(#aruc-icon-id__f)'/><path d='M15.375 2.78v14.44a9.053 9.053 0 0 0 1.75-1.72v-11a9.054 9.054 0 0 0-1.75-1.72z' fill='url(#aruc-icon-id__g)'/><path d='M17.875 5.638v8.724A8.959 8.959 0 0 0 19.001 10a8.96 8.96 0 0 0-1.126-4.362z' fill='url(#aruc-icon-id__h)'/><defs><linearGradient id='aruc-icon-id__a' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='aruc-icon-id__b' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='aruc-icon-id__c' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='aruc-icon-id__d' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='aruc-icon-id__e' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='aruc-icon-id__f' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='aruc-icon-id__g' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='aruc-icon-id__h' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient></defs></symbol><symbol viewBox='0 0 24 24' id='uc-icon-vk' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M6.341 3.27a10.5 10.5 0 0 1 5.834-1.77.75.75 0 0 0 0-1.5 12 12 0 1 0 12 12 .75.75 0 0 0-1.5 0A10.5 10.5 0 1 1 6.34 3.27Zm14.145 1.48a.75.75 0 1 0-1.06-1.062L9.925 13.19V7.95a.75.75 0 1 0-1.5 0V15c0 .414.336.75.75.75h7.05a.75.75 0 0 0 0-1.5h-5.24l9.501-9.5Z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-warmth' xmlns='http://www.w3.org/2000/svg'><path d='m7.5 13.05.429.42.171-.175v-.244h-.6zm5 0h-.6v.245l.172.175.428-.42zM8.1 3.5c0-1.05.85-1.9 1.9-1.9V.4a3.1 3.1 0 0 0-3.1 3.1h1.2zm0 9.55V3.5H6.9v9.55h1.2zm-1 2.45c0-.79.315-1.506.829-2.03l-.858-.84A4.088 4.088 0 0 0 5.9 15.5h1.2zm2.9 2.9a2.9 2.9 0 0 1-2.9-2.9H5.9a4.1 4.1 0 0 0 4.1 4.1v-1.2zm2.9-2.9a2.9 2.9 0 0 1-2.9 2.9v1.2a4.1 4.1 0 0 0 4.1-4.1h-1.2zm-.829-2.03c.514.524.829 1.24.829 2.03h1.2c0-1.117-.447-2.13-1.171-2.87l-.858.84zM11.9 3.5v9.55h1.2V3.5h-1.2zM10 1.6c1.05 0 1.9.85 1.9 1.9h1.2A3.1 3.1 0 0 0 10 .4v1.2z' fill='currentColor'/><path d='M10 14V8' stroke='currentColor' stroke-width='1.2' stroke-linecap='round'/><path d='M14 3h3m-3 3h3m-3 3h3m-8 6.5a1 1 0 1 0 2 0 1 1 0 1 0-2 0' stroke='currentColor' stroke-width='1.2'/></symbol></svg>"+e+"<slot></slot>"}}]),n}(un),jo=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,u.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"initCallback",value:function(){var e=this;H((0,z.Z)(n.prototype),"initCallback",this).call(this),this.sub("*modalActive",(function(t){e._lastModalActive!==t&&e.emit(t?K.MODAL_OPEN:K.MODAL_CLOSE,void 0,{debounce:!0}),e._lastModalActive=t}),!1)}}]),n}(zo);jo.template='\n  <lr-simple-btn></lr-simple-btn>\n\n  <lr-modal strokes block-body-scrolling>\n    <lr-start-from>\n      <lr-drop-area with-icon clickable></lr-drop-area>\n      <lr-source-list wrap></lr-source-list>\n      <button type="button" l10n="start-from-cancel" class="secondary-btn" set="onclick: *historyBack"></button>\n      <lr-copyright></lr-copyright>\n    </lr-start-from>\n    <lr-upload-list></lr-upload-list>\n    <lr-camera-source></lr-camera-source>\n    <lr-url-source></lr-url-source>\n    <lr-external-source></lr-external-source>\n    <lr-cloud-image-editor-activity></lr-cloud-image-editor-activity>\n  </lr-modal>\n\n  <lr-progress-bar-common></lr-progress-bar-common>\n';var Ho=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,u.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"initCallback",value:function(){var e=this;H((0,z.Z)(n.prototype),"initCallback",this).call(this);var t=this.ref.uBlock;this.sub("*currentActivity",(function(n){n||(e.$["*currentActivity"]=t.initActivity||fn.activities.START_FROM)})),this.sub("*uploadList",(function(n){(null===n||void 0===n?void 0:n.length)>0?e.$["*currentActivity"]=fn.activities.UPLOAD_LIST:e.$["*currentActivity"]=t.initActivity||fn.activities.START_FROM})),this.subConfigValue("sourceList",(function(t){"local"!==t&&(e.cfg.sourceList="local")})),this.subConfigValue("confirmUpload",(function(t){!1!==t&&(e.cfg.confirmUpload=!1)}))}}]),n}(zo);Ho.template='\n  <lr-start-from>\n    <lr-drop-area clickable l10n="choose-file"></lr-drop-area>\n    <lr-copyright></lr-copyright>\n  </lr-start-from>\n  <lr-upload-list ref="uBlock"></lr-upload-list>\n';var qo=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.call(this)).init$=(0,h.Z)((0,h.Z)({},e.init$),{},{couldCancel:!1,cancel:function(){e.couldHistoryBack?e.$["*historyBack"]():e.couldShowList&&(e.$["*currentActivity"]=fn.activities.UPLOAD_LIST)}}),e}return(0,d.Z)(n,[{key:"couldHistoryBack",get:function(){var e=this.$["*history"];return e.length>1&&e[e.length-1]!==fn.activities.START_FROM}},{key:"couldShowList",get:function(){return this.cfg.showEmptyList||this.$["*uploadList"].length>0}},{key:"initCallback",value:function(){var e=this;H((0,z.Z)(n.prototype),"initCallback",this).call(this);var t=this.ref.uBlock;this.sub("*currentActivity",(function(n){n||(e.$["*currentActivity"]=t.initActivity||fn.activities.START_FROM)})),this.sub("*uploadList",(function(n){(null===n||void 0===n?void 0:n.length)>0&&e.$["*currentActivity"]===(t.initActivity||fn.activities.START_FROM)&&(e.$["*currentActivity"]=fn.activities.UPLOAD_LIST)})),this.sub("*history",(function(){e.$.couldCancel=e.couldHistoryBack||e.couldShowList}))}}]),n}(zo);qo.template=' <lr-start-from>\n    <lr-drop-area with-icon clickable></lr-drop-area>\n    <lr-source-list wrap></lr-source-list>\n    <button\n      type="button"\n      l10n="start-from-cancel"\n      class="cancel-btn secondary-btn"\n      set="onclick: cancel; @hidden: !couldCancel"\n    ></button>\n    <lr-copyright></lr-copyright>\n  </lr-start-from>\n  <lr-upload-list ref="uBlock"></lr-upload-list>\n  <lr-camera-source></lr-camera-source>\n  <lr-url-source></lr-url-source>\n  <lr-external-source></lr-external-source>\n  <lr-progress-bar></lr-progress-bar>\n  <lr-cloud-image-editor-activity></lr-cloud-image-editor-activity>';var Ko=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,u.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"initCallback",value:function(){H((0,z.Z)(n.prototype),"initCallback",this).call(this),this.__shadowReady=!0,this.$["*faderEl"]=this.ref["fader-el"],this.$["*cropperEl"]=this.ref["cropper-el"],this.$["*imgContainerEl"]=this.ref["img-container-el"],this.initEditor()}},{key:"initEditor",value:function(){var e=(0,r.Z)(f.mark((function e(){return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.__shadowReady){e.next=3;break}return e.next=3,H((0,z.Z)(n.prototype),"initEditor",this).call(this);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Ki),Go=n(9509);function Wo(e){return Xo.apply(this,arguments)}function Xo(){return Xo=(0,r.Z)(f.mark((function e(t){var n,r=arguments;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]&&r[1],e.abrupt("return",new Promise((function(e,r){if("object"===typeof document)if("object"===typeof window&&window.LR)e(window.LR);else{var i=document.createElement("script");i.async=!0,i.src=t,i.onerror=function(){r()},i.onload=function(){var t=window.LR;n&&(0,Go.n)(t),e(t)},document.head.appendChild(i)}else e(null)})));case 2:case"end":return e.stop()}}),e)}))),Xo.apply(this,arguments)}},8826:function(e,t,n){n.d(t,{l7:function(){return X},_I:function(){return Y}});var r=n(9439),i=n(5861),o=n(1413),a=n(7326),s=n(4942),l=n(3144),c=n(5671),u=n(136),d=n(9388),h=n(8737);function f(e,t){this.v=e,this.k=t}function v(e){var t,n;function r(t,n){try{var o=e[t](n),a=o.value,s=a instanceof f;Promise.resolve(s?a.v:a).then((function(n){if(s){var l="return"===t?"return":"next";if(!a.k||n.done)return r(l,n);n=e[l](n).value}i(o.done?"return":"normal",n)}),(function(e){r("throw",e)}))}catch(e){i("throw",e)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,i){return new Promise((function(o,a){var s={key:e,arg:i,resolve:o,reject:a,next:null};n?n=n.next=s:(t=n=s,r(e,i))}))},"function"!=typeof e.return&&(this.return=void 0)}v.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},v.prototype.next=function(e){return this._invoke("next",e)},v.prototype.throw=function(e){return this._invoke("throw",e)},v.prototype.return=function(e){return this._invoke("return",e)};var p,m,g,y,b,_=n(4687);function w(e){return"[object Object]"===Object.prototype.toString.call(e)}!function(e){e.IN_PROGRESS="in_progress",e.ERROR="error",e.DONE="done",e.UNKNOWN="unknown"}(p||(p={})),function(e){e.UC_CLAMAV_VIRUS_SCAN="uc_clamav_virus_scan",e.AWS_REKOGNITION_DETECT_LABELS="aws_rekognition_detect_labels",e.AWS_REKOGNITION_DETECT_MODERATION_LABELS="aws_rekognition_detect_moderation_labels",e.REMOVE_BG="remove_bg"}(m||(m={})),function(e){e.OK="ok"}(g||(g={})),function(e){e.PENDING="pending",e.PROCESSING="processing",e.FINISHED="finished",e.FAILED="failed",e.CANCELLED="cancelled"}(y||(y={})),function(e){e.FILE_UPLOADED="file.uploaded"}(b||(b={}));var k=/\W|_/g;function x(e){return e.split(k).map((function(e,t){return e.charAt(0)[t>0?"toUpperCase":"toLowerCase"]()+e.slice(1)})).join("")}function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ignoreKeys:[]},n=t.ignoreKeys;return Array.isArray(e)?e.map((function(e){return A(e,{ignoreKeys:n})})):e}function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ignoreKeys:[]},n=t.ignoreKeys;if(Array.isArray(e))return C(e,{ignoreKeys:n});if(!w(e))return e;for(var r={},i=0,o=Object.keys(e);i<o.length;i++){var a=o[i],s=e[a];n.includes(a)?r[a]=s:(w(s)?s=A(s,{ignoreKeys:n}):Array.isArray(s)&&(s=C(s,{ignoreKeys:n})),r[x(a)]=s)}return r}var Z=function(e){return new Promise((function(t){return setTimeout(t,e)}))};var E=function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}},T={factor:2,time:100};var S,M=function(e){(0,u.Z)(n,e);var t=(0,d.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,l.Z)(n)}((0,h.Z)(Error));!function(e){e.VIDEO="video",e.DOCUMENT="document"}(S||(S={}));var I="Unknown error",L=function(e){(0,u.Z)(n,e);var t=(0,d.Z)(n);function n(e){var r,i,o,l,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,c.Z)(this,n),l=t.call(this),(0,s.Z)((0,a.Z)(l),"status",void 0),(0,s.Z)((0,a.Z)(l),"statusText",void 0),(0,s.Z)((0,a.Z)(l),"request",void 0),(0,s.Z)((0,a.Z)(l),"response",void 0),l.name="RestClientError",l.request=u.request,l.response=u.response,l.status=null===(r=u.response)||void 0===r?void 0:r.status,l.statusText=null===(i=u.response)||void 0===i?void 0:i.statusText;var d=null!==(o=null!==e&&void 0!==e?e:l.statusText)&&void 0!==o?o:I,h=l.status||l.statusText?"[".concat([l.status,d===l.statusText?"":l.statusText].filter(Boolean).join(" "),"] "):"";return l.message=h+d,Object.setPrototypeOf((0,a.Z)(l),n.prototype),l}return(0,l.Z)(n)}(M);var $=window.fetch,O=window.Headers,U=window.Request,R={apiBaseURL:"https://api.uploadcare.com/",retryThrottledRequestMaxTimes:5,retryNetworkErrorMaxTimes:3},P=function(e){return(0,o.Z)((0,o.Z)({},R),e)};function N(e){return function(e){var t=e.libraryName,n=e.libraryVersion,r=e.userAgent,i=e.publicKey,o=void 0===i?"":i,a=e.integration,s=void 0===a?"":a,l="JavaScript";if("string"===typeof r)return r;if("function"===typeof r)return r({publicKey:o,libraryName:t,libraryVersion:n,languageName:l,integration:s});var c=[t,n,o].filter(Boolean).join("/"),u=[l,s].filter(Boolean).join("; ");return"".concat(c," (").concat(u,")")}((0,o.Z)({libraryName:"UploadcareRestClient",libraryVersion:"6.14.1"},e))}function F(e){var t=e.headers;if(!t||!t.get("retry-after"))return 15e3;var n=parseInt(t.get("retry-after"),10);return Number.isFinite(n)?1e3*n:15e3}function B(e,t){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T,n=0;function r(e){var i=Math.round(t.time*Math.pow(t.factor,n));return e({attempt:n,retry:function(t){return Z(null!==t&&void 0!==t?t:i).then((function(){return n+=1,r(e)}))}})}return r(e)}((function(n){var r=n.attempt,o=n.retry;return e().then(function(){var e=(0,i.Z)(_.mark((function e(n){var i,a;return _.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(429===n.status){e.next=2;break}return e.abrupt("return",n);case 2:if(!(r<t.retryThrottledRequestMaxTimes)){e.next=4;break}return e.abrupt("return",o(F(n)));case 4:return e.next=6,n.json();case 6:throw i=e.sent,a=i.detail,new L(a,{response:n});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){if(r<t.retryNetworkErrorMaxTimes)return o(1e3*(r+1));throw e}))}))}function D(e,t,n){var i=new URL(n),o=new URLSearchParams(t&&function(e){for(var t={},n=0,i=Object.entries(e);n<i.length;n++){var o=(0,r.Z)(i[n],2),a=o[0],s=o[1];void 0!==s&&null!==s&&(s instanceof Date?t[a]=s.toISOString():t[a]=s.toString())}return t}(t));return i.pathname=e,i.search=o.toString(),i.toString()}function V(e,t){return z.apply(this,arguments)}function z(){return(z=(0,i.Z)(_.mark((function e(t,n){var r,i,o,a,s,l,c,u,d,h,f;return _.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.method,i=t.path,o=t.query,a=t.body,(s=P(n)).authSchema){e.next=4;break}throw new L("authSchema is required");case 4:return l=D(i,o,s.apiBaseURL),c=a&&JSON.stringify(a),u=new U(l,{method:r,body:c,headers:new O({"Content-Type":"application/json","User-Agent":N({publicKey:s.authSchema.publicKey,integration:s.integration,userAgent:s.userAgent})})}),e.next=9,s.authSchema.getHeaders(u);case 9:return d=e.sent,h=new U(l,{method:r,body:c,headers:d}),e.next=13,B((function(){return $(h)}),{retryThrottledRequestMaxTimes:s.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:s.retryNetworkErrorMaxTimes});case 13:return f=e.sent,e.abrupt("return",{request:h,response:f});case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j,H=function(){return"application/vnd.uploadcare-v".concat("0.7","+json")},q=["metadata","problems","appdata"],K=function(e){return e&&["application/json",H()].includes(e)};function G(e){return W.apply(this,arguments)}function W(){return(W=(0,i.Z)(_.mark((function e(t){var n,r,i,o,a,s,l;return _.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.apiRequest,r=t.okCodes,i=t.camelize,o=void 0===i||i,a=n.request,204!==(s=n.response).status){e.next=4;break}return e.abrupt("return",void 0);case 4:if(K(s.headers.get("content-type"))){e.next=6;break}throw new L(void 0,{response:s,request:a});case 6:return e.next=8,s.json();case 8:if(l=e.sent,r.includes(s.status)){e.next=11;break}throw new L(l.detail,{response:s,request:a});case 11:if(o){e.next=13;break}return e.abrupt("return",l);case 13:return e.abrupt("return",A(l,{ignoreKeys:q}));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){e[e.FINISHED=0]="FINISHED",e[e.FAILED=1]="FAILED"}(j||(j={}));var X=function(){function e(t){var n=t.publicKey,r=t.secretKey;(0,c.Z)(this,e),(0,s.Z)(this,"_publicKey",void 0),(0,s.Z)(this,"_secretKey",void 0),this._publicKey=n,this._secretKey=r,r&&!E()&&console.warn("Seems that you're using the secret key on the client-side. We're hope you know that you're doing.")}return(0,l.Z)(e,[{key:"publicKey",get:function(){return this._publicKey}},{key:"getHeaders",value:function(){var e=(0,i.Z)(_.mark((function e(t){return _.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new O((0,o.Z)((0,o.Z)({},Object.fromEntries(t.headers.entries())),{},{Accept:H(),Authorization:"Uploadcare.Simple ".concat(this._publicKey,":").concat(this._secretKey)})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Y(e,t){return J.apply(this,arguments)}function J(){return(J=(0,i.Z)(_.mark((function e(t,n){var r;return _.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V({method:"DELETE",path:"/files/".concat(t.uuid,"/storage/")},n);case 2:return r=e.sent,e.abrupt("return",G({apiRequest:r,okCodes:[200]}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}}]);
//# sourceMappingURL=166.de1ba6c5.chunk.js.map